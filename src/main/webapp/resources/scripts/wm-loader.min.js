!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/compiler"),require("rxjs"),require("@angular/core"),require("@angular/common/http")):"function"==typeof define&&define.amd?define(["exports","@angular/compiler","rxjs","@angular/core","@angular/common/http"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.core={}),e.ng.compiler,e.rxjs,e.ng.core,e.ng.common.http)}(this,(function(e,t,i,n,a){"use strict";function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var o,r,l,c,d=s(n),p=s(a);e.FormWidgetType=void 0,(o=e.FormWidgetType||(e.FormWidgetType={})).AUTOCOMPLETE="autocomplete",o.CHECKBOX="checkbox",o.CHECKBOXSET="checkboxset",o.CHIPS="chips",o.COLORPICKER="colorpicker",o.CURRENCY="currency",o.DATE="date",o.DATETIME="datetime",o.NUMBER="number",o.PASSWORD="password",o.RADIOSET="radioset",o.RATING="rating",o.RICHTEXT="richtext",o.SELECT="select",o.TOGGLE="toggle",o.SLIDER="slider",o.SWITCH="switch",o.TEXT="text",o.TEXTAREA="textarea",o.TIME="time",o.TIMESTAMP="timestamp",o.TYPEAHEAD="typeahead",o.UPLOAD="upload",e.DataType=void 0,(r=e.DataType||(e.DataType={})).INTEGER="integer",r.BIG_INTEGER="big_integer",r.SHORT="short",r.FLOAT="float",r.BIG_DECIMAL="big_decimal",r.DOUBLE="double",r.LONG="long",r.BYTE="byte",r.STRING="string",r.CHARACTER="character",r.TEXT="text",r.DATE="date",r.TIME="time",r.TIMESTAMP="timestamp",r.DATETIME="datetime",r.LOCALDATETIME="localdatetime",r.BOOLEAN="boolean",r.LIST="list",r.CLOB="clob",r.BLOB="blob",e.MatchMode=void 0,(l=e.MatchMode||(e.MatchMode={})).BETWEEN="between",l.GREATER="greaterthanequal",l.LESSER="lessthanequal",l.NULL="null",l.EMPTY="empty",l.NULLOREMPTY="nullorempty",l.EQUALS="exact",e.DEFAULT_FORMATS=void 0,(c=e.DEFAULT_FORMATS||(e.DEFAULT_FORMATS={})).DATE="yyyy-MM-dd",c.TIME="HH:mm:ss",c.TIMESTAMP="timestamp",c.DATETIME="yyyy-MM-ddTHH:mm:ss",c.LOCALDATETIME="yyyy-MM-ddTHH:mm:ss",c.DATETIME_ORACLE="yyyy-MM-dd HH:mm:ss",c.DATE_TIME="yyyy-MM-dd HH:mm:ss";const u=(e,i,n)=>{n=n.replace("bind:","");const a=e.attrs.find((e=>"datasetboundexpr"===e.name));"dataset"!==i.name||a||e.attrs.push(new t.Attribute("datasetboundexpr",n,i.sourceSpan,i.keySpan,i.valueSpan,void 0,void 0))},h=function(e){let t=e.match(/(custom(\s*:))/g);return t&&t.length},m=(e,t,i,n="",a="item")=>{const s=t.replace(/([^a-zA-Z0-9.])/g,"\\$1"),o=new RegExp("("+s+")(\\[0\\])?(.data\\[\\$i\\])?(.content\\[\\$i\\])?(\\[\\$i\\])?","g");let r,l,c,d;const p={"wm-list":["itemclass","disableitem","dataset"]};i&&(r=new RegExp(`(Widgets.${i}.currentItem)\\b`,"g"),l=new RegExp(`(Widgets.${i}.currentItemWidgets)\\b`,"g"),c=new RegExp("(Widgets.(.*).(formWidgets|filterWidgets))\\b","g")),d=_.isArray(e)?e:p[e.name]?[e]:e.children||[],d.forEach((e=>{if(e.name){const s=e.name,d=new RegExp("bind:\\s*\\(*"+t+"\\)*\\.length\\)*");e.attrs.forEach((i=>{let m=i.value&&i.value.trim();_.startsWith(m,"bind:")&&((!p[s]||p[s]&&p[s].indexOf(i.name)>-1)&&_.includes(m,t)&&m!=="bind:"+t&&!d.test(m)&&(m=m.replace("bind:",""),u(e,i,m),m=m.replace(o,a),m="bind:"+m,h(m)&&r&&(m+=":"+r.exec(r.source)[0])),r&&r.test(m)&&((m.includes(".formWidgets")||m.includes(".filterWidgets"))&&(m=m.replace(c,"Widgets")),u(e,i,m),m=m.replace(r,a)),l&&l.test(m)&&(m=m.replace(l,`${n}currentItemWidgets`)),i.value=m)})),m(e.children,t,i,n,a)}}))},g=new Map([["display-name","caption"],["display-name.bind","caption.bind"],["title","hint"],["title.bind","hint.bind"],["show","show"],["show.bind","show.bind"],["disabled","disabled"],["disabled.bind","disabled.bind"],["hyperlink","hyperlink"],["hyperlink.bind","hyperlink.bind"],["target","target"],["conditionalclass.bind","conditionalclass.bind"],["conditionalstyle.bind","conditionalstyle.bind"]]),f=window.requestAnimationFrame,v=[],b=e=>{v.length||f((()=>{v.forEach((e=>e())),v.length=0})),v.push(e)},y=(e,t,i)=>{const n=t=>e.classList.remove(t);(t=t||"").split(" ").forEach((e=>{e.length&&(i?n(e):b((()=>n(e))))}))},w=(e,t,i)=>{const n=t=>e.classList.add(t);(t=t||"").split(" ").forEach((e=>{e.length&&(i?n(e):b((()=>n(e))))}))},P=(e,t,i,n)=>{const a=()=>e.style[t]=i;n?a():b(a)},C=(e,t,i,n)=>{const a=()=>e instanceof Element&&e.setAttribute(t,i);n?a():b(a)},A={};function I(){return window._WM_APP_PROPERTIES?window._WM_APP_PROPERTIES:A}class E{constructor(e){this.generator=function*(e){let t=1;for(;;)yield`${e}${t++}`}(e)}nextUid(){return this.generator.next().value}}const O=e=>void 0!==e,x=(e,t)=>void 0===e?t:e,R=(e,t)=>void 0===e?t:void 0===t?e:e+t,D=(e,t)=>x(e,0)-x(t,0),S=()=>{},T=new Map,M=new Map,N=new Map,k=(e,t)=>"object"!=typeof e&&"object"!=typeof t&&(e!=e&&t!=t||e===t),L=(e,t,i,...n)=>{let a,s=t.get(i);if(s){if(!((e,t)=>{const i=t.length;let n=i>10;switch(i){case 10:if(n=!k(e[9],t[9]),n)break;case 9:if(n=!k(e[8],t[8]),n)break;case 8:if(n=!k(e[7],t[7]),n)break;case 7:if(n=!k(e[6],t[6]),n)break;case 6:if(n=!k(e[5],t[5]),n)break;case 5:if(n=!k(e[4],t[4]),n)break;case 4:if(n=!k(e[3],t[3]),n)break;case 3:if(n=!k(e[2],t[2]),n)break;case 2:if(n=!k(e[1],t[1]),n)break;case 1:if(n=!k(e[0],t[0]),n)break}return n})(s.args,n))return s.result}return a=e.transform(...n),s={args:n,result:a},t.set(i,s),a},F=/[^ a-zA-Z0-9]/g,B=e=>"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4);class j{constructor(e,t,i){this.ast=e,this.declarations=[],this.stmts=[],this.pipes=[],this.vIdx=0,this.exprType=t,this.pipeNameVsIsPureMap=i}createVar(){const e="v"+this.vIdx++;return this.declarations.push(e),e}processImplicitReceiver(){return"ctx"}processLiteralPrimitive(){const e=this.cAst;return"string"==typeof e.value?`"${e.value.replace(/"/g,'"').replace(F,B)}"`:e.value}processLiteralArray(){const e=this.cAst,t=this.cStmts,i=this.createVar(),n=[];for(const i of e.expressions)n.push(this.build(i,t));return t.push(`${i}=[${n.join(",")}]`),i}processLiteralMap(){const e=this.cAst,t=this.cStmts,i=this.createVar(),n=[];for(const i of e.values)n.push(this.build(i,t));return t.push(`${i}={${e.keys.map(((e,t)=>`'${e.key}':${n[t]}`))}}`),i}processPropertyRead(){const e=this.cAst,t=this.cStmts,i=this.build(e.receiver,t),n=this.createVar();return t.push(`${n}=${i}&&${i}.${e.name}`),n}processKeyedRead(){const e=this.cAst,t=this.cStmts,i=this.build(e.key,t),n=this.build(e.receiver,t),a=this.createVar();return t.push(`${a}=${n}&&${n}[${i}]`),a}processPrefixNot(){const e=this.cAst,t=this.cStmts,i=this.build(e.expression,t);return t.push(`${i}=!${i}`),i}handleBinaryPlus_Minus(){const e=this.cAst,t=this.cStmts,i=this.build(e.left,t),n=this.build(e.right,t),a=this.createVar(),s="+"===e.operation?"_plus":"_minus";return t.push(`${a}=${s}(${i},${n})`),a}handleBinaryAND_OR(){const e=this.cAst,t=this.cStmts,i=[],n=[],a=[],s=this.build(e.left,n),o=this.build(e.right,a),r=this.createVar();return"&&"===e.operation?i.push(n.join(";"),`;${r}=false`,`;if(${s}){`,a.join(";"),`;${r}=${o};`,"}"):i.push(n.join(";"),`;${r}=${s}`,`;if(!${s}){`,a.join(";"),`;${r}=${o};`,"}"),t.push(i.join("")),r}handleBinaryDefault(){const e=this.cAst,t=this.cStmts,i=this.build(e.left,t),n=this.build(e.right,t),a=this.createVar();return t.push(`${a}=${i}${e.operation}${n}`),a}processBinary(){const e=this.cAst.operation;return"+"===e||"-"===e?this.handleBinaryPlus_Minus():"&&"===e||"||"===e?this.handleBinaryAND_OR():this.handleBinaryDefault()}processUnary(){const e=this.cAst,t=this.cStmts,i=this.build(e.expr,t),n=this.createVar();return t.push(`${n}=${e.operator}${i}`),n}processConditional(){const e=this.cAst,t=this.cStmts,i=this.build(e.condition,t),n=this.createVar(),a=[],s=[],o=[],r=this.build(e.trueExp,s),l=this.build(e.falseExp,o);return a.push(`if(${i}){`,s.join(";"),`;${n}=${r};`,"}else{",o.join(";"),`;${n}=${l};`,"}"),t.push(a.join(" ")),n}processMethodCall(){const e=this.cAst,i=this.cStmts,n=[];for(const t of e.args)n.push(this.build(t,i));const a=this.build(e.receiver,i),s=this.createVar(),o=e.receiver instanceof t.ImplicitReceiver||e.receiver instanceof t.PropertyRead&&e.receiver?.receiver instanceof t.ImplicitReceiver,r=i[i.length-1].split("&&")[0].split("=")[1];return i.push(`${s}= ${a}&&${a}${o?".bind(_ctx)":`.bind(${r})`}(${n.join(",")})`),s}processChain(){return this.cAst.expressions.map((e=>this.build(e))).join(";")}processPropertyWrite(){const e=this.cAst,i=this.cStmts;let n,a;e.receiver instanceof t.ImplicitReceiver?a=`_ctx.${e.name}`:(n=this.build(e.receiver,i),a=`${n}${n.length?".":""}${e.name}`);const s=this.build(e.value,i);i.push(`${a}=${s}`)}processPipe(){const e=this.cAst,t=this.cStmts,i=this.createVar(),n=[],a=[],s=[],o=this.build(e.exp,t);for(const t of e.args)n.push(this.build(t,s));const r=`_p${this.pipes.length}`;return this.pipes.push([e.name,r]),n.unshift(o),a.push(s.length?s.join(";")+";":"",this.pipeNameVsIsPureMap.get(e.name)?`${i}=getPPVal(${r},_ppc,"${r}",${n})`:`${i}=${r}.transform(${n})`),t.push(a.join("")),i}build(e,i){return this.cAst=e,this.cStmts=i||this.stmts,e instanceof t.ImplicitReceiver?this.processImplicitReceiver():e instanceof t.LiteralPrimitive?this.processLiteralPrimitive():e instanceof t.LiteralArray?this.processLiteralArray():e instanceof t.LiteralMap?this.processLiteralMap():e instanceof t.PropertyRead?this.processPropertyRead():e instanceof t.PropertyWrite?this.processPropertyWrite():e instanceof t.KeyedRead?this.processKeyedRead():e instanceof t.PrefixNot?this.processPrefixNot():e instanceof t.Unary?this.processUnary():e instanceof t.Binary?this.processBinary():e instanceof t.Conditional?this.processConditional():e instanceof t.Call?this.processMethodCall():e instanceof t.Chain?this.processChain():e instanceof t.BindingPipe?this.processPipe():void 0}extendCtxWithLocals(){const e=this.createVar();this.stmts.push(`${e}=Object.assign({}, locals)`,`Object.setPrototypeOf(${e}, _ctx)`,`ctx=${e}`)}fnBody(){return this.declarations.push("ctx"),'"use strict";\nvar '+this.declarations.join(",")+";\n"+this.stmts.join(";")}fnArgs(){const e=["_plus","_minus","_isDef"];if(this.exprType===q.Binding){e.push("getPPVal","_ppc");for(const[,t]of this.pipes)e.push(t)}return e.push("_ctx","locals"),e.join(",")}addReturnStmt(e){this.stmts.push(`return ${e};`)}cleanup(){this.ast=this.cAst=this.stmts=this.cStmts=this.declarations=this.pipes=this.pipeNameVsIsPureMap=void 0}compile(e){if(this.extendCtxWithLocals(),this.addReturnStmt(this.build(this.ast)),e)return{fnBody:this.fnBody(),fnArgs:this.fnArgs(),pipes:this.pipes};const t=new Function(this.fnArgs(),this.fnBody());let i;return this.exprType===q.Binding?(i=t.bind(void 0,R,D,O,L),i.usedPipes=this.pipes.slice(0)):i=t.bind(void 0,R,D,O),this.cleanup(),i}}const V=()=>({transform:S});let G;const W=()=>{if(void 0!==G)return G;try{new Function,G=!1}catch(e){G=!0}return G};let U;var q;function z(e,i){if(!U)return S;if("string"!=typeof e)return S;if((e=e.trim()).endsWith(";")&&(e=e.slice(0,-1)),!e.length)return S;let n,a=T.get(e);if(a)return a;if(i||(n=Z(e)),!n)if(W())n=function(t,i){let n=Object.assign({},i);return Object.setPrototypeOf(n,t),_.get(n,e)};else{const s=new t.Parser(new t.Lexer).parseBinding(e,"",0);if(s.errors.length)a=S,n=a;else{const e=U.getPipeNameVsIsPureMap();if(a=new j(s.ast,q.Binding,e).compile(i),i)return a;if(a.usedPipes.length){const e=[];let t=!1;for(const[i]of a.usedPipes){const n=U.meta(i);let a;n?(n.pure&&(t=!0,a=N.get(i)),a||(a=U.getInstance(i)),n.pure&&N.set(i,a)):a=V,e.push(a)}e.unshift(t?new Map:void 0),n=a.bind(void 0,...e)}else n=a.bind(void 0,void 0)}}return T.set(e,n),n}function H(e,t,i){let n=Object.assign({},i);Object.setPrototypeOf(n,t);let a=e.split("("),s=a[0],o=_.get(t,s);if(o){let e=a[1].replace(")","");e=e.split(",");let t=[];return e.forEach((e=>{e=e&&e.trim(),t.push(_.get(n,e))})),o.bind(n)(...t)}}function Q(e,i){if("string"!=typeof e)return S;if(!(e=e.trim()).length)return S;let n=M.get(e);if(n)return n;if(i||(n=X(e)),!n)if(W())n=H.bind(void 0,e);else{const a=new t.Parser(new t.Lexer).parseAction(e,!1,"",0);if(a.errors.length)return S;n=new j(a.ast,q.Action).compile(i)}return M.set(e,n),n}!function(e){e[e.Binding=0]="Binding",e[e.Action=1]="Action"}(q||(q={}));const Y=new Map,K=e=>Y.get(e),J=(e,t)=>{let i=K(e);if(!i)return;const n=i.usedPipes||[];if(i=t===q.Binding?i.bind(void 0,R,D,O,L):i.bind(void 0,R,D,O),n.length){const e=[];let t=!1;for(const[i]of n){const n=U.meta(i);let a;n?(n.pure&&(t=!0,a=N.get(i)),a||(a=U.getInstance(i)),n.pure&&N.set(i,a)):a=V,e.push(a)}e.unshift(t?new Map:void 0),i=i.bind(void 0,...e)}else t===q.Binding&&(i=i.bind(void 0,void 0));return i},Z=e=>J(e,q.Binding),X=e=>J(e,q.Action),ee=new Map,te=new E("watch-id-"),ie={};Object.freeze(ie);let ne,ae=!1;const se=(e,t=50)=>{let i;return(...n)=>{window.__zone_symbol__clearTimeout(i),i=window.__zone_symbol__setTimeout((()=>e(...n)),t)}},oe=(e,t,i,n)=>{let a,s=i;_.isArray(s)&&(a=s.map((function(e){return ft(e,t)})),_.isArray(a[0])&&(a=_.flatten(a)),e(a,n))},re=(e,t,i)=>{let n=/\[\$i\]/g,a="[$i]";if(!t)return{expr:e.replace(n,"[0]"),listener:i};var s=e.lastIndexOf(a),o=e.substr(0,s).replace(a,"[0]"),r=e.substr(s+5),l=i;return r&&(l=oe.bind(void 0,i,r)),{expr:o,listener:l}},le=(e,t,i,n,a=te.nextUid(),s=!1,o={},r)=>{if(-1!==e.indexOf("[$i]")){let t=re(e,o&&(o.arrayType||o.isList),n);e=t.expr,n=t.listener}const l=z(e);return ee.set(a,{fn:l.bind(e,t,i),listener:n,expr:e,last:ie,doNotClone:s,isMuted:r}),()=>ce(a)},ce=e=>ee.delete(e);let de=!1;const pe=window.requestAnimationFrame;let ue;const he=e=>{if(ae&&!e)return;let t,i=1;do{t=!1,ee.forEach((e=>{if(e.isMuted&&e.isMuted())return;const i=e.fn,n=e.listener,a=e.last;let s;try{s=i()}catch(t){console.warn(`error in executing expression: '${e.expr}'`)}_.isEqual(s,a)||(t=!0,de=!0,e.last=s,_.isObject(s)&&!e.doNotClone&&!1!==s.__cloneable__&&(e.last=_.clone(s)),n(s,a),me())})),i++}while(t&&i<5);t&&5===i&&console.warn("Number of watch cycles gone above set limit of: 5 ")},me=()=>de=!1;let ge;window.watchRegistry=ee;const fe=se((()=>{ge=!0,ue.run((()=>he()))}),100),ve=(()=>{let e=!1;return t=>{if(ne)if(t)ue.run((()=>ne.tick())),e=!1;else{if(e)return;e=!0,pe((()=>{ue.run((()=>ne.tick())),e=!1}))}}})();var be,ye;e.ComponentType=void 0,(be=e.ComponentType||(e.ComponentType={}))[be.PAGE=0]="PAGE",be[be.PREFAB=1]="PREFAB",be[be.PARTIAL=2]="PARTIAL",be[be.WIDGET=3]="WIDGET";!function(e){e.LIST_RECORDS="listRecords",e.UPDATE_RECORD="updateRecord",e.INSERT_RECORD="insertRecord",e.DELETE_RECORD="deleteRecord",e.INVOKE="invoke",e.UPDATE="update",e.NOTIFY="notify",e.IS_API_AWARE="isApiAware",e.SUPPORTS_CRUD="supportsCRUD",e.SUPPORTS_DISTINCT_API="supportsDistinctAPI",e.IS_PAGEABLE="isPageable",e.IS_SORTABLE="isSortable",e.GET_OPERATION_TYPE="getOperationType",e.GET_RELATED_PRIMARY_KEYS="getRelatedTablePrimaryKeys",e.GET_ENTITY_NAME="getEntityName",e.SET_INPUT="setinput",e.GET_RELATED_TABLE_DATA="getRelatedTableData",e.GET_DISTINCT_DATA_BY_FIELDS="getDistinctDataByFields",e.GET_AGGREGATED_DATA="getAggregatedData",e.GET_MATCH_MODE="getMatchMode",e.DOWNLOAD="download",e.GET_NAME="getName",e.GET_PROPERTIES_MAP="getPropertiesMap",e.GET_PRIMARY_KEY="getPrimaryKey",e.GET_BLOB_URL="getBlobURL",e.SUPPORTS_SERVER_FILTER="supportsServerFilter",e.GET_OPTIONS="getOptions",e.SEARCH_RECORDS="searchRecords",e.GET_REQUEST_PARAMS="getRequestParams",e.GET_PAGING_OPTIONS="getPagingOptions",e.FETCH_DISTINCT_VALUES="fetchDistinctValues",e.GET_UNIQUE_IDENTIFIER="getUniqueIdentifier",e.GET_CONTEXT_IDENTIFIER="getContextIdentifier",e.IS_UPDATE_REQUIRED="isUpdateRequired",e.ADD_ITEM="addItem",e.SET_ITEM="setItem",e.REMOVE_ITEM="removeItem",e.IS_BOUND_TO_LOCALE="isBoundToLocale",e.GET_DEFAULT_LOCALE="getDefaultLocale",e.CANCEL="cancel",e.SET_PAGINATION="setPagination"}(ye||(ye={}));const we={Operation:ye};const Pe=window.navigator.userAgent,Ce={SNAKE_CASE:/[A-Z]/g,ANDROID:/Android/i,IPHONE:/iPhone/i,IPOD:/iPod/i,IPAD:/iPad/i,MAC:/Mac/i,MACINTEL:/MacIntel/i,ANDROID_TABLET:/android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i,MOBILE:/Mobile/i,WINDOWS:/Windows Phone/i,SUPPORTED_IMAGE_FORMAT:/\.(bmp|gif|jpe|jpg|jpeg|tif|tiff|pbm|png|ico)$/i,SUPPORTED_FILE_FORMAT:/\.(txt|js|css|html|script|properties|json|java|xml|smd|xmi|sql|log|wsdl|vm|ftl|jrxml|yml|yaml|md|less|jsp)$/i,SUPPORTED_AUDIO_FORMAT:/\.(mp3|ogg|webm|wma|3gp|wav|m4a)$/i,SUPPORTED_VIDEO_FORMAT:/\.(mp4|ogg|webm|wmv|mpeg|mpg|avi|mov)$/i,PAGE_RESOURCE_PATH:/^\/pages\/.*\.(js|css|html|json)$/,MIN_PAGE_RESOURCE_PATH:/.*(page.min.html)$/,VALID_EMAIL:/^[a-zA-Z][\w.+]+@[a-zA-Z_]+?\.[a-zA-Z.]{1,4}[a-zA-Z]$/,VALID_WEB_URL:/^(http[s]?:\/\/)(www\.){0,1}[a-zA-Z0-9=:?\/\.\-]+(\.[a-zA-Z]{2,5}[\.]{0,1})?/,VALID_WEBSOCKET_URL:/^(ws[s]?:\/\/)(www\.){0,1}[a-zA-Z0-9=:?\/\.\-]+(\.[a-zA-Z]{2,5}[\.]{0,1})?/,VALID_RELATIVE_URL:/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/,REPLACE_PATTERN:/\$\{([^\}]+)\}/g,ZIP_FILE:/\.zip$/i,EXE_FILE:/\.exe$/i,NO_QUOTES_ALLOWED:/^[^'|"]*$/,NO_DOUBLE_QUOTES_ALLOWED:/^[^"]*$/,VALID_HTML:/<[a-z][\s\S]*>/i,VALID_PASSWORD:/^[0-9a-zA-Z-_.@&*!#$%]+$/,SPECIAL_CHARACTERS:/[^A-Z0-9a-z_]+/i,APP_SERVER_URL_FORMAT:/^(http[s]?:\/\/)(www\.){0,1}[a-zA-Z0-9\.\-]+([:]?[0-9]{2,5}|\.[a-zA-Z]{2,5}[\.]{0,1})\/+[^?#&=]+$/,JSON_DATE_FORMAT:/\d{4}-[0-1]\d-[0-3]\d(T[0-2]\d:[0-5]\d:[0-5]\d.\d{1,3}Z$)?/,DATA_URL:/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i,ISO_DATE_FORMAT:/(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2})(\.\d+)?([+-]\d{2}:?\d{2}|Z)$/},Ae=["int",e.DataType.INTEGER,e.DataType.FLOAT,e.DataType.DOUBLE,e.DataType.LONG,e.DataType.SHORT,e.DataType.BYTE,e.DataType.BIG_INTEGER,e.DataType.BIG_DECIMAL],_e=new Date,Ie=e=>void 0!==e,Ee=e=>null!==e&&"object"==typeof e,Oe=(e,t)=>!(!e||"false"===e)||!!t&&e===t;const xe=()=>window.navigator.appVersion.indexOf("Trident/")>-1||window.navigator.userAgent.indexOf("MSIE")>-1,Re=()=>Ce.ANDROID.test(Pe),De=()=>Ce.ANDROID_TABLET.test(Pe)&&!/Tablet PC 2.0/i.test(Pe),Se=()=>Ce.IPHONE.test(Pe),Te=()=>Ce.IPOD.test(Pe),Me=()=>Ce.IPAD.test(Pe)||window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>2&&(Ce.MAC.test(window.navigator.platform)||Ce.MACINTEL.test(window.navigator.platform)),Ne=()=>Se()||Te()||Me(),ke=(e,t)=>{const i=e||"1366px",n=t||"1024px";return window.matchMedia("only screen and (min-device-width : "+i+") and (max-device-width : "+i+") and (min-device-height : "+n+") and (max-device-height : "+n+") and (min-width: "+i+") and (max-width: "+i+")").matches},Le=(e,t)=>{const i=e||"1366px",n=t||"1024px";return window.matchMedia("only screen and (min-device-width : "+n+") and (max-device-width : "+n+") and (min-device-height : "+i+") and (max-device-height : "+i+") and (min-width: "+n+") and (max-width: "+n+")").matches},Fe=()=>Re()||Ne()||De()||$("#wm-mobile-display:visible").length>0,$e=()=>"MOBILE"===I().platformType&&"APPLICATION"===I().type,Be=()=>{const e=window.navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return e?e[1]:""},je=()=>Re()&&4===parseInt(Be(),10),Ve=e=>{const t=e.indexOf("?");return t>-1?(e=encodeURI(e.substring(0,t))+e.substring(t),e=Ge(e)):e=encodeURI(e),e},Ge=e=>{let t,i,n,a="";return n=e.indexOf("?"),n>-1&&(n+=1,i=e.substring(n),i&&(t=i.split("&"),t.forEach((function(e){let t;const i=_.includes(e,"=")?e.indexOf("="):e&&e.length,n=e.substr(0,i),s=e.substr(i+1);if(s||_.includes(e,"=")){try{t=decodeURIComponent(s)}catch(e){t=s}a+=n+"="+encodeURIComponent(t)+"&"}else a+=n+"&"})),a=a.slice(0,-1),e=e.replace(i,a))),e},We=e=>e?e.charAt(0).toUpperCase()+e.substring(1):"",Ue=e=>e===e.toUpperCase()?e:e.replace(Ce.SNAKE_CASE,(function(e,t){return(t?" ":"")+e})),qe=(e,t,i)=>e.substr(0,t)+i+e.substr(t+i.length),ze=e=>{let t;return t=e.indexOf("."),-1!==t&&(e=qe(e,t+1,e.charAt(t+1).toUpperCase()),e=qe(e,t," ")),e},He=e=>(e=_.camelCase(e),e=We(e),e=Ue(e),e=ze(e)),Qe=e=>e.split("-").join(" "),Ye=(e,t=",")=>{let i,n=[];return _.isArray(e)||(n=_.split(e,t)),i=_.map(n,He),_.isArray(e)?i:i.join(t)},Ke=e=>{const t=document.createElement("a");return t.href=e,""!==t.protocol&&(!Ce.DATA_URL.test(e)&&(!!Je(location.href,"https://")&&("https:"!==t.protocol&&"wss:"!==t.protocol)))},Je=(e,t,i)=>{if(!e)return!1;return new RegExp("^"+t,i?"i":"").test(e)},Ze=(e,t)=>{let i;return i=_.attempt((function(){const i=Object.keys(e).map((e=>`var ${e} = data['${e}'];`)).join(" ");return new Function("data",`${i} return  ${t}`)(e)})),_.isError(i)&&(i=_.get(e,t)),i},Xe=e=>Ce.SUPPORTED_IMAGE_FORMAT.test(e),et=e=>Ce.SUPPORTED_AUDIO_FORMAT.test(e),tt=e=>Ce.SUPPORTED_VIDEO_FORMAT.test(e),it=e=>Ce.VALID_WEB_URL.test(e),nt=e=>e;function at(e,...t){let i=1;const n=arguments.length,a=new Array(n-i);for(;i<n;i++)a[i-1]=arguments[i];if(_.isFunction(e))return e.apply(null,a)}const st=(e,t,i,n,a,s,o)=>{if(t){if("timestamp"===i)return moment(t).valueOf();if("UTC"===i)return new Date(t).toISOString();if(n){const e=i.replaceAll("y","Y").replaceAll("d","D").replace("a","A");if(s)return moment(t).format(e);if("datetimestamp"===a)return t=Mt(n,t),moment(t).format(e)}return e.transform(t,i,n,o)}},ot=e=>{if("string"!=typeof e)return;const t=e.match(Ce.ISO_DATE_FORMAT);return!(!t||!t[4])||void 0},rt=(e,t,i)=>{if(t&&t.pattern&&"timestamp"!==t.pattern){const i=(t&&t.hasOwnProperty("isNativePicker")?_.get(t,"isNativePicker"):Fe())?"YYYY/MM/DD HH:mm:ss":It(t.pattern);e=moment(e,i).toDate()}if(_.isDate(e))return e;if(isNaN(e)||(e=parseInt(e,10)),!moment(e).isValid()||""===e||null==e)return;let n=new Date(e);return _.isString(e)&&(n=i?Mt(i,e):new Date(moment(moment(e).format()).valueOf())),"CURRENT_DATE"===e||isNaN(n.getDay())?_e:n},lt=(e,t,i,n,a,s,o,r=!1)=>{const l=e,c=e=>{if(!t||!t.contains(e.target)&&t!==e.target)if(i.contains(e.target)){if($(e.target).is("input")&&!a)return;l.removeEventListener(n,c,r)}else 0===o&&l.removeEventListener(n,c,r),s()};l.addEventListener(n,c,r);return()=>{l.removeEventListener(n,c,r)}},ct=e=>_.cloneDeep(e),dt=(e,t,i)=>{const n=_.get(document.forms,[e,t,"files"]);return i?_.map(n,_.identity):n&&n[0]};function pt(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}const ut=()=>pt()+"-"+pt()+"-"+pt(),ht=(e,t)=>{let i;return!e||!t||(i=e&&e.split(",").map(Function.prototype.call,String.prototype.trim),_.intersection(i,t.userRoles).length)},mt=e=>{if(e)try{const t=parseInt(e,10);return Ee(e)||!isNaN(t)?e:JSON.parse(e)}catch(e){return}},gt=e=>{let t=new X2JS({emptyNodeForm:"content",attributePrefix:"",enableToStringFunc:!1}).xml2js(e);return t&&(t=_.get(t,Object.keys(t)[0])),t},ft=(e,t,i)=>{if(!e||!t)return;if(!i)return _.get(e,t);const n=t.split("."),a=[];let s;return n.forEach((e=>{if(!n.length)return s=!0,!1;const t=e.match(/\w+/g);let i;for(;t.length;)i=t.shift(),a.push({key:i,value:t.length?[]:{}})})),s?void 0:(a.forEach((t=>{let i=e[t.key];Ee(i)||(i=mt(i),i||(i=t.value)),e[t.key]=i,e=i})),e)},vt=t=>{let i;return t?(i=t&&t.substring(t.lastIndexOf(".")+1),i=i&&i.toLowerCase(),i=i===e.DataType.LOCALDATETIME?e.DataType.DATETIME:i,i):e.DataType.STRING},bt=e=>-1!==Ae.indexOf(vt(e).toLowerCase()),yt=e=>!(!Ee(e)||_.isArray(e))&&0===Object.keys(e).length,wt=e=>{const t=$(e),i=t.offset().top,n=t.closest('[wmsmoothscroll="true"]');if($e()&&n.length){const e=_.get(n[0],"iscroll");let t=-(i-e.y);t=e.maxScrollY>t?e.maxScrollY:t,e.scrollTo(0,t)}else window.scroll({top:i,left:0,behavior:"smooth"})},Pt=e=>{var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},Ct=e=>{const t=_.omit(e,"empty");return _.isEqual(_.keys({content:[],first:!0,last:!0,number:0,numberOfElements:10,size:20,sort:null,totalElements:10,totalPages:1}),_.keys(t).sort())},At=(e,t,i)=>{let n=Ce.REPLACE_PATTERN;if(e)return i&&(n=/\{([^\}]+)\}/g),e.replace(n,(function(e,i){return _.get(t,i)}))},_t=t=>(_.includes(t,".")&&(t=_.toLower(vt(t))),_.includes([e.DataType.DATE,e.DataType.TIME,e.DataType.TIMESTAMP,e.DataType.DATETIME,e.DataType.LOCALDATETIME],t)),It=e=>(_.includes(e,"E")&&(e=_.replace(e,/E[,]?/g,"")),_.replace(e,/y*d*/g,(e=>e.toUpperCase()))),Et=(e,t)=>{const i=["AM","PM"],n=moment()._locale.meridiem();t&&t.meridians&&_.includes(i,n)&&_.forEach(t.meridians,((t,n)=>{_.includes(e,t)&&(e=e.replace(t,i[n]))}));const a=(t&&t.hasOwnProperty("isNativePicker")?_.get(t,"isNativePicker"):Fe())?_.get(t,"pattern")||"YYYY/MM/DD HH:mm:ss":It(_.get(t,"pattern"))||"";return t&&t.pattern&&"timestamp"!==t.pattern&&(isNaN(new Date(e).getTime())?e=moment(e,a):(Ne()&&(e=moment(e).format("YYYY/MM/DD HH:mm:ss")),e=moment(new Date(e),a)),e=e.toDate()),moment(e,a).isValid()?(Ne()&&(e=moment(moment(e).valueOf()).format("YYYY/MM/DD HH:mm:ss")),e):(isNaN(e)?new Date(e).getTime()||(e=moment(moment().format("YYYY-MM-DD")+" "+e,"YYYY-MM-DD HH:mm:ss A")):e=parseInt(e,10),new Date(moment(e).valueOf()))},Ot=(e,t)=>(e=Et(e,t),new Date(e)),xt=(e,t)=>{if(e instanceof Blob)return e;const i=mt(e);return e=i&&i instanceof Object?new Blob([JSON.stringify(i)],{type:t||"application/json"}):new Blob([e],{type:t||"text/plain"})},Rt=(e,t,i)=>{let n=_.isArray(i)?i:_.split(i,",");return n=_.map(n,_.trim),_.isEqualWith(e,t,(function(e,t){return _.every(n,(function(i){let n,a,s;return-1===_.indexOf(i,":")?n=a=_.trim(i):(s=_.split(i,":"),n=_.trim(s[0]),a=_.trim(s[1])),_.get(e,n)===_.get(t,a)}))}))},Dt=e=>document.querySelector(e),St=(e,t)=>{if(Dt(`link[href="${e}"]`))return;const i=document.createElement("link");return i.href=e,t&&t.name&&i.setAttribute(t.name,t.value),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),document.head.appendChild(i),i},Tt=(e=[])=>{Array.isArray(e)||(e=[e]),e.forEach(St)},Mt=(e,t)=>t?new Date(new Date(moment(t).tz(e).format()).toLocaleString("en-US",{timeZone:e})):new Date(new Date(moment().tz(e).format()).toLocaleString("en-US",{timeZone:e})),Nt=async(e,t,i=!1)=>{const n=e.trim();return!n.length||Dt(`script[src="${a=n}"], script[data-src="${a}"]`)?Promise.resolve():t?new Promise(((e,t)=>{let i=document.createElement("script");i.type="text/javascript",i.src=n,i.async=!1,i.readyState?i.onreadystatechange=()=>{"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,e(!0))}:i.onload=()=>{e(!0)},i.onerror=e=>t(e),document.getElementsByTagName("head")[0].appendChild(i)})):i?$.ajax({dataType:"script",cache:!0,url:e}).done((e=>e)).fail((e=>e)):$.getScript(e).done((e=>e)).fail((e=>e));var a},kt=async(e=[],t=!0)=>{for(const i of e)await Nt(i,t);return Promise.resolve()};let Lt={};const Ft=(e,t)=>{let i=window.sessionStorage.getItem(Lt.id);i=i?JSON.parse(i):{},i[e]=t,window.sessionStorage.setItem(Lt.id,JSON.stringify(i))},$t=e=>{let t=window&&window.sessionStorage&&window.sessionStorage.getItem(Lt.id);if(t)return t=JSON.parse(t),t[e]},Bt=(...e)=>{},jt=e=>_.isArray(e),Vt=e=>"string"==typeof e,Gt=e=>"number"==typeof e,Wt=e=>"boolean"==typeof e,Ut=e=>new Promise(((t,i)=>{resolveLocalFileSystemURL(e,(function(n){n.file((function(n){const a=new FileReader;a.onloadend=()=>{const i=new Blob([a.result],{type:n.type});t({blob:i,filepath:e})},a.onerror=i,a.readAsArrayBuffer(n)}))}),i)})),qt=()=>!!window.cordova,zt={INT_MAX_VALUE:2147483647},Ht=(e,t="_self")=>{qt()&&_.startsWith(e,"#")?location.hash=e:window.open(e,t)},Qt=(e,t,i=!1,n,a)=>$.ajax({type:"get",dataType:e,url:t,async:!i}).done((e=>n&&n(e))).fail((e=>a&&a(e))),Yt=e=>e instanceof Promise?e:Promise.resolve(e),Kt=(e,t,i,n=(()=>Promise.resolve(!1)))=>{let a=0;const s=()=>{if(a++,_.isFunction(e))return e()};return i=_.isNumber(i)&&i>0?i:0,t=_.isNumber(t)&&t>0?t:0,new Promise(((e,o)=>{const r=function(){const l=arguments;setTimeout((()=>{Yt(n()).then((function(t){!1!==t&&(!i||a<=i)?Yt(s()).then(e,r):o(l)}),(()=>o(l)))}),t)};Yt(s()).then(e,r)}))},Jt=()=>{const e={promise:null,reject:null,resolve:null,onAbort:()=>{},isAborted:!1};return e.promise=new Promise(((t,i)=>{e.resolve=t,e.reject=i})),e.promise.abort=()=>{at(e.onAbort),e.reject("aborted"),e.isAborted=!0},e},Zt=(e,t)=>{document.styleSheets[0].insertRule(`${e} { ${t} }`)},Xt=e=>{const t={},i=e.indexOf("?");if(-1!==i){_.split(e.substring(i+1,e.length),"&").forEach((e=>{e=_.split(e,"="),t[e[0]]=e[1]}))}return t},ei=e=>{const t=(e=e.replace("#/","/")).indexOf("?");return-1!==t&&(e=e.substring(0,t)),e},ti=/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ii=()=>{const e={promise:null,resolve:Bt,reject:Bt};return e.promise=new Promise(((t,i)=>{e.resolve=t,e.reject=i})),e},ni=(e,t,i,n)=>{if(i=i||ii(),0===(n=n||0)&&(e=_.filter(e,(function(e){return!(_.isUndefined(e)||_.isNull(e))}))),e&&n<e.length)try{Yt(e[n].apply(void 0,t)).then((()=>ni(e,t,i,n+1)),i.reject)}catch(e){i.reject(e)}else i.resolve();return i.promise},ai=(e,t)=>e.execute(we.Operation.GET_UNIQUE_IDENTIFIER)===t.execute(we.Operation.GET_UNIQUE_IDENTIFIER)&&_.isEqual(e.execute(we.Operation.GET_CONTEXT_IDENTIFIER),t.execute(we.Operation.GET_CONTEXT_IDENTIFIER)),si=(e,t)=>e.execute(we.Operation.GET_CONTEXT_IDENTIFIER)===t,oi=(e,t,n)=>{const a=e.registerDestroyListener?e.registerDestroyListener.bind(e):_.noop,s=new i.Subject,o=(i,o)=>{const r=(e,n)=>{e===n&&_.isUndefined(e)||_.isUndefined(e)&&!_.isUndefined(n)||(_.includes(["blob","file"],i.type)||(e=ct(e)),"dataBinding"===i.target?(t.rules=[],_.forEach(e,(function(e,n){t.rules.push({target:n,value:e,matchMode:i.matchMode||"startignorecase",required:!1,type:""})}))):i[o]=e,s.next({filterExpressions:t,newVal:e}))};Je(i[o],"bind:")&&a(le(i[o].replace("bind:",""),e,{},n?n.invokeOnFiltertExpressionChange.bind(n,i,o):r,void 0,!1,{arrayType:_.includes(["in","notin"],i.matchMode)}))},r=e=>{e.rules&&_.forEach(e.rules,((e,t)=>{e.rules?r(e):("between"===e.matchMode&&o(e,"secondvalue"),o(e,"value"))}))};return r(t),s},ri=(e,t)=>{let i=Object.getPrototypeOf(e);for(;Object.getPrototypeOf(i).constructor!==Object;)if(i=Object.getPrototypeOf(i),t===i)return;Object.setPrototypeOf(i,t)},li=function(e){const t=/^data:image\/([a-z]{2,});base64,/;if(_.isString(e))return _.startsWith(e,"file:///")||t.test(e)?e:e.replace(new RegExp("([^:]/)(/)+","g"),"$1")};$.cachedScript=(()=>{const e=new Map,t=new Set;return function(i){if((e=>t.has(e))(i))return Promise.resolve();if((t=>e.has(t))(i))return e.get(i);(t=>{let i,n;const a=new Promise(((e,t)=>{i=e,n=t}));a.resolve=i,a.reject=n,e.set(t,a)})(i);const n={dataType:"script",cache:!0,url:i};return $.ajax(n).done((()=>(i=>{t.add(i),e.get(i).resolve(),e.delete(i)})(i))),e.get(i)}})();const ci={DATE:"yyyy-MM-dd",TIME:"hh:mm a",TIMESTAMP:"yyyy-MM-dd hh:mm:ss a",DATETIME:"yyyy-MM-dd hh:mm:ss a"},di=e=>ci[_.toUpper(e)],pi=e=>{const t=e.querySelectorAll("label.control-label");let i=e.querySelectorAll("[focus-target]");if(i.length||(i=e.querySelectorAll("input, select, textarea")),t.length&&i.length){const e=$(i[0]).closest("[widget-id]").attr("widget-id");e&&(C(i[0],"id",e),C(t[0],"for",e))}const n=e.querySelectorAll("ul");if(t.length&&n.length&&("radiogroup"===n[0].getAttribute("role")||"group"===n[0].getAttribute("role"))){const e="wm-group-label-"+ut();C(n[0],"aria-labelledby",e),C(t[0],"id",e)}},ui=(e,t,i,n)=>{(i._ngZone||i.ngZone).onStable.subscribe((()=>{const t=gi(e);t.m41<0&&(t.m41=0,mi(e,t))}))},hi=(e,t,i,n)=>{const a=n?_.parseInt(n.css("width")):_.parseInt(e.css("width")),s=$(window).width()+window.scrollX,o=t.getBoundingClientRect(),r=o.right+window.scrollX;let l;(i._ngZone||i.ngZone).onStable.subscribe((()=>{const t=gi(e);s-(r+o.width)<a&&(l=r-a,l<0&&(l=0),t.m41=l,mi(e,t))}))},mi=(e,t)=>{const i="translate3d("+t.m41+"px, "+t.m42+"px, 0px)";e[0].style.webkitTransform=i,e[0].style.MozTransform=i,e[0].style.msTransform=i,e[0].style.OTransform=i,e[0].style.transform=i},gi=e=>"undefined"==typeof WebKitCSSMatrix?new MSCSSMatrix(window.getComputedStyle(e[0]).transform):new WebKitCSSMatrix(window.getComputedStyle(e[0]).webkitTransform),fi=e=>{if(!e.closest(".app-popover").length){const e=document.querySelectorAll(".app-popover-wrapper");_.forEach(e,(e=>{e.widget.isOpen&&(e.widget.isOpen=!1)}))}},vi=ve,bi=(e,t)=>{let i=t.link;const n=t.action,a=t.target;if(n&&(e.itemActionFn||(e.itemActionFn=Q(n)),e.itemActionFn(e.userDefinedExecutionContext,Object.create(t))),i)if(!i.startsWith("#/")||a&&"_self"!==a)Ht(i,a);else{const t=Xt(i);i=ei(i);(_.get(e,"route")||_.get(e,"menuRef.route")).navigate([i],{queryParams:t})}},yi=(e,t)=>{const i=_.startsWith(e,"Variables."),n=_.startsWith(e,"Widgets."),a=e.split(".");if(i)return _.get(t.viewParent.Variables,a[1]);if(n){const e=_.get(t.viewParent.Widgets,a[1]),i=e.$attrs.get("datasetboundexpr");let n;return n=!e.datasource&&i?i:e.binddataset,yi(n,e)}},wi=(e,t)=>{if(/^Widgets\..*\.currentItem/g.test(e)){const i=e.split("."),n=_.get(t.viewParent.Widgets,i[1]),a=n.$attrs.get("datasetboundexpr");if(!n.datasource&&a)return e=e.replace(/^Widgets\..*\.currentItem/g,`${a}[$i]`),wi(e,t);e=e.replace(/^Widgets\..*\.currentItem/g,`${n.binddataset}[$i]`)}return e},Pi=e=>{let t=e.closest(".app-prefab");return t.length||(t=e.closest(".app-partial")),t.length||(t=e.closest(".app-spa-page")),t.length||(t=e.closest(".app-page")),t.length&&t.parent()[0].tagName},Ci={REQUIRED:"required",MAXCHARS:"maxchars",MINVALUE:"minvalue",MAXVALUE:"maxvalue",REGEXP:"regexp",MINDATE:"mindate",MAXDATE:"maxdate",MINTIME:"mintime",MAXTIME:"maxtime",EXCLUDEDATES:"excludedates",EXCLUDEDAYS:"excludedays"},Ai=e=>{if(_.isString(e)&&qt()&&e.startsWith("file://")){if(Ne())return e.replace("file://","/_app_file_");if(Re()&&location.href.startsWith("http")){if(e.startsWith(cordova.file.applicationDirectory))return e.replace(cordova.file.applicationDirectory+"www","");if(e.startsWith("file://"))return e.replace("file://","/_app_file_")}}return e},_i=e=>{const t=document.createElement("script");t.onload=()=>{e(WM_CUSTOM_FORMATTERS)},t.onerror=e=>{console.warn("Error while loading the file "+t.src+"\n"+e)},t.type="text/javascript",t.src="./extensions/formatters.js",document.head.appendChild(t)},Ii=(e,t)=>_WM_APP_PROPERTIES.extra_settings&&_.get(_WM_APP_PROPERTIES.extra_settings,e)||t,Ei=e=>{let t="";e.itemsperrow?isNaN(parseInt(e.itemsperrow,10))?(_.split(e.itemsperrow," ").forEach((e=>{const i=_.split(e,"-");e=`${i[0]}-${12/parseInt(i[1],10)}`,t+=` col-${e}`})),e.itemsPerRowClass=t.trim()):e.itemsPerRowClass="col-xs-"+12/parseInt(e.itemsperrow,10):e.itemsPerRowClass="col-xs-12"},Oi=(e,t)=>{let i=xi(e);return i||t},xi=e=>e[15]?e[15][8]:e[15];var Ri=Object.freeze({__proto__:null,AppConstants:zt,VALIDATOR:Ci,_WM_APP_PROJECT:Lt,addEventListenerOnElement:lt,addForIdAttributes:pi,adjustContainerPosition:ui,adjustContainerRightEdges:hi,appendScriptToHead:_i,closePopover:fi,convertToBlob:Ut,createCSSRule:Zt,deHyphenate:Qe,defer:ii,detectChanges:vi,encodeUrl:Ve,encodeUrlParams:Ge,executePromiseChain:ni,extendProto:ri,extractCurrentItemExpr:wi,extractType:vt,fetchContent:Qt,findParent:Oi,findRootContainer:Pi,findValueOf:ft,findViewParent:xi,generateGUId:ut,getAbortableDefer:Jt,getAndroidVersion:Be,getAppSetting:Ii,getBlob:xt,getClonedObject:ct,getDatasourceFromExpr:yi,getDateObj:rt,getDisplayDateTimeFormat:di,getEvaluatedExprValue:Ze,getFiles:dt,getFormattedDate:st,getMomentLocaleObject:Mt,getNativeDateObject:Ot,getResourceURL:nt,getRouteNameFromLink:ei,getSessionStorageItem:$t,getUrlParams:Xt,getValidDateObject:Et,getValidJSON:mt,getWebkitTraslationMatrix:gi,hasCordova:qt,hasOffsetStr:ot,initCaps:We,isAndroid:Re,isAndroidTablet:De,isAppleProduct:ti,isArray:jt,isAudioFile:et,isBoolean:Wt,isDataSourceEqual:ai,isDateTimeType:_t,isDefined:Ie,isElementInViewport:Pt,isEmptyObject:yt,isEqualWithFields:Rt,isIE:xe,isImageFile:Xe,isInsecureContentRequest:Ke,isIos:Ne,isIpad:Me,isIphone:Se,isIpod:Te,isKitkatDevice:je,isLargeTabletLandscape:ke,isLargeTabletPortrait:Le,isMobile:Fe,isMobileApp:$e,isNumber:Gt,isNumberType:bt,isObject:Ee,isPageable:Ct,isString:Vt,isTablet:()=>{const e=document.querySelector(".app-page").widget;return e&&e.viewParent.Viewport.isTabletType},isValidWebURL:it,isVideoFile:tt,loadScript:Nt,loadScripts:kt,loadStyleSheet:St,loadStyleSheets:Tt,noop:Bt,openLink:Ht,periodSeparate:ze,prettifyLabel:He,prettifyLabels:Ye,processFilterExpBindNode:oi,removeExtraSlashes:li,replace:At,replaceAt:qe,retryIfFails:Kt,scrollToElement:wt,setListClass:Ei,setSessionStorageItem:Ft,setTranslation3dPosition:mi,spaceSeparate:Ue,stringStartsWith:Je,toBoolean:Oe,toPromise:Yt,transformFileURI:Ai,triggerFn:at,triggerItemAction:bi,validateAccessRoles:ht,validateDataSourceCtx:si,xmlToJson:gt});class Di{constructor(e=!0){this._subject=new i.Subject,this._isInitialized=!1,this._eventsBeforeInit=[],e&&this.start()}notify(e,...t){this._isInitialized?this._subject.next({name:e,data:t}):this._eventsBeforeInit.push({name:e,data:t})}start(){this._isInitialized||(this._isInitialized=!0,this._eventsBeforeInit.forEach((e=>this._subject.next(e))))}subscribe(e,t){let i;return e&&t?(i=this._subject.subscribe((i=>{i&&Ee(i)&&i.name===e&&t.apply(void 0,i.data)})),()=>{i.unsubscribe()}):Bt}destroy(){this._subject.complete()}}let Si=768,Ti=1200;class Mi{constructor(){this.orientation={isPortrait:!1,isLandscape:!1},this.isMobileType=!1,this.isTabletType=!1,this._eventNotifier=new Di(!0),this.setScreenType(),window.addEventListener("resize",this.resizeFn.bind(this));const e=window.matchMedia("(orientation: portrait)");e.matches?this.orientation.isPortrait=!0:this.orientation.isLandscape=!0,e.addEventListener&&e.addEventListener("change",(e=>this.orientationChange(e,!e.matches)))}update(e){this.selectedViewPort=e,this.setScreenType()}orientationChange(e,t){t!==this.orientation.isLandscape&&(this.orientation.isPortrait=!t,this.orientation.isLandscape=t,this.notify("orientationchange",{$event:e,data:{isPortrait:!t,isLandscape:t}}))}resizeFn(e){this.setScreenType(),this.orientationChange(e,this.screenWidth>=this.screenHeight),this.notify("resize",{$event:e,data:{screenWidth:this.screenWidth,screenHeight:this.screenHeight}})}subscribe(e,t){return this._eventNotifier.subscribe(e,t)}notify(e,...t){this._eventNotifier.notify.apply(this._eventNotifier,arguments)}setScreenType(){const e=document.querySelector(".wm-app");if(this.screenWidth=e.clientWidth,this.screenHeight=e.clientHeight,this.screenWidth<this.screenHeight?this.screenWidth:this.screenHeight,this.screenWidth>this.screenHeight?this.screenWidth:this.screenHeight,this.isTabletType=!1,this.isMobileType=!1,_.get(this.selectedViewPort,"deviceCategory")){const e=this.selectedViewPort.deviceCategory;"Tab"===e?this.isTabletType=!0:"Smartphone"===e&&(this.isMobileType=!0)}else parseInt(getComputedStyle(document.documentElement).getPropertyValue("--screen-xs")),Si=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--screen-sm"))||768,Ti=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--screen-lg"))||1200,this.screenWidth>=Ti?(this.isTabletType=Re()||Ne()||De(),this.isMobileType=!1):this.screenWidth>=Si?(this.type=1,this.isTabletType=!0):(this.type=0,this.isMobileType=!0)}ngOnDestroy(){this._eventNotifier.destroy(),window.removeEventListener("resize",this.resizeFn)}static{this.\u0275fac=function(e){return new(e||Mi)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:Mi,factory:Mi.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Mi,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);class Ni{constructor(){this.MATCH_MODES={STARTS_WITH_IGNORE_CASE:"startignorecase",STARTS_WITH:"start",ENDS_WITH_IGNORE_CASE:"endignorecase",ENDS_WITH:"end",CONTAINS:"anywhere",CONTAINS_IGNORE_CASE:"anywhereignorecase",IS_EQUAL_WITH_IGNORE_CASE:"exactignorecase",IS_EQUAL:"exact"},this.VALIDATOR=Ci}static{this.\u0275fac=function(e){return new(e||Ni)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:Ni,factory:Ni.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Ni,[{type:n.Injectable,args:[{providedIn:"root"}]}],null,null);class ki{constructor(){_.assign(this,Ri)}static{this.\u0275fac=function(e){return new(e||ki)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:ki,factory:ki.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(ki,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);class Li{constructor(){_.assign(this,{INTEGER:"integer",BIG_INTEGER:"big_integer",SHORT:"short",FLOAT:"float",BIG_DECIMAL:"big_decimal",DOUBLE:"double",LONG:"long",BYTE:"byte",STRING:"string",CHARACTER:"character",TEXT:"text",DATE:"date",TIME:"time",TIMESTAMP:"timestamp",DATETIME:"datetime",BOOLEAN:"boolean",LIST:"list",CLOB:"clob",BLOB:"blob"})}static{this.\u0275fac=function(e){return new(e||Li)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:Li,factory:Li.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Li,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);class Fi{constructor(){_.assign(this,{TEXT:"text",NUMBER:"number",TEXTAREA:"textarea",PASSWORD:"password",CHECKBOX:"checkbox",SLIDER:"slider",RICHTEXT:"richtext",CURRENCY:"currency",SWITCH:"switch",SELECT:"select",CHECKBOXSET:"checkboxset",RADIOSET:"radioset",DATE:"date",TIME:"time",TIMESTAMP:"timestamp",UPLOAD:"upload",RATING:"rating",DATETIME:"datetime",AUTOCOMPLETE:"autocomplete",CHIPS:"chips",COLORPICKER:"colorpicker"})}static{this.\u0275fac=function(e){return new(e||Fi)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:Fi,factory:Fi.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Fi,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);const $i=[];class Bi{constructor(e){this.http=e,this.scripts={},$i.forEach((e=>{this.scripts[e.name]={loaded:!1,src:e.src}}))}load(...e){return e&&e.length?Promise.resolve().then((()=>this.pathMappings||this.loadPathMappings())).then((()=>Promise.all(e.map((e=>this.loadScript(e)))))):Promise.resolve()}loadPathMappings(){const e=(Lt.cdnUrl||Lt.ngDest)+"path_mapping.json";return this.http.get(e).toPromise().then((e=>{this.pathMappings=e}),(()=>{this.pathMappings={}}))}loadScript(e){return new Promise(((t,i)=>{if(this.scripts[e]&&this.scripts[e].loaded)return void t({script:e,loaded:!0});this.scripts[e]||(this.scripts[e]={loaded:!1,src:e});let n=document.createElement("script");n.type="text/javascript",n.async=!1;let a=this.scripts[e].src;a=this.pathMappings[a]||a,a.startsWith("http")?n.src=a:n.src=(Lt.cdnUrl||Lt.ngDest)+a,n.readyState?n.onreadystatechange=()=>{"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,this.scripts[e].loaded=!0,t({script:e,loaded:!0}))}:n.onload=()=>{this.scripts[e].loaded=!0,t({script:e,loaded:!0})},n.onerror=i=>t({script:e,loaded:!1,status:"Loaded"}),document.getElementsByTagName("head")[0].appendChild(n)}))}static{this.\u0275fac=function(e){return new(e||Bi)(d.\u0275\u0275inject(p.HttpClient))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:Bi,factory:Bi.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Bi,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:p.HttpClient}]}),null);class ji{constructor(){this.customPipes=new Map}setCustomPipe(e,t){this.customPipes.set(e,t)}getCustomPipe(e){return this.customPipes.get(e)}hasCustomPipe(e){return this.customPipes.has(e)}static{this.\u0275fac=function(e){return new(e||ji)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:ji,factory:ji.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(ji,[{type:n.Injectable,args:[{providedIn:"root"}]}],null,null);class Vi{constructor(){this.HISTORY_HANDLER="replace",this.HISTORY_HANDLER_TYPES={push:"pushState",replace:"replaceState"},this.WIDGET_STATE_KEY="ws"}setHistoryHandler(e){Object.keys(this.HISTORY_HANDLER_TYPES).indexOf(e)>-1&&(this.HISTORY_HANDLER=e)}getNestedPath(e,t,i){let n=i||t;return e&&(e.prefabName||e.partialName)?(n=n.length>0?n+"."+(e.prefabName||e.partialName):e.prefabName||e.partialName,n=n+"."+e.containerWidget.name,this.getNestedPath(e.containerWidget.viewParent,t,n)):n.split(".").reverse().join(".")}getStateInformation(e){let t,i;if("url"===e.toLowerCase()){if(i=decodeURIComponent(window.location.href).match(/(wm_state=).*?(&|$)/),i)return i=i[0].replace("wm_state=",""),t=this.uriToJson(i),t}else"localstorage"===e.toLowerCase()?i=localStorage.getItem(window.location.pathname.replace(/\//g,"")+"_wm_state"):"sessionstorage"===e.toLowerCase()&&(i=sessionStorage.getItem(window.location.pathname.replace(/\//g,"")+"_wm_state"));if(i)return t=JSON.parse(i),t}getWidgetState(e,t){if(!(t=t||this.computeMode(e.statehandler)))return;let i=this.getStateInformation(t);if(i&&e&&e.getAppInstance().activePageName&&("localstorage"===t.toLowerCase()||"sessionstorage"===t.toLowerCase())&&(i=i[e.getAppInstance().activePageName]),_.get(i,this.WIDGET_STATE_KEY)){const t=this.getNestedPath(e.viewParent,e.getWidget().name);return i[this.WIDGET_STATE_KEY][t]}}computeMode(e){return e?e&&"none"===e.toLowerCase()?void 0:e.toLowerCase():"url"}setWidgetState(e,t,i){const n=this.getNestedPath(e.viewParent,e.getWidget().name);(i=i||this.computeMode(e.statehandler))&&this.setStateParams(this.WIDGET_STATE_KEY,n,t,i,e)}removeWidgetState(e,t,i){if(!(i=i||this.computeMode(e.statehandler)))return;const n=this.getNestedPath(e.viewParent,e.getWidget().name);this.removeStateParam(this.WIDGET_STATE_KEY,n,t,i,e)}setStateVariable(e,t,i){(i=i||this.computeMode(i))&&this.setStateParams("",e,t,i)}getStateVariable(e,t){if(!(t=t||this.computeMode(t)))return;const i=this.getStateInformation(t);return i?i[e]:void 0}removeStateVariable(e,t){(t=t||this.computeMode(t))&&this.removeStateParam("",e,null,t)}setStateParams(e,t,i,n,a){let s,o="";const r=this.getStateInformation(n);s=a&&r&&a.getAppInstance().activePageName&&("localstorage"===n.toLowerCase()||"sessionstorage"===n.toLowerCase())?r[a.getAppInstance().activePageName]:_.clone(r),e?(s&&!s[e]?s[e]={}:s||(s={[e]:{}}),_.isObject(i)&&!_.isArray(i)?(s[e][t]=s[e][t]||{},_.merge(s[e][t],i)):s[e][t]=i):(s&&!s[t]?s[t]={}:s||(s={[t]:{}}),_.isObject(i)&&!_.isArray(i)?(s[t]=s[t]||{},_.merge(s[t],i)):s[t]=i),a&&a.getAppInstance().activePageName&&("localstorage"===n.toLowerCase()||"sessionstorage"===n.toLowerCase())&&(r?(r[a.getAppInstance().activePageName]=s,s=r):s={[a.getAppInstance().activePageName]:s});let l=decodeURIComponent(window.location.href);l.indexOf("?")<0?l+="?wm_state=":l.indexOf("wm_state")<0&&(l+="&wm_state="),o=l.replace(/(wm_state=).*?(&|$)/,"$1"+this.jsonToUri(s)+"$2"),"localstorage"!==n.toLowerCase()?"sessionstorage"!==n.toLowerCase()?decodeURIComponent(window.location.href)!==decodeURIComponent(o)&&("push"===this.HISTORY_HANDLER?window.history.pushState({path:o},"",o):"replace"===this.HISTORY_HANDLER&&window.history.replaceState({path:o},"",o)):sessionStorage.setItem(window.location.pathname.replace(/\//g,"")+"_wm_state",JSON.stringify(s)):localStorage.setItem(window.location.pathname.replace(/\//g,"")+"_wm_state",JSON.stringify(s))}removeStateParam(e,t,i,n,a){let s,o="";const r=this.getStateInformation(n);if(s=a&&r&&a.getAppInstance().activePageName&&("localstorage"===n.toLowerCase()||"sessionstorage"===n.toLowerCase())?r[a.getAppInstance().activePageName]:_.clone(r),!_.get(s,[e])&&!_.get(s,t))return;if(_.get(s,e+"."+t)||s&&s[e]&&s[e][t]?(i?delete s[e][t][i]:delete s[e][t],_.isEmpty(s[e][t])&&delete s[e][t],_.isEmpty(s[e])&&delete s[e]):!e&&_.get(s,t)&&delete s[t],a&&a.getAppInstance().activePageName&&("localstorage"===n.toLowerCase()||"sessionstorage"===n.toLowerCase())&&(r?(r[a.getAppInstance().activePageName]=s,s=r):s={[a.getAppInstance().activePageName]:s}),"localstorage"===n.toLowerCase())return void localStorage.setItem(window.location.pathname.replace(/\//g,"")+"_wm_state",JSON.stringify(s));if("sessionstorage"===n.toLowerCase())return void sessionStorage.setItem(window.location.pathname.replace(/\//g,"")+"_wm_state",JSON.stringify(s));const l=decodeURIComponent(window.location.href);_.isEmpty(s)?(o=l.replace(/(wm_state=).*?(&|$)/,"$2"),_.includes(["&","?"],o.charAt(o.length-1))&&(o=o.replace(o.charAt(o.length-1),""))):o=l.replace(/(wm_state=).*?(&|$)/,"$1"+this.jsonToUri(s)+"$2"),window.history.replaceState({path:o},"",o)}jsonToUri(e){return encodeURIComponent(JSON.stringify(e).replace(/[()'~_!*]/g,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})).replace(/\{/g,"(").replace(/\}/g,")").replace(/"/g,"'").replace(/\:/g,"~").replace(/,/g,"_").replace(/\[/g,"!").replace(/\]/g,"*"))}uriToJson(e){let t;try{t=JSON.parse(decodeURIComponent(e).replace(/\(/g,"{").replace(/\)/g,"}").replace(/'/g,'"').replace(/~/g,":").replace(/_/g,",").replace(/\!/g,"[").replace(/\*/g,"]"))}catch(e){console.warn(e)}return t}static{this.\u0275fac=function(e){return new(e||Vi)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:Vi,factory:Vi.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Vi,[{type:n.Injectable,args:[{providedIn:"root"}]}],null,null);class Gi{updateFieldsOnPagination(e,t){let i,n="wm-table"===e.widgetType?e.gridData:e.fieldDefs;"wm-table"===e.widgetType&&e.gridOptions.isNavTypeScrollOrOndemand()&&-1!==e.gridOptions.deletedRowIndex&&(n.splice(e.gridOptions.deletedRowIndex,1),e.gridOptions.setDeletedRowIndex(-1)),"wm-table"!==e.widgetType||!e.gridOptions.isNavTypeScrollOrOndemand()||e.gridOptions.lastActionPerformed!==e.gridOptions.ACTIONS.SEARCH_OR_SORT&&e.gridOptions.lastActionPerformed!==e.gridOptions.ACTIONS.FILTER_CRITERIA&&e.gridOptions.lastActionPerformed!==e.gridOptions.ACTIONS.DATASET_UPDATE||(n=[],e.gridOptions.setCurrentPage(1)),i="wm-table"===e.widgetType&&e.gridOptions.showviewlessbutton&&"viewless"===e.gridOptions.mode?e.gridOptions.getCurrentPage():e.currentPage;const a=e.dataNavigator,s=e.pagesize;if(!Ie(n)||a.isFirstPage())n=[],i=1;else if(n.length/s<=a.pageCount){let e,o=[];if(n.length===i*s&&i+1===a.dn.currentPage)o=t,i++;else if(n.length<i*s){n.length===(i-1)*s&&i-1===a.dn.currentPage?t=[]:a.dataSize<i*s?e=a.dataSize-n.length:(e=i*s-n.length,i++);const r=t.length-e;o=t.slice(r)}else n.length===i*s&&i===a.dn.currentPage&&(o=[]);t=o}return n="wm-table"!==e.widgetType||e.gridOptions.lastActionPerformed!==e.gridOptions.ACTIONS.DELETE&&e.gridOptions.lastActionPerformed!==e.gridOptions.ACTIONS.EDIT?[...n,...t]:this.getUniqueRecordsInFieldDef(n,t),[n,i]}getUniqueRecordsInFieldDef(e,t){let i=!1;return e.length?t.forEach((function(t){i=!1,e.forEach((function(e){_.isEqual(t,e)&&(i=!0)})),!1===i&&e.push(t)})):e=t,e}bindScrollEvt(e,t,i){const n=e.dataNavigator,a=e.$element.find(t),s=a.children().first(),o=this;let r,l,c=0;s.length&&(r=s.scrollParent(!1),l=r[0]===document?document.body:r[0],l.scrollHeight>l.clientHeight?(r.each(((e,t)=>{c=t===document?t.body.scrollTop||$(window).scrollTop():t.scrollTop})).off("scroll.scroll_evt").on("scroll.scroll_evt",(function(t){let a,s,r,l=t.target;l=l===document?l.scrollingElement||document.body:l,"wm-table"===e.widgetType&&e.gridOptions.isNavTypeScrollOrOndemand()&&t.stopPropagation(),a=l.clientHeight,s=l.scrollHeight,r=l===document.body?$(window).scrollTop():l.scrollTop,c<r&&.9*s<r+a&&($(this).off("scroll.scroll_evt"),o.debouncedFetchNextDatasetOnScroll(n,i,e)()),c=r})),a.off("wheel.scroll_evt")):a.on("wheel.scroll_evt",(t=>{"wm-table"===e.widgetType&&e.gridOptions.isNavTypeScrollOrOndemand()&&t.stopPropagation(),t.originalEvent.deltaY>0&&(a.off("wheel.scroll_evt"),this.debouncedFetchNextDatasetOnScroll(n,i,e)())})))}debouncedFetchNextDatasetOnScroll(e,t,i){return _.debounce((()=>this.fetchNextDatasetOnScroll(e,i)),t)}fetchNextDatasetOnScroll(e,t){t.variableInflight||("wm-table"===t.widgetType&&(t.gridOptions.setIsNextPageData(!0),t.gridOptions.setIsDataUpdatedByUser(!1)),e.navigatePage("next"))}bindIScrollEvt(e,t){const i=e.$element,n=e.dataNavigator,a=e.app,s=i.closest('[wmsmoothscroll="true"]');if(_.get(s[0],"iscroll"))this.setIscrollHandlers(s[0],n,t);else{const e=a.subscribe("iscroll-update",(i=>{!_.isEmpty(i)&&i.isSameNode(s[0])&&(this.setIscrollHandlers(s[0],n,t),e())}));a.notify("no-iscroll",s[0])}}setIscrollHandlers(e,t,i){let n=0;const a=_.get(e.iscroll,"wrapper"),s=e.iscroll;e.iscroll.on("scrollEnd",(()=>{const o=a.clientHeight,r=a.scrollHeight,l=Math.abs(e.iscroll.y);n<l&&.9*r<l+o&&(this.debouncedFetchNextDatasetOnScroll(t,i,parent)(),s.indicatorRefresh&&s.indicatorRefresh()),n=l}))}static{this.\u0275fac=function(e){return new(e||Gi)}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:Gi,factory:Gi.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Gi,[{type:n.Injectable,args:[{providedIn:"root"}]}],null,null);class Wi{static forRoot(){return{ngModule:Wi,providers:[]}}static{this.\u0275fac=function(e){return new(e||Wi)}}static{this.\u0275mod=d.\u0275\u0275defineNgModule({type:Wi})}static{this.\u0275inj=d.\u0275\u0275defineInjector({imports:[a.HttpClientModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Wi,[{type:n.NgModule,args:[{declarations:[],imports:[a.HttpClientModule],providers:[],bootstrap:[]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&d.\u0275\u0275setNgModuleScope(Wi,{imports:[a.HttpClientModule]});e.$appDigest=ve,e.$invokeWatchers=(e,t)=>{if(e)he(t);else{if(ge)return void(ge=!1);fe()}},e.$parseEvent=Q,e.$parseExpr=z,e.$unwatch=ce,e.$watch=le,e.AbstractDialogService=class{},e.AbstractHttpService=class{},e.AbstractI18nService=class{},e.AbstractNavigationService=class{},e.AbstractSpinnerService=class{},e.AbstractToasterService=class{},e.App=class{},e.AppConstants=zt,e.AppDefaults=class{},e.CURRENCY_INFO={USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"\u20ac",name:"Euro",symbol_native:"\u20ac",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"\u062f.\u0625.\u200f",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"\u060b",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lek\xeb"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"\u0564\u0580.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"\u043c\u0430\u043d.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"\u09f3",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"\u043b\u0432.",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"\u062f.\u0628.\u200f",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYR:{symbol:"BYR",name:"Belarusian Ruble",symbol_native:"BYR",decimal_digits:0,rounding:0,code:"BYR",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CN\xa5",name:"Chinese Yuan",symbol_native:"CN\xa5",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"\u20a1",name:"Costa Rican Col\xf3n",symbol_native:"\u20a1",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican col\xf3ns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"K\u010d",name:"Czech Republic Koruna",symbol_native:"K\u010d",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"\u062f.\u062c.\u200f",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"\u062c.\u0645.\u200f",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GBP:{symbol:"\xa3",name:"British Pound Sterling",symbol_native:"\xa3",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GH\u20b5",name:"Ghanaian Cedi",symbol_native:"GH\u20b5",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"\u20aa",name:"Israeli New Sheqel",symbol_native:"\u20aa",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"\u20b9",name:"Indian Rupee",symbol_native:"\u099f\u0995\u09be",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"\u062f.\u0639.\u200f",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"\ufdfc",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic Kr\xf3na",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic kr\xf3nur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"\u062f.\u0623.\u200f",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"\xa5",name:"Japanese Yen",symbol_native:"\uffe5",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"\u17db",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"\u20a9",name:"South Korean Won",symbol_native:"\u20a9",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"\u062f.\u0643.\u200f",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"\u0442\u04a3\u0433.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"LB\xa3",name:"Lebanese Pound",symbol_native:"\u0644.\u0644.\u200f",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"\u062f.\u0644.\u200f",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"\u062f.\u0645.\u200f",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"\u20a6",name:"Nigerian Naira",symbol_native:"\u20a6",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan C\xf3rdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan c\xf3rdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"\u0928\u0947\u0930\u0942",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"\u0631.\u0639.\u200f",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"\u20b1",name:"Philippine Peso",symbol_native:"\u20b1",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"\u20a8",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"z\u0142",name:"Polish Zloty",symbol_native:"z\u0142",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"\u20b2",name:"Paraguayan Guarani",symbol_native:"\u20b2",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"\u0631.\u0642.\u200f",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"\u0434\u0438\u043d.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"\u0440\u0443\u0431.",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"\u0631.\u0633.\u200f",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SY\xa3",name:"Syrian Pound",symbol_native:"\u0644.\u0633.\u200f",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"\u0e3f",name:"Thai Baht",symbol_native:"\u0e3f",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"\u062f.\u062a.\u200f",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan Pa\u02bbanga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan pa\u02bbanga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"\u20b4",name:"Ukrainian Hryvnia",symbol_native:"\u20b4",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan Bol\xedvar",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bol\xedvars"},VND:{symbol:"\u20ab",name:"Vietnamese Dong",symbol_native:"\u20ab",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"\u0631.\u064a.\u200f",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"}},e.ConstantService=Ni,e.CoreModule=Wi,e.CustomPipeManager=ji,e.CustomWidgetRefProvider=class{},e.DataSource=we,e.DynamicComponentRefProvider=class{},e.EventNotifier=Di,e.FIRST_TIME_WATCH=ie,e.FieldTypeService=Li,e.FieldWidgetService=Fi,e.IDGenerator=E,e.IDataSource=class{},e.LRUCache=class{constructor(e=100,t=60,i){this.maxSize=e,this.maxAge=t,this.onEvict=i,this.cache=new Map,this.evictQueue=[""],this.evictQueue.shift(),this.maxAge>0&&(this.maxAge<=30&&console.warn(`Cache age ${this.maxAge}s is very less. Keep it atleast 30s.`),this.maxAge=1e3*this.maxAge,setInterval((()=>{const e=Date.now()-this.maxAge,t=this.evictQueue.filter((t=>this.cache.get(t).lastAccessedTime<=e));this.evict(t.length)}),this.maxAge))}addToEvictQueue(e){const t=this.evictQueue.findIndex((t=>t===e));t>=0&&this.evictQueue.splice(t,1),this.evictQueue.push(e)}evict(e=1){for(let t=0;t<e;t++)this.delete(this.evictQueue[0])}keys(){return this.cache.keys()}set(e,t){if(_.isNil(t))return;const i={instance:t,lastAccessedTime:Date.now()};this.cache.set(e,i),this.addToEvictQueue(e),this.evict(this.evictQueue.length-this.maxSize)}get(e){const t=this.cache.get(e);return t?(t.lastAccessedTime=Date.now(),this.addToEvictQueue(e),t.instance):null}delete(e){if(e&&this.cache.has(e)){const t=this.cache.get(e);this.cache.delete(e),this.onEvict&&this.onEvict(e,t.instance);const i=this.evictQueue.findIndex((t=>t===e));i>=0&&this.evictQueue.splice(i,1)}}has(e){return this.cache.has(e)}size(){return this.evictQueue.length}clear(){this.evict(this.evictQueue.length)}},e.PaginationService=Gi,e.PartialRefProvider=class{},e.ScriptLoaderService=Bi,e.ScriptStore=$i,e.StatePersistence=Vi,e.UserDefinedExecutionContext=class{},e.UtilsService=ki,e.VALIDATOR=Ci,e.Viewport=Mi,e._WM_APP_PROJECT=Lt,e.addClass=w,e.addEventListenerOnElement=lt,e.addForIdAttributes=pi,e.adjustContainerPosition=ui,e.adjustContainerRightEdges=hi,e.appendNode=(e,t,i)=>{const n=()=>t.appendChild(e);i?n():b(n)},e.appendScriptToHead=_i,e.checkIsCustomPipeExpression=h,e.closePopover=fi,e.convertToBlob=Ut,e.createCSSRule=Zt,e.createElement=(e,t,i)=>{const n=document.createElement(e);return t&&Object.keys(t).forEach((e=>{C(n,e,t[e],i)})),n},e.deHyphenate=Qe,e.debounce=se,e.defer=ii,e.detectChanges=vi,e.encodeUrl=Ve,e.encodeUrlParams=Ge,e.executePromiseChain=ni,e.extendProto=ri,e.extractCurrentItemExpr=wi,e.extractType=vt,e.fetchContent=Qt,e.findParent=Oi,e.findRootContainer=Pi,e.findValueOf=ft,e.generateGUId=ut,e.getAbortableDefer=Jt,e.getAndroidVersion=Be,e.getAppSetting=Ii,e.getBlob=xt,e.getClonedObject=ct,e.getDatasourceFromExpr=yi,e.getDateObj=rt,e.getDisplayDateTimeFormat=di,e.getEvaluatedExprValue=Ze,e.getFiles=dt,e.getFnByExpr=K,e.getFnForBindExpr=Z,e.getFnForEventExpr=X,e.getFormWidgetTemplate=(t,i,n,a={})=>{let s;const o=n.get("updateon"),r=o?`updateon="${o}"`:"",l=n.get("showineditmode")||n.get("showineditmode.bind")||!0,c="false"==l?`show="${l}"`:`show.bind="${l}"`;switch(t){case e.FormWidgetType.AUTOCOMPLETE:case e.FormWidgetType.TYPEAHEAD:s=`<div wmSearch type="autocomplete" debouncetime="${n.get("debouncetime")}" ${i} ${c}></div>`;break;case e.FormWidgetType.CHECKBOX:s=`<div wmCheckbox ${i} ${"true"===n.get("required")?"required=true":""} ${c}></div>`;break;case e.FormWidgetType.CHECKBOXSET:s=`<ul role="group" wmCheckboxset ${i} ${"true"===n.get("required")?"required=true":""} ${c}></ul>`;break;case e.FormWidgetType.CHIPS:s=`<ul wmChips role="input" debouncetime="${n.get("debouncetime")}" ${i} ${c}></ul>`;break;case e.FormWidgetType.COLORPICKER:s=`<div wmColorPicker ${"true"===n.get("required")?"required=true":""} ${i} ${c}></div>`;break;case e.FormWidgetType.CURRENCY:s=`<div wmCurrency ${"true"===n.get("required")?"required=true":""} ${r} ${i} ${c}></div>`;break;case e.FormWidgetType.DATE:s=`<div wmDate ${"true"===n.get("required")?"required=true":""} dataentrymode="${n.get("dataentrymode")}" ${i} ${c}></div>`;break;case e.FormWidgetType.DATETIME:s=`<div wmDateTime ${"true"===n.get("required")?"required=true":""} dataentrymode="${n.get("dataentrymode")}" ${i} ${c}></div>`;break;case e.FormWidgetType.NUMBER:s=`<div wmNumber ${i} ${"true"===n.get("required")?"required=true":""} type="number" aria-label="Only numbers" ${r} ${c}></div>`;break;case e.FormWidgetType.PASSWORD:s=`<wm-input ${i} ${"true"===n.get("required")?"required=true":""} type="password" aria-label="Enter password" ${r} ${c}></wm-input>`;break;case e.FormWidgetType.RADIOSET:s=`<ul role="radiogroup" wmRadioset ${i} ${c}></ul>`;break;case e.FormWidgetType.RATING:s=`<div wmRating ${i} ${c}></div>`;break;case e.FormWidgetType.RICHTEXT:s=`<div wmRichTextEditor role="textbox" ${i} ${c}></div>`;break;case e.FormWidgetType.SELECT:s=`<wm-select ${"true"===n.get("required")?"required=true":""} ${i} ${c}></wm-select>`;break;case e.FormWidgetType.TOGGLE:s=`<div wmCheckbox ${i} ${"true"===n.get("required")?"required=true":""} type="toggle" role="checkbox" aria-label="Toggle button" ${c}></div>`;break;case e.FormWidgetType.SLIDER:s=`<div wmSlider ${i} ${c}></div>`;break;case e.FormWidgetType.SWITCH:s=`<div wmSwitch ${i} ${c}></div>`;break;case e.FormWidgetType.TEXT:const t=a.inputType||"inputtype";s=`<wm-input ${i}  ${"true"===n.get("required")?"required=true":""} type="${n.get(t)||"text"}" ${r} ${c}></wm-input>`;break;case e.FormWidgetType.TEXTAREA:s=`<wm-textarea ${i} ${"true"===n.get("required")?"required=true":""} role="textbox" ${r} ${c}></wm-textarea>`;break;case e.FormWidgetType.TIME:s=`<div wmTime ${"true"===n.get("required")?"required=true":""} dataentrymode="${n.get("dataentrymode")}" ${i} ${c}></div>`;break;case e.FormWidgetType.TIMESTAMP:s=`<div wmDateTime ${"true"===n.get("required")?"required=true":""} dataentrymode="${n.get("dataentrymode")}" ${i} role="input" ${c}></div>`;break;case e.FormWidgetType.UPLOAD:const o=a.counter,l=a.pCounter,d=a.uploadProps,p=((e,t,i)=>{let n="";return e.forEach(((e,a)=>{if(a&&a.endsWith(".event")){const e=a.split(".")[0];n=` ${n} (${e})="${t?`${t}.`:""}triggerUploadEvent($event, '${e}', '${i}', row)" `}})),n})(n,o,d&&d.name);s=d?`<form name="${d.formName}" ${i}>\n                            <input focus-target class="file-upload" type="file" name="${d.name}" ${p} ${c}/>\n                        </form>`:`<a class="form-control-static" href="{{${o}.href}}" target="_blank" *ngIf="${o}.filetype === 'image' && ${o}.href">\n                        <img style="height:2em" class="wi wi-file" [src]="${o}.href"/></a>\n                        <a class="form-control-static" target="_blank" href="{{${o}.href}}" *ngIf="${o}.filetype !== 'image' && ${o}.href">\n                        <i class="wi wi-file"></i></a>\n                        <input ${i} class="app-blob-upload" [ngClass]="{'file-readonly': ${o}.readonly}" ${p}\n                        [required]="${o}.required" type="file" name="${n.get("key")||n.get("name")}_formWidget" [readonly]="${o}.readonly"\n                        [class.hidden]="!${l}.isUpdateMode" [accept]="${o}.permitted" ${c}>`;break;default:s=`<wm-input ${i} ${"true"===n.get("required")?"required=true":""} type="text" ${r} ${c}></wm-input>`}return s},e.getFormattedDate=st,e.getMomentLocaleObject=Mt,e.getNativeDateObject=Ot,e.getNgModelAttr=e=>e.has("formControlName")||e.has("formControlName.bind")?"":"ngModel",e.getRequiredFormWidget=t=>{switch(t){case e.FormWidgetType.AUTOCOMPLETE:case e.FormWidgetType.TYPEAHEAD:return"wm-search";case e.FormWidgetType.CHIPS:return"wm-chips";case e.FormWidgetType.COLORPICKER:return"wm-colorpicker";case e.FormWidgetType.CURRENCY:return"wm-currency";case e.FormWidgetType.DATE:return"wm-date";case e.FormWidgetType.DATETIME:return"wm-datetime";case e.FormWidgetType.TIME:case e.FormWidgetType.TIMESTAMP:return"wm-time";case e.FormWidgetType.RATING:return"wm-rating";case e.FormWidgetType.RICHTEXT:return"wm-richtexteditor";case e.FormWidgetType.SLIDER:return"wm-slider";default:return"wm-text"}},e.getResourceURL=nt,e.getRouteNameFromLink=ei,e.getRowActionAttrs=e=>{let t="";return e.forEach(((e,i)=>{const n=g.get(i);n&&(t+=`${n}="${e}" `)})),t},e.getSessionStorageItem=$t,e.getUrlParams=Xt,e.getValidDateObject=Et,e.getValidJSON=mt,e.getWebkitTraslationMatrix=gi,e.getWmProjectProperties=I,e.hasCordova=qt,e.hasOffsetStr=ot,e.initCaps=We,e.insertAfter=(e,t,i)=>{const n=()=>t.parentNode.insertBefore(e,t.nextSibling);i?n():b(n)},e.insertBefore=(e,t,i)=>{const n=()=>t.parentNode.insertBefore(e,t);i?n():b(n)},e.isAndroid=Re,e.isAndroidTablet=De,e.isAppleProduct=ti,e.isArray=jt,e.isAudioFile=et,e.isBoolean=Wt,e.isChangeFromWatch=()=>de,e.isDataSourceEqual=ai,e.isDateTimeType=_t,e.isDefined=Ie,e.isElementInViewport=Pt,e.isEmptyObject=yt,e.isEqualWithFields=Rt,e.isFirstTimeChange=e=>e===ie,e.isIE=xe,e.isImageFile=Xe,e.isInsecureContentRequest=Ke,e.isIos=Ne,e.isIpad=Me,e.isIphone=Se,e.isIpod=Te,e.isKitkatDevice=je,e.isLargeTabletLandscape=ke,e.isLargeTabletPortrait=Le,e.isMobile=Fe,e.isMobileApp=$e,e.isNumber=Gt,e.isNumberType=bt,e.isObject=Ee,e.isPageable=Ct,e.isString=Vt,e.isValidWebURL=it,e.isVideoFile=tt,e.loadScript=Nt,e.loadScripts=kt,e.loadStyleSheet=St,e.loadStyleSheets=Tt,e.muteWatchers=()=>{ae=!0},e.noop=Bt,e.openLink=Ht,e.periodSeparate=ze,e.prettifyLabel=He,e.prettifyLabels=Ye,e.processFilterExpBindNode=oi,e.registerFnByExpr=(e,t,i)=>{t.usedPipes=i||[],Y.set(e,t)},e.removeAttr=(e,t,i)=>{const n=()=>e.removeAttribute(t);i?n():b(n)},e.removeClass=y,e.removeExtraSlashes=li,e.removeNode=(e,t)=>{const i=()=>e.remove();t?i():b(i)},e.replace=At,e.replaceAt=qe,e.resetChangeFromWatch=me,e.retryIfFails=Kt,e.scrollToElement=wt,e.setAppRef=e=>{ne=e},e.setAttr=C,e.setCSS=P,e.setCSSFromObj=(e,t,i)=>{Object.keys(t||{}).forEach((n=>P(e,n,t[n],i)))},e.setHtml=(e,t,i)=>{const n=()=>e.innerHTML=t;i?n():b(n)},e.setListClass=Ei,e.setNgZone=e=>ue=e,e.setPipeProvider=function(e){U=e},e.setProperty=(e,t,i,n)=>{const a=()=>e[t]=i;n?a():b(a)},e.setSessionStorageItem=Ft,e.setTranslation3dPosition=mi,e.setWmProjectProperties=function(e){Object.setPrototypeOf(A,e)},e.spaceSeparate=Ue,e.stringStartsWith=Je,e.switchClass=(e,t="",i="",n)=>{e.classList.contains("ng-untouched")&&e.classList.contains("ng-valid")&&t.includes("ng-untouched")&&t.includes("ng-invalid")&&(t=t.replace("ng-invalid","")),y(e,i,n),w(e,t,n)},e.toBoolean=Oe,e.toDimension=e=>e==+e?`${e}px`:e,e.toPromise=Yt,e.toggleClass=(e,t,i,n)=>{i?w(e,t,n):y(e,t,n)},e.transformFileURI=Ai,e.triggerFn=at,e.triggerItemAction=bi,e.unMuteWatchers=()=>{ae=!1,he()},e.updateTemplateAttrs=m,e.validateAccessRoles=ht,e.validateDataSourceCtx=si,e.xmlToJson=gt})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).swipey={})}(this,(function(e){"use strict";e.SwipeAnimation=class{bindEvents(){return window.PointerEvent?["pointer"]:["touch"]}bounds(e,t){return{}}context(){return{}}direction(){return $.fn.swipey.DIRECTIONS.HORIZONTAL}setGesturesEnabled(e){this._isGesturesEnabled=e}isGesturesEnabled(){return this._isGesturesEnabled}goToLower(e){this._$ele.swipeAnimation("gotoLower",e)}goToUpper(e){this._$ele.swipeAnimation("gotoUpper",e)}onAnimation(e,t){}onUpper(e){}onLower(e){}threshold(){return 30}constructor(){this._isGesturesEnabled=!0}init(e,t){this._$ele=e,e.swipeAnimation({animation:this.animation(),target:t,bounds:this.bounds.bind(this),bindEvents:this.bindEvents(),context:this.context.bind(this),direction:this.direction(),enableGestures:this.isGesturesEnabled.bind(this),onAnimation:this.onAnimation.bind(this),onLower:this.onLower.bind(this),onUpper:this.onUpper.bind(this),threshold:this.threshold(),disableMouse:!0})}}})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/compiler"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/compiler","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.transpiler={}),e.ng.compiler,e.wm.core)}(this,(function(e,t,i){"use strict";const n=[{from:"@angular/forms",name:"FormsModule",as:"ngFormsModule"}],a=[{from:"@angular/forms",name:"ReactiveFormsModule",as:"ngReactiveFormsModule"}],s=[{from:"ngx-bootstrap/datepicker",name:"BsDatepickerModule",as:"ngx_BsDatepickerModule"}],o=[{from:"ngx-bootstrap/dropdown",name:"BsDropdownModule",as:"ngxBsDropdownModule",forRoot:!0}],r=[{from:"@wm/components/basic/progress",name:"ProgressModule"}],l=[{from:"@wm/components/page",name:"PageModule"},{from:"@wm/mobile/components/page",name:"PageModule",as:"WM_MobilePageModule",platformType:"MOBILE"}],c=[{from:"@wm/components/basic",name:"BasicModule"},...[...r,{from:"@wm/mobile/components/basic",name:"BasicModule",as:"WM_MobileBasicModule",platformType:"MOBILE"}]],d=[...n,{from:"@wm/components/input",name:"InputModule"}],p=[{from:"ngx-bootstrap/modal",name:"ModalModule",as:"ngx_ModalModule"},...d,{from:"@wm/components/dialogs",name:"DialogModule"}],u=[...n,{from:"ngx-bootstrap/pagination",name:"PaginationModule",as:"ngxPaginationModule",forRoot:!0},{from:"@wm/components/data/pagination",name:"PaginationModule"}],h=[...n,{from:"ngx-bootstrap/typeahead",name:"TypeaheadModule",as:"ngxTypeaheadModule",forRoot:!0},{from:"@wm/components/basic/search",name:"SearchModule"}],m=[{from:"@wm/components/containers/accordion",name:"AccordionModule"}],g=[{from:"@wm/components/containers/linear-layout",name:"LinearLayoutModule"}],f=[...p,{from:"@wm/components/dialogs/alert-dialog",name:"AlertDialogModule"}],v=[...c,...o,...d,{from:"@wm/components/navigation/menu",name:"MenuModule"}],b=[...v,{from:"@wm/components/navigation/breadcrumb",name:"BreadcrumbModule"}],y=[...n,...s,{from:"@wm/components/input/calendar",name:"CalendarModule"}],w=[{from:"ngx-bootstrap/carousel",name:"CarouselModule",as:"ngxCarouselModule",forRoot:!0},{from:"@wm/components/advanced/carousel",name:"CarouselModule"}],P=[...c,{from:"@wm/components/chart",name:"ChartModule"}],C=[...h,{from:"@wm/components/input/chips",name:"ChipsModule"}],A=[...n,{from:"ngx-color-picker",name:"ColorPickerModule",as:"ngx_ColorPickerModule"},{from:"@wm/components/input/color-picker",name:"ColorPickerModule"}],I=[...p,{from:"@wm/components/dialogs/confirm-dialog",name:"ConfirmDialogModule"}],E=[...d,{from:"@wm/components/input/currency",name:"CurrencyModule"}],O=[...p,{from:"@wm/components/dialogs/design-dialog",name:"DesignDialogModule"}],x=[...n,...s,{from:"ngx-bootstrap/timepicker",name:"TimepickerModule",as:"ngx_TimepickerModule",forRoot:!0},...o,{from:"@wm/components/input/epoch",name:"EpochModule"}],R=[{from:"@wm/mobile/components/input/file-upload",name:"FileUploadModule",as:"WM_MobileFileUploadModule",platformType:"MOBILE"},{from:"@wm/components/input/file-upload",name:"FileUploadModule"}],D=[...c,...p,{from:"@wm/components/dialogs/iframe-dialog",name:"IframeDialogModule"}],S=[{from:"@wm/components/containers/layout-grid",name:"LayoutGridModule"}],T=[...p,{from:"@wm/components/dialogs/login-dialog",name:"LoginDialogModule"}],M=[...o,...v,...c,{from:"@wm/components/data/card",name:"CardModule"}],N=[{from:"@wm/components/page/left-panel",name:"LeftPanelModule"},{from:"@wm/mobile/components/page/left-panel",name:"LeftPanelModule",as:"WM_MobileLeftPanelModule",platformType:"MOBILE"}],k=[...u,...d,{from:"@wm/components/data/list",name:"ListModule"}],L=[...N,...h,...l,{from:"@wm/mobile/components/page/mobile-navbar",name:"MobileNavbarModule"}],F=[...c,...l,...L,{from:"@wm/mobile/components/data/media-list",name:"MediaListModule"}],$=[{from:"ngx-bootstrap/popover",name:"PopoverModule",as:"ngxPopoverModule",forRoot:!0},...c,{from:"@wm/components/navigation/popover",name:"PopoverModule"}],B=[...v,{from:"@wm/components/containers/panel",name:"PanelModule"}],j=[...p,{from:"@wm/components/dialogs/partial-dialog",name:"PartialDialogModule"}],V=[{from:"@wm/components/prefab",name:"PrefabModule"}],G=[{from:"@wm/mobile/components/containers/segmented-control",name:"SegmentedControlModule"}],W=[...n,{from:"@wm/components/input/slider",name:"SliderModule"}],U=[{from:"@wm/components/containers/tabs",name:"TabsModule"}],q=[...n,...a,...u,...v,...c,...d,{from:"ngx-bootstrap/tooltip",name:"TooltipModule",as:"ngxTooltipModule",forRoot:!0},...k,{from:"@wm/components/data/table",name:"TableModule"}],z=[...n,{from:"@wm/components/containers/wizard",name:"WizardModule"}],H=[...q,{from:"@wm/components/data/live-table",name:"LiveTableModule"}],Q=[...n,...a,...c,...d,...l,...O,{from:"@wm/components/data/form",name:"FormModule"}],Y=new Map([["wm-accordion",m],["wm-accordionpane",m],["wm-anchor",c],["wm-alertdialog",f],["wm-audio",c],["wm-barcodescanner",[{from:"@wm/mobile/components/device/barcode-scanner",name:"BarcodeScannerModule"}]],["wm-button",d],["wm-buttongroup",d],["wm-breadcrumb",b],["wm-camera",[{from:"@wm/mobile/components/device/camera",name:"CameraModule"}]],["wm-calendar",y],["wm-card",M],["wm-card-actions",M],["wm-card-content",M],["wm-card-footer",M],["wm-carousel",w],["wm-carousel-content",w],["wm-carousel-template",w],["wm-chart",P],["wm-checkbox",d],["wm-checkboxset",d],["wm-chips",C],["wm-colorpicker",A],["wm-confirmdialog",I],["wm-content",[{from:"@wm/components/page",name:"PageModule"}]],["wm-currency",E],["wm-date",x],["wm-datetime",x],["wm-dialog",O],["wm-footer",[{from:"@wm/components/page/footer",name:"FooterModule"}]],["wm-form",Q],["wm-form-action",Q],["wm-form-field",Q],["wm-filter-field",Q],["wm-fileupload",R],["wm-gridrow",S],["wm-gridcolumn",S],["wm-header",[{from:"@wm/components/page/header",name:"HeaderModule"}]],["wm-html",c],["wm-icon",c],["wm-iframe",c],["wm-iframedialog",D],["wm-label",c],["wm-layoutgrid",S],["wm-left-panel",N],["wm-linearlayout",g],["wm-linearlayoutitem",g],["wm-list",k],["wm-livetable",H],["wm-login",[{from:"@wm/components/advanced/login",name:"LoginModule"}]],["wm-custom",[{from:"@wm/components/advanced/custom",name:"CustomModule"}]],["wm-logindialog",T],["wm-marquee",[{from:"@wm/components/advanced/marquee",name:"MarqueeModule"}]],["wm-menu",v],["wm-media-list",F],["wm-mobile-navbar",L],["wm-mobile-tabbar",[{from:"@wm/mobile/components/page/tab-bar",name:"TabBarModule"}]],["wm-nav",v],["wm-navbar",[{from:"@wm/components/navigation/navbar",name:"NavbarModule"}]],["wm-nav-item",v],["wm-network-info-toaster",c],["wm-number",d],["wm-page",l],["wm-layout",l],["wm-page-content",l],["wm-pagedialog",j],["wm-pagination",u],["wm-panel",B],["wm-panel-footer",B],["wm-picture",c],["wm-popover",$],["wm-progress-bar",r],["wm-prefab",V],["wm-prefab-container",V],["wm-progress-circle",r],["wm-radioset",d],["wm-rating",[{from:"@wm/components/input/rating",name:"RatingModule"}]],["wm-richtexteditor",[{from:"@wm/components/basic/rich-text-editor",name:"RichTextEditorModule"}]],["wm-right-panel",[{from:"@wm/components/page/right-panel",name:"RightPanelModule"}]],["wm-select",d],["wm-search",h],["wm-segmented-content",G],["wm-segmented-control",G],["wm-slider",W],["wm-spinner",c],["wm-switch",d],["wm-table",q],["wm-tabs",U],["wm-tabpane",U],["wm-text",d],["wm-textarea",d],["wm-time",x],["wm-tile",[{from:"@wm/components/containers/tile",name:"TileModule"}]],["wm-top-nav",[{from:"@wm/components/page/top-nav",name:"TopNavModule"}]],["wm-tree",[{from:"@wm/components/basic/tree",name:"TreeModule"}]],["wm-video",c],["wm-wizard",z],["wm-wizardstep",z]]),K={COMMENTS_FORMAT:/\/\*((?!\*\/).|\n)+\*\//g,SELECTOR_FORMAT:/[^\{\}]*\{/gi,SELECTOR_EXCLUDE_FORMAT:/(@keyframes|@media|@font-face|@comment[0-9]+|from|to|[0-9]+%)\b/i},J={accessroles:"*accessroles","ng-if":"*ngIf",showindevice:"*wmShowInDevice","ng-class":"[ngClass]","data-ng-class":"[ngClass]","data-ng-src":"src","ng-src":"src","data-ng-href":"href","ng-href":"href","ng-disabled":"disabled","data-ng-disabled":"disabled","ng-model":'[ngModelOptions]="{standalone: true}" [(ngModel)]'},Z=e=>e?(e=e.trim()).startsWith("bind:")?e.substr(5):void 0:null,X=e=>(""+e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ee=new Map,te=new t.HtmlParser,ie=()=>"",ne=".wm-app",ae=e=>{let t=J[e.name];const n=e.valueSpan?e.value:void 0;if("showindevice"===e.name&&i.isMobileApp()&&(t=""),t)return"accessroles"===e.name||"showindevice"===e.name?[t,`'${n}'`]:[t,X(n)];if("o"===(a=e.name)[0]&&"n"===a[1]&&"-"===a[2])return(e=>[`${e.name.substr(3)}.event`,e.value])(e);var a;const s=Z(e.value);return s?((e,t)=>[`${e.name}.bind`,X(t)])(e,s):[e.name,X(n)]},se=e=>{const t=e.split(".");if("Variables"===t[0]||"Widgets"===t[0])return`${t[0]}.${t[1]}`},oe=(()=>{const e=new Map,t=["required"];return{set:i=>{i.forEach(((i,n)=>{t.includes(n)&&e.set(n,i)}))},get:t=>{const i=new Map;return e.forEach(((e,n)=>{!t.get(n)&&i.set(n,e)})),i},clear:()=>{e.clear()}}})(),re=e=>{let t="";return e.forEach(((i,n)=>{if(t+=` ${n}`,i&&(i=i.trim(),"[ngClass]"===n&&i.startsWith("{")&&(i=i.replace(/"/g,"'")),"show.bind"===n&&"true"===e.get("deferload")&&(i=i+'" *lazyLoad="'+`&apos;${i.replace(/&apos/g,"&quot").replace(/&quot/g,"\\&quot")}&apos;`),t+=`="${i}"`,"showindevice"===n&&"all"!==i)){const e=[];i.includes("xs")&&e.push("Viewport.isMobileType"),i.includes("sm")&&e.push("(Viewport.isTabletType && Viewport.orientation.isPortrait)"),i.includes("md")&&e.push("(Viewport.isTabletType && Viewport.orientation.isLandscape)"),t+=` *ngIf="${e.join(" || ")}"`}})),t},le=["padding","borderwidth","margin"],ce="unset",de=e=>{Array.from(e.keys()).forEach((t=>{if(le.includes(t)){const i={},n=e.get(t);e.delete(t),((e,t,i)=>{let n,a,s,o,r,l=t,c="";function d(t,i){i===ce&&(i=""),e[l+t+c]=i}"borderwidth"===t&&(c="width",l="border"),n=i,-1!==n.indexOf(ce)?(n=n.split(" "),a=n[0],s=n[1]||n[0],o=n[2]||n[0],r=n[3]||n[1]||n[0],d("top",a),d("right",s),d("bottom",o),d("left",r)):("borderwidth"===t&&(l="borderwidth"),e[l]=i)})(i,t,n),Object.keys(i).forEach((t=>{i[t]&&e.set(t,i[t])}))}}))},pe=(e,i,n)=>{const a=ee.get(e.name);let s,o,r;a&&(s=a.pre||ie,o=a.post||ie,r=a.template||ie);let l,c,d,p="";n||(n=[]);if(e instanceof t.Element){let u;a&&(c=((e,t,i)=>{if(!e.requires)return[];let n=e.requires;return"string"==typeof n&&(n=[n]),Array.isArray(n)?n.map((n=>{for(let t=i.length-1;t>=0;t--)if("tableName"===i[t].name)return e[i[t].value];for(let e=t.length-1;e>=0;e--)if(t[e].nodeName===n)return t[e].provide})):[]})(a,n,e.attrs),d=new Map,r(e,d,...c)),l=(e=>{const t=new Map;if(e.forEach((e=>{let[i,n]=ae(e);t.set(i,n)})),t.get("dataset.bind")){const e=se(t.get("dataset.bind"));e&&t.set("datasource.bind",e)}return t})(e.attrs),de(l);const h=e.name.replace(":svg:svg","svg").replace(":svg:","svg:");if(a){if(p=s(l,d,...c),a.provide){if(u={nodeName:e.name,provide:_.isFunction(a.provide)?a.provide(l,d,...c):a.provide},"wm-table"===e.name){const t=ee.get("wm-table-column");t[_.find(e.attrs,(e=>"name"===e.name)).value+u.provide.get("table_reference")]=u.provide,ee.set("wm-table-column",t)}n.push(u)}}else p=`<${h} ${re(l)}>`;e.children.forEach((e=>{if(e.attrs){let i,n,a,s;if(e.attrs.forEach((function(e){"showindevice"===e.name?i=e:"accessroles"===e.name?n=e:"deferload"===e.name?a=e:"show"===e.name&&(s=e)})),i&&n||i&&a||n&&a){const o={},r=i?new t.Element("ng-container",[],[],o,o,o):"",l=n?new t.Element("ng-container",[],[],o,o,o):"",c=a?new t.Element("ng-container",[],[],o,o,o):"";let d,p;if(r&&r.attrs.push(i),l&&l.attrs.push(n),c&&(c.attrs.push(a),s&&c.attrs.push(s)),_.remove(e.attrs,(function(e){return"showindevice"===e.name||"accessroles"===e.name||"deferload"===e.name})),i&&n?(d=r,p=l):i&&a?(d=r,p=c):n&&a&&(d=c,p=l),d.children=[e],p.children=[d],i&&n&&a){const t=c;t.children=[p],e=t}else e=p}}return p+=pe(e,i,n)})),a?(u&&n.splice(n.indexOf(u),1),p+=o(l,d,...c)):e.endSourceSpan&&!t.getHtmlTagDefinition(e.name).isVoid&&(p+=`</${h}>`)}else e instanceof t.Text&&(p+=e.value);if(i(Y.get(e.name)),a&&a.imports){let e=[];e="function"==typeof a.imports?a.imports(l):a.imports,e.forEach((e=>{i(Y.get(e))}))}return p};e.WIDGET_IMPORTS=Y,e.clearChildAttrs=()=>(oe.clear(),""),e.getAttrMarkup=re,e.getBoundToExpr=Z,e.getChildAttrs=e=>re(oe.get(e)),e.getDataSource=se,e.getFormMarkupAttr=e=>{if(e.get("datavalue.bind")){const t=se(e.get("datavalue.bind"));e.set("datavaluesource.bind",t)}return re(e)},e.processNode=pe,e.register=(e,t)=>ee.set(e,t()),e.scopeComponentStyles=(e,t,i="")=>{e=e.toLowerCase();const n={};let a=0;if(i.startsWith("/*DISABLE_SCOPING*/"))return i;i=(i=i.replace(K.COMMENTS_FORMAT,(e=>{const t=`@comment${a++}{`;return n[t]=e,t}))).replace(K.SELECTOR_FORMAT,(i=>{if(!K.SELECTOR_EXCLUDE_FORMAT.test(i)){const n=i.match(/\S/).index;let a="";n>0&&(a=i.substring(0,n),i=i.substring(n)),!i.startsWith("/*")&&i.trim().length>0&&(i=i.split(",").map((i=>{let n=ne;const a=(i=i.trim()).indexOf(" ");if(i.startsWith(ne)){if(!(a>0))return i;n=i.substring(0,a),i=i.substring(a+1)}return 0===t||"PAGE"===t?i=`${n} app-page-${e} ${i}`:1===t||"PREFAB"===t?i=`${n} app-prefab-${e} ${i}`:2!==t&&"PARTIAL"!==t||(i=`${n} app-partial-${e} ${i}`),i})).join(",")),i=a+i}return i}));for(const e in n)i=i.replace(e,n[e]);return i},e.setChildAttrs=e=>(oe.set(e),""),e.transpile=(e="")=>{if(!e.length)return;let t=[];const i=te.parse(e,"");if(i.errors.length)return;let n="";for(const e of i.rootNodes)n+=pe(e,(e=>{e&&(t=t.concat(e))}));return t=_.uniqWith(t,_.isEqual),t=_.sortBy(t,["from","name"]),{markup:n,requiredWMComponents:t}}})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("@wm/core"),require("rxjs"),require("@wavemaker/variables")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/common/http","@wm/core","rxjs","@wavemaker/variables"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.http={}),e.ng.core,e.ng.common,e.ng.common.http,e.wm.core,e.rxjs,e.wm_common_variables)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l,c=r(t),d=r(n);!function(e){e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User"}(l||(l={}));class p extends a.AbstractHttpService{constructor(e){super(),this.httpClient=e,this.nonBodyTypeMethods=["GET","DELETE","HEAD","OPTIONS","JSONP"],this.sessionTimeoutObservable=new s.Subject,this.sessionTimeoutQueue=[]}handleSessionTimeout(e,t){this.sessionTimeoutQueue.push({requestInfo:e,sub401:t}),this.on401()}generateRequest(e){let t=new n.HttpHeaders,i=new n.HttpParams;const s=e.headers,o=e.params,r=e.responseType,l=e.withCredentials;let c,d;e.isDirectCall||(t=t.append("X-Requested-With","XMLHttpRequest")),s&&Object.entries(s).forEach((([e,i])=>{(a.isNumber(i)||a.isBoolean(i))&&(i=i.toString()),t=t.append(e,i)})),o&&Object.entries(o).forEach((([e,t])=>i=i.append(e,t)));const p={headers:t,params:i,responseType:r,withCredentials:l};return _.includes(this.nonBodyTypeMethods,e.method&&e.method.toUpperCase())&&void 0===e.data?(c=p,d=null):(c=e.data,d=p),new n.HttpRequest(e.method,e.url,c,d)}sendCallAsObservable(e,t){const i=this.generateRequest(e);return this.httpClient.request(i)}sendCall(e,t,i){return new Promise(((n,a)=>{t._observable=this.sendCallAsObservable(e,i).subscribe((e=>{e&&e.type&&n(e)}),(e=>{a(e)}))}))}send(e){const t=this.generateRequest(e);return new Promise(((e,i)=>{this.httpClient.request(t).toPromise().then((t=>{e(t)}),(t=>{if(this.isPlatformSessionTimeout(t))t._401Subscriber.asObservable().subscribe((t=>{e(t)}),(e=>{i(e)}));else{const e=o.getErrMessage(t,this.getLocale());i({error:e,details:t})}}))}))}cancel(e,t){e._observable&&e._observable.unsubscribe(),t&&t._uploadProgress&&t._uploadProgress.unsubscribe()}setLocale(e){this.localeObject=e}getLocale(){return this.localeObject}getHeader(e,t){return e.headers.get(t)}isPlatformSessionTimeout(e){return 401===e.status&&"Session Not Found"===this.getHeader(e,"x-wm-login-errormessage")}get(e,t){return(t=t||{}).url=e,t.method="get",this.send(t).then((e=>e.body))}post(e,t,i){return(i=i||{}).url=e,i.method="post",i.data=t,this.send(i)}put(e,t,i){return(i=i||{}).url=e,i.method="put",i.data=t,this.send(i)}patch(e,t,i){return(i=i||{}).url=e,i.method="patch",i.data=t,this.send(i)}delete(e,t){return(t=t||{}).url=e,t.method="delete",this.send(t)}head(e,t){return(t=t||{}).url=e,t.method="head",this.send(t)}jsonp(e,t){return(t=t||{}).url=e,t.method="jsonp",this.send(t)}upload(e,t,i){const a=new n.HttpRequest("POST",e,t,{reportProgress:!0});return this.httpClient.request(a)}uploadFile(e,t,i,n){return new Promise(((a,s)=>{i.request=this.upload(e,t,n).subscribe((e=>{if(e.type===l.UploadProgress){const t=Math.round(100*e.loaded/e.total);n.notify(t)}e.type===l.Response&&a(e.body)}),(e=>{s(e)}))}))}registerOnSessionTimeout(e){this.sessionTimeoutObservable.asObservable().subscribe(e)}on401(){this.sessionTimeoutObservable.next(void 0)}pushToSessionFailureQueue(e){this.sessionTimeoutQueue.push({callback:e})}executeSessionFailureRequests(){const e=this.sessionTimeoutQueue,t=this;t.sessionTimeoutQueue=[],e.forEach((e=>{_.isFunction(e.callback)?e.callback():(e.requestInfo.headers.headers.delete("x-wm-xsrf-token"),t.httpClient.request(e.requestInfo).subscribe((t=>{t&&t.type&&e.sub401&&e.sub401.next(t)}),(t=>{e.sub401.error(t)})))}))}static{this.\u0275fac=function(e){return new(e||p)(c.\u0275\u0275inject(d.HttpClient))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(p,[{type:t.Injectable}],(function(){return[{type:d.HttpClient}]}),null);class u{constructor(){this.headers=[]}wmToAngularRequest(e){let t;return t=new n.HttpRequest(e.method,e.url),t=t.clone(),t.body=e.body,t.method=e.method,t.responseType=e.responseType,t.reportProgress=e.reportProgress,t.urlWithParams=e.url,t.withCredentials=e.withCredentials,e.headers.forEach(((e,i)=>{t.headers=t.headers.append(i,e)})),t}angularToWmRequest(e){let t=new u,i=new Map;return t.body=e.body,t.method=e.method,t.responseType=e.responseType,t.reportProgress=e.reportProgress,t.url=e.urlWithParams,t.withCredentials=e.withCredentials,e.headers.keys().forEach((t=>{i.set(t,e.headers.headers.get(t.toLowerCase())[0])})),t.headers=i,t}}class h extends u{constructor(){super()}wmToAngularResponse(e){let t;return t=new n.HttpResponse,t=t.clone(),t.body=e.body,t.error=e.error,t.message=e.message,t.url=e.url,t.ok=e.ok,t.status=e.status,t.statusText=e.statusText,e.headers.forEach(((e,i)=>{t.headers=t.headers.append(i,e)})),t}angularToWmResponse(e){let t,i=new Map;return t=new h,t.body=e.body,t.error=e.error,t.message=e.message,t.url=e.url,t.ok=e.ok,t.status=e.status,t.statusText=e.statusText,e.headers.keys().forEach((t=>{i.set(t,e.headers.headers.get(t.toLowerCase())[0])})),t.headers=i,t}}class m{static forRoot(){return{ngModule:i.CommonModule,providers:[{provide:a.AbstractHttpService,useClass:p}]}}static{this.\u0275fac=function(e){return new(e||m)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:m})}static{this.\u0275inj=c.\u0275\u0275defineInjector({imports:[i.CommonModule,n.HttpClientModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(m,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.HttpClientModule],declarations:[]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&c.\u0275\u0275setNgModuleScope(m,{imports:[i.CommonModule,n.HttpClientModule]}),e.HttpServiceImpl=p,e.HttpServiceModule=m,e.WmHttpRequest=u,e.WmHttpResponse=h})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.oAuth={}),e.ng.core,e.rxjs,e.wm.core)}(this,(function(e,t,i,n){"use strict";function a(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var s=a(t),o=a(n);const r=".access_token",l="pkce",c="implicit";let d,p;const u=e=>{let t,i,n;const a=e.urlParams;if(n={url:"services/oauth2/:providerId/authorizationUrl",method:"GET"},e.config){n.url=(e.config.url||"")+n.url,n.method=e.config.method||n.method,n.headers=n.headers||{};for(const i in e.config.headers)t=e.config.headers[i],n.headers[i]=t}if(a)for(i in a)a.hasOwnProperty(i)&&(t=a[i],_.isUndefined(t)||null===t||(n.url=n.url.replace(new RegExp(":"+i,"g"),t)));return e.params&&(n.params=e.params),_.isUndefined(e.data)||(n.data=e.data),e.dataParams&&(n.data.params=e.dataParams),e.headers&&(n.headers=e.headers),n.byPassResult=e.byPassResult,n.isDirectCall=e.isDirectCall,n.isExtURL=e.isExtURL,n.preventMultiple=e.preventMultiple,n.responseType=e.responseType,n},h={},m={STUDIO:"WM_STUDIO_",RUN:"WM_RUN_"},g="width=400,height=600",f=e=>{const t=v(e);localStorage.removeItem(t)};function v(e){let t;return t=m.RUN+n._WM_APP_PROJECT.id+"_"+e+r,t}function b(e,t){const i=v(e);localStorage.setItem(i,t)}function y(e,t,i,n,a,s){const o=e+r,c=localStorage.getItem(o);if((!n||n.origin===window.location.origin)&&c)if(I(s,l)){const n="client_id="+s.clientId+"&code="+c+"&grant_type=authorization_code&code_verifier="+d+"&redirect_uri="+p;a.send({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:s.accessTokenUrl,data:n}).then((function(n){w(e,t,i,o,n.body.access_token)}))}else w(e,t,i,o,c)}function w(e,t,i,n,a){i(e),localStorage.removeItem(n),b(e,a),window.removeEventListener("message",h[e]),setTimeout((()=>{delete h[e],t&&t(a)}))}function P(e,t,i,n,a,s){!function(){const e="dummy_key";localStorage.setItem(e,e),localStorage.removeItem(e)}();const o=moment.duration(moment().format("HH:mm"),"HH:mm").subtract(n),l=D(e,!0);l?(a.accesstoken_retrieved=!0,b(e,l),localStorage.removeItem(e+r),s(e),t&&t()):o.minutes()>1&&t&&!a.accesstoken_retrieved?t("error"):setTimeout((()=>{P(e,t,i,n,a,s)}),3e3)}function C(e,t,i,n){e&&h[t]&&(e.closed?I(n,l)||(window.removeEventListener("message",h[t]),delete h[t],i&&i("error")):setTimeout(C.bind(void 0,e,t,i,n),3e3))}function A(e,t,i,n,a,s,o,r,l){I(s,c)&&(e=x(t,s,o,null,r,l)),window.open(e,"_blank",g),P(t,i,n,moment.duration(moment().format("HH:mm"),"HH:mm"),{accesstoken_retrieved:!1},a)}function I(e,t){let i=_.get(e,"oauth2Flow");return i=i?i.toLowerCase():i,t===l&&!0===_.get(e,"oAuth2Pkce.enabled")&&(i=l),i===t}function E(e,t,i,n,a,s,o,r,p){if(I(a,c))O(e=x(t,a,s,null,o,r),t,i,n,a,s,o,r,p);else if(I(a,l)){let l;if(d=function(){const e=new Uint32Array(28);return window.crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).substr(-2))).join("")}(),"plain"===_.get(a,"oAuth2Pkce.challengeMethod"))l=d,O(e=x(t,a,s,l,o,r),t,i,n,a,s,o,r,p);else{const c=function(e){const t=(new TextEncoder).encode(e),i=new jsSHA("SHA-256","UINT8ARRAY",{encoding:"UTF8"});return i.update(t),i.getHash("ARRAYBUFFER")}(d);u=c,l=btoa(String.fromCharCode.apply(null,new Uint8Array(u))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),O(e=x(t,a,s,l,o,r),t,i,n,a,s,o,r,p)}}else O(e,t,i,n,a,s,o,r,p);var u}function O(e,t,i,a,s,o,l,c,d){let p;n.hasCordova()?(window.open(e,"_system"),window.OAuthInMobile(t).then((e=>{const n=t+r;e?(localStorage.setItem(n,e),y(t,i,a,null,d,s)):i("error")}))):(p=window.open(e,"_blank",g),function(e,t,i,n,a){h[e]=y.bind(void 0,e,t,i,null,n,a),window.addEventListener("message",h[e],!1)}(t,i,a,d,s),C(p,t,i,s))}function x(e,t,i,a,s,o){p=window.location.href.split("/#/")[0]+"/oAuthCallback.html";const d=t.clientId,u=t.scopes.map((function(e){return e.name})).join(" ");let h;!0===n.getWmProjectProperties().isTestRuntime&&(p=location.protocol+"//"+window.location.host+"/studio/oAuthCallback.html"),"MOBILE"===i&&(p=o+"oAuthCallback.html");const m=I(t,c)?c:l;h={providerId:e,suffix:r,requestSourceType:i,flow:m,scheme:s};const g=t.authorizationUrl.split("?");let f;f=1===g.length?"?":g.length>1&&""!==g[1]?"&":"";const v=t.authorizationUrl+f+"client_id="+d+"&redirect_uri="+p+"&state="+encodeURIComponent(JSON.stringify(h))+"&scope="+encodeURIComponent(u);let b;if(m===c){b=v+"&response_type="+(t.responseType?t.responseType:"token")}else b=v+"&response_type=code&code_challenge="+a+"&code_challenge_method="+_.get(t,"oAuth2Pkce.challengeMethod");return b}function R(e,t,i,a,s,o,r,d,p,u,h){const m=I(d,c)||I(d,l)?e:e.body;o({name:t,url:m,invoke:()=>{n.isIE()?A(e,t,i,a,r,d,p,u,h):E(m,t,i,r,d,p,u,h,s)}})}const D=(e,t)=>{const i=v(e);return t?localStorage.getItem(e+r):localStorage.getItem(i)},S=(e,t,i,a,s,o,r,d,p,h)=>{let m="WEB";if(e)n.isIE()?A(e,t,i,a,r):E(e,t,i,r,d,m,s);else{if(n.hasCordova()&&(m="MOBILE"),!I(d,c)&&!I(d,l))return function(e,t){const i=u({target:"oauthConfiguration",action:"getAuthorizationUrl",urlParams:{projectId:n._WM_APP_PROJECT.id,providerId:e.providerId},params:{requestSourceType:e.requestSourceType}});return t.send(i)}({providerId:t,requestSourceType:m},s).then((e=>{R(e,t,i,a,s,o,r,d,m,p,h)}));R(e,t,i,a,s,o,r,d,m,p,h)}};class T{constructor(e){this.httpService=e,this.providers=new i.Subject,this.providersConfig=[]}getOAuthProvidersAsObservable(){return this.providers.asObservable()}addProviderConfig(e){_.find(this.providersConfig,{name:e.name})||this.providersConfig.push(e),this.providers.next(this.providersConfig)}removeProviderConfig(e){_.remove(this.providersConfig,(t=>t.name===e)),this.providers.next(this.providersConfig)}perfromOAuthorization(e,t,i,n,a,s,o){S(e,t,i,n,this.httpService,this.addProviderConfig.bind(this),this.removeProviderConfig.bind(this),a,s,o)}getAccessToken(e,t){return D(e,t)}removeAccessToken(e){f(e)}static{this.\u0275fac=function(e){return new(e||T)(s.\u0275\u0275inject(o.AbstractHttpService))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&s.\u0275setClassMetadata(T,[{type:t.Injectable}],(function(){return[{type:o.AbstractHttpService}]}),null);class M{static forRoot(){return{ngModule:M,providers:[T]}}static{this.\u0275fac=function(e){return new(e||M)}}static{this.\u0275mod=s.\u0275\u0275defineNgModule({type:M})}static{this.\u0275inj=s.\u0275\u0275defineInjector({})}}("undefined"==typeof ngDevMode||ngDevMode)&&s.\u0275setClassMetadata(M,[{type:t.NgModule,args:[{}]}],null,null),e.OAuthModule=M,e.OAuthService=T,e.getAccessToken=D,e.parseConfig=u,e.performAuthorization=S,e.removeAccessToken=f})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/router","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.security={}),e.ng.core,e.ng.common,e.ng.router,e.wm.core)}(this,(function(e,t,i,n,a){"use strict";function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var o=s(t),r=s(i),l=s(n),c=s(a);const d="wm_xsrf_token";class p{constructor(e,t,i,n,a){this.injector=e,this.$http=t,this.routerService=i,this.activatedRoute=n,this._location=a,this.requestQueue={}}isLoaded(){return this.config}get(){return this.config}load(e){return this.loadPromise?this.loadPromise:!e&&this.config?Promise.resolve(this.config):(this.loadPromise=new Promise(((e,t)=>{this.$http.send({url:"./services/security/info",method:"GET"}).then((t=>{this.config=t.body,this.lastLoggedInUser=a.getClonedObject(this.loggedInUser),this.loggedInUser=this.config.userInfo,e(t.body)})).catch((e=>{t(e)})).finally((()=>{this.loadPromise=null}))})),this.loadPromise)}getWebConfig(e,t){this.get()?a.triggerFn(e,this.get()):this.load().then((t=>{a.triggerFn(e,t)}),t)}getConfig(e,t){function i(e,t,i){_.forEach(this.requestQueue[e],(e=>a.triggerFn(e[t],i))),this.requestQueue[e]=null}this.get()?a.triggerFn(e,this.get()):(this.requestQueue.config=this.requestQueue.config||[],this.requestQueue.config.push({success:e,error:t}),this.requestQueue.config.length>1||a.hasCordova()||this.getWebConfig(function(e){e.homePage=a.getWmProjectProperties().homePage,e.userInfo,this.config=e,this.lastLoggedInUser=a.getClonedObject(this.loggedInUser),this.loggedInUser=e.userInfo,i.call(this,"config","success",this.get())}.bind(this),function(e){i.call(this,"config","error",e)}.bind(this)))}getLastLoggedInUsername(){return this.lastLoggedInUser&&this.lastLoggedInUser.userName}getCurrentRoutePage(){const e=this._location.path();let t=e.indexOf("?");return t=-1===t?e.length:t-1,e.substr(1,t)}getCurrentRouteQueryParam(e){let t;return this.activatedRoute.queryParams.subscribe((i=>{t=i[e]})),t}isNoPageLoaded(){return!_.isEmpty(this.getCurrentRoutePage())}getPageByLoggedInUser(){const e=this;return new Promise((t=>{let i;e.getConfig((n=>{n.securityEnabled&&n.authenticated?(i=n.userInfo.landingPage||a.getWmProjectProperties().homePage,e.isXsrfEnabled()):i=a.getWmProjectProperties().homePage,t(i)}),(function(){t(a.getWmProjectProperties().homePage)}))}))}loadPageByUserRole(e){const t=this;return this.getPageByLoggedInUser().then((i=>{(t.isNoPageLoaded()||e)&&(t.getCurrentRoutePage()===i?window.location.reload():t.routerService.navigate([`/${i}`]))}))}navigateOnLogin(){this.loadPageByUserRole(!0)}getRedirectPage(e,t){const i=a.getWmProjectProperties().homePage,n=_.get(e,"loginConfig.pageName");let s,o=t||this.getCurrentRoutePage();return o!==i&&o!==n||(s=this.getCurrentRouteQueryParam("redirectTo"),o=_.isEmpty(s)?void 0:s),o}getRedirectedRouteQueryParams(){let e={};return this.activatedRoute.queryParams.subscribe((t=>{_.forEach(t,((t,i)=>{e[i]=t}))})),e}getQueryString(e){const t=[];return _.forEach(e,(function(e,i){t.push(i+"="+e)})),_.join(t,"&")}appLogin(e,t,i){let n="";return _.each(e,(function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)})),this.$http.send({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"j_spring_security_check",data:n}).then((e=>{const i=e.body?e.body[d]:"";i&&a.hasCordova()&&localStorage.setItem(d,i||""),this.injector.get(a.App).notify("userLoggedIn",{}),a.triggerFn(t,e)}),i)}isAuthenticated(e,t){this.getConfig((function(t){a.triggerFn(e,t.authenticated)}),t)}appLogout(e,t){return this.$http.send({target:"Security",url:"j_spring_security_logout",method:"POST",responseType:"text",byPassResult:!0}).then((t=>{_.set(this.get(),"authenticated",!1),_.set(this.get(),"userInfo",null),this.injector.get(a.App).notify("userLoggedOut",{}),a.triggerFn(e,t)}),t)}getCookieByName(e){return"cookie"}isXsrfEnabled(){return a.hasCordova()?localStorage.getItem(d):this.getCookieByName(d)}onUserLogin(){return new Promise(((e,t)=>{this.getConfig((t=>{if(t.securityEnabled)if(t.authenticated)e();else{const t=this.injector.get(a.App).subscribe("userLoggedIn",(()=>{e(),t()}))}else e()}),t)}))}getLoggedInUser(){return new Promise(((e,t)=>{this.getConfig((i=>{i&&i.userInfo?e(i.userInfo):t()}),t)}))}authInBrowser(){return Promise.reject("This authInBrowser should not be called")}static{this.\u0275fac=function(e){return new(e||p)(o.\u0275\u0275inject(o.Injector),o.\u0275\u0275inject(c.AbstractHttpService),o.\u0275\u0275inject(l.Router),o.\u0275\u0275inject(l.ActivatedRoute),o.\u0275\u0275inject(r.Location))}}static{this.\u0275prov=o.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(p,[{type:t.Injectable}],(function(){return[{type:o.Injector},{type:c.AbstractHttpService},{type:l.Router},{type:l.ActivatedRoute},{type:r.Location}]}),null);class u{static forRoot(){return{ngModule:u,providers:[p]}}static{this.\u0275fac=function(e){return new(e||u)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:u})}static{this.\u0275inj=o.\u0275\u0275defineInjector({})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(u,[{type:t.NgModule,args:[{}]}],null,null),e.SecurityModule=u,e.SecurityService=p})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/core"),require("@wm/security"),require("@wavemaker/focus-trap/dist/focus-trap"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@swipey")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/core","@wm/security","@wavemaker/focus-trap/dist/focus-trap","@angular/platform-browser","rxjs","rxjs/operators","@angular/forms","@swipey"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.base={}),e.ng.core,e.ng.common,e.wm.core,e.wm.security,e.focusTrap,e.ng.platformBrowser,e.rxjs,e.rxjs.operators,e.ng.forms,e.swipey)}(this,(function(e,t,i,n,a,s,o,r,l,c,d){"use strict";function p(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var u=p(t),h=p(i),m=p(n),g=p(o);const f=new t.InjectionToken("WidgetConfig");class v{}class b{}const y=new t.InjectionToken("Context Provider Reference"),w=new Set([n.FormWidgetType.SELECT,n.FormWidgetType.CHECKBOXSET,n.FormWidgetType.RADIOSET,n.FormWidgetType.SWITCH,n.FormWidgetType.AUTOCOMPLETE,n.FormWidgetType.CHIPS,n.FormWidgetType.TYPEAHEAD,n.FormWidgetType.RATING]),P=(e,t)=>{if(t){let i;return t.replace(/\[(\w+)\]/g,".$1").split(".").forEach((t=>{i=i&&i[t]||(_.isNull(e)?e:e[t])})),i}return e},C=(e,t,i)=>{let a;const s=t.field,o=t.expression,r=t.bindExpression;return r?(a=r.replace("bind:",""),n.checkIsCustomPipeExpression(a)&&(a+=": __1"),a=(e=>{let t,i,n,a,s,o,r,l,c,d="";for(e=e.replace(/\$\[data\[\$i\]/g,"$[__1"),n=0;n<e.length;n++)if(t=e[n],i=e[n+1],"$"===t&&"["===i){for(o=1,c=!1,r=!1,a=n+2;a<e.length;a++)if(s=e[a]," "!==s&&(c||(r='"'===e[a]||"'"===e[a],c=!0),"["===s?o++:"]"===s&&o--,!o)){l=e.substring(n+2,a),d+=r?"__1["+l+"]":l;break}n=a}else d+=t;return d})(a)):a=o||s,r||o?n.$parseExpr(a)(i,Object.assign({},e,{__1:e})):_.get(e,s)},A=(e,t)=>{if(!e||!t)return!1;t=-1===t.indexOf("?")?t:t.substring(0,t.indexOf("?")),e=-1===e.indexOf("?")?e:e.substring(0,e.indexOf("?"));return new RegExp("^(#/|#)"+t+"$").test(e)},I=(e,t)=>e.some((e=>!!A(e.link,t)||(e.children?I(e.children,t):void 0))),E=e=>w.has(e),O=(e,t,i)=>(n.isValidWebURL(e)||(e||(e=i||"resources/images/imagelists/default-image.png"),e=t?n.encodeUrl(e):e,n.stringStartsWith(e,"services/prefabs")),e),x=e=>""===e||"none"===e?e:"url("+O(e)+")";function R(e,i,n){return{provide:i,useExisting:t.forwardRef((()=>e)),multi:n}}function D(e){return R(e,v)}const S=(...e)=>e.join("_"),T={number:["number","integer","big_integer","short","float","big_decimal","double","long","byte"],string:["string","text"],character:["character"],date:["date","time","timestamp","datetime"]},M={number:["exact","notequals","lessthan","lessthanequal","greaterthan","greaterthanequal","null","isnotnull"],string:["anywhereignorecase","anywhere","startignorecase","start","endignorecase","end","exactignorecase","exact","notequalsignorecase","notequals","null","isnotnull","empty","isnotempty","nullorempty"],character:["exactignorecase","exact","notequalsignorecase","notequals","null","isnotnull","empty","isnotempty","nullorempty"],date:["exact","lessthan","lessthanequal","greaterthan","greaterthanequal","null","notequals","isnotnull"]},N={boolean:["exact","null","isnotnull"],clob:[],blob:[]},k=e=>{let t=[];return _.isArray(e)?(e.forEach((e=>{t=t.concat(k(e))})),t):_.isObject(e)?(_.forEach(e,((e,i)=>{e&&(t=t.concat(i.split(" ")))})),t):void 0},L=(e,t)=>{let i,n;const a=e.toAdd||e,s=e.toRemove||t;return _.isObject(e)?(i=_.isArray(a)?a:k(a||[]),n=s?_.isArray(s)?s:k(s):[]):(i=a?[a]:[],n=s?[s]:[]),{toAdd:i,toRemove:n}},F=(e,t,i,a)=>{let s,o,r,l,c,d;a||(a={}),_.forEach(e,((e,p)=>{_.includes(p,".")&&(l=_.split(p,"."),o=l[0],r=l[1],d=!0),a.noModifyTitle?s=p:_.isString(p)?(s=n.prettifyLabel(p),s=n.deHyphenate(s),s=i?n.initCaps(i)+" "+s:s):s=p,p=i?i+"."+p:p,d?(c=_.split(s," "),c=c.length>1?c[c.length-2]+" "+c[c.length-1]:c[0]):c=s;const u=a.setBindingField?{displayName:c,field:p,relatedTable:o,relatedField:r||s}:{displayName:c,relatedTable:o,relatedField:r||s};if(!_.isObject(e)||_.isArray(e)&&!e[0]){if(a.upperBound&&a.columnCount===a.upperBound)return;t.terminals.push(u),a.columnCount+=1}else a.columnCount!==a.upperBound&&t.objects.push(u),_.isArray(e)&&e[0]?F(e[0],t,p+"[0]",a):F(e,t,p,a)}))};var B;e.APPLY_STYLES_TYPE=void 0,(B=e.APPLY_STYLES_TYPE||(e.APPLY_STYLES_TYPE={}))[B.CONTAINER=0]="CONTAINER",B[B.SCROLLABLE_CONTAINER=1]="SCROLLABLE_CONTAINER",B[B.INNER_SHELL=2]="INNER_SHELL",B[B.SHELL=3]="SHELL";const j={backgroundattachment:"backgroundAttachment",backgroundcolor:"backgroundColor",backgroundgradient:"backgroundGradient",backgroundimage:"backgroundImage",backgroundposition:"backgroundPosition",backgroundrepeat:"backgroundRepeat",backgroundsize:"backgroundSize",bordercolor:"borderColor",borderradius:"borderRadius",borderstyle:"borderStyle",borderwidth:"borderWidth",borderbottomwidth:"borderBottomWidth",borderleftwidth:"borderLeftWidth",borderrightwidth:"borderRightWidth",bordertopwidth:"borderTopWidth",color:"color",cursor:"cursor",display:"display",fontsize:"fontSize",fontfamily:"fontFamily",fontstyle:"fontStyle",fontunit:"fontunit",fontvariant:"fontVariant",fontweight:"fontWeight",height:"height",horizontalalign:"textAlign",lineheight:"lineHeight",margin:"margin",marginbottom:"marginBottom",marginleft:"marginLeft",marginright:"marginRight",margintop:"marginTop",opacity:"opacity",overflow:"overflow",padding:"padding",paddingbottom:"paddingBottom",paddingleft:"paddingLeft",paddingright:"paddingRight",paddingtop:"paddingTop",picturesource:"backgroundImage",textalign:"textAlign",textdecoration:"textDecoration",verticalalign:"verticalAlign",visibility:"visibility",whitespace:"whiteSpace",width:"width",wordbreak:"wordbreak",zindex:"zIndex"},V=e=>!!j[e],G={height:!0,overflow:!0,padding:!0,paddingbottom:!0,paddingleft:!0,paddingright:!0,paddingtop:!0},W={textalign:!0},U={textalign:!0,width:!0};function q(t,i,a,s){const o=Object.create(null);s&&s.forEach((e=>o[e]=!0)),i.registerStyleChangeListener(((s,r)=>{if(!(o[s]||a===e.APPLY_STYLES_TYPE.SHELL&&G[s])){if(a===e.APPLY_STYLES_TYPE.INNER_SHELL){if(!G[s])return;"height"===s&&n.setCSS(t,"overflow",r?"auto":"")}if(a!==e.APPLY_STYLES_TYPE.CONTAINER||!W[s]){if(a===e.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER){if(U[s])return;"height"===s&&n.setCSS(t,"overflow",r?"auto":"")}"fontsize"===s||"fontunit"===s?n.setCSS(t,"fontSize",""===i.fontsize?"":i.fontsize+(i.fontunit||"px")):"backgroundimage"===s?n.setCSS(t,"backgroundImage",i.picturesource||x(r)):j[s]&&n.setCSS(t,j[s],r)}}}))}const z="wm-form-field-",H=(()=>{const e=new Map;for(const t in n.FormWidgetType)e.set(z+n.FormWidgetType[t],new Map);return e})(),Q=e=>H.get(e),Y=(e,t)=>{H.set(e,t),window.WM_LOADED_COMPONENTS=[...window.WM_LOADED_COMPONENTS||[],e]};var K;e.PROP_TYPE=void 0,(K=e.PROP_TYPE||(e.PROP_TYPE={}))[K.BOOLEAN=1]="BOOLEAN",K[K.NUMBER=2]="NUMBER",K[K.STRING=3]="STRING";const J={type:e.PROP_TYPE.STRING},Z={type:e.PROP_TYPE.NUMBER},X={type:e.PROP_TYPE.BOOLEAN},ee={arrayType:!0},te=new Map,ie=new n.IDGenerator("widget-id"),ne=new Map([["tap","click"]]),ae={BLOCK:"block",INLINE_BLOCK:"inline-block",INLINE:"inline"},se=new Set(["readonly","autofocus","disabled","startchecked","multiple","selected","required","controls","autoplay","loop","muted","show"]),oe=e=>se.has(e),re=new Set(["width","height","iconheight","iconwidth","popoverwidth","popoverheight","imagewidth","imageheight"]),le=e=>re.has(e),ce=(t,i,a)=>{const s=t.widgetId,o=t[i];n.isChangeFromWatch()||n.$unwatch(S(s,i)),n.resetChangeFromWatch();const r=Q(t.getWidgetSubType()).get(i);if(r){const t=r.type;t&&(a=((t,i,a)=>a===e.PROP_TYPE.BOOLEAN?n.toBoolean(i,oe(t)&&t):a===e.PROP_TYPE.NUMBER?+i:i)(i,a,t))}if(a!==o||n.isObject(a)||n.isObject(o)){if(le(i))a=n.toDimension(a);else if(_.startsWith(a,"resources/")){const e=t;void 0===e._parentPrefab_&&(e._parentPrefab_=t.$element.parent().closest('[prefabname][prefabname!="__self__"]').attr("prefabname")||""),e._parentPrefab_?a=`./app/prefabs/${e._parentPrefab_}/${a}`:r&&a!=r.value&&(a="./"+a)}t[i]=a,V(i)?t.notifyStyleChange(i,a,o):("conditionalclass"===i&&(a=L(a,o)),r&&t.notifyPropertyChange(i,a,o)),n.$appDigest()}},de={set:(e,t,i)=>(ce(e,t,i),!0),get:(e,t)=>{const i=e[t];return _.isFunction(i)?i.bind(e):i}},pe=window.requestAnimationFrame,ue=[];class he{static create(e,t,i){if(window.Proxy)return new Proxy(e,de);{const t=Object.create(e);return n=()=>{for(const t in e)_.isFunction(e[t])&&"constructor"!==t&&"super"!==t&&!_.startsWith(t,"ng")&&(e[t]=e[t].bind(e))},ue.length||pe((()=>{ue.forEach((e=>e())),ue.length=0})),ue.push(n),Object.keys(j).forEach((i=>{Object.defineProperty(t,i,{get:()=>e[i],set:t=>ce(e,i,t)})})),i&&i.forEach(((i,n)=>{Object.defineProperty(t,n,{get:()=>e[n],set:t=>ce(e,n,t)})})),t}var n}}class me{get $element(){return $(this.nativeElement)}constructor(e,i,a){this.inj=e,this.isAttached=!1,this.styleChange=new r.ReplaySubject,this.propertyChange=new r.Subject,this.readyState=new r.Subject,this.destroy=new r.Subject,this.eventHandlers=new Map,this.toBeSetupEventsQueue=[],this.__cloneable__=!1,this.$attrs=new Map,this.isMuted=!1;const s=e.get(t.ElementRef);this.nativeElement=s.nativeElement,this.viewParentApp=e?e.get(n.App):t.inject(n.App),this.widgetType=i.widgetType,this.widgetSubType=i.widgetSubType||i.widgetType,this.viewContainerRef=e.get(t.ViewContainerRef);let l=this.inj._lView;this.viewParent=n.findParent(l,this.viewParentApp),this.context=this.inj._lView[8],this.displayType=i.displayType||ae.BLOCK,this.widget=this.createProxy(),this.eventManager=e.get(o.EventManager),this.nativeElement.widget=this.widget,this.appLocale=e.get(n.App).appLocale||{},this.initContext(),i.hostClass&&n.addClass(this.nativeElement,i.hostClass),this.widgetId=this.generateWidgetId(),n.setAttr(this.nativeElement,"widget-id",this.widgetId,!0),this.registerStyleChangeListener(this.onStyleChange,this),this.registerPropertyChangeListener(this.onPropertyChange,this),a?(this.delayedInit=!0,a.then((()=>{this.initWidget(),this.setInitProps()}))):this.initWidget()}getNativeElement(){return this.nativeElement}getWidgetType(){return this.widgetType}getWidgetSubType(){return this.widgetSubType}getWidget(){return this.widget}setProperty(e,t){this.widget[e]=t}getViewParent(){return this.viewParent}notifyStyleChange(e,t,i){this.styleChange.next({key:e,nv:t,ov:i})}notifyPropertyChange(e,t,i){this.propertyChange.next({key:e,nv:t,ov:i})}registerStyleChangeListener(e,t){t&&(e=e.bind(t)),this.styleChange.subscribe((({key:t,nv:i,ov:n})=>e(t,i,n)))}registerReadyStateListener(e,t){t&&(e=e.bind(t)),this.readyState.isStopped?e():this.readyState.subscribe((()=>e()))}registerPropertyChangeListener(e,t){t&&(e=e.bind(t)),this.propertyChange.subscribe((({key:t,nv:i,ov:n})=>e(t,i,n)))}registerDestroyListener(e,t){t&&(e=e.bind(t)),this.destroy.subscribe((()=>{}),(()=>{}),(()=>e()))}getDisplayType(){return this.displayType}createProxy(){return he.create(this,this.widgetSubType,Q(this.widgetSubType))}initContext(){const e=this.context||{},t=this.inj.get(y,{});if(this.viewParent!==e?this.context=e:this.context={},t){let e={};_.isArray(t)?_.forEach(t,(t=>{Object.assign(e,t)})):e=t,this.context=Object.assign({},e,this.context)}}setWidgetProperty(e,t){this.widget[e]=t}getAttr(e){return this.$attrs.get(e)}getAppInstance(){return this.inj.get(n.App)}generateWidgetId(){return ie.nextUid()}onPropertyChange(e,t,i){if("show"===e)this.nativeElement.hidden=!t;else if("hint"===e)n.isMobileApp()||n.setAttr(this.nativeElement,"title",t);else if("class"===e){n.switchClass(this.nativeElement,t,i);let e=t.match(/(\W|^)(h([0-6]))(?=\s|$)/);e&&(n.setAttr(this.nativeElement,"role","heading"),n.setAttr(this.nativeElement,"aria-level",e[3]))}else if("name"===e||"tabindex"===e)n.setAttr(this.nativeElement,e,t),"name"===e&&t&&((e,t,i,a)=>{n.isDefined(e.Widgets)&&(a&&(e.Widgets[a]=void 0),i&&(e.Widgets[i]=t))})(this.viewParent,this.widget,t,i);else if("conditionalclass"===e)a=t.toAdd,s=t.toRemove,o=this.nativeElement,s&&s.length&&n.removeClass(o,_.join(s," ")),a&&a.length&&n.addClass(o,_.join(a," "));else if("autoplay"===e){const e="wm-audio"===this.widgetType?"audio":"video";this.nativeElement.querySelector(e).load()}else"conditionalstyle"===e?((e,t,i)=>{t&&_.isObject(t)&&Object.keys(t||{}).forEach((function(e){n.setCSS(i,e,"")}));e&&_.isObject(e)&&n.setCSSFromObj(i,e)})(t,i,this.nativeElement):"animation"===e?n.addClass(this.nativeElement,"animated "+t):"disabled"===e&&(!0===t?n.setAttr(this.nativeElement,"disabled","true",!0):n.removeAttr(this.nativeElement,"disabled",!0));var a,s,o}onStyleChange(e,t,i){}registerWidget(e){this.registerDestroyListener(((e,t,i,a)=>{let s=!1;return te.set(i,e),a&&n.isDefined(t.Widgets)&&(s=!0,t.Widgets[a]=e),()=>{te.delete(i),s&&(t.Widgets[a]=void 0)}})(this.widget,this.viewParent,this.widgetId,e))}getMappedEventName(e){return ne.get(e)||e}handleEvent(e,t,i,n,a){this.eventManager.addEventListener(e,t,(e=>{if(n.$event=e,"delayed"!==a)return i();setTimeout((()=>i()),150)}))}processEventAttr(e,t,i){const a=n.$parseEvent(t),s=this.context;s.widget=this.widget;const o=a.bind(void 0,this.viewParent,s),r=()=>{let t;n.$invokeWatchers(!0);try{if(s.$event=s.$event||new window.CustomEvent(e),t=o(),!(t instanceof Promise))return t;t.then((e=>e),(e=>e))}catch(e){console.error(e)}};this.eventHandlers.set(this.getMappedEventName(e),{callback:r,locals:s});this[_.camelCase(`on-${e}`)]=r,this.toBeSetupEventsQueue.push((()=>{this.handleEvent(this.nativeElement,this.getMappedEventName(e),r,s,i)}))}processBindAttr(e,t){this.initState.delete(e),this.registerDestroyListener(n.$watch(t,this.viewParent,this.context,(t=>this.widget[e]=t),S(this.widgetId,e),"datasource"===e,this.widgetProps.get(e),(()=>this.isMuted)))}removePropertyBinding(e){n.$unwatch(S(this.widgetId,e))}invokeEventCallback(e,t){const i=this.eventHandlers.get(e);if(i){const e=i.callback,n=i.locals||{};if(e)return e(Object.assign(n,t))}}processAttr(e,t){const{0:i,1:a,2:s,length:o}=e.split(".");"bind"===a?("show"===i&&(this.nativeElement.hidden=!0),this.processBindAttr(i,t)):"event"===a?this.processEventAttr(i,t,s):1===o&&("class"===e?n.removeClass(this.nativeElement,t):"tabindex"!==e&&"name"!==e||n.removeAttr(this.nativeElement,e),this.initState.set(i,t))}getAttributes(){let e=this.inj._tNode.attrs,t=Array.from(this.nativeElement.attributes).map((e=>e.name));return null===e||_.forEach(e,((e,i)=>{if("number"==typeof e)return!1;if("string"==typeof e&&i%2==0){let i=e.toLowerCase();if(t.includes(i)){let n=t.indexOf(i);t[n]=e}}})),t.sort()}processAttrs(){_.map(this.getAttributes(),(e=>{let t=this.nativeElement.attributes[e].value;this.$attrs.set(e,t),this.processAttr(e,t)}))}initWidget(){this.initState=new Map;const e=Q(this.widgetSubType);e.forEach(((e,t)=>{n.isDefined(e.value)&&this.initState.set(t,e.value)})),this.widgetProps=e,this.processAttrs(),this.registerWidget(this.initState.get("name"))}setInitProps(){this.initState.get("name")&&(this.widget.name=this.initState.get("name")),this.initState.forEach(((e,t)=>{(this.widgetProps.get(t)||V(t))&&"name"!==t&&(this.widget[t]=e)})),this.initState.clear(),this.initState=void 0,this.readyState.next(null),this.readyState.complete()}hasEventCallback(e){return this.eventHandlers.has(e)}focus(){let e=this.$element[0].querySelector("[focus-target]");e||(e=this.$element[0]),e.focus()}execute(e,t){}mute(){this.isMuted=!0}unmute(){this.isMuted=!1}ngOnAttach(){this.isAttached=!0}ngOnDetach(){this.isAttached=!1}ngOnInit(){this.delayedInit||this.setInitProps()}ngAfterViewInit(){if(this.toBeSetupEventsQueue.length)for(const e of this.toBeSetupEventsQueue)e();this.toBeSetupEventsQueue.length=0,this.isAttached=!0}ngAfterContentInit(){}ngOnDestroy(){this.isDestroyed=!0,this.widget=Object.create(null),this.styleChange.complete(),this.propertyChange.complete(),this.destroy.complete(),this.isAttached=!1}static{this.\u0275fac=function(e){return new(e||me)(u.\u0275\u0275inject(u.Injector),u.\u0275\u0275inject(f),u.\u0275\u0275inject(Promise))}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:me,factory:me.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(me,[{type:t.Injectable}],(function(){return[{type:u.Injector},{type:void 0,decorators:[{type:t.Inject,args:[f]}]},{type:Promise}]}),null);class ge extends me{static{this.\u0275fac=function(){let e;return function(t){return(e||(e=u.\u0275\u0275getInheritedFactory(ge)))(t||ge)}}()}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:ge,factory:ge.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(ge,[{type:t.Injectable}],null,null);class fe{constructor(e){this.redraw=()=>{const t=e.$element.closest("[wmtabpane]"),i=e.$element.closest("[wmaccordionpane]").find(".panel-heading");if(!(t.length&&!t.hasClass("active")||i.length&&!i.hasClass("active")))return e.redraw&&e.redraw()}}static{this.\u0275fac=function(e){return new(e||fe)(u.\u0275\u0275directiveInject(v,2))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:fe,selectors:[["","redrawable",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(fe,[{type:t.Directive,args:[{selector:"[redrawable]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[v]}]}]}),null);class ve extends ge{constructor(e,t){super(e,t)}updateRedrawableComponents(e){_.pickBy(e,(e=>{e&&e.nativeElement&&e.nativeElement.hasAttribute("redrawable")&&!_.includes(this.reDrawableComponents._results,e)&&this.reDrawableComponents._results.push(e),e&&e.Widgets&&this.updateRedrawableComponents(e.Widgets)}))}redrawChildren(){this.content&&this.Widgets&&this.updateRedrawableComponents(this.Widgets),setTimeout((()=>{this.reDrawableComponents&&this.reDrawableComponents.forEach((e=>e.redraw()))}),100)}onPropertyChange(e,t,i){super.onPropertyChange(e,t,i),"show"===e&&t&&this.redrawChildren()}static{this.\u0275fac=function(e){u.\u0275\u0275invalidFactory()}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:ve,contentQueries:function(e,t,i){if(1&e&&u.\u0275\u0275contentQuery(i,fe,5),2&e){let e;u.\u0275\u0275queryRefresh(e=u.\u0275\u0275loadQuery())&&(t.reDrawableComponents=e)}},features:[u.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(ve,[{type:t.Directive}],(function(){return[{type:u.Injector},{type:void 0}]}),{reDrawableComponents:[{type:t.ContentChildren,args:[fe,{descendants:!0}]}]});const be="app-container",ye={widgetType:"wm-container",hostClass:be};class we extends ve{static{this.initializeProps=void Y("wm-container",new Map([["animation",J],["class",J],["conditionalclass",ee],["conditionalstyle",ee],["content",J],["name",J],["show",{value:!0,...X}]]))}constructor(t){super(t,ye),n.addClass(this.nativeElement,be),q(this.nativeElement,this,e.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||we)(u.\u0275\u0275directiveInject(u.Injector))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:we,selectors:[["","wmContainer",""]],features:[u.\u0275\u0275ProvidersFeature([D(we)]),u.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(we,[{type:t.Directive,args:[{selector:"[wmContainer]",providers:[D(we)]}]}],(function(){return[{type:u.Injector}]}),null);class Pe{transform(e,t,i){return n.transformFileURI(O(e,t,i))}static{this.\u0275fac=function(e){return new(e||Pe)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"image",type:Pe,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Pe,[{type:t.Pipe,args:[{name:"image"}]}],null,null);const Ce={widgetType:"wm-item-template"};class Ae extends ge{static{this.initializeProps=void Y("wm-item-template",new Map([["content",J]]))}get $index(){return this.context.index}set wmItemTemplate(e){this.widget.content=e}constructor(e,t,i){super(e,Ce),this.app=i,this.nativeElement=t.nativeElement,this.context=this.inj._lView[8]}ngOnInit(){super.ngOnInit(),this.partialParams.item=this.userComponentParams.dataObject}static{this.\u0275fac=function(e){return new(e||Ae)(u.\u0275\u0275directiveInject(u.Injector),u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(m.App))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Ae,selectors:[["","wmItemTemplate",""]],inputs:{userComponentParams:"userComponentParams",wmItemTemplate:"wmItemTemplate"},exportAs:["itemTemplateRef"],features:[u.\u0275\u0275ProvidersFeature([D(Ae)]),u.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Ae,[{type:t.Directive,args:[{selector:"[wmItemTemplate]",exportAs:"itemTemplateRef",providers:[D(Ae)]}]}],(function(){return[{type:u.Injector},{type:u.ElementRef},{type:m.App}]}),{userComponentParams:[{type:t.Input}],wmItemTemplate:[{type:t.Input}]});const _e={widgetType:"wm-repeat-template",hostClass:"app-repeat-item"};class Ie extends ge{static{this.initializeProps=void Y("wm-repeat-template",new Map([["show",X]]))}constructor(e){super(e,_e),q(this.nativeElement,this)}static{this.\u0275fac=function(e){return new(e||Ie)(u.\u0275\u0275directiveInject(u.Injector))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Ie,selectors:[["","wmRepeatTemplate",""]],features:[u.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Ie,[{type:t.Directive,args:[{selector:"[wmRepeatTemplate]"}]}],(function(){return[{type:u.Injector}]}),null);class Ee{constructor(e,i,a){this.templateRef=i,this.viewContainer=a;let s=e?e.get(n.App):t.inject(n.App),o=e._lView;this.viewParent=n.findParent(o,s),this.context=e._lView[8]}set lazyLoad(e){this.unSubscribeFn=n.$watch(e,this.viewParent,this.context,(e=>{!this.embeddedView&&e&&(this.embeddedView=this.viewContainer.createEmbeddedView(this.templateRef,this.context),this.unSubscribeFn())}))}ngOnDestroy(){this.unSubscribeFn()}static{this.\u0275fac=function(e){return new(e||Ee)(u.\u0275\u0275directiveInject(u.Injector),u.\u0275\u0275directiveInject(u.TemplateRef),u.\u0275\u0275directiveInject(u.ViewContainerRef))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Ee,selectors:[["","lazyLoad",""]],inputs:{lazyLoad:"lazyLoad"}})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Ee,[{type:t.Directive,args:[{selector:"[lazyLoad]"}]}],(function(){return[{type:u.Injector},{type:u.TemplateRef},{type:u.ViewContainerRef}]}),{lazyLoad:[{type:t.Input}]});const Oe=["wmMessage",""],xe={widgetType:"wm-message",hostClass:"alert app-message"};class Re extends ge{static{this.initializeProps=void Y("wm-message",new Map([["animation",J],["caption",{value:"Message",...J}],["class",J],["hideclose",{value:!1,...X}],["name",J],["show",{value:!0,...X}],["type",{value:"success",...J}]]))}constructor(e){super(e,xe),this.messageClass="",this.messageIconClass="",this.type="",q(this.nativeElement,this)}showMessage(e,t){e&&(this.caption=e),t&&this.setWidgetProperty("type",t),this.setWidgetProperty("show",!0)}hideMessage(){this.setWidgetProperty("show",!1)}dismiss(e){this.hideMessage(),this.invokeEventCallback("close",{$event:e})}onMessageTypeChange(e){let t,i;switch(e){case"success":t="alert-success",i="wm-sl-l sl-check";break;case"error":t="alert-danger",i="wi wi-cancel";break;case"warn":case"warning":t="alert-warning",i="wm-sl-l sl-alarm-bell";break;case"info":t="alert-info",i="wi wi-info";break;case"loading":t="alert-info alert-loading",i="fa fa-spinner fa-spin"}n.switchClass(this.nativeElement,t,this.messageClass),this.messageClass=t,this.messageIconClass=i}onPropertyChange(e,t,i){"type"===e?this.onMessageTypeChange(t):super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||Re)(u.\u0275\u0275directiveInject(u.Injector))}}static{this.\u0275cmp=u.\u0275\u0275defineComponent({type:Re,selectors:[["","wmMessage",""]],exportAs:["wmMessage"],features:[u.\u0275\u0275ProvidersFeature([D(Re)]),u.\u0275\u0275InheritDefinitionFeature],attrs:Oe,decls:5,vars:7,consts:[["aria-hidden","true",3,"title"],[3,"innerHtml"],["title","Close","type","button","aria-label","Close",1,"btn-transparent","close",3,"hidden","click"],["aria-hidden","true"]],template:function(e,t){1&e&&(u.\u0275\u0275element(0,"i",0)(1,"span",1),u.\u0275\u0275elementStart(2,"button",2),u.\u0275\u0275listener("click",(function(e){return t.dismiss(e)})),u.\u0275\u0275elementStart(3,"span",3),u.\u0275\u0275text(4,"\xd7"),u.\u0275\u0275elementEnd()()),2&e&&(u.\u0275\u0275classMapInterpolate2("icon ",t.type," ",t.messageIconClass,""),u.\u0275\u0275property("title",t.type+"Alert"),u.\u0275\u0275advance(1),u.\u0275\u0275property("innerHtml",t.caption,u.\u0275\u0275sanitizeHtml),u.\u0275\u0275advance(1),u.\u0275\u0275property("hidden",t.hideclose))},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Re,[{type:t.Component,args:[{selector:"[wmMessage]",providers:[D(Re)],exportAs:"wmMessage",template:'<i aria-hidden="true" [title]="type + \'Alert\'" class="icon {{type}} {{messageIconClass}}"></i>\n<span [innerHtml]="caption"></span>\n<button title="Close" type="button" class="btn-transparent close" [hidden]="hideclose" (click)="dismiss($event)" aria-label="Close">\n    <span aria-hidden="true">&times;</span>\n</button>\n'}]}],(function(){return[{type:u.Injector}]}),null);const De={widgetType:"wm-partial",hostClass:"app-partial clearfix"};class Se extends ge{static{this.initializeProps=void Y("wm-partial",new Map([["name",J]]))}constructor(e,t){super(e,De),this.viewport=t,this.registerDestroyListener(this.viewport.subscribe("resize",(e=>this.callback("resize",e)))),this.registerDestroyListener(this.viewport.subscribe("orientationchange",(e=>this.callback("orientationchange",e))))}callback(e,t){t=_.assign({widget:this},t),this.invokeEventCallback(e,t)}ngOnAttach(){this.callback("attach")}ngOnDetach(){this.callback("detach")}ngOnDestroy(){this.callback("destroy"),super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||Se)(u.\u0275\u0275directiveInject(u.Injector),u.\u0275\u0275directiveInject(m.Viewport))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Se,selectors:[["","wmPartial",""]],features:[u.\u0275\u0275ProvidersFeature([D(Se)]),u.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Se,[{type:t.Directive,args:[{selector:"[wmPartial]",providers:[D(Se)]}]}],(function(){return[{type:u.Injector},{type:m.Viewport}]}),null);class Te{constructor(e){this.widgetRef=e,this.widgetRef.partialParams={},this.widgetRef.pageParams=this.widgetRef.partialParams,this.widgetRef.params$=new r.Subject}registerParams(e,t,i,a){this.widgetRef.partialParams[e]=t,!t&&i?this.widgetRef.registerDestroyListener(n.$watch(i,this.widgetRef.getViewParent(),_.get(this.widgetRef,"context"),(t=>{this.widgetRef.partialParams[e]=t,this.widgetRef.params$.next()}))):this.widgetRef.params$.next()}static{this.\u0275fac=function(e){return new(e||Te)(u.\u0275\u0275directiveInject(v,2))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Te,selectors:[["","partialContainer",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Te,[{type:t.Directive,args:[{selector:"[partialContainer]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[v]}]}]}),null);class Me{constructor(e,t,i){this.bindValue=e,this.type=t,this.partialParamsProvider=i}ngOnInit(){this.partialParamsProvider.registerParams(this.name,this.value,this.bindValue,this.type)}static{this.\u0275fac=function(e){return new(e||Me)(u.\u0275\u0275injectAttribute("value.bind"),u.\u0275\u0275injectAttribute("type"),u.\u0275\u0275directiveInject(Te))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Me,selectors:[["","wmParam",""]],inputs:{name:"name",value:"value"}})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Me,[{type:t.Directive,args:[{selector:"[wmParam]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Attribute,args:["value.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["type"]}]},{type:Te}]}),{name:[{type:t.Input}],value:[{type:t.Input}]});class Ne{get name(){return this.componentInstance.name}async _renderPartial(e){this.vcRef.clear(),n.$invokeWatchers(!0);const t=$(this.elRef.nativeElement).closest(".app-prefab");let i;t.length?i=t.attr("prefabname"):this.componentInstance.viewParent&&(i=this.componentInstance.viewParent.prefabName);const a=await this.partialRefProvider.getComponentFactoryRef(e,n.ComponentType.PARTIAL,{prefab:i});if(a){const e=this.vcRef.createComponent(a,0,this.inj);e&&e.instance&&i&&(e.instance.prefabName=i),this.$target||(this.$target=this.elRef.nativeElement.querySelector("[partial-container-target]")||this.elRef.nativeElement),this.$target.innerHTML="",this.$target.appendChild(e.location.nativeElement),this.contentInitialized=!0,setTimeout((()=>this.onLoadSuccess()),200)}}onLoadSuccess(){this.componentInstance.invokeEventCallback("load"),this.app.notify("partialLoaded")}constructor(e,t,i,a,s,o,r,c){this.componentInstance=e,this.vcRef=t,this.elRef=i,this.inj=a,this.app=s,this.resolver=r,this.partialRefProvider=c,this.contentInitialized=!1,this.renderPartial=_.debounce(this._renderPartial,200),e.registerPropertyChangeListener(((t,i,a)=>{"content"===t&&(e.$lazyLoad?e.$lazyLoad=()=>{this.renderPartial(i),e.$lazyLoad=n.noop}:this.renderPartial(i))}));const d=e.params$.pipe(l.filter((()=>this.contentInitialized)),l.debounceTime(200)).subscribe((()=>this.renderPartial(e.content)));e.registerDestroyListener((()=>d.unsubscribe()))}static{this.\u0275fac=function(e){return new(e||Ne)(u.\u0275\u0275directiveInject(v,2),u.\u0275\u0275directiveInject(u.ViewContainerRef),u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(u.Injector),u.\u0275\u0275directiveInject(m.App),u.\u0275\u0275injectAttribute("content"),u.\u0275\u0275directiveInject(u.ComponentFactoryResolver),u.\u0275\u0275directiveInject(m.PartialRefProvider))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Ne,selectors:[["","partialContainer",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Ne,[{type:t.Directive,args:[{selector:"[partialContainer]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[v]}]},{type:u.ViewContainerRef},{type:u.ElementRef},{type:u.Injector},{type:m.App},{type:void 0,decorators:[{type:t.Attribute,args:["content"]}]},{type:u.ComponentFactoryResolver},{type:m.PartialRefProvider}]}),null);class ke{async _renderCustom(e){this.vcRef.clear(),n.$invokeWatchers(!0);const t=await this.customWidgetRefProvider.getComponentFactoryRef(e,n.ComponentType.WIDGET);if(t){const e=this.vcRef.createComponent(t,0,this.inj);this.$target||(this.$target=this.elRef.nativeElement),this.$target.innerHTML="",this.$target.appendChild(e.location.nativeElement),this.contentInitialized=!0,setTimeout((()=>this.onLoadSuccess()),200)}}onLoadSuccess(){this.componentInstance.invokeEventCallback("load"),this.app.notify("partialLoaded")}constructor(e,t,i,a,s,o,r,l){this.componentInstance=e,this.vcRef=t,this.elRef=i,this.inj=a,this.app=s,this.resolver=r,this.customWidgetRefProvider=l,this.contentInitialized=!1,this.renderCustom=_.debounce(this._renderCustom,200),e.registerPropertyChangeListener(((t,i,a)=>{"widgetname"===t&&(e.$lazyLoad?e.$lazyLoad=()=>{this.renderCustom(i),e.$lazyLoad=n.noop}:this.renderCustom(i))}))}static{this.\u0275fac=function(e){return new(e||ke)(u.\u0275\u0275directiveInject(v,2),u.\u0275\u0275directiveInject(u.ViewContainerRef),u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(u.Injector),u.\u0275\u0275directiveInject(m.App),u.\u0275\u0275injectAttribute("widgetname"),u.\u0275\u0275directiveInject(u.ComponentFactoryResolver),u.\u0275\u0275directiveInject(m.CustomWidgetRefProvider))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:ke,selectors:[["","customWidgetContainer",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(ke,[{type:t.Directive,args:[{selector:"[customWidgetContainer]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[v]}]},{type:u.ViewContainerRef},{type:u.ElementRef},{type:u.Injector},{type:m.App},{type:void 0,decorators:[{type:t.Attribute,args:["widgetname"]}]},{type:u.ComponentFactoryResolver},{type:m.CustomWidgetRefProvider}]}),null);class Le{constructor(e,t,i,n,a){this.elRef=e,this.widget=t,this.viewContainerRef=i,this.templateRef=a,this.context=n._lView[8],window.addEventListener("resize",this.onResize.bind(this))}set wmShowInDevice(e){this.devices=e.split(","),this.onResize()}onResize(e){const t=getComputedStyle(document.documentElement).getPropertyValue("--screen-lg")||"1200px",i=getComputedStyle(document.documentElement).getPropertyValue("--screen-md")||"992px",a=getComputedStyle(document.documentElement).getPropertyValue("--screen-sm")||"768px",s=getComputedStyle(document.documentElement).getPropertyValue("--screen-lg-tab-landscape")||"1366px",o=getComputedStyle(document.documentElement).getPropertyValue("--screen-lg-tab-portrait")||"1024px",r=parseFloat(t)-1+"px",l=parseFloat(i)-1+"px",c=parseFloat(a)-1+"px";this.devices.indexOf("lg")>-1&&window.matchMedia("(min-width: "+t+")").matches&&!n.isLargeTabletLandscape(s,o)||this.devices.indexOf("md")>-1&&(n.isLargeTabletLandscape(s,o)||window.matchMedia("(min-width: "+i+") and (max-width: "+r+")").matches&&!n.isLargeTabletPortrait(s,o))||this.devices.indexOf("sm")>-1&&(window.matchMedia("(min-width: "+a+") and (max-width: "+l+")").matches||n.isLargeTabletPortrait(s,o))||this.devices.indexOf("xs")>-1&&window.matchMedia("(max-width: "+c+")").matches||this.devices.indexOf("all")>-1?this.embeddedView||(this.embeddedView=this.viewContainerRef.createEmbeddedView(this.templateRef,this.context)):(this.viewContainerRef.clear(),this.embeddedView="")}ngOnDestroy(){window.removeEventListener("resize",this.onResize)}static{this.\u0275fac=function(e){return new(e||Le)(u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(v),u.\u0275\u0275directiveInject(u.ViewContainerRef),u.\u0275\u0275directiveInject(u.Injector),u.\u0275\u0275directiveInject(u.TemplateRef))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Le,selectors:[["","wmShowInDevice",""]],inputs:{wmShowInDevice:"wmShowInDevice"}})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Le,[{type:t.Directive,args:[{selector:"[wmShowInDevice]"}]}],(function(){return[{type:u.ElementRef},{type:me,decorators:[{type:t.Inject,args:[v]}]},{type:u.ViewContainerRef},{type:u.Injector},{type:u.TemplateRef}]}),{wmShowInDevice:[{type:t.Input}]});class Fe{constructor(e,t,i){this._isEnabled=!1,this._lastScrollY=-1,this._waitRefreshTill=-1,this.pendingIscrolls=[],this._$el=$(t.nativeElement),this.app=i}ngOnInit(){this.cancelSubscription=this.app.subscribe("no-iscroll",(e=>{this.pendingIscrolls.push(e)}))}ngDoCheck(){this._isEnabled?this._smoothScrollInstance?this.refreshIScroll():this._smoothScrollInstance=this.applySmoothScroll():this._smoothScrollInstance&&this._smoothScrollInstance.destroy&&this._smoothScrollInstance.destroy()}ngOnDestroy(){this._smoothScrollInstance&&this._smoothScrollInstance.destroy&&this._smoothScrollInstance.destroy(),this.cancelSubscription&&this.cancelSubscription()}set wmSmoothscroll(e){this._isEnabled=!0===e||"true"===e,this._isEnabled?this._smoothScrollInstance||(this._smoothScrollInstance=this.applySmoothScroll()):this.ngOnDestroy()}applySmoothScroll(e,t){if(!n.isMobileApp()||n.isKitkatDevice())return null;const i={scrollbars:!0,preventDefault:!1,momentum:!0,bounce:!1,mouseWheel:!0,disablePointer:!0,disableTouch:!1,disableMouse:!1},a=this._$el[0];if(!a.children.length)return null;this._$el.addClass("smoothscroll-wrapper"),a.onscroll=function(e){e.target.iscroll&&e.target.scrollTop&&(e.target.iscroll.scrollTo(e.target.iscroll.x,e.target.iscroll.y-e.target.scrollTop),e.target.scrollTop=0)},t&&"INPUT"===t.tagName&&t.focus(),e&&(i.fadeScrollbars=!0);let s=new IScroll(a,i);if(e){_.forEach(e,((e,t)=>{_.forEach(e,(e=>{s.on(t,e)}))}));const t=this;s.on("scrollStart",(function(){this._scrolling=!0,n.isMobileApp()&&t.app.notify("iscroll-start",{})})),s.on("scrollEnd",(function(){this._scrolling=!1})),s.refresh()}return this.app.notify("iscroll-start",{}),s.indicatorRefresh=()=>{const e=this._$el[0].iscroll.indicators;let t;if(e.length)for(t=0;t<e.length;t++)e[t].refresh()},this._$el[0].iscroll=s,_.forEach(this.pendingIscrolls,((e,t)=>{if(e.isSameNode(this._$el[0]))return this.app.notify("iscroll-update",{el:e}),void this.pendingIscrolls.splice(t,1)})),this.app.notify("iscroll-update",{}),{iScroll:s,destroy:function(){s.destroy(),$(s.scroller).css({"transition-timing-function":"","transition-duration":"",transform:""}),s=null,delete a.iscroll}}}refreshIScroll(){const e=this._smoothScrollInstance.iScroll;if(!(e._scrolling||this._waitRefreshTill>Date.now())){if(e.wrapper&&!_.includes(e.wrapper.children[0].classList,"smoothscroll-container")&&e.wrapper.scrollHeight>e.wrapper.clientHeight){const t=e._events,i=document.activeElement;$(e.wrapper.children).wrapAll('<div class="smoothscroll-container"></div>'),this._smoothScrollInstance.destroy(),this._smoothScrollInstance=this.applySmoothScroll(t,i)}this._lastScrollY!==this._$el[0].iscroll.maxScrollY?($e(this._smoothScrollInstance.iScroll),this._lastScrollY=this._$el[0].iscroll.maxScrollY):this._smoothScrollInstance.iScroll.refresh(),this._waitRefreshTill=Date.now()+500}}static{this.\u0275fac=function(e){return new(e||Fe)(u.\u0275\u0275directiveInject(u.Injector),u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(m.App))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Fe,selectors:[["","wmSmoothscroll",""]],inputs:{wmSmoothscroll:"wmSmoothscroll"}})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Fe,[{type:t.Directive,args:[{selector:"[wmSmoothscroll]"}]}],(function(){return[{type:u.Injector},{type:u.ElementRef},{type:m.App}]}),{wmSmoothscroll:[{type:t.Input}]});const $e=function(e){const t=!e&&$(".smoothscroll-container");e&&e.wrapper&&e.wrapper.contains(document.activeElement)&&"INPUT"===document.activeElement.tagName&&$(document.activeElement).offset().top+document.activeElement.clientHeight>.9*window.innerHeight&&document.activeElement.scrollIntoView({behavior:"auto",block:"end",inline:"end"}),e?(e.indicatorRefresh&&e.indicatorRefresh(),e.refresh&&e.refresh()):t.length&&t.parent().each(((e,t)=>{t.iscroll.indicatorRefresh(),t.iscroll.refresh()}))};window.addEventListener("resize",n.debounce($e,200));class Be{set textContent(e){let t=e;null==e&&(t=""),this.elRef.nativeElement.textContent=t}constructor(e){this.elRef=e}static{this.\u0275fac=function(e){return new(e||Be)(u.\u0275\u0275directiveInject(u.ElementRef))}}static{this.\u0275dir=u.\u0275\u0275defineDirective({type:Be,selectors:[["","textContent",""]],inputs:{textContent:"textContent"}})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Be,[{type:t.Directive,args:[{selector:"[textContent]"}]}],(function(){return[{type:u.ElementRef}]}),{textContent:[{type:t.Input}]});class je{constructor(e,t){this.pipeName=e,this.customPipeManager=t,this.pipeRef=this.customPipeManager?this.customPipeManager.getCustomPipe(e):null,this.isCustomPipe=this.pipeRef&&_.isFunction(this.pipeRef.formatter)}customFormatter(e,t){try{return this.pipeRef.formatter(...t)}catch(t){return e}}}const Ve=e=>{let t;return _.isDate(e)||isNaN(e)||(e=parseInt(e,10)),t=moment(e).valueOf()||moment((new Date).toDateString()+" "+e).valueOf(),t};class Ge{transform(e,t,i,n,a,s,o,r){i=a&&!o?`1.${s.length}-16`:i;const l=r?r.number:void 0;return this.decimalPipe.transform(e,i,n||l||t)}constructor(e){this.decimalPipe=e}static{this.\u0275fac=function(e){return new(e||Ge)(u.\u0275\u0275directiveInject(h.DecimalPipe,16))}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"trailingZeroDecimalPipe",type:Ge,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Ge,[{type:t.Pipe,args:[{name:"trailingZeroDecimalPipe"}]}],(function(){return[{type:h.DecimalPipe}]}),null);class We extends je{returnFn(e,t){return this.isCustomPipe?(t&&(t[0]=e),this.customFormatter(e,t)):e}transform(e,t,i,a){let s;if("null"===e||""===e)return this.returnFn("",arguments);if(!n.isDefined(e))return this.returnFn("",arguments);if(s=Ve(e),s){if("timestamp"===t)return this.returnFn(s,arguments);if("UTC"===t)return this.returnFn(new Date(s).toISOString(),arguments);let o;const r=this.i18nService?this.i18nService.getTimezone(a):i;return o=r&&(e===s||n.hasOffsetStr(e))?moment(s).tz(r).format(t.replaceAll("y","Y").replaceAll("d","D").replace("a","A")):this.datePipe.transform(s,t),this.returnFn(o,arguments)}return this.returnFn("",arguments)}constructor(e,t,i){super("toDate",i),this.datePipe=e,this.i18nService=t,this.customPipeManager=i}static{this.\u0275fac=function(e){return new(e||We)(u.\u0275\u0275directiveInject(h.DatePipe,16),u.\u0275\u0275directiveInject(m.AbstractI18nService,16),u.\u0275\u0275directiveInject(m.CustomPipeManager,16))}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"toDate",type:We,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(We,[{type:t.Pipe,args:[{name:"toDate"}]}],(function(){return[{type:h.DatePipe},{type:m.AbstractI18nService},{type:m.CustomPipeManager}]}),null);class Ue{transform(e,t){if(t&&!String(t).match(/^(\d+)?\.((\d+)(-(\d+))?)?$/)&&(t="1."+t+"-"+t),!_.isNaN(+e)){const i=this.i18nService&&this.i18nService.getwidgetLocale()?this.i18nService.getwidgetLocale():void 0,n=i?i.number:null;return this.decimalPipe.transform(e,t,n)}}constructor(e,t){this.decimalPipe=e,this.i18nService=t}static{this.\u0275fac=function(e){return new(e||Ue)(u.\u0275\u0275directiveInject(h.DecimalPipe,16),u.\u0275\u0275directiveInject(n.AbstractI18nService,16))}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"toNumber",type:Ue,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Ue,[{type:t.Pipe,args:[{name:"toNumber"}]}],(function(){return[{type:h.DecimalPipe},{type:m.AbstractI18nService,decorators:[{type:t.Inject,args:[n.AbstractI18nService]}]}]}),null);class qe{transform(e,t,i){const a=(n.CURRENCY_INFO[t]||{}).symbol||t||"";let s=new Ue(this.decimalPipe,this.i18nService).transform(e,i);const o=_.startsWith(s,"-");return o&&(s=s.replace("-","")),s?o?"-"+a+s:a+s:""}constructor(e,t){this.decimalPipe=e,this.i18nService=t}static{this.\u0275fac=function(e){return new(e||qe)(u.\u0275\u0275directiveInject(h.DecimalPipe,16),u.\u0275\u0275directiveInject(n.AbstractI18nService,16))}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"toCurrency",type:qe,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(qe,[{type:t.Pipe,args:[{name:"toCurrency"}]}],(function(){return[{type:h.DecimalPipe},{type:m.AbstractI18nService,decorators:[{type:t.Inject,args:[n.AbstractI18nService]}]}]}),null);class ze{transform(e,t){return _.isUndefined(e)||null===e||""===e?e:(t||"")+e}static{this.\u0275fac=function(e){return new(e||ze)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"prefix",type:ze,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(ze,[{type:t.Pipe,args:[{name:"prefix"}]}],null,null);class He{transform(e,t){return _.isUndefined(e)||null===e||""===e?e:e+(t||"")}static{this.\u0275fac=function(e){return new(e||He)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"suffix",type:He,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(He,[{type:t.Pipe,args:[{name:"suffix"}]}],null,null);class Qe{constructor(e){this.custmeUserPipe=e}transform(e,t){let i=[];for(let e=2;e<arguments.length;e++)i.push(arguments[e]);let n=this.custmeUserPipe.getCustomPipe(t);if(!n||!_.isFunction(n.formatter))return console.warn("formatter is not defined, please check the custom pipes documentation"),e;try{return n.formatter(e,...i)}catch(i){return console.error("Pipe name: "+t,i),e}}static{this.\u0275fac=function(e){return new(e||Qe)(u.\u0275\u0275directiveInject(m.CustomPipeManager,16))}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"custom",type:Qe,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Qe,[{type:t.Pipe,args:[{name:"custom"}]}],(function(){return[{type:m.CustomPipeManager}]}),null);class Ye{transform(e){let t;if(n.isDefined(e))return t=Ve(e),t?moment(t).fromNow():void 0}static{this.\u0275fac=function(e){return new(e||Ye)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"timeFromNow",type:Ye,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Ye,[{type:t.Pipe,args:[{name:"timeFromNow"}]}],null,null);class Ke extends Ue{static{this.\u0275fac=function(){let e;return function(t){return(e||(e=u.\u0275\u0275getInheritedFactory(Ke)))(t||Ke)}}()}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"numberToString",type:Ke,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Ke,[{type:t.Pipe,args:[{name:"numberToString"}]}],null,null);class Je{transform(e){return Number(e)||void 0}static{this.\u0275fac=function(e){return new(e||Je)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"stringToNumber",type:Je,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Je,[{type:t.Pipe,args:[{name:"stringToNumber"}]}],null,null);class Ze{transform(e,t,i){return e?_.isObject(t)?_.filter(e,t):_.filter(e,(e=>_.includes(e[t],i))):[]}static{this.\u0275fac=function(e){return new(e||Ze)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"filter",type:Ze,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Ze,[{type:t.Pipe,args:[{name:"filter"}]}],null,null);class Xe{transform(e,t){let i=0;for(;e>=1024;)e/=1024,i++;return e.toFixed(+t)+" "+["bytes","KB","MB","GB","TB","PB"][i]}static{this.\u0275fac=function(e){return new(e||Xe)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"filesize",type:Xe,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(Xe,[{type:t.Pipe,args:[{name:"filesize"}]}],null,null);class et{transform(e){return"fa "+({zip:"fa-file-zip-o",pdf:"fa-file-pdf-o",rar:"fa-file-archive-o",txt:"fa-file-text-o",ppt:"fa-file-powerpoint-o",pot:"fa-file-powerpoint-o",pps:"fa-file-powerpoint-o",pptx:"fa-file-powerpoint-o",potx:"fa-file-powerpoint-o",ppsx:"fa-file-powerpoint-o",mpg:"fa-file-movie-o",mp4:"fa-file-movie-o",mov:"fa-file-movie-o",avi:"fa-file-movie-o",mp3:"fa-file-audio-o",docx:"fa-file-word-o",js:"fa-file-code-o",md:"fa-file-code-o",html:"fa-file-code-o",css:"fa-file-code-o",xlsx:"fa-file-excel-o",png:"fa-file-image-o",jpg:"fa-file-image-o",jpeg:"fa-file-image-o",file:"fa-file-o",default:"fa-file-o"}[e]||"fa-file-o")}static{this.\u0275fac=function(e){return new(e||et)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"fileIconClass",type:et,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(et,[{type:t.Pipe,args:[{name:"fileIconClass"}]}],null,null);class tt{transform(e){return{success:"wi wi-done text-success",error:"wi wi-error text-danger"}[e.toLowerCase()]}static{this.\u0275fac=function(e){return new(e||tt)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"stateClass",type:tt,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(tt,[{type:t.Pipe,args:[{name:"stateClass"}]}],null,null);class it{transform(e){return{"audio/aac":".aac","application/x-abiword":".abw","application/vnd.android.package-archive":".apk","video/x-msvideo":".avi","application/vnd.amazon.ebook":".azw","application/octet-stream":".bin","image/bmp":".bmp","application/x-bzip":".bz","application/x-bzip2":".bz2","application/x-csh":".csh","text/css":".css","text/csv":".csv","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-fontobject":".eot","application/epub+zip":".epub","application/ecmascript":".es","image/gif":".gif","text/html":".html","image/x-icon":".ico","text/calendar":".ics","application/java-archive":".jar","image/jpeg":[".jpeg",".jpg"],"application/javascript":".js","application/json":".json","audio/midi":".mid","audio/x-midi":".midi","video/mpeg":".mpeg","application/vnd.apple.installer+xml":"mpkg","application/vnd.oasis.opendocument.presentation":".odp","application/vnd.oasis.opendocument.spreadsheet":".ods","application/vnd.oasis.opendocument.text":".odt","audio/ogg":".oga","video/ogg":".ogv","application/ogg":".ogx","font/otf":".otf","image/png":".png","application/pdf":".pdf","application/vnd.ms-powerpoint":".ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":".pptx","application/x-rar-compressed":".rar","application/rtf":".rtf","application/x-sh":".sh","image/svg+xml":".svg","application/x-shockwave-flash":".swf","application/x-tar":".tar","image/tiff":".tiff","application/typescript":".ts","font/ttf":".ttf","text/plain":".txt","application/vnd.visio":".vsd","audio/wav":".wav","audio/webm":".weba","video/webm":".webm","image/webp":".webp","font/woff":".woff","font/woff2":".woff2","application/xhtml+xml":".xhtml","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","application/xml":".xml","application/vnd.mozilla.xul+xml":".xul","application/zip":".zip","video/3gpp":".3gp","audio/3gpp":".3gp","video/3gpp2":".3g2","audio/3gpp2":".3g2","application/x-7z-compressed":".7z"}[e]}static{this.\u0275fac=function(e){return new(e||it)}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"fileExtensionFromMime",type:it,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(it,[{type:t.Pipe,args:[{name:"fileExtensionFromMime"}]}],null,null);class nt{constructor(e){this.domSanitizer=e}transform(e,i){if(null==e)return"";switch(i){case"html":case t.SecurityContext.HTML:return this.domSanitizer.bypassSecurityTrustHtml(e);case"style":case t.SecurityContext.STYLE:return this.domSanitizer.bypassSecurityTrustStyle(e);case"script":case t.SecurityContext.SCRIPT:return this.domSanitizer.bypassSecurityTrustScript(e);case"url":case t.SecurityContext.URL:return this.domSanitizer.bypassSecurityTrustUrl(e);case"resource":case t.SecurityContext.RESOURCE_URL:return this.domSanitizer.bypassSecurityTrustResourceUrl(e)}}static{this.\u0275fac=function(e){return new(e||nt)(u.\u0275\u0275directiveInject(g.DomSanitizer,16))}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"trustAs",type:nt,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(nt,[{type:t.Pipe,args:[{name:"trustAs"}]}],(function(){return[{type:g.DomSanitizer}]}),null);const at=[],st=[];class ot{constructor(){this.dialogRefsCollection=new Map,this.appConfirmDialog="_app-confirm-dialog"}register(e,t,i){e&&(this.dialogRefsCollection.get(e)?this.dialogRefsCollection.get(e).set(i,t):this.dialogRefsCollection.set(e,new Map([[i,t]])))}getDialogRefsCollection(){return this.dialogRefsCollection}deRegister(e,t){e&&this.dialogRefsCollection.get(e)&&this.dialogRefsCollection.get(e).delete(t)}getDialogRef(e,t){const i=this.dialogRefsCollection.get(e);let n;return t?(n=i.get(t),n||(t.pageName||t.partialName||t.prefabName?console.error('No dialog with the name "'+e+'" found in the given scope.'):i.forEach(((t,i)=>{i&&"Common"===i.partialName?n=t:console.error('No dialog with the name "'+e+'" found in the App scope.')})))):1===i.size?n=i.entries().next().value[1]:console.error("There are multiple instances of this dialog name. Please provide the Page/Partial/App instance in which the dialog exists."),n}open(e,t,i){const n=this.getDialogRef(e,t);n&&n.open(i)}close(e,t,i){const n=this.getDialogRef(e,t);n&&(n.closeCallBackFn=i,n.close())}closeAllDialogs(){_.forEach(at.reverse(),(e=>{e.close()}))}showAppConfirmDialog(e){this.open(this.getAppConfirmDialog(),void 0,e)}closeAppConfirmDialog(){this.close(this.getAppConfirmDialog())}getAppConfirmDialog(){return this.appConfirmDialog}setAppConfirmDialog(e){this.appConfirmDialog=e}addToOpenedDialogs(e){at.push(e)}getLastOpenedDialog(){return at[at.length-1]}removeFromOpenedDialogs(e){if(-1!==at.indexOf(e)&&at.splice(at.indexOf(e),1),0===at.length&&(n.isMobile()||n.isMobileApp())){$("body > app-root")[0].removeAttribute("aria-hidden")}}getOpenedDialogs(){return at}addToClosedDialogs(e){st.push(e)}removeFromClosedDialogs(e){-1!==st.indexOf(e)&&st.splice(st.indexOf(e),1)}getDialogRefFromClosedDialogs(){return st[st.length-1]}static{this.\u0275fac=function(e){return new(e||ot)}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:ot,factory:ot.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(ot,[{type:t.Injectable}],(function(){return[]}),null);class rt{constructor(e){this.domSanitizer=e}transform(e,i){if(null==e)return"";switch(i){case"html":case t.SecurityContext.HTML:return this.domSanitizer.sanitize(t.SecurityContext.HTML,e);case"style":case t.SecurityContext.STYLE:return this.domSanitizer.sanitize(t.SecurityContext.STYLE,e);case"script":case t.SecurityContext.SCRIPT:return this.domSanitizer.sanitize(t.SecurityContext.SCRIPT,e);case"url":case t.SecurityContext.URL:return this.domSanitizer.sanitize(t.SecurityContext.URL,e);case"resource":case t.SecurityContext.RESOURCE_URL:return this.domSanitizer.sanitize(t.SecurityContext.RESOURCE_URL,e);case"none":case t.SecurityContext.NONE:return this.domSanitizer.sanitize(t.SecurityContext.NONE,e)}}static{this.\u0275fac=function(e){return new(e||rt)(u.\u0275\u0275directiveInject(g.DomSanitizer,16))}}static{this.\u0275pipe=u.\u0275\u0275definePipe({name:"sanitize",type:rt,pure:!0})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(rt,[{type:t.Pipe,args:[{name:"sanitize"}]}],(function(){return[{type:g.DomSanitizer}]}),null);const lt=[we,Ae,Ie,Ee,Re,Se,Te,Me,Ne,ke,fe,Le,Fe,Be],ct=[We,et,it,Ze,Xe,Ue,qe,ze,He,Ye,Ke,tt,Je,Ge,nt,Pe,Qe,rt];class dt{static forRoot(){return{ngModule:dt,providers:[We,Ze,Ge,nt,Pe,Qe,rt,i.Location,{provide:n.AbstractDialogService,useClass:ot}]}}static{this.\u0275fac=function(e){return new(e||dt)}}static{this.\u0275mod=u.\u0275\u0275defineNgModule({type:dt})}static{this.\u0275inj=u.\u0275\u0275defineInjector({imports:[i.CommonModule,a.SecurityModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&u.\u0275setClassMetadata(dt,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.SecurityModule],declarations:[...lt,...ct],exports:[...lt,...ct]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&u.\u0275\u0275setNgModuleScope(dt,{declarations:[we,Ae,Ie,Ee,Re,Se,Te,Me,Ne,ke,fe,Le,Fe,Be,We,et,it,Ze,Xe,Ue,qe,ze,He,Ye,Ke,tt,Je,Ge,nt,Pe,Qe,rt],imports:[i.CommonModule,a.SecurityModule],exports:[we,Ae,Ie,Ee,Re,Se,Te,Me,Ne,ke,fe,Le,Fe,Be,We,et,it,Ze,Xe,Ue,qe,ze,He,Ye,Ke,tt,Je,Ge,nt,Pe,Qe,rt]});const pt=()=>{};var ut;e.Live_Operations=void 0,(ut=e.Live_Operations||(e.Live_Operations={})).INSERT="insert",ut.UPDATE="update",ut.DELETE="delete",ut.READ="read";const ht="All Fields",mt={EMPTY_KEY:"EMPTY_NULL_FILTER",EMPTY_VALUE:"No Value",LABEL_KEY:"key",LABEL_VALUE:"value",NULL_EMPTY:["null","empty"],NULL:"null",EMPTY:"empty"};function gt(e){return _.includes([n.FormWidgetType.AUTOCOMPLETE,n.FormWidgetType.TYPEAHEAD,n.FormWidgetType.CHIPS],e)}const ft=(e,t,i)=>{const a=n.debounce((()=>{_.isFunction(i)&&i(t)}),300);a();const s=t?_.isObject(t)?t:JSON.parse(t):{},o=e.registerDestroyListener?e.registerDestroyListener.bind(e):_.noop,r=n.processFilterExpBindNode(e,s).subscribe((e=>{t=JSON.stringify(e.filterExpressions),a()}));o((()=>r.unsubscribe()))},vt=(e,t)=>{const i={};let a;return t["is-related"]?(i.tableName=t["lookup-type"],a=t["lookup-field"],i.distinctField=a,i.aliasColumn=a.replace(".","$"),i.filterExpr=t.filterexpressions?_.isObject(t.filterexpressions)?t.filterexpressions:JSON.parse(t.filterexpressions):{}):(i.tableName=e.execute(n.DataSource.Operation.GET_ENTITY_NAME),a=t.field||t.key,i.distinctField=a,i.aliasColumn=a),i};function bt(e,t,i){let a;return new Promise(((s,o)=>{!E(t[i])||t.isDataSetBound&&"filterwidget"!==i||(a=vt(e,t),e.execute(n.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS,{fields:a.distinctField,entityName:a.tableName,pagesize:t.limit,filterExpr:t.filterexpressions?JSON.parse(t.filterexpressions):{}}).then((e=>{s({field:t,data:e.data,aliasColumn:a.aliasColumn})}),o))}))}function yt(e,t){if(gt(e[t.widget]))return e.datafield=t.aliasColumn||mt.LABEL_KEY,e.searchkey=t.distinctField||mt.LABEL_KEY,void(e.displaylabel=e.displayfield=t.aliasColumn||mt.LABEL_VALUE);e.datafield=mt.LABEL_KEY,e.displayfield=mt.LABEL_VALUE}function wt(e,t,i){const a=[n.FormWidgetType.SELECT,n.FormWidgetType.RADIOSET],s={},o=[];i.isEnableEmptyFilter&&_.includes(a,e[i.widget])&&!e["is-range"]&&!e.multiple&&(s[mt.LABEL_KEY]=mt.EMPTY_KEY,s[mt.LABEL_VALUE]=i.EMPTY_VALUE||mt.EMPTY_VALUE,o.push(s)),_.each(t,(e=>{const t=e[i.aliasColumn],n={};null!==t&&""!==t&&(n[mt.LABEL_KEY]=t,n[mt.LABEL_VALUE]=t,o.push(n))})),yt(e,i),e.dataset=o}function Pt(e,t,i){if(e&&t&&!t.isDataSetBound)if(gt(t[i.widget])){const n=vt(e,t);t.dataoptions=n,yt(t,Object.assign(i||{},n)),t.datasource=e}else ft(t.viewParent,t.filterexpressions,(n=>{t.filterexpressions=n,bt(e,t,i.widget).then((e=>{wt(e.field,e.data,{aliasColumn:e.aliasColumn,widget:i.widget,isEnableEmptyFilter:It(i.enableemptyfilter),EMPTY_VALUE:i.EMPTY_VALUE})}))}))}function Ct(e){return n.isDefined(e)&&""!==e&&null!==e}function At(e,t){let i;return Ct(e)&&Ct(t)?i=[e,t]:Ct(e)?i=e:Ct(t)&&(i=t),i}function _t(e,t){let i;return Ct(e)&&Ct(t)?i=n.MatchMode.BETWEEN:Ct(e)?i=n.MatchMode.GREATER:Ct(t)&&(i=n.MatchMode.LESSER),i}function It(e){return e&&_.intersection(e.split(","),mt.NULL_EMPTY).length>0}function Et(e){let t;const i=_.split(e,",");return 2===_.intersection(i,mt.NULL_EMPTY).length?t=n.MatchMode.NULLOREMPTY:_.includes(i,mt.NULL)?t=n.MatchMode.NULL:_.includes(i,mt.EMPTY)&&(t=n.MatchMode.EMPTY),t}const Ot=e=>_.isUndefined(e)||_.isNull(e)?[]:(_.isString(e)&&(e=e.split(",").map(Function.prototype.call,String.prototype.trim)),_.isArray(e)||(e=[e]),e);const xt=moment.localeData(),Rt=n.getClonedObject(xt._calendar),Dt=xt._calendarDay||{lastDay:"[Yesterday]",lastWeek:"[Last] dddd",nextDay:"[Tomorrow]",nextWeek:"dddd",sameDay:"[Today]",sameElse:"L"},St="alphabet",Tt="Others",Mt={HOUR:"hour",DAY:"day",WEEK:"week",MONTH:"month",YEAR:"year"},Nt="yyyy-MM-dd",kt="w 'Week',  yyyy",Lt="MMM, yyyy",Ft="YYYY",$t="hh:mm a",Bt=(e,t,i)=>{if(!t)return _.cloneDeep(e);const n=t.split(","),a=[],s=[];return n.forEach((e=>{const t=e.split(":");a.push(i?i+"."+t[0]:t[0]),s.push(t[1])})),_.orderBy(e,a,s)},jt=e=>(_.isString(e)&&(e=_.split(e,",").map((e=>e.trim()))),e),Vt=(e,t,i,a)=>{if(e&&"wm-search"===e.widgetType)if(e.groupby)if(_.includes(e.groupby,"(")){const a=n.$parseEvent(e.groupby);i.groupby=a(t,{row:i.dataObject||i})}else i.groupby=qt(e.groupby,e.match,a,e.dateformat,e.datePipe,e.appDefaults,i);else i.groupby=""},Gt=(e,t,i,n,a,s,o,r)=>{i===Mt.DAY&&(xt._calendar=Dt),e=_.orderBy(e,(e=>{const i=_.get(o?e[o]:e,t);if(i)return _.toLower(i)}));const l=_.groupBy(e,qt.bind(void 0,t,i,o,a,s,r));return xt._calendar=Rt,l},Wt=(e,t,i,a)=>"timestamp"===t?e:n.getFormattedDate(a,e,t||i),Ut=(e,t,i,n,a)=>{let s,o=moment(e),r=i;const l=moment(),c=function(){return"["+Wt(this.valueOf(),r,Nt,n)+"]"};switch(t){case Mt.HOUR:r=r||a.timeFormat,o.isValid()||(o=moment((new Date).toDateString()+" "+e),o.isValid()&&(xt._calendar.sameDay=function(){return"["+Wt(this.valueOf(),r,$t,n)+"]"})),o=o.startOf("hour"),xt._calendar.sameElse=c,s=o.calendar(l);break;case Mt.WEEK:s=Wt(o.valueOf(),r,kt,n);break;case Mt.MONTH:s=Wt(o.valueOf(),r,Lt,n);break;case Mt.YEAR:s=o.format(Ft);break;case Mt.DAY:r=r||a.dateFormat,o=o.startOf("day"),xt._calendar.sameElse=c,s=o.calendar(l)}return"Invalid date"===s?Tt:s},qt=(e,t,i,n,a,s,o)=>{let r=_.get(i?o[i]:o,e);return _.isUndefined(r)||_.isNull(r)||""===r.toString().trim()?Tt:(t===St&&(r=r.substr(0,1)),_.includes(_.values(Mt),t)&&(r=Ut(r,t,n,a,s)),r)};const zt="default",Ht="label",Qt=(e,t,i,n)=>{_.forEach(e,(e=>{_.get(e,"isGroup")&&(e.field===i?e.columns[n]=t:Qt(e.columns,t,i,n))}))},Yt=e=>"true"===e||"false"!==e&&(/^\d+$/.test(e)?+e:e),Kt={integer:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],big_integer:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],short:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],float:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],big_decimal:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],number:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],double:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],long:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],byte:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],string:["text","number","textarea","password","richtext","select","checkboxset","radioset","date","time","timestamp","switch","currency","autocomplete","chips","colorpicker"],character:["text","number","textarea","password","richtext","select","checkboxset","radioset","switch","currency","autocomplete","chips"],text:["text","number","textarea","password","richtext","select","checkboxset","radioset","date","time","timestamp","switch","currency","autocomplete","chips","colorpicker"],date:["date","text","number","select","checkboxset","radioset","autocomplete","chips"],time:["time","text","number","select","checkboxset","radioset","autocomplete","chips"],timestamp:["timestamp","text","number","select","checkboxset","radioset","autocomplete","chips"],datetime:["datetime","text","select","checkboxset","radioset","autocomplete","chips"],boolean:["checkbox","radioset","toggle","select"],list:["select","radioset","checkboxset","switch","autocomplete","chips"],clob:["text","textarea","richtext"],blob:["upload"],file:["upload"],custom:["text","number","textarea","password","checkbox","toggle","slider","richtext","currency","switch","select","checkboxset","radioset","date","time","timestamp","rating","datetime","autocomplete","chips","colorpicker"]},Jt=e=>{if(e)return/^(\/|#\/|#)(?!\W).*/.test(e)?`#/${e=_.first(e.match(/[\w]+.*/g))||""}`:_.startsWith(e,"www.")?`//${e}`:e};const Zt={pattern:"regexp",max:"maxvalue",min:"minvalue",required:"required",maxlength:"maxchars",mindate:"mindate",maxdate:"maxdate",excludedates:"excludedates",excludedays:"excludedays",invalidNumber:"invalidNumber"};class Xt extends d.SwipeAnimation{constructor(e,t,i){super(),this.$el=e,this.app=t,this.onPullToRefresh=i,this.count=0;this.$el.prepend('<div class="refresh-container"></div>'),this.infoContainer=this.$el.find(".refresh-container"),n.isIos()&&this.infoContainer.addClass("ios-refresh-container"),this.init(this.$el)}threshold(){return 10}direction(){return $.fn.swipey.DIRECTIONS.VERTICAL}subscribe(){this.cancelSubscription=this.app.subscribe("toggle-variable-state",(e=>{e.active&&this.animationInProgress?(this.count++,this.wait()):this.count>0&&this.count--,!this.count&&this.animationInProgress&&this.stopAnimation()}))}bounds(e,t){const i=this.$el[0].iscroll;return t<0||i&&!isNaN(i.y)&&0!==i.y?{lower:void 0,upper:void 0}:(this.spinner||(this.spinner=n.isIos()?new ti(this.infoContainer):new ei(this.infoContainer),this.subscribe()),{lower:0,center:0,upper:n.isIos()?0:150,strict:!n.isIos()})}context(){return this.infoContainer.show(),n.isIos()&&this.infoContainer.addClass("entry"),{spin:e=>{this.spinner.setRotation(2*e)}}}animation(){return n.isIos()?{css:{transform:"translate3d(0, ${{$D + $d}}px, 0)",spin:"${{spin($d)}}"}}:{target:this.infoContainer,css:{transform:"translate3d(0, ${{$D + $d}}px, 0)",spin:"${{spin($d)}}",opacity:"${{min(($D + $d) / 100, 1)}}"}}}onAnimation(){this.animationInProgress=!0,this.spinner.start(),this.onPullToRefresh&&this.onPullToRefresh(),setTimeout((()=>{this.runAnimation||this.stopAnimation()}))}stopAnimation(){setTimeout((()=>{this.runAnimation=!1,this.animationInProgress=!1,this.spinner.stop(),this.infoContainer.hide(),n.setCSS(this.infoContainer[0],"transform","none"),n.isIos()||n.setCSS(this.infoContainer[0],"opacity",0),this.infoContainer.removeClass("entry")}),800)}wait(){this.runAnimation=!0}}class ei{constructor(e,t){this.$el=e,this.options=t||{}}polarToCartesian(e,t,i,n){const a=(n-90)*Math.PI/180;return{x:e+i*Math.cos(a),y:t+i*Math.sin(a)}}describeArc(e,t,i,n,a){const s=this.polarToCartesian(e,t,i,a),o=this.polarToCartesian(e,t,i,n),r=a-n<=180?"0":"1";return["M",s.x,s.y,"A",i,i,0,r,0,o.x,o.y,"L",o.x,o.y].join(" ")}init(){if(this.initialized)return;const e=$('<svg><path id="arc1"/></svg>'),t=$('<div class="android-spinner"></div>');t.append(e),this.$el.append(t),this.cx=t.outerWidth()/2,this.cy=t.outerHeight()/2,this.r=.6*this.cx,this.path=t.find("path"),this.initialized=!0,this.container=t}setRotation(e){this.init(),this.path.attr("d",this.describeArc(this.cx,this.cy,this.r,0,e))}start(){this.init();const e=this,t=this.options.time||1800;let i=0;this.container.addClass("spin"),this.intervalId=setInterval((()=>{let t;i+=10,t=i>720?i=0:i>360?720-i:i,e.path.attr("d",this.describeArc(e.cx,e.cy,e.r,0,t))}),10*t/360)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=0),this.container.removeClass("spin")}}class ti{constructor(e){this.$el=e}init(){if(this.svg)return;const e=$('<div class="ios-spinner"><svg></svg></div>'),t=e.find("svg");this.$el.append(e);const i=e.width();for(let e=0;e<12;e++)t[0].innerHTML+=`<line y1="${.15*i}" y2="${.3*i}"\n                                    transform="translate(${.5*i}, ${.5*i}) rotate(${30*e})">\n                                </line>`;e.append(t),this.svg=t}setRotation(e){this.init(),this.svg.css("transform",`rotateZ( ${30*Math.round(e/30)}deg)`)}start(){this.init();let e=0;this.intervalId=setInterval((()=>{e+=10,this.setRotation(e)}),20)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=0)}}var ii;!function(e){e.LEFT_PANEL="page-left-panel",e.RIGHT_PANEL="page-right-panel",e.SWIPE_ELEM="page-left-panel-icon",e.CONTENT="app-content-column",e.HEADER="page-header",e.SEARCH="app-search"}(ii||(ii={}));const ni=e=>`[data-role='${e}']`,ai=(e,t)=>{"string"==typeof e&&(e=document.querySelector(e)),e&&(e.removeEventListener("click",t),e.addEventListener("click",t))},si=(e,t)=>{if(n.isMobile()){if(e)try{e.widget.collapse()}catch(e){}t&&n.setCSS(t,"display","none")}},oi=(e,t)=>{$(e).each(((e,i)=>{const a=$('<a class="app-header-action"><i class="wi wi-search"></i></a>');$(i).before(a),ai(a,(()=>((e,t)=>{"none"===$(e).css("display")?(si(t),n.setCSS(e,"display","inline-table")):si(t,e)})(i,t)))}))};e.ALLFIELDS=ht,e.AUTOCLOSE_TYPE={OUTSIDECLICK:"outsideClick",ALWAYS:"always",DISABLED:"disabled"},e.BaseComponent=me,e.BaseContainerComponent=ve,e.BaseFieldValidations=class{constructor(e,t,i,n,a,s){this.instance=e,this.formwidget=t,this.widgettype=i,this.widgetControl=n,this.widgetContext=a,this.defaultValidatorMessages=[],s&&(this.tableFieldType=s)}getDefaultValidators(){const e=[];return this.instance.required&&!1!==this.instance.show&&(this.widgettype===n.FormWidgetType.CHECKBOX||this.widgettype===n.FormWidgetType.TOGGLE?e.push(c.Validators.requiredTrue):e.push(c.Validators.required)),this.instance.maxchars&&e.push(c.Validators.maxLength(this.instance.maxchars)),this.instance.minvalue&&e.push(c.Validators.min(this.instance.minvalue)),this.instance.maxvalue&&this.widgettype!==n.FormWidgetType.RATING&&e.push(c.Validators.max(this.instance.maxvalue)),this.instance.regexp&&e.push(c.Validators.pattern(this.instance.regexp)),this.formwidget&&_.isFunction(this.formwidget.validate)&&e.push(this.formwidget.validate.bind(this.formwidget)),e}setUpValidators(e){if(!this.hasValidators&&(this.instance._validators=this.getDefaultValidators(),e&&this.instance._validators.push(e),this.widgetContext.ngform)){this.widgetControl.setValidators(this.instance._validators);const e={};this.formwidget&&(this.instance.value===this.formwidget.prevDatavalue||this.isNullOrEmptyOrFalsy(this.instance.value))&&(e.emitEvent=!1),this.widgetControl.updateValueAndValidity(e)}}getPromiseList(e){const t=[];return _.forEach(e,((e,i)=>{let n=e;e instanceof Function&&e.bind&&(n=e(this.widgetControl,this.widgetContext)),n instanceof Promise&&t.push(n)})),t}setAsyncValidators(e){if(this._asyncValidatorFn=()=>()=>Promise.all(this.getPromiseList(e)).then((()=>(this.instance.validationmessage="",null)),(e=>{if(e.hasOwnProperty("errorMessage"))this.instance.validationmessage=_.get(e,"errorMessage");else{const t=_.keys(e);this.instance.validationmessage=e[t[0]].toString()}return e})).then((e=>{const t=()=>{setTimeout((()=>{"PENDING"===this.widgetControl.status?t():this.instance.onStatusChange(this.widgetControl.status,this.tableFieldType)}),100)};return t(),e})),this.widgetControl.setAsyncValidators([this._asyncValidatorFn()]),this.widgetContext.ngform.touched){const e={};this.formwidget&&(this.instance.value===this.formwidget.prevDatavalue||this.isNullOrEmptyOrFalsy(this.instance.value))&&(e.emitEvent=!1),this.widgetControl.updateValueAndValidity(e)}}isDefaultValidator(e){return _.get(n.VALIDATOR,_.toUpper(e))}setDefaultValidator(e,t){t&&t instanceof Function?this.watchDefaultValidatorExpr(t.bind(void 0,this.widgetControl,this.widgetContext),e):(this.instance.widget[e]=t,this.instance[e]=t)}setValidators(e){let t=_.cloneDeep(e);this.hasValidators=!0,this._syncValidators=[],_.forEach(t,((e,i)=>{if(e&&e instanceof Function)t[i]=e.bind(void 0,this.widgetControl,this.widgetContext),this._syncValidators.push(t[i]);else{const n=_.get(e,"type");if(this.defaultValidatorMessages[n]=_.get(e,"errorMessage"),this.isDefaultValidator(n)){const a=_.get(e,"validator");this.setDefaultValidator(n,a),t[i]=""}}})),this._syncValidators=_.filter(t,(e=>{if(e)return e})),this.applyDefaultValidators()}observeOn(e,t){_.forEach(e,(e=>{const i=_.find(this.widgetContext[t],{key:e});i&&(i.notifyForFields||(i.notifyForFields=[]),i.notifyForFields.push(this.instance))}))}validate(){if(this.applyDefaultValidators(),this._asyncValidatorFn){const e={};this.formwidget&&(this.instance.value===this.formwidget.prevDatavalue||this.isNullOrEmptyOrFalsy(this.instance.value))&&(e.emitEvent=!1),this.widgetControl.setAsyncValidators([this._asyncValidatorFn()]),this.widgetControl.updateValueAndValidity(e)}this.widgetContext.ngform.touched&&this.widgetControl.markAsTouched()}watchDefaultValidatorExpr(e,t){const i=`${this.instance.widgetId}_`+t+"_formField";n.$unwatch(i),this.instance.registerDestroyListener(n.$watch("boundFn(fn)",_.extend(this.instance,this.instance.viewParent),{fn:e},((e,i)=>{this.instance.widget[t]=e,this.applyDefaultValidators()}),i))}isNullOrEmptyOrFalsy(e){return _.isEmpty(e)}applyDefaultValidators(){const e=this.getDefaultValidators(),t={};this.formwidget&&(this.instance.value===this.formwidget.prevDatavalue||this.isNullOrEmptyOrFalsy(this.instance.value))&&(t.emitEvent=!1),this.widgetControl.setValidators(_.concat(this._syncValidators||[],e)),this.widgetControl.updateValueAndValidity(t),this.setCustomValidationMessage()}setCustomValidationMessage(){const e=this.widgetControl&&this.widgetControl.errors;if(e)if(e.hasOwnProperty("errorMessage"))this.instance.validationmessage=_.get(e,"errorMessage");else{const t=_.keys(e)[0],i=_.get(Zt,t)||this.formwidget.validateType;if(i){const e=_.get(this.defaultValidatorMessages,i)||this.instance.validationmessage;this.instance.validationmessage=e&&e instanceof Function?e(this.widgetControl,this.widgetContext):e}else this.instance.validationmessage=""}}},e.ContainerDirective=we,e.Context=y,e.CustomPipe=Qe,e.CustomWidgetContainerDirective=ke,e.DEBOUNCE_TIMES={PAGINATION_DEBOUNCE_TIME:250},e.DISPLAY_TYPE=ae,e.DataSetItem=class{},e.DatasetAwareNavComponent=class extends ge{constructor(e,t){super(e,t),this.nodes=[],this.nodes$=new r.Subject,this._resetNodes=_.debounce(this.resetNodes,50),this.securityService=this.inj.get(a.SecurityService),this.binditemlabel=this.nativeElement.getAttribute("itemlabel.bind"),this.binditemicon=this.nativeElement.getAttribute("itemicon.bind"),this.binditemaction=this.nativeElement.getAttribute("itemaction.bind"),this.binditembadge=this.nativeElement.getAttribute("itembadge.bind"),this.binditemchildren=this.nativeElement.getAttribute("itemchildren.bind"),this.binditemid=this.nativeElement.getAttribute("itemid.bind"),this.binditemlink=this.nativeElement.getAttribute("itemlink.bind"),this.binditemtarget=this.nativeElement.getAttribute("itemtarget.bind"),this.binduserrole=this.nativeElement.getAttribute("userrole.bind"),this.bindisactive=this.nativeElement.getAttribute("isactive.bind")}getNode(e,t){const i=this.viewParent.pageScope||this.viewParent,a=C(t,{field:this.itemchildren,bindExpression:this.binditemchildren},i)||_.get(t,e.childrenField),s={action:C(t,{field:this.itemaction,bindExpression:this.binditemaction},i)||_.get(t,e.actionField),badge:C(t,{field:this.itembadge,bindExpression:this.binditembadge},i)||_.get(t,e.badgeField),children:Array.isArray(a)?this.getNodes(a):[],class:_.get(t,e.classField),disabled:t.disabled,icon:C(t,{field:this.itemicon,bindExpression:this.binditemicon},i)||_.get(t,e.iconField),id:C(t,{field:this.itemid,bindExpression:this.binditemid},i)||_.get(t,e.idField),label:C(t,{field:this.itemlabel,bindExpression:this.binditemlabel},i)||_.get(t,e.labelField),link:Jt(C(t,{field:this.itemlink,bindExpression:this.binditemlink},i)||_.get(t,e.linkField)),target:Jt(C(t,{field:this.itemtarget,bindExpression:this.binditemtarget},i)||_.get(t,e.targetField)),role:C(t,{field:this.userrole,bindExpression:this.binduserrole},i),isactive:C(t,{field:this.isactive,bindExpression:this.bindisactive},i),value:this.datafield?"All Fields"===this.datafield?t:n.findValueOf(t,this.datafield):t};return _.omitBy(s,_.isUndefined)}resetItemFieldMap(){this._itemFieldMap=null}getItemFieldsMap(){return this._itemFieldMap||(this._itemFieldMap={idField:this.itemid||"itemid",iconField:this.itemicon||"icon",labelField:this.itemlabel||"label",linkField:this.itemlink||"link",targetField:this.itemtarget||"target",badgeField:this.itembadge||"badge",childrenField:this.itemchildren||"children",classField:this.itemclass||"class",actionField:this.itemaction||"action",isactiveField:this.isactive||"isactive"}),this._itemFieldMap}prepareNodeDataSet(e){return(e=Ot(e)).map((e=>n.isObject(e)?e:{label:e,value:e}))}getNodes(e=this.dataset||{}){let t=Bt(this.prepareNodeDataSet(e),this.orderby)||[];if(t.length){const e=this.userrole,i=this.getItemFieldsMap();t=t.reduce(((t,a)=>(n.validateAccessRoles(a[e],this.securityService.loggedInUser)&&t.push(this.getNode(i,a)),t)),[])}return t}resetNodes(){this.resetItemFieldMap(),this.nodes=this.getNodes(),n.$appDigest(),this.nodes$.next(null)}onPropertyChange(e,t,i){switch(e){case"dataset":case"itemicon":case"itemlabel":case"itemlink":case"itemtarget":case"itemclass":case"itemchildren":case"isactive":case"orderby":this._resetNodes()}super.onPropertyChange(e,t,i)}},e.DialogRef=b,e.DialogServiceImpl=ot,e.EDIT_MODE={QUICK_EDIT:"quickedit",INLINE:"inline",FORM:"form",DIALOG:"dialog"},e.EVENTS_MAP=ne,e.FileExtensionFromMimePipe=it,e.FileIconClassPipe=et,e.FileSizePipe=Xe,e.FilterPipe=Ze,e.INPUTMODE={FINANCIAL:"financial",NATURAL:"natural"},e.ImagePipe=Pe,e.ItemTemplateDirective=Ae,e.LIVE_CONSTANTS=mt,e.LazyLoadDirective=Ee,e.MessageComponent=Re,e.NAVIGATION_TYPE={ADVANCED:"Advanced",BASIC:"Basic",CLASSIC:"Classic",INLINE:"Inline",NONE:"None",ONDEMAND:"On-Demand",PAGER:"Pager",SCROLL:"Scroll"},e.NumberToStringPipe=Ke,e.PROP_ANY=ee,e.PROP_BOOLEAN=X,e.PROP_NUMBER=Z,e.PROP_STRING=J,e.PartialContainerDirective=Ne,e.PartialDirective=Se,e.PartialParamDirective=Me,e.PartialParamHandlerDirective=Te,e.PrefixPipe=ze,e.PullToRefresh=Xt,e.RedrawableDirective=fe,e.RepeatTemplateDirective=Ie,e.SanitizePipe=rt,e.ShowInDeviceDirective=Le,e.SmoothScrollDirective=Fe,e.StateClassPipe=tt,e.StringToNumberPipe=Je,e.StylableComponent=ge,e.SuffixPipe=He,e.TextContentDirective=Be,e.TimeFromNowPipe=Ye,e.ToCurrencyPipe=qe,e.ToDatePipe=We,e.ToNumberPipe=Ue,e.TrailingZeroDecimalPipe=Ge,e.TrustAsPipe=nt,e.WidgetConfig=f,e.WidgetRef=v,e.WmComponentsModule=dt,e.applyFilterOnField=function(e,t,i,a,s={}){const o=t.field||t.key,r=_.filter(i,{"filter-on":o});a=t["is-range"]?At(t.minValue,t.maxValue):n.isDefined(a)?a:t.value,!e||s.isFirst&&(_.isUndefined(a)||""===a)||_.forEach(r,(i=>{const o=i.field||i.key,r=t["lookup-field"]||t._primaryKey,l=i["edit-widget-type"]||i.widgettype;let c,d,p,u={},h=i["filter-on"];E(l)&&!i.isDataSetBound&&h!==o&&(t&&t["is-related"]&&(h+="."+r),n.isDefined(a)?(p=t["is-range"]?_t(t.minValue,t.maxValue):It(s.enableemptyfilter)&&a===mt.EMPTY_KEY?Et(s.enableemptyfilter):n.MatchMode.EQUALS,c=_.isObject(a)&&!_.isArray(a)?a[r]:a,u[h]={value:c,matchMode:p}):u={},d=o,gt(l)&&i.dataoptions?i.dataoptions.filterFields=u:e.execute(n.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS,{fields:d,filterFields:u,pagesize:i.limit}).then((e=>{wt(i,e.data,{aliasColumn:d,widget:s.widget||"widgettype",isEnableEmptyFilter:It(s.enableemptyfilter),EMPTY_VALUE:s.EMPTY_VALUE})}),pt))}))},e.configureDnD=(e,t,i,n,a)=>{const s=Object.assign({containment:e,delay:100,opacity:.8,helper:"clone",zIndex:1050,tolerance:"pointer",start:i,update:n,sort:a},t);e.sortable(s)},e.convertDataToObject=jt,e.createArrayFrom=Ot,e.extractDataAsArray=e=>_.isUndefined(e)||_.isNull(e)||""===_.trim(e)?[]:(_.isString(e)&&(e=_.split(e,",").map((e=>e.trim()))),_.isArray(e)||(e=[e]),e),e.extractDataSourceName=e=>{if(!e)return;let t;const i=e.split(".");return i.length>1&&"Variables"===i[0]&&(t=i[1]),t},e.fetchDistinctValues=function(e,t,i){_.isEmpty(t)||t.forEach((t=>{Pt(e,t,i)}))},e.fetchRelatedFieldData=function(e,t,i){let a,s;const o=i.relatedField,r=i.datafield;e&&(a=e.execute(n.DataSource.Operation.GET_RELATED_PRIMARY_KEYS,o),t.datafield=r,t._primaryKey=_.isEmpty(a)?void 0:a[0],t.compareby=a&&a.join(","),s=r===ht?void 0:r,t.displayfield=s=t.displayfield||s||t._primaryKey,gt(t[i.widget])?(t.dataoptions={relatedField:o,filterExpr:t.filterexpressions?t.filterexpressions:{}},t.datasource=e,t.searchkey=t.searchkey||s,t.displaylabel=t.displayfield=t.displaylabel||s,t.showPendingSpinner&&(t.showPendingSpinner=!1)):ft(t.viewParent,t.filterexpressions,(i=>{t.filterexpressions=i,e.execute(n.DataSource.Operation.GET_RELATED_TABLE_DATA,{relatedField:o,pagesize:t.limit,orderBy:t.orderby?_.replace(t.orderby,/:/g," "):"",filterFields:{},filterExpr:t.filterexpressions?t.filterexpressions:{}}).then((e=>{t.dataset=e.data,t.displayfield=t.displayfield||_.head(_.keys(_.get(e,"[0]"))),t.showPendingSpinner&&(t.showPendingSpinner=!1)}),pt)})))},e.filterDate=Wt,e.getBackGroundImageUrl=x,e.getConditionalClasses=L,e.getContainerTargetClass=e=>".wm-app",e.getDataTableFilterWidget=e=>{let t=Kt[e]&&Kt[e][0];return e===n.DataType.BOOLEAN&&(t=n.FormWidgetType.SELECT),_.includes([n.FormWidgetType.TEXT,n.FormWidgetType.NUMBER,n.FormWidgetType.SELECT,n.FormWidgetType.AUTOCOMPLETE,n.FormWidgetType.DATE,n.FormWidgetType.TIME,n.FormWidgetType.DATETIME],t)?t:n.FormWidgetType.TEXT},e.getDefaultValue=(e,t,i)=>i?i===n.FormWidgetType.NUMBER||i===n.FormWidgetType.SLIDER||i===n.FormWidgetType.CURRENCY?isNaN(Number(e))?null:Number(e):i===n.FormWidgetType.CHECKBOX||i===n.FormWidgetType.TOGGLE?Yt(e):e:n.isNumberType(t)?isNaN(Number(e))?null:Number(e):t===n.DataType.BOOLEAN?Yt(e):e,e.getDefaultViewModeWidget=e=>_.includes(["checkbox","toggle","rating"],e)?zt:Ht,e.getDistinctFieldProperties=vt,e.getDistinctValues=bt,e.getDistinctValuesForField=Pt,e.getEditModeWidget=e=>e["related-entity-name"]&&e["primary-key"]?n.FormWidgetType.SELECT:Kt[e.type]&&Kt[e.type][0]||n.FormWidgetType.TEXT,e.getEmptyMatchMode=Et,e.getEnableEmptyFilter=It,e.getEvaluatedData=C,e.getFieldLayoutConfig=(e,t,i)=>{let a="",s="";return"top"===(t=t||"top")||"floating"===t?i&&"android"===i||!n.isMobileApp()||n.isAndroid()?a=s="col-xs-12":n.isMobileApp()&&(a="col-xs-4",s="col-xs-8"):e&&_.forEach(_.split(e," "),(function(e){const t=_.split(e,"-"),i=t[0];let n,o;n=parseInt(t[1],10),o=12-n,o=o<=0?12:o,a+=" col-"+i+"-"+n,s+=" col-"+i+"-"+o})),{captionCls:a,widgetCls:s}},e.getFieldTypeWidgetTypesMap=()=>Kt,e.getImageUrl=O,e.getKeyboardFocusableElements=e=>{const t=e.querySelectorAll("a, button, input, textarea, select, details, iframe, embed, object, summary dialog, audio[controls], video[controls], [contenteditable]");return Array.from(t).filter((e=>!e.hasAttribute("disabled")&&!e.hasAttribute("hidden")&&(!e.hasAttribute("tabindex")||e.hasAttribute("tabindex")&&!e.getAttribute("tabindex").startsWith("-"))))},e.getMatchModeMsgs=e=>({start:e.LABEL_STARTS_WITH,startignorecase:e.LABEL_STARTS_WITH_IGNORECASE,end:e.LABEL_ENDS_WITH,endignorecase:e.LABEL_ENDS_WITH_IGNORECASE,anywhere:e.LABEL_CONTAINS,anywhereignorecase:e.LABEL_CONTAINS_IGNORECASE,exact:e.LABEL_IS_EQUAL_TO,exactignorecase:e.LABEL_IS_EQUAL_TO_IGNORECASE,notequals:e.LABEL_IS_NOT_EQUAL_TO,notequalsignorecase:e.LABEL_IS_NOT_EQUAL_TO_IGNORECASE,lessthan:e.LABEL_LESS_THAN,lessthanequal:e.LABEL_LESS_THAN_OR_EQUALS_TO,greaterthan:e.LABEL_GREATER_THAN,greaterthanequal:e.LABEL_GREATER_THAN_OR_EQUALS_TO,null:e.LABEL_IS_NULL,isnotnull:e.LABEL_IS_NOT_NULL,empty:e.LABEL_IS_EMPTY,isnotempty:e.LABEL_IS_NOT_EMPTY,nullorempty:e.LABEL_IS_NULL_OR_EMPTY,in:e.LABEL_IN,notin:e.LABEL_NOT_IN,between:e.LABEL_BETWEEN}),e.getMatchModeTypesMap=e=>(e&&(M.number.push("in","notin","between"),M.date.push("between"),M.string.push("in","notin"),M.character.push("in","notin")),_.forEach(T,((e,t)=>{_.forEach(e,(e=>{N[e]=M[t]}))})),N.default=_.union(M.number,M.string,M.character,M.date,M.date),N),e.getObjValueByKey=P,e.getOrderByExpr=e=>{e=e||[];const t=[];return _.forEach(e,(e=>{e.direction&&t.push(e.property+" "+e.direction.toLowerCase())})),_.join(t,",")},e.getOrderedDataset=Bt,e.getRangeFieldValue=At,e.getRangeMatchMode=_t,e.getRowOperationsColumn=()=>({field:"rowOperations",type:"custom",displayName:"Actions",width:"120px",readonly:!0,sortable:!1,searchable:!1,resizable:!1,selectable:!1,show:!0,operations:[],opConfig:{},pcDisplay:!0,mobileDisplay:!0,tabletDisplay:!0,include:!0,isRowOperation:!0}),e.getUniqObjsByDataField=(e,t,i,n)=>{let a;const s=t===ht;return a=s?_.uniqWith(e,_.isEqual):_.uniqBy(e,"key"),!i||n?a:_.filter(a,(e=>(s||_.trim(e.key))&&_.trim(e.label)))},e.getWatchIdentifier=S,e.getWidgetPropsByType=Q,e.groupData=(e,t,i,a,s,o,r,l,c)=>{let d={};if(_.includes(i,"(")){const a=n.$parseEvent(i);d=_.groupBy(t,(t=>a(e.viewParent,{row:t.dataObject||t})))}else d=Gt(t,i,a,s,o,r,l,c);return((e,t,i)=>{const n=[];return _.forEach(_.keys(e),((a,s)=>{const o=Bt(e[a],i,"dataObject");n.push({key:a,data:_.sortBy(o,(e=>(e._groupIndex=s+1,_.get(e,t)||_.get(e.dataObject,t))))})})),n})(d,i,s)},e.handleHeaderClick=e=>{const t=$(e.target).closest(".item-group"),i=t.find("li.list-group-header .app-icon");i.hasClass("wi-chevron-down")?i.removeClass("wi-chevron-down").addClass("wi-chevron-up"):i.removeClass("wi-chevron-up").addClass("wi-chevron-down"),t.find(".group-list-item").toggle()},e.hasLinkToCurrentPage=I,e.interpolateBindExpressions=ft,e.isActiveNavItem=A,e.isBooleanAttr=oe,e.isDataSetWidget=E,e.isDimensionProp=le,e.isStyle=V,e.parseValueByType=(e,t,i,a)=>i?i===n.FormWidgetType.NUMBER||i===n.FormWidgetType.SLIDER||i===n.FormWidgetType.CURRENCY?isNaN(Number(e))?null:a?e:Number(e):i===n.FormWidgetType.CHECKBOX||i===n.FormWidgetType.TOGGLE?Yt(e):e:n.isNumberType(t)?isNaN(Number(e))?null:Number(e):t===n.DataType.BOOLEAN?Yt(e):e,e.performDataOperation=function(t,i,a){return new Promise(((s,o)=>{if(t.execute(n.DataSource.Operation.SUPPORTS_CRUD)){let r;switch(a.operationType){case e.Live_Operations.UPDATE:r=n.DataSource.Operation.UPDATE_RECORD;break;case e.Live_Operations.INSERT:r=n.DataSource.Operation.INSERT_RECORD;break;case e.Live_Operations.DELETE:r=n.DataSource.Operation.DELETE_RECORD}t.execute(r,i).then((e=>function(e,t,i){e.error?i(e):t(e)}(e,s,o)),o)}else if(t.execute(n.DataSource.Operation.IS_API_AWARE))if("wm.CrudVariable"===t.category){const e="insert"===a.operationType?"create":"delete"===a.operationType?"delete":"update";t.execute(n.DataSource.Operation.INVOKE,{skipNotification:!0,operation:e,inputFields:i}).then(s,o)}else t.execute(n.DataSource.Operation.SET_INPUT,i),t.execute(n.DataSource.Operation.INVOKE,{skipNotification:!0}).then(s,o);else s(i)}))},e.prepareFieldDefs=(e,t)=>{let i;const a={objects:[],terminals:[]};if(e||(e=[]),t||(t={}),t.setBindingField=!0,t.columnCount=0,i=(e=>{let t;return _.isArray(e)?_.isObject(e[0])?(t=n.getClonedObject(e[0]),_.forEach(e,((e,i)=>{if(i+1>=10)return!1;_.assignWith(t,e,((e,t)=>null==e?t:e))}))):t=e[0]:t=e,t})(e),F(i,a,"",t),!t||t&&!t.filter)return a.terminals;switch(t.filter){case"all":return a;case"objects":return a.objects;case"terminals":return a.terminals}return a},e.propNameCSSKeyMap=j,e.provideAs=R,e.provideAsDialogRef=function(e){return R(e,b)},e.provideAsWidgetRef=D,e.refreshDataSource=function(e,t){return new Promise(((i,a)=>{e?e.execute(n.DataSource.Operation.LIST_RECORDS,{filterFields:t.filterFields||{},orderBy:t.orderBy,page:t.page||1,logicalOp:t.condition||""}).then(i,a):a()}))},e.register=Y,e.registerFormWidget=(e,t)=>{const i=z+e,n=H.get(i);n&&t.forEach(((e,t)=>n.set(t,e)))},e.setFocusTrap=(e,t,i)=>s.createFocusTrap(e,{onActivate:()=>e.classList.add("is-active"),onDeactivate:()=>e.classList.remove("is-active"),allowOutsideClick:t,setReturnFocus:i}),e.setHeaderConfig=Qt,e.setHeaderConfigForTable=(e,t,i,n)=>{i?Qt(e,t,i,n):e[n]=t},e.setItemByCompare=(e,t,i)=>{_.forEach(e,(e=>{if(n.isEqualWithFields(e.value,t,i))return e.selected=!0,!1}))},e.styler=q,e.toggleAllHeaders=e=>{const t=$(e.nativeElement).find(".item-group");t.find(".group-list-item").toggle();const i=t.find("li.list-group-header .app-icon");i&&_.forEach(i,(e=>{(e=$(e)).hasClass("wi-chevron-down")?e.removeClass("wi-chevron-down").addClass("wi-chevron-up"):e.removeClass("wi-chevron-up").addClass("wi-chevron-down")}))},e.transformData=function(e,t){let i,n,a,s,o,r,l;return e=e||[],_.isArray(e)?_.isString(e[0])&&(n=[],_.forEach(e,(e=>{i={},i[t.split(".").join("-")]=e,n.push(i)})),e=n):(_.isString(e)&&(a=t.substring(t.indexOf(".")+1,t.length).split("."),s=[],o=a.length,r={},l=r,a.forEach(((t,i)=>{s.forEach((e=>{l=r[e]})),l[t]=i===o-1?e:{},s.push(t)})),e=r),e=[e]),e},e.transformDataWithKeys=e=>{const t=[];if(_.isObject(e[0])||_.isObject(e)&&!(e instanceof Array)){const i=Object.keys(e[0]||e);_.forEach(i,((e,i)=>{t.push({key:e,label:e,value:e,index:i+1})}))}return t},e.transformFormData=(e,t,i,a,s,o)=>{const r=[];if(t)return t=jt(t),_.isUndefined(s)&&(s=1),_.isString(t)?(t=t.split(",").map((e=>e.trim()))).forEach(((t,i)=>{const a={key:t,value:t,label:n.isDefined(t)&&null!==t?t.toString():"",index:s+i};Vt(o,e,a,"value"),r.push(a)})):_.isArray(t)&&!_.isObject(t[0])?t.forEach(((t,i)=>{const a={key:t,value:t,label:n.isDefined(t)&&null!==t?t.toString():"",index:s+i};Vt(o,e,a,"value"),r.push(a)})):t instanceof Array||!_.isObject(t)?(i||(i=ht),t.forEach(((t,l)=>{const c=i===ht?s+l:P(t,i);if(!_.isUndefined(c)&&!_.isNull(c)){const d=C(t,{field:a.displayField,expression:a.displayExpr,bindExpression:a.bindDisplayExpr},e),p={key:c,label:n.isDefined(d)&&null!==d?d.toString():"",value:i===ht?t:c,dataObject:t,index:s+l};(a.displayImgSrc||a.bindDisplayImgSrc)&&(p.imgSrc=C(t,{expression:a.displayImgSrc,bindExpression:a.bindDisplayImgSrc},e)),Vt(o,e,p,"dataObject"),r.push(p)}}))):_.forEach(t,((i,a)=>{const l={key:_.trim(a),value:a,label:n.isDefined(i)&&null!==i?i.toString():"",index:s,dataObject:t};Vt(o,e,l,"value"),r.push(l)})),r},e.unsupportedStatePersistenceTypes=["On-Demand","Scroll"],e.updateDeviceView=(e,t=!1)=>{const i=e.querySelector(ni(ii.LEFT_PANEL)),a=e.querySelector(ni(ii.RIGHT_PANEL)),s=e.querySelector(ni(ii.HEADER)),o=s&&s.querySelector(`.${ii.SEARCH}`);((e,t,i,n=!1)=>{n||ai(t,si.bind(void 0,e,i))})(i,e.querySelector(`.${ii.CONTENT}`),o,t),i?((e,t)=>{ai(ni(ii.SWIPE_ELEM),(()=>{e&&(e.widget.toggle(),e.classList.contains("visible")&&t&&n.setCSS(t,"display","none"))}))})(i,o):$(s).find(ni(ii.SWIPE_ELEM)).remove(),a&&(e=>{ai(e,si)})(a),o&&oi(o,i)}})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@wm/transpiler"),require("@wm/core"),require("@angular/compiler")):"function"==typeof define&&define.amd?define(["exports","@wm/transpiler","@wm/core","@angular/compiler"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.buildTask={}),e.wm.transpiler,e.wm.core,e.ng.compiler)}(this,(function(e,t,i,n){"use strict";const a="carousel",s=new i.IDGenerator("wm_carousel_ref_");t.register("wm-carousel",(()=>({pre:(e,i)=>{const n=s.nextUid();return i.set("carousel_ref",n),`<div class="app-carousel carousel"><${a} wmCarousel #${n}="wmCarousel"  ${t.getAttrMarkup(e)} interval="0" [ngClass]="${n}.navigationClass">`},post:()=>`</${a}></div>`,template:e=>{if((e=>e.attrs.find((e=>"type"===e.name&&"dynamic"===e.value)))(e)){const n=e.attrs.find((e=>"dataset"===e.name)),a=e.attrs.find((e=>"name"===e.name));if(!n)return;const s=t.getBoundToExpr(n.value);if(!s)return;i.updateTemplateAttrs(e,s,a.value)}},provide:(e,t)=>{const i=new Map;return i.set("carousel_ref",t.get("carousel_ref")),i}})));var o=Object.freeze({__proto__:null,default:()=>{}});const r="slide";let l=1;t.register("wm-carousel-content",(()=>({pre:e=>`<${r} wmCarouselTemplate  ${t.getAttrMarkup(e)}>`,post:()=>`</${r}>`}))),t.register("wm-carousel-template",(()=>({requires:["wm-carousel"],pre:(e,i,n)=>{const a=n.get("carousel_ref");return`<div *ngIf="!${a}.fieldDefs">{{${a}.nodatamessage}}</div>\n                    <${r} wmCarouselTemplate  ${t.getAttrMarkup(e)} *ngFor="let item of ${a}.fieldDefs; let i = index;">\n                        <ng-container [ngTemplateOutlet]="carouselTempRef${l}" [ngTemplateOutletContext]="{item:item, index:i}"></ng-container>\n                    </${r}>\n                    <ng-template #carouselTempRef${l++} let-item="item" let-index="index">`},post:()=>"</ng-template>"})));var c=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-login",(()=>({pre:e=>`<div wmLogin ${t.getAttrMarkup(e)} eventsource.bind="Actions.loginAction">`,post:()=>"</div>",provide:()=>{const e=new Map;return e.set("isLogin",!0),e}})));var d=Object.freeze({__proto__:null,default:()=>{}});const p="marquee";t.register("wm-marquee",(()=>({pre:e=>`<${p} onmouseover="this.stop();" onmouseout="this.start();" wmMarquee role="marquee" aria-live="off" ${t.getAttrMarkup(e)}>`,post:()=>`</${p}>`})));var u=Object.freeze({__proto__:null,default:()=>{}});const h=new i.IDGenerator("wm_anchor");t.register("wm-anchor",(()=>({pre:e=>{const i=h.nextUid();return`<a wmAnchor #${i}="wmAnchor" role="link" data-identifier="anchor" [attr.aria-label]="${i}.hint || ${i}.caption" ${t.getAttrMarkup(e)}>`},post:()=>"</a>"})));var m=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-audio",(()=>({pre:e=>`<div wmAudio ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var g=Object.freeze({__proto__:null,default:()=>{}});const f=new i.IDGenerator("wm_html");t.register("wm-html",(()=>({pre:e=>{const i=f.nextUid();return`<div wmHtml #${i}="wmHtml" [attr.aria-label]="${i}.hint || 'HTML content'" ${t.getAttrMarkup(e)}>`},post:()=>"</div>"})));var v=Object.freeze({__proto__:null,default:()=>{}});const b="span";t.register("wm-icon",(()=>({pre:e=>`<${b} wmIcon aria-hidden="true" ${t.getAttrMarkup(e)}>`,post:()=>`</${b}>`})));var y=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-iframe",(()=>({pre:e=>`<div wmIframe ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var w=Object.freeze({__proto__:null,default:()=>{}});let P="p";const C=new i.IDGenerator("wm_label");t.register("wm-label",(()=>({pre:e=>{if(e.get("notag"))P="label";else{if(!e.get("type")){const t=e.get("class")?e.get("class").split(" ").filter((e=>["h1","h2","h3","h4","h5","h6","p"].includes(e))):[];e.set("type",t.length?t[0]:"p")}P=e.get("type")}const i=C.nextUid();return`<${P} wmLabel #${i}="wmLabel" [attr.aria-label]="${i}.hint" ${t.getAttrMarkup(e)}>`},post:()=>`</${P}>`})));var A=Object.freeze({__proto__:null,default:()=>{}});const I=new i.IDGenerator("wm_picture");t.register("wm-picture",(()=>({pre:e=>{const i=I.nextUid();return`<img wmPicture #${i}="wmPicture" alt="image" wmImageCache="${e.get("offline")||"true"}" [attr.aria-label]="${i}.hint || 'Image'" ${t.getAttrMarkup(e)}>`}})));var E=Object.freeze({__proto__:null,default:()=>{}});const O=new i.IDGenerator("wm_spinner");t.register("wm-spinner",(()=>({pre:e=>{const i=O.nextUid();return`<div wmSpinner #${i}="wmSpinner" role="alert" [attr.aria-label]="${i}.hint || 'Loading...'" aria-live="assertive" aria-busy="true" ${t.getAttrMarkup(e)}>`},post:()=>"</div>"})));var x=Object.freeze({__proto__:null,default:()=>{}});const R=(e,t)=>e.attrs.find((e=>e.name===t)),D=(e,t)=>{const i=R(e,t);if(i)return i.value};t.register("wm-progress-bar",(()=>({template:e=>{const i=D(e,"dataset"),n=t.getBoundToExpr(i);if(n){let t=D(e,"type"),i=D(e,"datavalue");const s=(a=n,new RegExp(`bind:(${a}|${a}\\[\\$i])\\.`,"g"));t&&t.includes(n)&&(t=t.replace(s,""),R(e,"type").value=t),i&&i.includes(n)&&(i=i.replace(s,""),R(e,"datavalue").value=i)}var a},pre:e=>`<div wmProgressBar ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var S=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-progress-circle",(()=>({pre:e=>`<div wmProgressCircle ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var T=Object.freeze({__proto__:null,default:()=>{}});const M=new i.IDGenerator("wm_richtexteditor");t.register("wm-richtexteditor",(()=>({pre:e=>{const i=M.nextUid();return`<div wmRichTextEditor #${i}="wmRichTextEditor" role="textbox" [attr.aria-label]="${i}.hint || 'Richtext editor'" ${t.getFormMarkupAttr(e)}>`},post:()=>"</div>"})));var N=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-search",(()=>({pre:e=>`<div wmSearch ${t.getFormMarkupAttr(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var k=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-tree",(()=>({pre:e=>`<ul wmTree class="ztree" ${t.getAttrMarkup(e)}>`,post:()=>"</ul>"})));var L=Object.freeze({__proto__:null});t.register("wm-card",(()=>({pre:e=>`<div wmCard ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var F=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-card-content",(()=>({pre:e=>`<div wmCardContent partialContainer ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var $=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-card-actions",(()=>({pre:e=>`<div wmCardActions ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var B=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-card-footer",(()=>({pre:e=>`<div wmCardFooter ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var j=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-chart",(()=>({pre:e=>`<div wmChart redrawable aria-label="${e.get("type")} Chart" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var V=Object.freeze({__proto__:null,default:()=>{}});const G=new i.IDGenerator("wm_accordion_ref_");t.register("wm-accordion",(()=>({pre:(e,i)=>{const n=G.nextUid();return i.set("accordion_ref",n),`<div wmAccordion #${n}="wmAccordion" role="tablist" aria-multiselectable="true" ${t.getAttrMarkup(e)}>`},post:()=>"</div>",template:(e,n)=>{if((e=>e.attrs.find((e=>"type"===e.name&&"dynamic"===e.value)))(e)){const n=e.attrs.find((e=>"dataset"===e.name)),a=e.attrs.find((e=>"name"===e.name));if(!n)return;const s=t.getBoundToExpr(n.value);if(!s)return;i.updateTemplateAttrs(e,s,a.value)}},provide:(e,t)=>{const i=new Map;return i.set("accordion_ref",t.get("accordion_ref")),i}})));var W=Object.freeze({__proto__:null,default:()=>{}});const U=new i.IDGenerator("wm_accordionpane");t.register("wm-accordionpane",(()=>({pre:e=>{const i=U.nextUid();return`<div #${i}="wmAccordionPane" [attr.aria-expanded]="${i}.isActive" wmAccordionPane partialContainer wm-navigable-element="true" role="tab" ${t.getAttrMarkup(e)}>`},post:()=>"</div>"})));var q=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-container",(()=>({pre:e=>`<div wmContainer partialContainer wmSmoothscroll="${e.get("smoothscroll")||"false"}" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var z=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-gridcolumn",(()=>({pre:e=>`<div wmLayoutGridColumn ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var H=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-gridrow",(()=>({pre:e=>`<div wmLayoutGridRow ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Q=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-layoutgrid",(()=>({pre:e=>`<div wmLayoutGrid ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Y=Object.freeze({__proto__:null,default:()=>{}});const K="div",J=new i.IDGenerator("wm_panel");t.register("wm-panel",(()=>({pre:e=>{const i=J.nextUid();return`<${K} wmPanel #${i}="wmPanel" partialContainer wm-navigable-element="true" ${t.getAttrMarkup(e)}>`},post:()=>`</${K}>`}))),t.register("wm-panel-footer",(()=>({pre:e=>`<${K} wmPanelFooter ${t.getAttrMarkup(e)}>`,post:()=>`</${K}>`})));var Z=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-segmented-control",(()=>({pre:e=>`<div wmSegmentedControl ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var X=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-segment-content",(()=>({pre:e=>`<li wmSegmentContent partialContainer wmSmoothscroll=${e.get("smoothscroll")||"false"} wm-navigable-element="true" ${t.getAttrMarkup(e)}>`,post:()=>"</li>"})));var ee=Object.freeze({__proto__:null,default:()=>{}});let te=1;t.register("wm-repeat-template",(()=>({requires:["wm-accordion","wm-tabs"],pre:(e,i,n,a)=>{const s=n&&n.get("accordion_ref")||a&&a.get("tabs_ref");if(s)return`<div *ngIf="${s}.fieldDefs && !${s}.fieldDefs.length">{{${s}.nodatamessage}}</div>\n                    <div wmRepeatTemplate  ${t.getAttrMarkup(e)} *ngFor="let item of ${s}.fieldDefs; let i = index;">\n                        <ng-container [ngTemplateOutlet]="widgetRef${te}" [ngTemplateOutletContext]="{item:item, index:i}"></ng-container>\n                    </div>\n                    <ng-template #widgetRef${te++} let-item="item" let-index="index">`},post:()=>"</ng-template>"})));var ie=Object.freeze({__proto__:null,default:()=>{}});const ne=new i.IDGenerator("wm_tabs_ref_");t.register("wm-tabs",(()=>({pre:(e,i)=>{const n=ne.nextUid();return i.set("tabs_ref",n),`<div wmTabs #${n}="wmTabs" ${t.getAttrMarkup(e)}>`},post:()=>"</div>",template:(e,n)=>{if((e=>e.attrs.find((e=>"type"===e.name&&"dynamic"===e.value)))(e)){const n=e.attrs.find((e=>"dataset"===e.name)),a=e.attrs.find((e=>"name"===e.name));if(!n)return;const s=t.getBoundToExpr(n.value);if(!s)return;i.updateTemplateAttrs(e,s,a.value)}},provide:(e,t)=>{const i=new Map;return i.set("tabs_ref",t.get("tabs_ref")),i}})));var ae=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-tabpane",(()=>({pre:e=>`<div wmTabPane  partialContainer ${t.getAttrMarkup(e)} wm-navigable-element="true" role="tabpanel">`,post:()=>"</div>"})));var se=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-tile",(()=>({pre:e=>`<div wmTile aria-describedby="Tile" wm-navigable-element="true" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var oe=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-wizard",(()=>({pre:e=>`<div wmWizard role="tablist" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var re=Object.freeze({__proto__:null,default:()=>{}});const le="form",ce=new i.IDGenerator("wizard_step_id_");t.register("wm-wizardstep",(()=>({pre:e=>{const i=ce.nextUid();return`<${le} wmWizardStep #${i}="wmWizardStep" ${t.getAttrMarkup(e)}>\n                       <ng-template [ngIf]="${i}.isInitialized">`},post:()=>`</ng-template></${le}>`})));var de=Object.freeze({__proto__:null,default:()=>{}});const pe="button",ue=new i.IDGenerator("wm_barcodescanner");t.register("wm-barcodescanner",(()=>({pre:e=>{const i=ue.nextUid();return`<${pe} wmBarcodescanner #${i}="wmBarcodescanner" [attr.aria-label]="${i}.hint || 'Barcode scanner'"  ${t.getAttrMarkup(e)}>`},post:()=>`</${pe}>`})));var he=Object.freeze({__proto__:null,default:()=>{}});const me="button",ge=new i.IDGenerator("wm_camera");t.register("wm-camera",(()=>({pre:e=>{const i=ge.nextUid();return`<${me} type='button' wmCamera #${i}="wmCamera" [attr.aria-label]="${i}.hint || 'Camera'"  ${t.getAttrMarkup(e)}>`},post:()=>`</${me}>`})));var fe=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-alertdialog",(()=>({pre:e=>`<div wmAlertDialog role="alertdialog" wm-navigable-element="true" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var ve=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-confirmdialog",(()=>({pre:e=>`<div wmConfirmDialog wm-navigable-element="true" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var be=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-dialogactions",(()=>({pre:e=>`<ng-template #dialogFooter><div wmDialogFooter data-identfier="actions" ${t.getAttrMarkup(e)}>`,post:()=>"</div></ng-template>"})));var ye=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-dialog",(()=>({pre:e=>`<div wmDialog ${t.getAttrMarkup(e)} aria-modal="true" role="dialog" wm-navigable-element="true"><ng-template #dialogBody>`,post:()=>"</ng-template></div>"}))),t.register("wm-view",(()=>({pre:e=>"",post:()=>""})));var we=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-iframedialog",(()=>({pre:e=>`<div wmIframeDialog wm-navigable-element="true" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Pe=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-logindialog",(()=>({pre:e=>`<div wmDialog wmLoginDialog ${t.getAttrMarkup(e)} eventsource.bind="Actions.loginAction" wm-navigable-element="true"><ng-template #dialogBody>`,post:()=>"</ng-template></div>"})));var Ce=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-pagedialog",(()=>({pre:(e,i)=>{const n=e.get("content");e.delete("content");const a=e.get("content.bind");e.delete("content.bind");const s=e.get("load.event");e.delete("load.event");let o="",r="";s&&(o=`load.event="${s}"`),a?r=`content.bind="${a}"`:n&&(r=`content="${n}"`);let l="";return r&&(i.set("hasPartialContent",!0),l+=`<ng-template><div wmContainer #partial partialContainer ${r} width="100%" height="100%" ${o}>`),`<div wmPartialDialog ${t.getAttrMarkup(e)}>${l}`},post:(e,t)=>{let i="";return t.get("hasPartialContent")&&(i="</div></ng-template>"),`${i}</div>`}})));var Ae=Object.freeze({__proto__:null,default:()=>{}});const _e="quickedit",Ie="form",Ee="dialog",Oe={integer:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],big_integer:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],short:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],float:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],big_decimal:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],number:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],double:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],long:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],byte:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],string:["text","number","textarea","password","richtext","select","checkboxset","radioset","date","time","timestamp","switch","currency","autocomplete","chips","colorpicker"],character:["text","number","textarea","password","richtext","select","checkboxset","radioset","switch","currency","autocomplete","chips"],text:["text","number","textarea","password","richtext","select","checkboxset","radioset","date","time","timestamp","switch","currency","autocomplete","chips","colorpicker"],date:["date","text","number","select","checkboxset","radioset","autocomplete","chips"],time:["time","text","number","select","checkboxset","radioset","autocomplete","chips"],timestamp:["timestamp","text","number","select","checkboxset","radioset","autocomplete","chips"],datetime:["datetime","text","select","checkboxset","radioset","autocomplete","chips"],boolean:["checkbox","radioset","toggle","select"],list:["select","radioset","checkboxset","switch","autocomplete","chips"],clob:["text","textarea","richtext"],blob:["upload"],file:["upload"],custom:["text","number","textarea","password","checkbox","toggle","slider","richtext","currency","switch","select","checkboxset","radioset","date","time","timestamp","rating","datetime","autocomplete","chips","colorpicker"]},xe=new Set([i.FormWidgetType.SELECT,i.FormWidgetType.CHECKBOXSET,i.FormWidgetType.RADIOSET,i.FormWidgetType.SWITCH,i.FormWidgetType.AUTOCOMPLETE,i.FormWidgetType.CHIPS,i.FormWidgetType.TYPEAHEAD,i.FormWidgetType.RATING]),Re=e=>{let t=Oe[e]&&Oe[e][0];e===i.DataType.BOOLEAN&&(t=i.FormWidgetType.SELECT);return[i.FormWidgetType.TEXT,i.FormWidgetType.NUMBER,i.FormWidgetType.SELECT,i.FormWidgetType.AUTOCOMPLETE,i.FormWidgetType.DATE,i.FormWidgetType.TIME,i.FormWidgetType.DATETIME].includes(t)?t:i.FormWidgetType.TEXT},De=new i.IDGenerator("formfield_"),Se=new Map([[i.FormWidgetType.SELECT,["Select Min value","Select Max value","Select value"]],[i.FormWidgetType.DATETIME,["Select Min date time","Select Max date time","Select date time"]],[i.FormWidgetType.TIME,["Select Min time","Select Max time","Select time"]],[i.FormWidgetType.DATE,["Select Min date","Select Max date","Select date"]],[i.FormWidgetType.TEXTAREA,["","","Enter value"]],[i.FormWidgetType.RICHTEXT,["","","Enter value"]],[i.FormWidgetType.COLORPICKER,["Select Color","Select Color","Select Color"]],[i.FormWidgetType.CHIPS,["","","Type here..."]],[i.FormWidgetType.PASSWORD,["Enter Min value","Enter Max value","Enter value"]],[i.FormWidgetType.NUMBER,["Enter Min value","Enter Max value","Enter value"]],[i.FormWidgetType.TEXT,["Enter Min value","Enter Max value","Enter value"]],[i.FormWidgetType.CURRENCY,["Enter Min value","Enter Max value","Enter value"]],[i.FormWidgetType.AUTOCOMPLETE,["","","Search"]]]),Te=(e,t,i)=>{const n=1===i?"maxplaceholder":"placeholder";let a=e.get(n);a||""===a||(a=Se.get(t)&&Se.get(t)[i],a&&e.set(n,a))},Me=(e,t)=>{const n=e.get("name"),a=(e.get("key")||n||"").trim(),s=t.isMaxWidget?`formControlName="${a}_max"`:t.isInList?`[formControlName]="${t.counter}._fieldName"`:`formControlName="${a}"`,o=t.isMaxWidget?"#formWidgetMax":"#formWidget",r=n?t.isMaxWidget?`name="${n}_formWidgetMax"`:`name="${n}_formWidget"`:"",l=`[ngClass]="${e.get("ngclass")}"`,c=`[class.hidden]="!${t.pCounter}.isUpdateMode && ${t.counter}.viewmodewidget !== 'default'" ${s} ${t.eventsTmpl} ${l} ${o} ${r}`;return i.getFormWidgetTemplate(t.widgetType,c,e,{counter:t.counter,pCounter:t.pCounter})},Ne=(e,t,n)=>{if("true"===e.get("is-related"))return`${n}.getDisplayExpr()`;if(t===i.FormWidgetType.PASSWORD)return"'********'";let a=`${n}.value`;return t===i.FormWidgetType.DATETIME||t===i.FormWidgetType.TIMESTAMP?(a+=` | toDate:${n}.formWidget.datepattern || 'yyyy-MM-dd hh:mm:ss a'`,a):t===i.FormWidgetType.TIME?(a+=` | toDate:${n}.formWidget.timepattern || 'hh:mm a'`,a):t===i.FormWidgetType.DATE?(a+=` | toDate:${n}.formWidget.datepattern ||  'yyyy-MMM-dd'`,a):t===i.FormWidgetType.RATING||t===i.FormWidgetType.UPLOAD?"":(s=t,xe.has(s)&&"All Fields"===e.get("datafield")?`${n}.getDisplayExpr()`:`${n}.getCaption()`);var s},ke=e=>({requires:["wm-form","wm-liveform","wm-livefilter","wm-list"],pre:(n,a,s,o,r,l)=>{const c=De.nextUid(),d=s||o||r,p=d&&d.get("form_reference")||"form",u=n.get("widget")||i.FormWidgetType.TEXT,h=e?"form-field":"filter-field",m="wmform-field-error-"+i.generateGUId(),g=e?`<p *ngIf="${c}._control?.invalid && ${c}._control?.touched && ${p}.isUpdateMode"\n                                   class="help-block text-danger" aria-hidden="false"\n                                   aria-live="assertive" [attr.aria-label]="${c}.validationmessage" id="${m}"><span aria-hidden="true" [textContent]="${c}.validationmessage"></span></p>`:"",f=u===i.FormWidgetType.UPLOAD?"":(e=>{const i=new Map;return e.has("focus.event")||e.set("focus.event",""),e.has("blur.event")||e.set("blur.event",""),e.forEach(((t,n)=>{n.endsWith(".event")&&("focus.event"===n?t=`_onFocusField($event);${t}`:"blur.event"===n&&(t=`_onBlurField($event);${t}`),i.set(n,t),e.delete(n))})),t.getFormMarkupAttr(i)})(n),v=i.isMobileApp()?"col-xs-12":"col-sm-12",b=p===(l&&l.get("parent_form_reference"));return n.set("__validationId",m),n.set("__widgetType",u),n.delete("widget"),a.set("counter",c),"true"===n.get("is-range")?(Te(n,u,0),Te(n,u,1)):Te(n,u,2),`<div data-role="${h}" [formGroup]="${p}.ngform" wmFormField wmCaptionPosition #${c}="wmFormField" widgettype="${u}" ${t.getFormMarkupAttr(n)}>\n                        <div class="live-field form-group app-composite-widget clearfix caption-{{${p}.captionposition}}" widget="${u}">\n                            <label [hidden]="!${c}.displayname" class="app-label control-label formfield-label {{${p}._captionClass}}"\n                                        [ngStyle]="{width: ${p}.captionsize}" [ngClass]="{'text-danger': ${c}._control?.invalid && ${c}._control?.touched && ${p}.isUpdateMode,\n                                         required: ${p}.isUpdateMode && ${c}.required}" [textContent]="${c}.displayname"> </label>\n                            <div [ngClass]="${c}.displayname ? ${p}._widgetClass : '${v}'">\n                                 <label class="form-control-static app-label"\n                                       [hidden]="${p}.isUpdateMode || ${c}.viewmodewidget === 'default' || ${c}.widgettype === 'upload'" [innerHTML]="${Ne(n,u,c)}"></label>\n                                ${((e,t,n,a,s,o)=>{if("true"!==e.get("is-range"))return Me(e,{widgetType:t,eventsTmpl:n,counter:a,pCounter:s,isInList:o});const r=i.isMobileApp()?"col-xs-6":"col-sm-6";return`<div class="${r}">${Me(e,{widgetType:t,eventsTmpl:n,counter:a,pCounter:s})}</div>\n                <div class="${r}">${Me(e,{widgetType:t,eventsTmpl:n,counter:a,pCounter:s,isMaxWidget:!0})}</div>`})(n,u,f,c,p,b)}\n                                <span aria-hidden="true" *ngIf="${c}.showPendingSpinner" class="form-field-spinner fa fa-circle-o-notch fa-spin form-control-feedback"></span>\n                                <p *ngIf="!(${c}._control?.invalid && ${c}._control?.touched) && ${p}.isUpdateMode"\n                                   class="help-block" aria-hidden="true" role="alert" aria-live="polite" [textContent]="${c}.hint"></p>\n                                ${g}\n                            </div>\n                        </div>`},post:()=>"</div>",provide:(e,t)=>{const i=new Map;return i.set("form_reference",t.get("counter")),i},imports:e=>{const t=i.getRequiredFormWidget(e.get("__widgetType")||e.get("type"));return e.delete("__widgetType"),[t,"wm-form"]}});t.register("wm-form-field",ke.bind(void 0,!0)),t.register("wm-filter-field",ke.bind(void 0,!1));var Le=Object.freeze({__proto__:null,default:()=>{}});const Fe=e=>({pre:i=>`<div wmFormAction name="${i.get("name")||i.get("key")}" ${t.getAttrMarkup(i)} ${e}>`,post:()=>"</div>"});t.register("wm-form-action",Fe.bind(void 0,"")),t.register("wm-filter-action",Fe.bind(void 0,' update-mode="true" '));var $e=Object.freeze({__proto__:null,default:()=>{}});const Be="form",je=new i.IDGenerator("form_"),Ve=new Set(["wm-text","wm-textarea","wm-checkbox","wm-slider","wm-richtexteditor","wm-currency","wm-switch","wm-select","wm-checkboxset","wm-radioset","wm-date","wm-time","wm-timestamp","wm-upload","wm-rating","wm-datetime","wm-search","wm-chips","wm-colorpicker","wm-table"]);let Ge;const We=(e=[])=>{e.forEach((e=>{if("wm-form-field"===e.name&&Ge++,Ve.has(e.name)){let t=e.attrs.find((e=>"key"===e.name||"name"===e.name));if(t=t&&t.value,!t){let i=e.attrs.find((e=>"datavalue"===e.name));if(i&&i.value){const e=/\((.*)\)/;i=i.value.match(e),i&&i.length>1&&(t=i[1].replace(/["']/g,""))}}e.attrs.push(new n.Attribute("formControlName",t,1,1,1,void 0,void 0)),e.attrs.push(new n.Attribute("wmFormWidget","",1,1,1,void 0,void 0))}We(e.children)}))},Ue=(e="")=>({requires:["wm-livetable","wm-login"],template:e=>{Ge=0,We(e.children)},pre:(i,n,a,s)=>{let o,r;const l=s&&s.get("isLogin")?"app-login":"",c=je.nextUid(),d=i.get("dependson")?`dependson="${i.get("dependson")}"`:"";d&&i.set("dependsontable",i.get("dependson"));const p="page"===i.get("formlayout")?"app-device-liveform panel liveform-inline":"",u=["title","title.bind","iconclass","iconclass.bind","width"];i.delete("dependson");const h=`<${Be} wmForm data-role="${l}" ${e} #${c} ngNativeValidate [formGroup]="${c}.ngform" [noValidate]="${c}.validationtype !== 'html'"\n                    class="${p}" [class]="${c}.captionAlignClass" [autocomplete]="${c}.autocomplete ? 'on' : 'off'" captionposition=${i.get("captionposition")}`;if(i.set("numberOfFields",`${Ge}`),n.set("counter",c),(e=>{if(e.get("formdata.bind")){const i=t.getDataSource(e.get("formdata.bind"));i&&e.set("formdatasource.bind",i)}})(i),"dialog"===i.get("formlayout")){r=a?a.get("liveform_dialog_id"):`liveform_dialog_id_${c}`,i.set("dialogId",r);const e=new Map;return u.forEach((t=>{i.get(t)&&e.set(t,i.get(t))})),i.set("width","100%"),o=t.getAttrMarkup(i),`<div data-identifier="liveform" init-widget class="app-liveform liveform-dialog" ${d} dialogid="${r}">\n                            <div wmDialog class="app-liveform-dialog" name="${r}" role="form" ${t.getAttrMarkup(e)} modal="true">\n                            <ng-template #dialogBody>\n                            ${h} ${o}>`}let m="",g="";if("page"===i.get("formlayout")){const e=`device_liveform_header_${c}`,n=new Map;n.set("title",i.get("title")),n.set("backbtnclick.event",i.get("backbtnclick.event")),g=`<ng-template #buttonRef let-btn="btn">\n                                            <button  wmButton name="{{btn.key}}" class="navbar-btn btn-primary btn-transparent" iconclass.bind="btn.iconclass" show.bind="btn.show"\n                                                     (click)="${c}.invokeActionEvent($event, btn.action)" type.bind="btn.type" hint.bind="btn.title" shortcutkey.bind="btn.shortcutkey" disabled.bind="btn.disabled"\n                                                     tabindex.bind="btn.tabindex" [class.hidden]="btn.updateMode ? !${c}.isUpdateMode : ${c}.isUpdateMode"></button>\n                                        </ng-template>`,m=`<header wmMobileNavbar name="${e}" ${t.getAttrMarkup(n)}>\n                                            <ng-container *ngFor="let btn of ${c}.buttonArray" [ngTemplateOutlet]="buttonRef" [ngTemplateOutletContext]="{btn:btn}">\n                                            </ng-container>\n                                        </header>\n                                        <div class="form-elements panel-body" >`}o=t.getAttrMarkup(i);return`${d?`<div ${d}>`:""}${h} ${o}>\n                       ${g} ${m}`},post:e=>"dialog"===e.get("formlayout")?"</form></ng-template></div></div>":"page"===e.get("formlayout")?`</div></${Be}>`:e.get("dependsontable")?`</${Be}></div>`:`</${Be}>`,provide:(e,t)=>{const i=new Map;return i.set("form_reference",t.get("counter")),i}});t.register("wm-form",Ue),t.register("wm-liveform",(()=>Ue("wmLiveForm"))),t.register("wm-livefilter",(()=>Ue("wmLiveFilter")));var qe=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-calendar",(()=>({pre:e=>`<div wmCalendar redrawable style="width:100%" aria-label="${e.get("view")?e.get("view")+" view":"month view"}" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var ze=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-chips",(()=>({pre:e=>`<ul wmChips role="listbox" ${t.getAttrMarkup(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</ul>"})));var He=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-colorpicker",(()=>({pre:e=>`<div wmColorPicker ${t.getAttrMarkup(e)} role="input" ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var Qe=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-currency",(()=>({pre:e=>`<div wmCurrency ${t.getAttrMarkup(e)} role="input" ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var Ye=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-buttongroup",(()=>({pre:e=>`<div wmButtonGroup role="group" aria-labelledby="button group" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Ke=Object.freeze({__proto__:null,default:()=>{}});const Je="button",Ze=new i.IDGenerator("wm_button");t.register("wm-button",(()=>({pre:e=>{const i=Ze.nextUid();return`<${Je} wmButton #${i}="wmButton" [attr.aria-label]="${i}.hint || ${i}.caption || null" ${t.getAttrMarkup(e)}>`},post:()=>`</${Je}>`})));var Xe=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-checkbox",(()=>({pre:e=>`<div wmCheckbox ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var et=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-checkboxset",(()=>({pre:e=>`<ul role="group" wmCheckboxset ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</ul>"})));var tt=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-composite",(()=>({pre:e=>`<div wmComposite wmCaptionPosition ${t.setChildAttrs(e)} ${t.getAttrMarkup(e)}>`,post:()=>`</div${t.clearChildAttrs()}>`})));var it=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-number",(()=>({pre:e=>`<div wmNumber ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var nt=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-radioset",(()=>({pre:e=>`<ul role="radiogroup" wmRadioset ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</ul>"})));var at=Object.freeze({__proto__:null,default:()=>{}});const st="wm-select";t.register("wm-select",(()=>({pre:e=>`<${st} ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)}  ${i.getNgModelAttr(e)}>`,post:()=>`</${st}>`})));var ot=Object.freeze({__proto__:null,default:()=>{}});const rt=new i.IDGenerator("wm_switch");t.register("wm-switch",(()=>({pre:e=>{const n=rt.nextUid();return`<div wmSwitch #${n}="wmSwitch" [attr.aria-label]="${n}.hint || 'Switch button'" ${t.getFormMarkupAttr(e)} ${i.getNgModelAttr(e)}>`},post:()=>"</div>"})));var lt=Object.freeze({__proto__:null,default:()=>{}});const ct="wm-input";t.register("wm-text",(()=>({pre:e=>`<${ct} ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>`</${ct}>`})));var dt=Object.freeze({__proto__:null,default:()=>{}});const pt="wm-textarea";t.register("wm-textarea",(()=>({pre:e=>`<${pt} ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>`</${pt}>`})));var ut=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-datetime",(()=>({pre:e=>`<div wmDateTime ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var ht=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-date",(()=>({pre:e=>`<div wmDate ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var mt=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-time",(()=>({pre:e=>`<div wmTime ${t.getFormMarkupAttr(e)} ${t.getChildAttrs(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var gt=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-fileupload",(()=>({pre:e=>{if(e.get("select.event")){const i=t.getDataSource(e.get("select.event"));e.set("datasource.bind",i)}return`<div wmFileUpload ${t.getAttrMarkup(e)} role="input">`},post:()=>"</div>"})));var ft=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-rating",(()=>({pre:e=>`<div wmRating ${t.getFormMarkupAttr(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var vt=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-slider",(()=>({pre:e=>`<div wmSlider ${t.getAttrMarkup(e)} ${i.getNgModelAttr(e)}>`,post:()=>"</div>"})));var bt=Object.freeze({__proto__:null,default:()=>{}});function yt(e,t,i,a){const s=e.attrs.find((e=>e.name===t));s&&i.attrs.push(new n.Attribute(a,s.value,s.sourceSpan,s.keySpan,s.valueSpan,void 0,void 0))}t.register("wm-media-list",(()=>({template:e=>{let t;const i=e.attrs.find((e=>"dataset"===e.name)),a=(e=[])=>{e.forEach((e=>{e.name&&"wm-list"!==e.name&&(e.attrs.forEach((e=>{e.value.startsWith(`bind:${t}.data[$i]`)?e.value=e.value.replace(`${t}.data[$i]`,"item"):e.value.startsWith(`bind:${t}`)&&(e.value=e.value.replace(t,"item"))})),a(e.children))}))};i&&i.value.startsWith("bind:")&&(t=i.value.replace("bind:","")),t&&a(e.children);const s=e.children.find((e=>e instanceof n.Element&&"wm-media-template"===e.name));null!=s&&(yt(s,"width",e,"thumbnailwidth"),yt(s,"height",e,"thumbnailheight"))},pre:e=>`<div wmMediaList ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var wt=Object.freeze({__proto__:null,default:()=>{}});const Pt="ng-template";t.register("wm-media-template",(()=>({pre:()=>`<${Pt} #mediaListTemplate let-item="item" let-index="index">`,post:()=>`</${Pt}>`})));var Ct=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-list",(()=>({requires:["wm-form","wm-liveform"],template:e=>{const n=e.attrs.find((e=>"dataset"===e.name)),a=e.attrs.find((e=>"name"===e.name));if(!n)return;const s=t.getBoundToExpr(n.value);s&&i.updateTemplateAttrs(e,s,a.value,"itemRef.")},pre:(e,i,n,a)=>{const s=n||a;return i.set("form_reference",s&&s.get("form_reference")),`<div wmList wmLiveActions ${t.getAttrMarkup(e)}>`},post:()=>"</div>",provide:(e,t)=>{const i=new Map;return i.set("parent_form_reference",t.get("form_reference")),i}}))),t.register("wm-listtemplate",(()=>({pre:()=>'<ng-template #listTemplate let-item="item" let-$index="$index" let-itemRef="itemRef" let-$first="$first" let-$last="$last"  let-currentItemWidgets="currentItemWidgets" >',post:()=>"</ng-template>"}))),t.register("wm-list-action-template",(()=>({template:e=>{e.attrs.find((e=>"position"===e.name)).value;e.children.filter((e=>e instanceof n.Element&&"wm-button"===e.name)).forEach((t=>{!function(e,t,i,a){const s=e.attrs.find((e=>e.name===t));s&&i.attrs.push(new n.Attribute(a,s.value,s.sourceSpan,s.keySpan,s.valueSpan,void 0,void 0))}(e,"position",t,"swipe-position")}))},pre:(e,i)=>"left"===e.get("position")?`<ng-template #listLeftActionTemplate>\n                            <li class="app-list-item-action-panel app-list-item-left-action-panel actionMenu" ${t.getAttrMarkup(e)}>`:"right"===e.get("position")?`<ng-template #listRightActionTemplate>\n                            <li class="app-list-item-action-panel app-list-item-right-action-panel actionMenu" ${t.getAttrMarkup(e)}>`:void 0,post:()=>"</li></ng-template>"})));var At=Object.freeze({__proto__:null,default:()=>{}});const _t=new i.IDGenerator("liveform_dialog_id_");t.register("wm-livetable",(()=>({pre:(e,i)=>{const n=_t.nextUid();return i.set("counter",n),`<div wmLiveTable ${t.getAttrMarkup(e)} dialogid="${n}">`},post:()=>"</div>",provide:(e,t)=>{const i=new Map;return i.set("liveform_dialog_id",t.get("counter")),i}})));var It=Object.freeze({__proto__:null,default:()=>{}});const Et=new i.IDGenerator("wm_message");t.register("wm-message",(()=>({pre:e=>`<p wmMessage tabindex="0" #${Et.nextUid()}="wmMessage" ${t.getAttrMarkup(e)}>`,post:()=>"</p>"})));var Ot=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-breadcrumb",(()=>({pre:e=>`<ol wmBreadcrumb ${t.getAttrMarkup(e)}>`,post:()=>"</ol>"})));var xt=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-menu",(()=>({pre:e=>`<div wmMenu dropdown ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Rt=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-nav-item",(()=>({pre:e=>`<li wmNavItem role="listitem" ${t.getAttrMarkup(e)}>`,post:()=>"</li>"})));var Dt=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-nav",(()=>({pre:e=>`<ul wmNav data-element-type="wmNav" data-role="page-header" role="list" ${t.getAttrMarkup(e)}>`,post:()=>"</ul>"})));var St=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-navbar",(()=>({pre:e=>`<nav wmNavbar data-element-type="wmNavbar" role="navigation" ${t.getAttrMarkup(e)}>`,post:()=>"</nav>"})));var Tt=Object.freeze({__proto__:null,default:()=>{}});const Mt="wm-popover";t.register("wm-popover",(()=>({requires:["wm-table"],pre:(e,i,n)=>{let a;if("inline"!==e.get("contentsource")){const t=e.get("content"),n=e.get("content.bind");let s="";t?s=`content="${t}"`:n&&(s=`content.bind="${n}"`),a=`<div wmContainer #partial partialContainer ${s}>`,i.set("hasPopoverContent",!0)}let s=`<${Mt} wmPopover ${t.getAttrMarkup(e)}>`;return s+=`<ng-template ${n?'let-row="row"':""}><div tabindex="0" class="popover-start sr-only" aria-label="">popover content start</div>`,a&&(s+=`${a||""}`),s},post:(e,t)=>{let i="";return t.get("hasPopoverContent")&&(i+="</div>"),`${i}<div tabindex="0" class="popover-end sr-only" aria-label="">popover content ended</div></ng-template></${Mt}>`}})));var Nt=Object.freeze({__proto__:null,default:()=>{}});const kt=(e,t)=>e&&e.children.find((e=>e instanceof n.Element&&e.name===t)),Lt=e=>new n.Element(e,[],[],Bt,Bt,Bt),Ft=(e,t,i)=>{const a=new n.Attribute(t,i,Bt,Bt,Bt,void 0,void 0);e.attrs.push(a)},$t=(e,t)=>{let i;if(t)return _.forEach(t.children,(t=>(t instanceof n.Element&&(t.name===e?i=t:t.children&&(i=$t(e,t))),!i))),i},Bt={},jt=new i.IDGenerator("wm_page");t.register("wm-page",(()=>({template:e=>{let t=kt(kt(e,"wm-content"),"wm-page-content");if(t||(t=$t("wm-page-content",$t("wm-content",e))),t){const e=Lt("ng-container");if(Ft(e,"*ngIf","compilePageContent"),e.children=e.children.concat(t.children),e.children.push(new n.Text("{{onPageContentReady()}}",null,void 0,void 0)),t.children=[e],i.isMobileApp()){const e=Lt("div");Ft(e,"wmPageContentLoader",""),Ft(e,"*ngIf","!showPageContent"),t.children.push(e)}}},pre:e=>{const i=jt.nextUid();return`<div wmPage #${i}="wmPage" data-role="pageContainer" [attr.aria-label]="${i}.hint" ${t.getAttrMarkup(e)}>`},post:()=>"</div>"})));var Vt=Object.freeze({__proto__:null,default:()=>{}});const Gt=new i.IDGenerator("wm_layout");t.register("wm-layout",(()=>({pre:e=>{const i=Gt.nextUid();return`<div wmLayout #${i}="wmLayout" data-role="pageContainer" [attr.aria-label]="${i}.hint || 'Main page content'" ${t.getAttrMarkup(e)}>`},post:()=>"</div>"})));var Wt=Object.freeze({__proto__:null,default:()=>{}});const Ut="router-outlet";t.register("wm-router-outlet",(()=>({pre:e=>`<div wmRouterOutlet name="wmRouterOutlet" ${t.getAttrMarkup(e)}><${Ut} (activate)="onActivate($event)">`,post:()=>`</${Ut}></div>`})));var qt=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-pagination",(()=>({pre:e=>`<nav wmPagination data-identifier="pagination" aria-label="Page navigation" ${t.getAttrMarkup(e)}>`,post:()=>"</nav>"})));var zt=Object.freeze({__proto__:null,default:()=>{}});const Ht="main";t.register("wm-content",(()=>({pre:e=>`<${Ht} wmContent data-role="page-content" role="main" ${t.getAttrMarkup(e)}>`,post:()=>`</${Ht}>`})));var Qt=Object.freeze({__proto__:null,default:()=>{}});const Yt="footer",Kt=new i.IDGenerator("wm_footer");t.register("wm-footer",(()=>({pre:e=>{const i=Kt.nextUid();return`<${Yt} wmFooter #${i}="wmFooter" partialContainer data-role="page-footer" role="contentinfo" [attr.aria-label]="${i}.hint || 'Page footer'" ${t.getAttrMarkup(e)}>`},post:()=>`</${Yt}>`})));var Jt=Object.freeze({__proto__:null,default:()=>{}});const Zt="header",Xt=new i.IDGenerator("wm_header");t.register("wm-header",(()=>({pre:e=>{const i=Xt.nextUid();return`<${Zt} wmHeader #${i}="wmHeader" partialContainer data-role="page-header" role="banner" [attr.aria-label]="${i}.hint || 'Page header'" ${t.getAttrMarkup(e)}>`},post:()=>`</${Zt}>`})));var ei=Object.freeze({__proto__:null,default:()=>{}});const ti="aside",ii=new i.IDGenerator("wm_left_panel");t.register("wm-left-panel",(()=>({pre:e=>{const i=ii.nextUid();return`<${ti} wmLeftPanel #${i}="wmLeftPanel" partialContainer data-role="page-left-panel" [attr.aria-label]="${i}.hint || 'Left navigation panel'" wmSmoothscroll="${e.get("smoothscroll")||"false"}" ${t.getAttrMarkup(e)}>`},post:()=>`</${ti}>`})));var ni=Object.freeze({__proto__:null,default:()=>{}});const ai="header";t.register("wm-mobile-navbar",(()=>({pre:e=>`<${ai} wmMobileNavbar ${t.getAttrMarkup(e)}>`,post:()=>`</${ai}>`})));var si=Object.freeze({__proto__:null,default:()=>{}});const oi="aside",ri=new i.IDGenerator("wm_right_panel");t.register("wm-right-panel",(()=>({pre:e=>{const i=ri.nextUid();return`<${oi} wmRightPanel #${i}="wmRightPanel" partialContainer data-role="page-right-panel" role="complementary" [attr.aria-label]="${i}.hint || 'Right navigation panel'" ${t.getAttrMarkup(e)}>`},post:()=>`</${oi}>`})));var li=Object.freeze({__proto__:null,default:()=>{}});const ci=(e,t,i)=>{const a=new n.Attribute(t,i,di,di,di,void 0,void 0);e.attrs.push(a)},di={};t.register("wm-page-content",(()=>({template:e=>{for(let i of e.attrs)if("spa"===i.name&&"true"===i.value){const i=(t="ng-container",new n.Element(t,[],[],di,di,di));ci(i,"*ngIf","compilePageContent"),i.children=i.children.concat(e.children),i.children.push(new n.Text("{{onPageContentReady()}}",null,void 0,void 0)),e.children=[i];break}var t},pre:e=>`<div wmPageContent ${e.get("spa")?"wmSpaPage":""} wmSmoothscroll="${e.get("smoothscroll")||"false"}" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var pi=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-mobile-tabbar",(()=>({pre:e=>`<div wmMobileTabbar ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var ui=Object.freeze({__proto__:null,default:()=>{}});const hi="section",mi=new i.IDGenerator("wm_top_nav");t.register("wm-top-nav",(()=>({pre:e=>{const i=mi.nextUid();return`<${hi} wmTopNav #${i}="wmTopNav" partialContainer data-role="page-topnav" role="navigation" [attr.aria-label]="${i}.hint || 'Second level navigation'" ${t.getAttrMarkup(e)}>`},post:()=>`</${hi}>`})));var gi=Object.freeze({__proto__:null,default:()=>{}});const fi="section",vi={};t.register("wm-partial",(()=>({template:e=>{const t=(i="ng-container",new n.Element(i,[],[],vi,vi,vi));var i;((e,t,i)=>{const a=new n.Attribute(t,i,vi,vi,vi,void 0,void 0);e.attrs.push(a)})(t,"*ngIf","compileContent"),t.children=t.children.concat(e.children),e.children.length=0,e.children.push(t)},pre:e=>`<${fi} wmPartial data-role="partial" ${t.getAttrMarkup(e)}>`,post:()=>`</${fi}>`})));var bi=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-param",(()=>({pre:e=>`<div wmParam hidden ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var yi=Object.freeze({__proto__:null,default:()=>{}});const wi="section";t.register("wm-prefab",(()=>({pre:e=>`<${wi} wmPrefab redrawable data-role="prefab" ${t.getAttrMarkup(e)}>`,post:()=>`</${wi}>`})));var Pi=Object.freeze({__proto__:null,default:()=>{}});const Ci={};t.register("wm-prefab-container",(()=>({template:e=>{const t=(i="ng-container",new n.Element(i,[],[],Ci,Ci,Ci));var i;((e,t,i)=>{const a=new n.Attribute(t,i,Ci,Ci,Ci,void 0,void 0);e.attrs.push(a)})(t,"*ngIf","compileContent"),t.children=t.children.concat(e.children),e.children.length=0,e.children.push(t)},pre:e=>`<div wmPrefabContainer ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Ai=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-table-action",(()=>({pre:e=>`<div name="${e.get("name")||e.get("key")}" wmTableAction ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var _i=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-table-column-group",(()=>({pre:e=>`<div wmTableColumnGroup ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Ii=Object.freeze({__proto__:null,default:()=>{}});const Ei=new i.IDGenerator("data_table_form_"),Oi=new Set(["wm-text","wm-textarea","wm-checkbox","wm-slider","wm-currency","wm-switch","wm-select","wm-checkboxset","wm-radioset","wm-date","wm-time","wm-timestamp","wm-rating","wm-datetime","wm-search","wm-chips","wm-colorpicker"]),xi=(e=[])=>{let t=[];e.forEach((e=>{if(Oi.has(e.name)){if("wm-checkbox"===e.name&&(t=e.attrs.filter((function(e){return"formControlName"===e.name})),t.length))return;e.attrs.push(new n.Attribute("[ngModelOptions]","{standalone: true}",1,1,1,void 0,void 0))}xi(e.children)}))},Ri=(e,n,a,s)=>{const o={},r=e.get("binding"),l=e.get("edit-widget-type")||((c={type:e.get("type"),"related-entity-name":e.get("related-entity-name"),"primary-key":e.get("primary-key")})["related-entity-name"]&&c["primary-key"]?i.FormWidgetType.SELECT:Oe[c.type]&&Oe[c.type][0]||i.FormWidgetType.TEXT);var c;let d="",p="",u="";l===i.FormWidgetType.UPLOAD?(o.uploadProps={formName:Ei.nextUid(),name:r},o.counter=s):(d=n?"#inlineWidgetNew":"#inlineWidget",p=n?`formControlName="${r}_new"`:`formControlName="${r}"`,u="wmFormWidget"),o.inputType="editinputtype";const h=n?"#inlineWidgetTmplNew":"#inlineWidgetTmpl",m=l===i.FormWidgetType.UPLOAD?"":(e=>{let t="";return e.forEach(((e,i)=>{i.endsWith(".event")&&(t+=`${i}="${e}" `)})),t})(e),g=(e=>{const i=new Map;return["disabled","disabled.bind"].forEach((t=>{e.get(t)&&(i.set(t,e.get(t)),e.delete(t))})),t.getAttrMarkup(i)})(e),f=`${d} ${u} key="${r}" data-field-name="${r}" ${p} ${m} ${g}`,v=n?"getPendingSpinnerStatusNew":"getPendingSpinnerStatus";return`<ng-template ${h} let-row="row" let-getControl="getControl" let-getValidationMessage="getValidationMessage" let-${v}="${v}">\n                <div data-col-identifier="${r}" >\n                     ${i.getFormWidgetTemplate(l,f,e,o)}\n                     ${Di(a)}\n                     <div class="overlay" *ngIf="${v}()"><span aria-hidden="true" class="form-field-spinner fa fa-circle-o-notch fa-spin form-control-feedback"></span></div>\n                     <span class="sr-only" *ngIf="getValidationMessage()">{{getValidationMessage()}}</span>\n                 </div>\n            </ng-template>`},Di=e=>{let t="";if("bottom"===e)t='<span class="help-block text-danger" *ngIf="getValidationMessage() && getControl() && getControl().invalid && getControl().touched">{{getValidationMessage()}}</span>';else t='<span placement="top" container="body" tooltip="{{getValidationMessage()}}" class="text-danger wi wi-error"\n                                        *ngIf="getValidationMessage() && getControl() && getControl().invalid && getControl().touched">\n                                    </span>';return t};t.register("wm-table-column",(()=>({requires:["wm-table"],template:(e,t)=>{if(e.children.length){if(1===e.children.length&&e.children[0]instanceof n.Text&&0===e.children[0].value.trim().length)return;t.set("customExpression",!0),xi(e.children)}},pre:(e,n,a)=>{let s="",o="",r="",l="";if(a){const n=a.get("table_reference");s="multicolumn"===a.get("filtermode")&&"false"!==e.get("searchable")?((e,n)=>{const a=e.get("filterwidget")||Re(e.get("type")||i.DataType.STRING),s=e.get("binding"),o=e.get("type")||"string";let r,l;const c=e.get("filterdataset.bind");"autocomplete"===e.get("filterwidget")&&(c&&(r=`dataset.bind="${c}" datasource.bind="${t.getDataSource(c)}"`),l=`submit.event="changeFn('${s}')"`);const d=`#filterWidget formControlName="${s+"_filter"}" ${r} ${l} change.event="changeFn('${s}')"\n                        disabled.bind="isDisabled('${s}')"`;return`<ng-template #filterTmpl let-changeFn="changeFn" let-isDisabled="isDisabled">\n    <div class="input-group ${a}" data-col-identifier="${s}">\n        ${i.getFormWidgetTemplate(a,d,e,{inputType:"filterinputtype"})}\n        <span class="input-group-addon filter-clear-icon" *ngIf="${n}.showClearIcon('${s}')">\n            <button class="btn-transparent btn app-button" aria-label="Clear button" type="button" (click)="${n}.clearRowFilter('${s}')">\n                <i class="app-icon wi wi-clear" aria-hidden="true"></i>\n            </button>\n         </span>\n        <span class="input-group-addon" dropdown container="body" (onShown)="${n}.adjustContainer('${s}');">\n            <button class="btn-transparent btn app-button" type="button" dropdownToggle><i class="app-icon wi wi-filter-list"></i></button>\n            <ul class="matchmode-dropdown dropdown-menu" *dropdownMenu>\n                   <li *ngFor="let matchMode of ${n}.matchModeTypesMap['${o}']"\n                        [ngClass]="{active: matchMode === (${n}.rowFilter['${s}'].matchMode || ${n}.matchModeTypesMap['${o}'][0])}">\n                        <a href="javascript:void(0);" (click)="${n}.onFilterConditionSelect('${s}', matchMode)" [innerText]="${n}.matchModeMsgs[matchMode]"></a>\n                    </li>\n             </ul>\n        </span>\n    </div></ng-template>`})(e,n):"";const c=a.get("editmode"),d=c!==Ee&&c!==Ie&&"true"!==e.get("readonly");o=d?Ri(e,!1,a.get("errorstyle"),n):"",r=d&&c===_e&&"false"!==a.get("shownewrow")?Ri(e,!0,e.get("errorstyle")):"",l=` [formGroup]="${n}.ngform" `}const c=e.get("formatpattern"),d='<ng-template #customExprTmpl let-row="row" let-colDef="colDef" let-editRow="editRow" let-deleteRow="deleteRow" let-addNewRow="addNewRow">';let p="",u="";return n.get("customExpression")?(e.set("customExpression","true"),p=`${d}<div data-col-identifier="${e.get("binding")}">`):(c&&"None"!==c||i.isDateTimeType(e.get("type")))&&(u=(e=>{const t=`row.getProperty('${e.get("binding")}')`;let n=e.get("custompipeformat")||e.get("formatpattern"),a="";switch(!i.isDateTimeType(e.get("type"))||n&&"None"!==n||(e.set("formatpattern","toDate"),e.delete("datepattern"),n="toDate"),n){case"toDate":a=`{{${t} | toDate: colDef.datepattern}}`;break;case"toCurrency":e.get("currencypattern")&&(a=`{{${t} | toCurrency: '${e.get("currencypattern")}`,e.get("fractionsize")?a+=`': ${e.get("fractionsize")}}}`:a+="'}}");break;case"numberToString":e.get("fractionsize")&&(a=`{{${t} | numberToString: '${e.get("fractionsize")}'}}`);break;case"stringToNumber":a=`{{${t} | stringToNumber}}`;break;case"timeFromNow":a=`{{${t} | timeFromNow}}`;break;case"prefix":e.get("prefix")&&(a=`{{${t} | prefix: '${e.get("prefix")}'}}`);break;case"suffix":e.get("suffix")&&(a=`{{${t} | suffix: '${e.get("suffix")}'}}`);break;default:i.checkIsCustomPipeExpression(n)&&(a=`{{${t} |  ${n} : row}}`)}return a})(e),u&&(n.set("customExpression",!0),e.set("customExpression","true"),p=`${d}<div data-col-identifier="${e.get("binding")}" title="${u}">${u}`)),`<div wmTableColumn ${t.getAttrMarkup(e)} ${l}>\n                    ${s}\n                    ${o}\n                    ${r}\n                    ${p}`},post:(e,t)=>{let i="";return t.get("customExpression")&&(i="</div></ng-template>"),`${i}</div>`},imports:e=>{const t=e.get("edit-widget-type"),n=e.get("filterwidget")||Re(e.get("type")||i.DataType.STRING);return[i.getRequiredFormWidget(t),i.getRequiredFormWidget(n),"wm-table"]}})));var Si=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-table-row",(()=>({pre:e=>`<div wmTableRow ${t.getAttrMarkup(e)}>\n                    ${(e=>{const t="anchor"===e.get("widget-type")?"a":"button",n="anchor"===e.get("widget-type")?"wmAnchor":"wmButton",a=e.get("display-name")||e.get("title")||"Collapse/Expand";return`<ng-template #rowExpansionActionTmpl let-row="row">\n               <${t} ${n}\n                    ${i.getRowActionAttrs(e)}\n                    class="${e.get("class")} row-expansion-button"\n                    iconclass="${e.get("collapseicon")}"\n                    type="button" aria-label="${a}"></${t}>\n            </ng-template>`})(e)}\n                    <ng-template #rowExpansionTmpl let-row="row" let-rowDef="rowDef" let-containerLoad="containerLoad">\n                        <div wmContainer partialContainer content.bind="rowDef.content" load.event="containerLoad(widget)"\n                            [ngStyle]="{'height': rowDef.height, 'overflow-y': 'auto'}">\n                         <div *ngFor="let param of rowDef.partialParams | keyvalue" wmParam hidden\n                            [name]="param.key" [value]="param.value"></div>`,post:()=>"</div></ng-template></div>"})));var Ti=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-table-row-action",(()=>({pre:e=>`<div wmTableRowAction ${t.getAttrMarkup(e)}>\n                        ${(e=>{const t=e.get("action"),n=t?` click.event.delayed="${t}" `:"",a=t&&t.includes("editRow(")?'<button type="button" aria-label="Save edit icon" class="save row-action-button btn app-button btn-transparent save-edit-row-button hidden" title="Save">\n                <i class="wi wi-done" aria-hidden="true"></i>\n            </button>\n            <button type="button" aria-label="Cancel edit icon" class="cancel row-action-button btn app-button btn-transparent cancel-edit-row-button hidden" title="Cancel">\n                <i class="wi wi-cancel" aria-hidden="true"></i>\n            </button>':"",s=t?t.includes("editRow(")?"edit edit-row-button":t.includes("deleteRow(")?"delete delete-row-button":"":"",o=e.get("tabindex")?`tabindex="${e.get("tabindex")}"`:"",r="anchor"===e.get("widget-type")?"a":"button";return`<ng-template #rowActionTmpl let-row="row">\n               <${r} ${"anchor"===e.get("widget-type")?"wmAnchor":"wmButton"} data-action-key="${e.get("key")}"\n                    ${i.getRowActionAttrs(e)}\n                    class="row-action row-action-button ${e.get("class")} ${s}"\n                    iconclass="${e.get("iconclass")}"\n                    ${n}\n                    ${o}\n                    type="button"></${r}>\n                ${a}\n            </ng-template>`})(e)}`,post:()=>"</div>"})));var Mi=Object.freeze({__proto__:null,default:()=>{}});const Ni=new i.IDGenerator("table_");let ki=0;function Li(e,t){let i=0;e.forEach((e=>{const a=e.name,s=void 0!==t?t:i;"wm-table-column"!==a&&"wm-table-column-group"!==a||(e.attrs.push(new n.Attribute("index",""+ki,1,1,1,void 0,void 0)),e.attrs.push(new n.Attribute("headerIndex",""+s,1,1,1,void 0,void 0)),"wm-table-column-group"===a&&Li(e.children,i),ki++,i++)}))}t.register("wm-table",(()=>({template:(e,n)=>{if(e.children.length){const t=e.children.some((e=>"wm-table-column"===e.name||"wm-table-column-group"===e.name));Li(e.children),n.set("isdynamictable",t?"false":"true");const i=e.children.some((e=>"wm-table-row"===e.name));n.set("isrowexpansionenabled",i?"true":"false")}else n.set("isdynamictable","true");const a=e.attrs.find((e=>"dataset"===e.name)),s=e.attrs.find((e=>"name"===e.name));if(!a)return;const o=t.getBoundToExpr(a.value);o&&i.updateTemplateAttrs(e,o,s.value,"","row")},pre:(e,i)=>{const n=Ni.nextUid();return i.set("counter",n),e.set("isdynamictable",i.get("isdynamictable")),e.set("isrowexpansionenabled",i.get("isrowexpansionenabled")),e.set("table_reference",n),`<div wmTable="${n}" wmTableFilterSort wmTableCUD #${n} data-identifier="table" ${t.getAttrMarkup(e)}>`},post:()=>"</div>",provide:(e,t)=>{const i=new Map;return i.set("table_reference",t.get("counter")),i.set("filtermode",e.get("filtermode")),i.set("errorstyle",e.get("errorstyle")),i.set("editmode",e.get("editmode")),i.set("shownewrow",e.get("shownewrow")),i}})));var Fi=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-video",(()=>({pre:e=>`<div wmVideo ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var $i=Object.freeze({__proto__:null,default:()=>{}});const Bi="parentLinearLayout.spacing";t.register("wm-linearlayout",(()=>({requires:["wm-linearlayout"],pre:(e,i,n)=>{let a=e.get("spacing");return e.set("spacing",a&&"0"!==a||!n?a:n.get(Bi)),`<div wmLinearLayout ${t.getAttrMarkup(e)}>`},post:()=>"</div>",provide:(e,t)=>{const i=new Map;return i.set(Bi,e.get("spacing")),i}})));var ji=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-linearlayoutitem",(()=>({pre:e=>`<div wmLinearLayoutItem ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Vi=Object.freeze({__proto__:null,default:()=>{}});const Gi=new i.IDGenerator("wm_custom_widget");t.register("wm-custom-widget",(()=>({pre:e=>`<div wmWidgetContainer customWidgetContainer #${Gi.nextUid()}="wmWidgetContainer" ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Wi=Object.freeze({__proto__:null,default:()=>{}});t.register("wm-prop",(()=>({pre:e=>`<div wmProp hidden ${t.getAttrMarkup(e)}>`,post:()=>"</div>"})));var Ui=Object.freeze({__proto__:null,default:()=>{}});const qi="section",zi={};t.register("wm-custom-widget-container",(()=>({template:e=>{const t=(i="ng-container",new n.Element(i,[],[],zi,zi,zi));var i;t.children=t.children.concat(e.children),e.children.length=0,e.children.push(t)},pre:e=>`<${qi} wmCustomWidget data-role="widget" ${t.getAttrMarkup(e)}>`,post:()=>`</${qi}>`})));var Hi=Object.freeze({__proto__:null,default:()=>{}});e.accordionBuild=W,e.accordionPaneBuild=q,e.alertDlgBuild=ve,e.anchorBuild=m,e.audioBuild=g,e.barcodeScannerBuild=he,e.breadcrumbBuild=xt,e.buttonBuild=Xe,e.buttonGroupBuild=Ke,e.calendarBuild=ze,e.cameraBuild=fe,e.cardActionsBuild=B,e.cardBuild=F,e.cardContentBuild=$,e.cardFooterBuild=j,e.carouselBuild=o,e.carouselTemplateBuild=c,e.chartBuild=V,e.checkboxBuild=et,e.checkboxSetBuild=tt,e.chipsBuild=He,e.colorPickerBuild=Qe,e.compositeBuild=it,e.confirmDlgBuild=be,e.containerBuild=z,e.contentBuild=Qt,e.currencyBuild=Ye,e.customWidgetBuild=Wi,e.customWidgetPropBuild=Ui,e.customWidgetWrapperBuild=Hi,e.dateBuild=mt,e.dateTimeBuild=ht,e.dlgBuild=we,e.dlgFooterBuild=ye,e.fileUploadBuild=ft,e.footerBuild=Jt,e.formActionBuild=$e,e.formBuild=qe,e.formFieldBuild=Le,e.headerBuild=ei,e.htmlBuild=v,e.iconBuild=y,e.iframeBuild=w,e.iframeDlgBuild=Pe,e.initComponentsBuildTask=()=>{},e.labelBuild=A,e.layoutBuild=Wt,e.leftPanelBuild=ni,e.lgBuild=Y,e.lgcolBuild=H,e.lgrowBuild=Q,e.linearLayoutBuild=ji,e.linearLayoutItemBuild=Vi,e.listBuild=At,e.liveTableBuild=It,e.loginBuild=d,e.loginDlgBuild=Ce,e.marqueeBuild=u,e.mediaListBuild=wt,e.mediaListItemBuild=Ct,e.menuBuild=Rt,e.messageBuild=Ot,e.mobileNavbarBuild=si,e.navBuild=St,e.navItemBuild=Dt,e.navbarBuild=Tt,e.numberBuild=nt,e.pageBuild=Vt,e.pageContentBuild=pi,e.paginationBuild=zt,e.panelBuild=Z,e.partialBuild=bi,e.partialDlgBuild=Ae,e.partialParamBuild=yi,e.pictureBuild=E,e.popoverBuild=Nt,e.prefabBuild=Pi,e.prefabContainerBuild=Ai,e.progressBarBuild=S,e.progressCircleBuild=T,e.radiosetBuild=at,e.ratingBuild=vt,e.repeatTemplateBuild=ie,e.rightPanelBuild=li,e.routerOutletBuild=qt,e.rteBuild=N,e.searchBuild=k,e.segContentBuild=ee,e.segControlBuild=X,e.selectBuild=ot,e.sliderBuild=bt,e.spinnerBuild=x,e.switchBuild=lt,e.tabBarBuild=ui,e.tabPaneBuild=se,e.tableActionBuild=_i,e.tableBuild=Fi,e.tableColumnBuild=Si,e.tableColumnGroupBuild=Ii,e.tableRowActionBuild=Mi,e.tableRowBuild=Ti,e.tabsBuild=ae,e.textAreaBuild=ut,e.textBuild=dt,e.tileBuild=oe,e.timeBuild=gt,e.topNavBuild=gi,e.treeBuild=L,e.videoBuild=$i,e.wizardBuild=re,e.wizardStepBuild=de,Object.keys(t).forEach((function(i){"default"===i||Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}})}))})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("angular-imask"),require("@wm/components/base"),require("@wm/core"),require("rxjs")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","angular-imask","@wm/components/base","@wm/core","rxjs"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input={}),e.ng.core,e.ng.common,e.ng.forms,e.angularIMask,e.wm.components.base,e.wm.core,e.rxjs)}(this,(function(e,t,i,n,a,s,o,r){"use strict";function l(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var c=l(t),d=l(i),p=l(n),u=l(a),h=l(s),m=l(o);const g=["wmButton",""],f=function(e,t,i){return{width:e,height:t,margin:i}};function v(e,t){if(1&e&&(c.\u0275\u0275element(0,"img",5),c.\u0275\u0275pipe(1,"image")),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("src",c.\u0275\u0275pipeBind1(1,2,e.iconurl),c.\u0275\u0275sanitizeUrl)("ngStyle",c.\u0275\u0275pureFunction3(4,f,e.iconwidth,e.iconheight,e.iconmargin))}}const b=function(e,t,i,n){return{width:e,height:t,margin:i,fontSize:n}};function y(e,t){if(1&e&&c.\u0275\u0275element(0,"i",6),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275classMapInterpolate1("app-icon ",e.iconclass,""),c.\u0275\u0275property("ngStyle",c.\u0275\u0275pureFunction4(4,b,e.iconwidth,e.iconheight,e.iconmargin,e.iconwidth))}}function w(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",7),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate2("",e.caption," ",e.appLocale.LABEL_ICON,"")}}function P(e,t){if(1&e&&c.\u0275\u0275element(0,"span",8),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("textContent",e.badgevalue)}}const C=[[["",8,"caret"]]],A=[".caret"],I={widgetType:"wm-button",hostClass:"btn app-button",displayType:s.DISPLAY_TYPE.INLINE_BLOCK};class E extends s.StylableComponent{static{this.initializeProps=void s.register("wm-button",new Map([["animation",s.PROP_STRING],["badgevalue",s.PROP_STRING],["caption",s.PROP_STRING],["class",s.PROP_STRING],["conditionalclass",s.PROP_ANY],["conditionalstyle",s.PROP_ANY],["disabled",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["iconclass",s.PROP_STRING],["iconheight",s.PROP_STRING],["iconmargin",s.PROP_STRING],["iconposition",s.PROP_STRING],["iconurl",s.PROP_STRING],["iconwidth",s.PROP_STRING],["name",s.PROP_STRING],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["tabindex",{value:0,...s.PROP_NUMBER}],["type",s.PROP_STRING]]))}constructor(e){super(e,I),s.styler(this.nativeElement,this)}static{this.\u0275fac=function(e){return new(e||E)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:E,selectors:[["button","wmButton",""]],hostVars:5,hostBindings:function(e,t){2&e&&(c.\u0275\u0275hostProperty("type",t.type)("tabIndex",t.tabindex)("disabled",t.disabled),c.\u0275\u0275attribute("accesskey",t.shortcutkey)("icon-position",t.iconposition))},exportAs:["wmButton"],features:[c.\u0275\u0275ProvidersFeature([s.provideAsWidgetRef(E)]),c.\u0275\u0275InheritDefinitionFeature],attrs:g,ngContentSelectors:A,decls:6,vars:5,consts:[["data-identifier","img","alt","button image","class","button-image-icon",3,"src","ngStyle",4,"ngIf"],["aria-hidden","true",3,"class","ngStyle",4,"ngIf"],["class","sr-only",4,"ngIf"],[1,"btn-caption",3,"innerHTML"],["class","badge pull-right",3,"textContent",4,"ngIf"],["data-identifier","img","alt","button image",1,"button-image-icon",3,"src","ngStyle"],["aria-hidden","true",3,"ngStyle"],[1,"sr-only"],[1,"badge","pull-right",3,"textContent"]],template:function(e,t){1&e&&(c.\u0275\u0275projectionDef(C),c.\u0275\u0275template(0,v,2,8,"img",0),c.\u0275\u0275template(1,y,1,9,"i",1),c.\u0275\u0275template(2,w,2,2,"span",2),c.\u0275\u0275element(3,"span",3),c.\u0275\u0275projection(4),c.\u0275\u0275template(5,P,1,1,"span",4)),2&e&&(c.\u0275\u0275property("ngIf",t.iconurl),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.iconclass),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.iconclass),c.\u0275\u0275advance(1),c.\u0275\u0275property("innerHTML",t.caption,c.\u0275\u0275sanitizeHtml),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.badgevalue))},dependencies:[d.NgIf,d.NgStyle,h.TextContentDirective,h.ImagePipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(E,[{type:t.Component,args:[{selector:"button[wmButton]",providers:[s.provideAsWidgetRef(E)],exportAs:"wmButton",template:'<img data-identifier="img" alt="button image" class="button-image-icon" [src]="iconurl | image" *ngIf="iconurl" [ngStyle]="{width:iconwidth, height:iconheight, margin:iconmargin}"/>\n<i class="app-icon {{iconclass}}" aria-hidden="true" [ngStyle]="{width:iconwidth, height:iconheight, margin:iconmargin, fontSize:iconwidth}" *ngIf="iconclass"></i>\n<span class="sr-only" *ngIf="iconclass">{{caption}} {{appLocale.LABEL_ICON}}</span>\n<span class="btn-caption" [innerHTML]="caption"></span>\n<ng-content select=".caret"></ng-content>\n<span *ngIf="badgevalue" class="badge pull-right" [textContent]="badgevalue"></span>\n'}]}],(function(){return[{type:c.Injector}]}),{type:[{type:t.HostBinding,args:["type"]}],tabindex:[{type:t.HostBinding,args:["tabIndex"]}],disabled:[{type:t.HostBinding,args:["disabled"]}],shortcutkey:[{type:t.HostBinding,args:["attr.accesskey"]}],iconposition:[{type:t.HostBinding,args:["attr.icon-position"]}]});const O={widgetType:"wm-buttongroup",hostClass:"btn-group app-button-group"};class x extends s.StylableComponent{static{this.initializeProps=void s.register("wm-buttongroup",new Map([["class",s.PROP_STRING],["name",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["vertical",s.PROP_BOOLEAN]]))}handleClick(e){const t=$(e.target).closest(".app-button");this.$element.find(".app-button").removeClass("selected"),t.addClass("selected")}constructor(e){super(e,O),s.styler(this.nativeElement,this,s.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||x)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:x,selectors:[["","wmButtonGroup",""]],hostVars:2,hostBindings:function(e,t){1&e&&c.\u0275\u0275listener("click",(function(e){return t.handleClick(e)})),2&e&&c.\u0275\u0275classProp("btn-group-vertical",t.vertical)},features:[c.\u0275\u0275ProvidersFeature([s.provideAsWidgetRef(x)]),c.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(x,[{type:t.Directive,args:[{selector:"[wmButtonGroup]",providers:[s.provideAsWidgetRef(x)]}]}],(function(){return[{type:c.Injector}]}),{vertical:[{type:t.HostBinding,args:["class.btn-group-vertical"]}],handleClick:[{type:t.HostListener,args:["click",["$event"]]}]});class R extends s.StylableComponent{constructor(e,t,i){super(e,t,i),this.inj=e,this.binddatavalue=this.$element.attr("datavalue.bind")}set datavalue(e){this.dataval=e}get datavalue(){return this.dataval}updateBoundVariable(e){let t=this.binddatavalue;this.datavaluesource&&this.datavaluesource.execute(o.DataSource.Operation.IS_API_AWARE)||this.datavaluesource&&!this.datavaluesource.twoWayBinding||!t||t.startsWith("Widgets.")||t.startsWith("itemRef.currentItemWidgets")||(t=t.replace(/\[\$i\]/g,"[0]"),_.has(this.context,t.split(".")[0])?_.set(this.context,t,e):_.set(this.viewParent,t,e))}invokeOnChange(e,t){t&&this.datavalue!==this.prevDatavalue&&(this.updateBoundVariable(e),this.invokeEventCallback("change",{$event:t,newVal:e,oldVal:this.prevDatavalue})),this.prevDatavalue=e}updatePrevDatavalue(e){this.prevDatavalue=e}ngAfterViewInit(){super.ngAfterViewInit(),$(this.nativeElement).parents().closest("[wmList]").length&&this.$element.keydown((function(e){37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode||e.stopPropagation()}))}static{this.\u0275fac=function(e){return new(e||R)(c.\u0275\u0275inject(c.Injector),c.\u0275\u0275inject(s.WidgetConfig),c.\u0275\u0275inject(Promise))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac})}}function D(e){return t=>e?function(e){switch(typeof e){case"object":return!(!e||!e.length&&!Object.keys(e).length);case"number":return!!e||0===e;default:return!(null==e||""===e)}}(t.value)?null:{required:!0}:null}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(R,[{type:t.Injectable}],(function(){return[{type:c.Injector},{type:void 0,decorators:[{type:t.Inject,args:[s.WidgetConfig]}]},{type:Promise}]}),null);class S extends R{constructor(){super(...arguments),this._onChange=()=>{},this._onTouched=()=>{}}ngOnInit(){super.ngOnInit(),this._formControl=this.inj.get(n.FormControlName,null)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}writeValue(e){this.isDestroyed||(this._formControl&&(this.datavalue=e,this.onPropertyChange("datavalue",e),this.updatePrevDatavalue(e)),e!==this.datavalue&&this._onChange(this.datavalue))}invokeOnChange(e,t,i){this._onChange(e),t?super.invokeOnChange(e,t):i&&this.updatePrevDatavalue(e)}invokeOnTouched(e){this._onTouched(),e&&this.invokeEventCallback("blur",{$event:e})}invokeOnFocus(e){this.invokeEventCallback("focus",{$event:e})}validate(e){return this.show?D(this.required)(e):null}static{this.\u0275fac=function(){let e;return function(t){return(e||(e=c.\u0275\u0275getInheritedFactory(S)))(t||S)}}()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(S,[{type:t.Injectable}],null,null);const T=new Map([["caption",s.PROP_STRING],["class",s.PROP_STRING],["conditionalclass",s.PROP_ANY],["conditionalstyle",s.PROP_ANY],["checkedvalue",{value:!0,...s.PROP_STRING}],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["name",s.PROP_STRING],["readonly",s.PROP_BOOLEAN],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["tabindex",{value:0,...s.PROP_NUMBER}],["uncheckedvalue",{value:!1,...s.PROP_STRING}]]),M=["checkbox"],N=["wmCheckbox",""],k=function(e,t,i){return{unchecked:e,disabled:t,required:i}},L={widgetType:"wm-checkbox",hostClass:"app-checkbox checkbox"},F=(e,t)=>{if(null===e)return t;if(!0===e||"true"===e)return!0;if(!1===e||"false"===e)return!1;const i=parseInt(e,10);return isNaN(i)?e:i};class B extends S{static{this.initializeProps=(s.register("wm-checkbox",T),s.registerFormWidget(o.FormWidgetType.CHECKBOX,T),void s.registerFormWidget(o.FormWidgetType.TOGGLE,T))}get datavalue(){return o.isDefined(this.proxyModel)?this.proxyModel?this._checkedvalue:this._uncheckedvalue:void 0}set datavalue(e){this.proxyModel=o.isDefined(e)&&""!==e?e===this._checkedvalue:void 0,this.updatePrevDatavalue(this.datavalue)}constructor(e,t,i,n){super(e,L),this.type=n,this._caption="&nbsp",this._checkedvalue=F(t,!0),this._uncheckedvalue=F(i,!1),o.toggleClass(this.nativeElement,"app-toggle","toggle"===n)}onPropertyChange(e,t,i){"tabindex"!==e&&("required"!==e?"caption"===e?o.isDefined(t)&&""!==t?this._caption=t:this._caption="&nbsp;":"checkedvalue"===e?this._checkedvalue=F(t,!0):"uncheckedvalue"===e?this._uncheckedvalue=F(t,!1):"datavalue"===e?(this.datavalue=F(t),this._onChange(this.datavalue)):super.onPropertyChange(e,t,i):this._onChange(this.datavalue))}handleEvent(e,t,i,n){if("change"!==t&&"blur"!==t){const e="tap"===t?this.nativeElement.querySelector("label"):this.checkboxEl.nativeElement;super.handleEvent(e,t,i,n)}}handleChange(e){this.invokeOnChange(this.datavalue,{type:"change"},this.ngModel.valid)}onKeyDown(e){e.preventDefault(),this.checkboxEl.nativeElement.click()}ngAfterViewInit(){super.ngAfterViewInit(),s.styler(this.nativeElement.querySelector("label"),this)}static{this.\u0275fac=function(e){return new(e||B)(c.\u0275\u0275directiveInject(c.Injector),c.\u0275\u0275injectAttribute("checkedvalue"),c.\u0275\u0275injectAttribute("uncheckedvalue"),c.\u0275\u0275injectAttribute("type"))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:B,selectors:[["","wmCheckbox",""]],viewQuery:function(e,i){if(1&e&&(c.\u0275\u0275viewQuery(n.NgModel,5),c.\u0275\u0275viewQuery(M,7,t.ElementRef)),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(i.ngModel=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(i.checkboxEl=e.first)}},hostBindings:function(e,t){1&e&&c.\u0275\u0275listener("keydown.enter",(function(e){return t.onKeyDown(e,"ENTER")}))},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(B,n.NG_VALUE_ACCESSOR,!0),s.provideAs(B,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(B)]),c.\u0275\u0275InheritDefinitionFeature],attrs:N,decls:6,vars:17,consts:[[3,"ngClass"],["type","checkbox","role","checkbox","focus-target","",3,"ngModel","readonly","required","disabled","tabindex","ngModelChange","blur"],["checkbox",""],[1,"caption",3,"innerHtml"],["alt","Checkbox Image","aria-hidden","true","src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",1,"switch"],["type","hidden","aria-hidden","true","tabindex","-1",1,"ng-hide","model-holder",3,"disabled","value"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"label",0)(1,"input",1,2),c.\u0275\u0275listener("ngModelChange",(function(e){return t.proxyModel=e}))("blur",(function(e){return t.invokeOnTouched(e)}))("ngModelChange",(function(e){return t.handleChange(e)})),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(3,"span",3)(4,"img",4),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(5,"input",5)),2&e&&(c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction3(13,k,!t.proxyModel,t.disabled||t.readonly,t.required&&t._caption)),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngModel",t.proxyModel)("readonly",t.readonly)("required",t.required)("disabled",t.disabled||t.readonly)("tabindex",t.tabindex),c.\u0275\u0275attribute("name",t.name)("aria-label",t.hint)("aria-checked",!!t.proxyModel)("accesskey",t.shortcutkey),c.\u0275\u0275advance(2),c.\u0275\u0275property("innerHtml",t._caption,c.\u0275\u0275sanitizeHtml),c.\u0275\u0275advance(2),c.\u0275\u0275property("disabled",t.disabled)("value",t.proxyModel))},dependencies:[d.NgClass,p.CheckboxControlValueAccessor,p.NgControlStatus,p.CheckboxRequiredValidator,p.NgModel],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(B,[{type:t.Component,args:[{selector:"[wmCheckbox]",providers:[s.provideAs(B,n.NG_VALUE_ACCESSOR,!0),s.provideAs(B,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(B)],template:'<label [ngClass]="{\'unchecked\': !proxyModel, \'disabled\': (disabled || readonly), \'required\': (required && _caption)}">\n    <input type="checkbox"\n           role="checkbox"\n           #checkbox\n           [attr.name]="name"\n           [attr.aria-label]="hint"\n           [attr.aria-checked]="!!proxyModel"\n           focus-target\n           [(ngModel)]="proxyModel"\n           [readonly]="readonly"\n           [required]="required"\n           [disabled]="disabled || readonly"\n           [attr.accesskey]="shortcutkey"\n           [tabindex]="tabindex"\n           (blur)="invokeOnTouched($event)"\n           (ngModelChange)="handleChange($event)">\n    <span class="caption" [innerHtml]="_caption"></span>\n    <img alt="Checkbox Image" aria-hidden="true" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class="switch"/>\n</label>\n<input type="hidden" class="ng-hide model-holder" aria-hidden="true" tabindex="-1" [disabled]="disabled" [value]="proxyModel">\n'}]}],(function(){return[{type:c.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["checkedvalue"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["uncheckedvalue"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["type"]}]}]}),{ngModel:[{type:t.ViewChild,args:[n.NgModel]}],checkboxEl:[{type:t.ViewChild,args:["checkbox",{static:!0,read:t.ElementRef}]}],onKeyDown:[{type:t.HostListener,args:["keydown.enter",["$event",'"ENTER"']]}]});class j extends S{get modelByKey(){return this._modelByKey}set modelByKey(e){this.selectByKey(e),this.invokeOnChange(this._modelByValue)}get datavalue(){return this._modelByValue}set datavalue(e){this.multiple&&(e=s.extractDataAsArray(e)),this._modelByValue=e,this.selectByValue(e),this.datavalue$.next(e),this.invokeOnChange(e,void 0,!0)}constructor(e,t,i){super(e,t),this.groupby=i,this.datasetItems=[],this.acceptsArray=!1,this.dataset$=new r.Subject,this.datavalue$=new r.Subject,this.allowempty=!0,this._debounceDatavalueUpdation=_.debounce((e=>{!o.isDefined(this._modelByKey)||_.isArray(this._modelByKey)&&!this._modelByKey.length?(this.toBeProcessedDatavalue=e,this._modelByValue=""):o.isDefined(this.toBeProcessedDatavalue)&&(o.isDefined(this._modelByValue)||(this._modelByValue=!this.multiple&&_.isArray(this.toBeProcessedDatavalue)?this.toBeProcessedDatavalue[0]:this.toBeProcessedDatavalue),this.toBeProcessedDatavalue=void 0),this.initDisplayValues()}),150),this.datePipe=this.inj.get(s.ToDatePipe),this.appDefaults=this.inj.get(o.AppDefaults),this.binddisplayexpression=this.nativeElement.getAttribute("displayexpression.bind"),this.binddisplayimagesrc=this.nativeElement.getAttribute("displayimagesrc.bind"),this.binddisplaylabel=this.nativeElement.getAttribute("displaylabel.bind"),this._debouncedInitDatasetItems=o.debounce((()=>{this.initDatasetItems(),o.$appDigest()}),150),this.handleHeaderClick=o.noop,this.cancelLocaleChangeSubscription=this.getAppInstance().subscribe("locale-changed",(()=>{this._debouncedInitDatasetItems()}))}selectByKey(e){if(this.resetDatasetItems(),this.datasetItems.length){if(this.multiple&&!_.isArray(e)&&(e=[e]),this._modelByKey=e,this.multiple)this._modelByValue=[],e.forEach((e=>{const t=_.find(this.datasetItems,(t=>_.toString(t.key)===_.toString(e)));t&&(t.selected=!0,this._modelByValue=[...this._modelByValue,t.value])}));else{this._modelByValue="";const t=_.find(this.datasetItems,(t=>_.toString(t.key)===_.toString(e)));t&&(t.selected=!0,this._modelByValue=t.value)}this.initDisplayValues()}}selectByValue(e){if(this.resetDatasetItems(),(!o.isDefined(e)||""===e||_.isNull(e)||e instanceof Array&&!e.length)&&(this._modelByKey=void 0,!this.allowempty||!o.isDefined(e)))return;if(this.acceptsArray&&!_.isArray(e)&&(e=this.allowempty?[e]:s.extractDataAsArray(e)),!this.datasetItems.length&&o.isDefined(e))return void(this.toBeProcessedDatavalue=e);const t=this.datafield===s.ALLFIELDS?"dataObject":"key";if(_.isArray(e))this._modelByKey=[],e.forEach((e=>{const i=_.find(this.datasetItems,(i=>"dataObject"===t&&this.compareby&&this.compareby.length?o.isEqualWithFields(i[t],e,this.compareby):_.isObject(i.value)?_.isEqual(i.value,e):_.toString(i.value).toLowerCase()===_.toString(e).toLowerCase()));i&&(i.selected=!0,this._modelByKey.push(i.key))}));else{this._modelByKey=void 0;const i=_.find(this.datasetItems,(i=>"dataObject"===t&&this.compareby&&this.compareby.length?o.isEqualWithFields(i[t],e,this.compareby):_.isObject(i.value)?_.isEqual(i.value,e):_.toString(i.value).toLowerCase()===_.toString(e).toLowerCase()));i&&(i.selected=!0,this._modelByKey=i.key)}this._debounceDatavalueUpdation(e)}initDisplayValues(){const e=[];this.datasetItems.forEach((t=>{t.selected&&e.push(t.label)})),this.displayValue=this.multiple?e:e[0]||""}initDatasetItems(){if(!this.dataset||_.isEmpty(this.dataset))return this.datasetItems=[],void this.dataset$.next(this.datasetItems);const e=s.getOrderedDataset(s.convertDataToObject(this.dataset),this.orderby);if(this.usekeys)this.datasetItems=s.transformDataWithKeys(e);else{const t=s.transformFormData(this.viewParent,e,this.datafield,{displayField:this.displayfield||this.displaylabel,displayExpr:this.displayexpression,bindDisplayExpr:this.binddisplayexpression||this.binddisplaylabel,bindDisplayImgSrc:this.binddisplayimagesrc,displayImgSrc:this.displayimagesrc});this.datasetItems=[...s.getUniqObjsByDataField(t,this.datafield,this.displayfield||this.displaylabel,o.toBoolean(this.allowempty))]}this.postDatasetItemsInit()}postDatasetItemsInit(){if(this.datasetItems.length&&!this._defaultQueryInvoked){const e=_.isEmpty(this.toBeProcessedDatavalue)?this.datavalue:this.toBeProcessedDatavalue;this.selectByValue(e)}this.dataset$.next(this.datasetItems)}resetDatasetItems(){this.datasetItems.forEach((e=>e.selected=!1))}setTemplate(e){this.content=e,this.viewParent&&this.viewParent.prefabName&&(this.prefabName=this.viewParent.prefabName)}getGroupedData(){return this.datasetItems.length?s.groupData(this,s.convertDataToObject(this.datasetItems),this.groupby,this.match,this.orderby,this.dateformat,this.datePipe,"dataObject",this.appDefaults):[]}datasetSubscription(){const e=this.dataset$.subscribe((()=>{this.groupedData=this.getGroupedData()}));this.registerDestroyListener((()=>e.unsubscribe()))}setGroupData(){this.datasetSubscription(),this.groupedData=this.getGroupedData()}onPropertyChange(e,t,i){switch(super.onPropertyChange(e,t,i),e){case"dataset":case"datafield":case"displayfield":case"displaylabel":case"displayexpression":case"orderby":case"usekeys":this._debouncedInitDatasetItems();break;case"required":case"datavalue":this._onChange(this.datavalue);break;case"groupby":case"match":"wm-search"!==this.widgetType&&"wm-chips"!==this.widgetType&&this.setGroupData()}}ngOnInit(){super.ngOnInit(),this.groupby&&"wm-search"!==this.widgetType&&"wm-chips"!==this.widgetType&&this.setGroupData(),this.groupby&&this.collapsible&&(this.handleHeaderClick=s.handleHeaderClick,this.toggleAllHeaders=s.toggleAllHeaders.bind(void 0,this))}ngOnDestroy(){this.cancelLocaleChangeSubscription&&this.cancelLocaleChangeSubscription()}static{this.\u0275fac=function(e){return new(e||j)(c.\u0275\u0275inject(c.Injector),c.\u0275\u0275inject(s.WidgetConfig),c.\u0275\u0275injectAttribute("groupby"))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:j,factory:j.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(j,[{type:t.Injectable}],(function(){return[{type:c.Injector},{type:void 0,decorators:[{type:t.Inject,args:[s.WidgetConfig]}]},{type:void 0,decorators:[{type:t.Attribute,args:["groupby"]}]}]}),null);const V=new Map([["class",s.PROP_STRING],["collapsible",s.PROP_BOOLEAN],["compareby",s.PROP_STRING],["datafield",s.PROP_STRING],["dataset",{value:"Option 1, Option 2, Option 3",...s.PROP_ANY}],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["dateformat",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["displayexpression",s.PROP_STRING],["displayfield",s.PROP_STRING],["displayValue",s.PROP_STRING],["groupby",s.PROP_STRING],["itemclass",{value:"",...s.PROP_STRING}],["itemsperrow",{value:"xs-1 sm-1 md-1 lg-1",...s.PROP_STRING}],["listclass",{value:"",...s.PROP_STRING}],["match",s.PROP_STRING],["name",s.PROP_STRING],["orderby",s.PROP_STRING],["readonly",s.PROP_BOOLEAN],["required",s.PROP_BOOLEAN],["show",{value:!0,...s.PROP_BOOLEAN}],["showcount",s.PROP_BOOLEAN],["showindevice",{displayType:"inline-block",value:"all",...s.PROP_STRING}],["tabindex",{value:0,...s.PROP_NUMBER}],["usekeys",s.PROP_BOOLEAN]]),G=["wmCheckboxset",""],W=function(e){return{disabled:e}};function U(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"label",8),c.\u0275\u0275element(1,"input",9)(2,"span",10),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(),t=e.$implicit,i=e.index,n=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(12,W,n.disabled||n.readonly))("title",t.label),c.\u0275\u0275advance(1),c.\u0275\u0275property("name","checkboxset_"+n.widgetId)("tabindex",n.tabindex)("disabled",n.disabled||n.readonly)("value",t.key)("tabindex",n.tabindex)("checked",t.selected),c.\u0275\u0275attribute("aria-label",t.key)("aria-checked",t.selected)("data-attr-index",i),c.\u0275\u0275advance(1),c.\u0275\u0275property("textContent",t.label)}}function q(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"label",11),c.\u0275\u0275element(1,"input",9)(2,"span",12),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(),t=e.$implicit,i=e.index,n=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(10,W,n.disabled||n.readonly)),c.\u0275\u0275advance(1),c.\u0275\u0275property("name","checkboxset_"+n.widgetId)("tabindex",n.tabindex)("disabled",n.disabled||n.readonly)("value",t.key)("tabindex",n.tabindex)("checked",t.selected),c.\u0275\u0275attribute("aria-label",t.key)("aria-checked",t.selected)("data-attr-index",i)}}const z=function(e,t){return["checkbox","app-checkbox",e,t]};function H(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"li",5),c.\u0275\u0275listener("click",(function(t){const i=c.\u0275\u0275restoreView(e).$implicit,n=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(n.onCheckboxLabelClick(t,i.key))})),c.\u0275\u0275template(1,U,3,14,"label",6),c.\u0275\u0275template(2,q,3,12,"label",7),c.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,i=c.\u0275\u0275nextContext(2);c.\u0275\u0275classProp("active",e.selected),c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction2(7,z,i.itemclass,i.itemsPerRowClass))("wmItemTemplate",i.content)("userComponentParams",e),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!i.content),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",i.content)}}function Q(e,t){if(1&e&&c.\u0275\u0275template(0,H,3,10,"li",4),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngForOf",e.datasetItems)}}function Y(e,t){1&e&&c.\u0275\u0275element(0,"div",13)}function K(e,t){if(1&e&&c.\u0275\u0275element(0,"i",23),2&e){const e=c.\u0275\u0275nextContext(3);c.\u0275\u0275propertyInterpolate2("title","",e.appLocale.LABEL_COLLAPSE,"/",e.appLocale.LABEL_EXPAND,"")}}function J(e,t){if(1&e&&c.\u0275\u0275element(0,"span",24),2&e){const e=c.\u0275\u0275nextContext().$implicit;c.\u0275\u0275property("textContent",e.data.length)}}function Z(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"label",8),c.\u0275\u0275element(1,"input",26)(2,"span",10),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(),t=e.$implicit,i=e.index,n=c.\u0275\u0275nextContext(3);c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(10,W,n.disabled||n.readonly))("title",t.label),c.\u0275\u0275advance(1),c.\u0275\u0275property("name","checkboxset_"+n.widgetId)("tabindex",n.tabindex)("disabled",n.disabled||n.readonly)("value",t.key)("tabindex",n.tabindex)("checked",t.selected),c.\u0275\u0275attribute("data-attr-index",i),c.\u0275\u0275advance(1),c.\u0275\u0275property("textContent",t.label)}}function X(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"label",11),c.\u0275\u0275element(1,"input",26)(2,"span",27),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(),t=e.$implicit,i=e.index,n=c.\u0275\u0275nextContext(3);c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(8,W,n.disabled||n.readonly)),c.\u0275\u0275advance(1),c.\u0275\u0275property("name","checkboxset_"+n.widgetId)("tabindex",n.tabindex)("disabled",n.disabled||n.readonly)("value",t.key)("tabindex",n.tabindex)("checked",t.selected),c.\u0275\u0275attribute("data-attr-index",i)}}const ee=function(e,t){return["checkbox","app-checkbox","group-list-item",e,t]};function te(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"li",25),c.\u0275\u0275listener("click",(function(t){const i=c.\u0275\u0275restoreView(e).$implicit,n=c.\u0275\u0275nextContext(3);return c.\u0275\u0275resetView(n.onCheckboxLabelClick(t,i))})),c.\u0275\u0275template(1,Z,3,12,"label",6),c.\u0275\u0275template(2,X,3,10,"label",7),c.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,i=c.\u0275\u0275nextContext(3);c.\u0275\u0275classProp("active",e.selected),c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction2(7,ee,i.itemclass,i.itemsPerRowClass))("wmItemTemplate",i.content)("userComponentParams",e),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!i.content),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",i.content)}}const ie=function(e){return{"collapsible-content":e}};function ne(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"li",15)(1,"ul",16)(2,"li",17),c.\u0275\u0275listener("click",(function(t){c.\u0275\u0275restoreView(e);const i=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(i.handleHeaderClick(t))})),c.\u0275\u0275elementStart(3,"h4",18),c.\u0275\u0275text(4),c.\u0275\u0275elementStart(5,"div",19),c.\u0275\u0275template(6,K,1,2,"i",20),c.\u0275\u0275template(7,J,1,1,"span",21),c.\u0275\u0275elementEnd()()(),c.\u0275\u0275template(8,te,3,10,"li",22),c.\u0275\u0275elementEnd()()}if(2&e){const e=t.$implicit,i=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(2),c.\u0275\u0275property("title",e.key)("ngClass",c.\u0275\u0275pureFunction1(6,ie,i.collapsible)),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1("",e.key," "),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",i.collapsible),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",i.showcount),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngForOf",e.data)}}function ae(e,t){if(1&e&&c.\u0275\u0275template(0,ne,9,8,"li",14),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngForOf",e.groupedData)}}const se={widgetType:"wm-checkboxset",hostClass:"app-checkboxset list-group inline"};class oe extends j{static{this.initializeProps=(s.register("wm-checkboxset",V),void s.registerFormWidget(o.FormWidgetType.CHECKBOXSET,new Map(V)))}constructor(e){super(e,se),this.layout="",s.styler(this.nativeElement,this),this.multiple=!0}onCheckboxLabelClick(e,t){if(!$(e.target).is("input"))return;const i=this.nativeElement.querySelectorAll("input:checked"),n=[];_.forEach(i,(e=>{n.push(e.value)})),this.modelByKey=n,this.invokeOnTouched(),this.invokeOnChange(this.datavalue,e||{},!0)}handleEvent(e,t,i,n){"click"===t?this.eventManager.addEventListener(e,t,(e=>{if($(e.target).is("input"))return n.$event=e,i()})):_.includes(["change"],t)||super.handleEvent(e,t,i,n)}onKeyDown(e){e.preventDefault(),e.target.click()}onPropertyChange(e,t,i){"tabindex"!==e&&("required"!==e?"itemsperrow"===e?o.setListClass(this):super.onPropertyChange(e,t,i):this._onChange(this.datavalue))}static{this.\u0275fac=function(e){return new(e||oe)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:oe,selectors:[["","wmCheckboxset",""]],hostBindings:function(e,t){1&e&&c.\u0275\u0275listener("keydown.enter",(function(e){return t.onKeyDown(e,"ENTER")}))},exportAs:["wmCheckboxset"],features:[c.\u0275\u0275ProvidersFeature([s.provideAs(oe,n.NG_VALUE_ACCESSOR,!0),s.provideAs(oe,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(oe)]),c.\u0275\u0275InheritDefinitionFeature],attrs:G,decls:5,vars:4,consts:[[3,"ngIf","ngIfElse"],["hidden","",1,"model-holder",3,"disabled"],["class","readonly-wrapper",4,"ngIf"],["groupedListTemplate",""],["partialContainer","","role","presentation",3,"ngClass","active","wmItemTemplate","userComponentParams","click",4,"ngFor","ngForOf"],["partialContainer","","role","presentation",3,"ngClass","wmItemTemplate","userComponentParams","click"],["class","app-checkboxset-label",3,"ngClass","title",4,"ngIf"],["class","app-checkboxset-label",3,"ngClass",4,"ngIf"],[1,"app-checkboxset-label",3,"ngClass","title"],["type","checkbox",3,"name","tabindex","disabled","value","checked"],[1,"caption",3,"textContent"],[1,"app-checkboxset-label",3,"ngClass"],["partial-container-target","",1,"caption","customTemplate"],[1,"readonly-wrapper"],["class","app-list-item-group","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"app-list-item-group"],[1,"item-group"],[1,"list-group-header",3,"title","ngClass","click"],[1,"group-title"],[1,"header-action"],["class","app-icon wi action wi-chevron-up",3,"title",4,"ngIf"],["class","label label-default",3,"textContent",4,"ngIf"],["partialContainer","",3,"ngClass","active","wmItemTemplate","userComponentParams","click",4,"ngFor","ngForOf"],[1,"app-icon","wi","action","wi-chevron-up",3,"title"],[1,"label","label-default",3,"textContent"],["partialContainer","",3,"ngClass","wmItemTemplate","userComponentParams","click"],["type","checkbox","aria-label","checkbox group",3,"name","tabindex","disabled","value","checked"],["partial-container-target","",1,"caption"]],template:function(e,t){if(1&e&&(c.\u0275\u0275template(0,Q,1,1,"ng-template",0),c.\u0275\u0275element(1,"input",1),c.\u0275\u0275template(2,Y,1,0,"div",2),c.\u0275\u0275template(3,ae,1,1,"ng-template",null,3,c.\u0275\u0275templateRefExtractor)),2&e){const e=c.\u0275\u0275reference(4);c.\u0275\u0275property("ngIf",!t.groupby)("ngIfElse",e),c.\u0275\u0275advance(1),c.\u0275\u0275property("disabled",t.disabled||t.readonly),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.readonly||t.disabled)}},dependencies:[d.NgClass,d.NgForOf,d.NgIf,h.ItemTemplateDirective,h.PartialParamHandlerDirective,h.PartialContainerDirective,h.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(oe,[{type:t.Component,args:[{selector:"[wmCheckboxset]",exportAs:"wmCheckboxset",providers:[s.provideAs(oe,n.NG_VALUE_ACCESSOR,!0),s.provideAs(oe,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(oe)],template:'<ng-template [ngIf]="!groupby" [ngIfElse]="groupedListTemplate">\n    <li [ngClass]="[\'checkbox\', \'app-checkbox\', itemclass, itemsPerRowClass]"\n        [class.active]="item.selected"\n        *ngFor="let item of datasetItems; let i = index"\n        [wmItemTemplate]="content" [userComponentParams]="item" partialContainer\n        (click)="onCheckboxLabelClick($event, item.key)" role="presentation">\n        \x3c!-- Default item template --\x3e\n        <label *ngIf="!content" class="app-checkboxset-label" [ngClass]="{\'disabled\':disabled || readonly}" [title]="item.label">\n            <input [name]="\'checkboxset_\' + widgetId" type="checkbox" [attr.aria-label]="item.key"\n                   [tabindex]="tabindex" [attr.aria-checked]="item.selected"\n                   [disabled]="disabled || readonly" [attr.data-attr-index]="i"\n                   [value]="item.key" [tabindex]="tabindex" [checked]="item.selected"/>\n            <span class="caption" [textContent]="item.label"></span>\n        </label>\n        \x3c!-- Custom partial template --\x3e\n        <label *ngIf="content" class="app-checkboxset-label" [ngClass]="{\'disabled\':disabled || readonly}" >\n            <input [name]="\'checkboxset_\' + widgetId" type="checkbox" [attr.aria-label]="item.key"\n                   [tabindex]="tabindex" [attr.aria-checked]="item.selected"\n                   [disabled]="disabled || readonly" [attr.data-attr-index]="i"\n                   [value]="item.key" [tabindex]="tabindex" [checked]="item.selected"/>\n            <span class="caption customTemplate" partial-container-target></span>\n        </label>\n    </li>\n</ng-template>\n<input [disabled]="disabled || readonly" hidden class="model-holder">\n<div *ngIf="readonly || disabled" class="readonly-wrapper"></div>\n\n\x3c!-- This template will be displayed when groupby is specified. --\x3e\n<ng-template #groupedListTemplate>\n    <li *ngFor="let groupObj of groupedData" class="app-list-item-group" role="presentation">\n        <ul class="item-group">\n            <li class="list-group-header" (click)="handleHeaderClick($event)" [title]="groupObj.key" [ngClass]="{\'collapsible-content\': collapsible}">\n                <h4 class="group-title">{{groupObj.key}}\n                    <div class="header-action">\n                        <i class="app-icon wi action wi-chevron-up" *ngIf="collapsible" title="{{appLocale.LABEL_COLLAPSE}}/{{appLocale.LABEL_EXPAND}}"></i>\n                        <span *ngIf="showcount" class="label label-default" [textContent]="groupObj.data.length"></span>\n                    </div>\n                </h4>\n            </li>\n            <li *ngFor="let item of groupObj.data; let i = index;"\n                [ngClass]="[\'checkbox\', \'app-checkbox\', \'group-list-item\', itemclass, itemsPerRowClass]"\n                [class.active]="item.selected"\n                [wmItemTemplate]="content" [userComponentParams]="item" partialContainer\n                (click)="onCheckboxLabelClick($event, item)">\n                \x3c!-- Default item template --\x3e\n                <label *ngIf="!content" class="app-checkboxset-label" [ngClass]="{\'disabled\':disabled || readonly}" [title]="item.label">\n                    <input [name]="\'checkboxset_\' + widgetId" type="checkbox" aria-label="checkbox group"\n                           [tabindex]="tabindex"\n                           [disabled]="disabled || readonly" [attr.data-attr-index]="i"\n                           [value]="item.key" [tabindex]="tabindex" [checked]="item.selected"/>\n                    <span class="caption" [textContent]="item.label"></span>\n                </label>\n                \x3c!-- Custom partial template --\x3e\n                <label *ngIf="content" class="app-checkboxset-label" [ngClass]="{\'disabled\':disabled || readonly}" >\n                    <input [name]="\'checkboxset_\' + widgetId" type="checkbox" aria-label="checkbox group"\n                           [tabindex]="tabindex"\n                           [disabled]="disabled || readonly" [attr.data-attr-index]="i"\n                           [value]="item.key" [tabindex]="tabindex" [checked]="item.selected"/>\n                    <span class="caption" partial-container-target></span>\n                </label>\n            </li>\n        </ul>\n    </li>\n</ng-template>\n'}]}],(function(){return[{type:c.Injector}]}),{onKeyDown:[{type:t.HostListener,args:["keydown.enter",["$event",'"ENTER"']]}]});const re={widgetType:"wm-form-group",hostClass:"form-group app-composite-widget clearfix"},le={left:"caption-left",right:"caption-right",top:"caption-top",floating:"caption-floating"};class ce extends s.StylableComponent{static{this.initializeProps=void s.register("wm-form-group",new Map([["captionposition",s.PROP_STRING],["name",s.PROP_STRING],["required",s.PROP_BOOLEAN],["show",{value:!0,...s.PROP_BOOLEAN}]]))}constructor(e){super(e,re),s.styler(this.nativeElement,this,s.APPLY_STYLES_TYPE.CONTAINER)}onPropertyChange(e,t,i){"captionposition"===e?o.switchClass(this.nativeElement,le[t],le[i]):"required"===e?(this.required=t,this.assignRequiredToSubComponents()):super.onPropertyChange(e,t,i)}assignRequiredToSubComponents(){this.required&&this.componentRefs&&setTimeout((()=>{this.componentRefs.forEach((e=>e.widget.required=!0))}),50)}ngAfterViewInit(){super.ngAfterViewInit(),o.addForIdAttributes(this.nativeElement),this.assignRequiredToSubComponents()}static{this.\u0275fac=function(e){return new(e||ce)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:ce,selectors:[["div","wmComposite",""]],contentQueries:function(e,t,i){if(1&e&&c.\u0275\u0275contentQuery(i,s.WidgetRef,5),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.componentRefs=e)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAsWidgetRef(ce)]),c.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(ce,[{type:t.Directive,args:[{selector:"div[wmComposite]",providers:[s.provideAsWidgetRef(ce)]}]}],(function(){return[{type:c.Injector}]}),{componentRefs:[{type:t.ContentChildren,args:[s.WidgetRef,{descendants:!0}]}]});const de=new Map([["autofocus",s.PROP_BOOLEAN],["class",s.PROP_STRING],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["localefilter",s.PROP_STRING],["minvalue",s.PROP_NUMBER],["maxvalue",s.PROP_NUMBER],["name",s.PROP_STRING],["numberfilter",s.PROP_STRING],["placeholder",{value:"Enter number",...s.PROP_STRING}],["readonly",s.PROP_BOOLEAN],["regexp",s.PROP_STRING],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["step",{value:1,...s.PROP_NUMBER}],["tabindex",{value:0,...s.PROP_NUMBER}],["trailingzero",{value:!1,...s.PROP_BOOLEAN}],["updateon",s.PROP_STRING],["inputmode",{value:"natural",...s.PROP_STRING}],["conditionalclass",s.PROP_ANY],["conditionalstyle",s.PROP_ANY]]);class pe extends S{onPropertyChange(e,t,i){"tabindex"!==e&&("required"===e&&this._onChange(this.datavalue),"class"===e?this.inputEl.nativeElement&&o.switchClass(this.inputEl.nativeElement,t,i):"datavalue"===e?(this.updatePrevDatavalue(t),this._onChange(this.datavalue)):super.onPropertyChange(e,t,i))}handleChange(e){this.autotrim&&this.datavalue&&_.isString(this.datavalue)&&(this.datavalue=this.datavalue.trim()),this.invokeOnChange(this.datavalue,{type:"change"},this.ngModel.valid)}handleEvent(e,t,i,n){"change"!==t&&"blur"!==t&&super.handleEvent(this.inputEl.nativeElement,t,i,n)}handleBlur(e){this.invokeOnTouched(e)}flushViewChanges(e){const t=_.get(this.imask,"maskRef.unmaskedValue");e=t||e,this.ngModel.update.next(e),o.$appDigest()}ngAfterViewInit(){super.ngAfterViewInit(),this.class&&o.addClass(this.inputEl.nativeElement,this.class),s.styler(this.inputEl.nativeElement,this)}constructor(e,t){super(e,t),this.ngModelOptions={updateOn:""};let i=this.nativeElement.getAttribute("updateon")||"blur";i="default"===i?"change":i,this.ngModelOptions.updateOn=i}static{this.\u0275fac=function(e){return new(e||pe)(c.\u0275\u0275inject(c.Injector),c.\u0275\u0275inject(s.WidgetConfig))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:pe,factory:pe.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(pe,[{type:t.Injectable}],(function(){return[{type:c.Injector},{type:void 0,decorators:[{type:t.Inject,args:[s.WidgetConfig]}]}]}),null);class ue extends pe{constructor(e,t,n,a){super(e,t),this.i18nService=n,this.trailingZeroDecimalPipe=a,this.isDefaultQuery=!0,this.decimalValue="",this.selectedLocale=n.getSelectedLocale(),this.DECIMAL=i.getLocaleNumberSymbol(this.localefilter||this.selectedLocale,i.NumberSymbol.Decimal),this.GROUP=i.getLocaleNumberSymbol(this.localefilter||this.selectedLocale,i.NumberSymbol.Group),this.numberfilter="1.0-16",this.resetValidations()}set datavalue(e){if(this.lastValIsDecimal=!1,_.includes([null,void 0,""],e)){const t=this.inputEl.nativeElement,i=this.prevDatavalue;return this.displayValue=t.value=this.proxyModel=null,this.resetValidations(),void(i&&!this.isDefaultQuery&&(this.handleChange(e),this._onChange()))}if(this.isDefaultQuery){const t=_.isString(e)&&_.includes(e,this.DECIMAL),i=t?e.split(this.DECIMAL):_.isString(e)&&e.split(".");this.decimalValue=i[1]||"",e=t?e:this.transformNumber(e)}const t=e.toString();let i;i=/\d/.test(t)?this.parseNumber(t):NaN,_.isNaN(i)&&t[t.length-1]===this.DECIMAL&&"change"===this.ngModelOptions.updateOn&&this.$element.find("input:focus").length&&(this.lastValIsDecimal=!0),!this.lastValIsDecimal&&this.isValid(i)?(this.proxyModel=i,this.updateDisplayText(),this.isDefaultQuery||this.handleChange(i)):(this.displayValue=e.toString(),this.proxyModel=null,this.handleChange(null))}get datavalue(){return this.proxyModel}resetValidations(){this.isInvalidNumber=!1,this.numberNotInRange=!1}isValid(e){return _.isNaN(e)||!_.isFinite(e)||!Number.isInteger(this.step)&&this.countDecimals(e)>this.countDecimals(this.step)?(this.isInvalidNumber=!0,!1):e!==this.getValueInRange(e)?(this.numberNotInRange=!0,!0):(this.resetValidations(),!0)}getValueInRange(e){return!_.isNaN(this.minvalue)&&e<this.minvalue?(this.validateType="minvalue",this.minvalue):!_.isNaN(this.maxvalue)&&e>this.maxvalue?(this.validateType="maxvalue",this.maxvalue):e}transformNumber(e,t){const i=t||this.numberfilter;return this.trailingZeroDecimalPipe.transform(e,this.selectedLocale,i,this.localefilter,this.trailingzero,this.decimalValue,!!t,this.i18nService?.getwidgetLocale())}resetCursorPosition(e){const t=this.inputEl.nativeElement;let i=t.value.length-e;i=i<0?0:i,t.setSelectionRange(i,i)}parseNumber(e){const t=e.split(this.inputmode===s.INPUTMODE.FINANCIAL?e.indexOf(this.DECIMAL)>-1?this.DECIMAL:".":this.DECIMAL);if(!t.length)return null;if(t.length>2)return NaN;if(""===t[1])return NaN;const i=Number(t[0].split(this.GROUP).join("")),n=Number(`0.${t[1]||0}`);if(Number.isNaN(i)||Number.isNaN(n))return NaN;const a=t.length>1?parseFloat((i+n).toFixed(t[1].length)):i+n;return 0===i?Object.is(0,i)?a:i-n:i>0?a:i-n}updateDisplayText(){const e=this.inputEl.nativeElement,t=e.selectionStart,i=e.value;if(!this.isDefaultQuery){const e=i.split(this.DECIMAL);this.decimalValue=e[1]||""}const n=this.stepLength();this.inputmode===s.INPUTMODE.FINANCIAL&&n?(this.displayValue=e.value=this.transformNumber(this.proxyModel,`1.${n}-${n}`),this.decimalValue=this.decimalValue.replace(/\D/g,"")):this.displayValue=e.value=this.transformNumber(this.proxyModel),"default"!==this.updateon||this.isDefaultQuery||this.resetCursorPosition(i.length-t)}stepLength(){const e=this.step.toString().split(".");return 1===e.length?void 0:e[1].length}isNaturalCurrency(){return this.inputmode===s.INPUTMODE.NATURAL&&"wm-currency"===this.widgetType&&!!this.trailingzero}onInputChange(e){const t=this.stepLength();if(!o.isDefined(e)||""===e&&!this.datavalue)return;if(this.handleChange(e),!t||this.inputmode!==s.INPUTMODE.FINANCIAL)return;let i;if(this.isDefaultQuery)i=parseFloat(e);else{i=parseInt(e.toString().replace(/\D/g,""))*this.step}_.isNaN(i)?"blur"!==this.ngModelOptions.updateOn&&(this.datavalue=void 0,this.handleChange(null)):"change"===this.ngModelOptions.updateOn?(this.datavalue=parseFloat(i.toFixed(t)),this.handleChange(this.datavalue)):this.displayValue=i.toFixed(t)}checkForTrailingZeros(e){const t=this.stepLength(),i=!this.trailingzero&&this.inputmode===s.INPUTMODE.FINANCIAL;if(this.lastValIsDecimal&&this.onModelChange(this.displayValue),(i||this.isNaturalCurrency())&&t&&this.datavalue){let n;(i&&"focus"===e.type||this.isNaturalCurrency()&&"blur"===e.type)&&(n=`1.${t}-${t}`),this.displayValue=this.transformNumber(this.datavalue,n)}}countDecimals(e){if(e%1!=0){const t=e.toString().split(".")[1];return t&&t.length}return 0}onArrowPress(e,t){if(e.preventDefault(),this.readonly||0===this.step)return;const i=e.target.value.replace(/,/g,"");let n,a;if(n=i&&!_.isNaN(parseFloat(i))?parseFloat(i):this.proxyModel,this.numberNotInRange){const e=this.parseNumber(this.inputEl.nativeElement.value);_.isNaN(e)||(a=this.getValueInRange(e),n=e,this.resetValidations())}else _.isUndefined(n)||_.isNull(n)?(n=a=this.getValueInRange(this.minvalue||0),this.resetValidations()):a=this.getValueInRange(n+("UP"===t?this.step:-this.step));if("UP"===t&&n<=a||"DOWN"===t&&n>=a){const e=Math.max(this.countDecimals(n),this.countDecimals(this.step));this.proxyModel=_.round(a,e),this.updateDisplayText(),this.handleChange(this.proxyModel)}}validate(e){return this.isInvalidNumber?(this.validateType="",{invalidNumber:{valid:!1}}):this.numberNotInRange?{numberNotInRange:{valid:!1}}:(this.validateType="",this.show&&this.required?e.value||0===e.value?null:{required:!0}:null)}validateInputEntry(e){if(this.isDefaultQuery=!1,e.ctrlKey||_.includes(["Backspace","ArrowRight","ArrowLeft","Tab","Enter","Delete"],e.key))return;const t=new RegExp(`^[\\d\\s-,.e+${this.GROUP}${this.DECIMAL}]$`,"i"),i=e.target.value,n=this.inputmode===s.INPUTMODE.FINANCIAL;if(i){if(parseInt(i.toString().replace(/\D/g,"")).toString().length>15){const e=window.getSelection();return!(!e||!e.toString()||e.focusNode!==this.nativeElement)}}return!(!n&&i&&this.countDecimals(this.step)&&this.countDecimals(i)>=this.countDecimals(this.step)&&e.target.selectionStart>=i.length-1)&&(!!t.test(e.key)&&((!_.includes(i,",")||","!==i[i.length-1]||","!==e.key)&&((!_.includes(i,this.DECIMAL)||e.key!==this.DECIMAL)&&((!_.intersection(_.toArray(i),["e","E"]).length||!_.includes("eE",e.key))&&((!_.includes(i,"+")&&!_.includes(i,"-")||"+"!==e.key&&"-"!==e.key)&&(!(!i&&"Space"===e.code)&&void 0))))))}onBackspace(e){this.isDefaultQuery=!1}onEnter(e){this.datavalue=e.target.value}onModelChange(e){(this.inputmode===s.INPUTMODE.NATURAL||this.inputmode===s.INPUTMODE.FINANCIAL&&"blur"===this.ngModelOptions.updateOn)&&(this.datavalue=e)}onPropertyChange(e,t,i){"minvalue"===e||"maxvalue"===e?this.isValid(t):"datavalue"!==e||i?super.onPropertyChange(e,t,i):this.isNaturalCurrency()?this.checkForTrailingZeros({type:"blur"}):this.onInputChange(t)}}const he=["input"],me=["wmNumber",""],ge={widgetType:"wm-number",hostClass:"app-input-wrapper"};class fe extends ue{static{this.initializeProps=(s.register("wm-number",de),void s.registerFormWidget(o.FormWidgetType.NUMBER,new Map(de)))}constructor(e,t,i){super(e,ge,t,i)}static{this.\u0275fac=function(e){return new(e||fe)(c.\u0275\u0275directiveInject(c.Injector),c.\u0275\u0275directiveInject(m.AbstractI18nService),c.\u0275\u0275directiveInject(h.TrailingZeroDecimalPipe))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:fe,selectors:[["","wmNumber",""]],viewQuery:function(e,t){if(1&e&&(c.\u0275\u0275viewQuery(he,7),c.\u0275\u0275viewQuery(n.NgModel,7)),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.inputEl=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.ngModel=e.first)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(fe,n.NG_VALUE_ACCESSOR,!0),s.provideAs(fe,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(fe)]),c.\u0275\u0275InheritDefinitionFeature],attrs:me,decls:2,vars:14,consts:[["inputmode","decimal","focus-target","","role","textbox","type","text",1,"form-control","app-textbox","app-number-input",3,"ngModel","readonly","disabled","pattern","autofocus","ngClass","ngStyle","ngModelOptions","required","ngModelChange","blur","focus","input","keypress","keydown.backspace","keydown.enter","keydown.ArrowUp","keydown.ArrowDown"],["input",""]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"input",0,1),c.\u0275\u0275listener("ngModelChange",(function(e){return t.onModelChange(e)}))("blur",(function(e){return t.handleBlur(e),t.checkForTrailingZeros(e)}))("focus",(function(e){return t.checkForTrailingZeros(e)}))("input",(function(e){return t.onInputChange(e.target.value)}))("keypress",(function(e){return t.validateInputEntry(e)}))("keydown.backspace",(function(e){return t.onBackspace(e)}))("keydown.enter",(function(e){return t.onEnter(e)}))("keydown.ArrowUp",(function(e){return t.onArrowPress(e,"UP")}))("keydown.ArrowDown",(function(e){return t.onArrowPress(e,"DOWN")})),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275property("ngModel",t.displayValue)("readonly",t.readonly)("disabled",t.disabled)("pattern",t.regexp)("autofocus",t.autofocus)("ngClass",t.conditionalclass)("ngStyle",t.conditionalstyle)("ngModelOptions",t.ngModelOptions)("required",t.required),c.\u0275\u0275attribute("name",t.name)("tabindex",t.tabindex)("placeholder",t.placeholder)("accesskey",t.shortcutkey)("aria-label",t.hint))},dependencies:[d.NgClass,d.NgStyle,p.DefaultValueAccessor,p.NgControlStatus,p.RequiredValidator,p.PatternValidator,p.NgModel],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(fe,[{type:t.Component,args:[{selector:"[wmNumber]",providers:[s.provideAs(fe,n.NG_VALUE_ACCESSOR,!0),s.provideAs(fe,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(fe)],template:'<input class="form-control app-textbox app-number-input"\n       inputmode="decimal"\n       focus-target\n       [attr.name]="name"\n       role="textbox"\n       type="text"\n       [ngModel]="displayValue"\n       [readonly]="readonly"\n       [disabled]="disabled"\n       [pattern]="regexp"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [attr.aria-label]="hint"\n       [autofocus]="autofocus"\n       [ngClass]="conditionalclass"\n       [ngStyle]="conditionalstyle"\n       (ngModelChange)="onModelChange($event)"\n       (blur)="handleBlur($event); checkForTrailingZeros($event);"\n       (focus)="checkForTrailingZeros($event)"\n       (input)="onInputChange($event.target.value)"\n       [ngModelOptions]="ngModelOptions"\n       [required]="required"\n       (keypress)="validateInputEntry($event)"\n       (keydown.backspace)="onBackspace($event)"\n       (keydown.enter)="onEnter($event)"\n       (keydown.ArrowUp)="onArrowPress($event, \'UP\')"\n       (keydown.ArrowDown)="onArrowPress($event, \'DOWN\')"\n       #input>\n'}]}],(function(){return[{type:c.Injector},{type:m.AbstractI18nService},{type:h.TrailingZeroDecimalPipe}]}),{inputEl:[{type:t.ViewChild,args:["input",{static:!0}]}],ngModel:[{type:t.ViewChild,args:[n.NgModel,{static:!0}]}]});const ve=new Map([["class",s.PROP_STRING],["collapsible",s.PROP_BOOLEAN],["compareby",s.PROP_STRING],["datafield",s.PROP_STRING],["dataset",{value:"Option 1, Option 2, Option 3",...s.PROP_ANY}],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_ANY],["dateformat",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["displayexpression",s.PROP_STRING],["displayfield",s.PROP_STRING],["displayValue",s.PROP_STRING],["groupby",s.PROP_STRING],["itemclass",{value:"",...s.PROP_STRING}],["itemsperrow",{value:"xs-1 sm-1 md-1 lg-1",...s.PROP_STRING}],["listclass",{value:"",...s.PROP_STRING}],["match",s.PROP_STRING],["name",s.PROP_STRING],["orderby",s.PROP_STRING],["readonly",s.PROP_BOOLEAN],["required",s.PROP_BOOLEAN],["show",{value:!0,...s.PROP_BOOLEAN}],["showcount",s.PROP_BOOLEAN],["showindevice",{displayType:"inline-block",value:"all",...s.PROP_STRING}],["tabindex",{value:0,...s.PROP_NUMBER}],["usekeys",s.PROP_BOOLEAN]]),be=["wmRadioset",""],ye=function(e){return{disabled:e}};function we(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"label",7),c.\u0275\u0275element(1,"input",8)(2,"span",9),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(),t=e.$implicit,i=e.index,n=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(10,ye,n.disabled||n.readonly)),c.\u0275\u0275advance(1),c.\u0275\u0275property("name","radioset_"+n.widgetId)("value",t.key)("disabled",n.disabled||n.readonly)("tabindex",n.tabindex)("checked",t.selected),c.\u0275\u0275attribute("aria-checked",t.selected)("data-attr-index",i)("aria-label",t.key),c.\u0275\u0275advance(1),c.\u0275\u0275property("textContent",t.label)}}function Pe(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"label",7),c.\u0275\u0275element(1,"input",8)(2,"span",10),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(),t=e.$implicit,i=e.index,n=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(9,ye,n.disabled||n.readonly)),c.\u0275\u0275advance(1),c.\u0275\u0275property("name","radioset_"+n.widgetId)("value",t.key)("disabled",n.disabled||n.readonly)("tabindex",n.tabindex)("checked",t.selected),c.\u0275\u0275attribute("aria-checked",t.selected)("data-attr-index",i)("aria-label",t.key)}}const Ce=function(e,t){return["radio","app-radio",e,t]};function Ae(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"li",5),c.\u0275\u0275listener("click",(function(t){const i=c.\u0275\u0275restoreView(e).$implicit,n=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(n.onRadioLabelClick(t,i.key))})),c.\u0275\u0275template(1,we,3,12,"label",6),c.\u0275\u0275template(2,Pe,3,11,"label",6),c.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,i=c.\u0275\u0275nextContext(2);c.\u0275\u0275classProp("active",e.selected),c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction2(7,Ce,i.itemclass,i.itemsPerRowClass))("wmItemTemplate",i.content)("userComponentParams",e),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!i.content),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",i.content)}}function _e(e,t){if(1&e&&c.\u0275\u0275template(0,Ae,3,10,"li",4),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngForOf",e.datasetItems)}}function Ie(e,t){1&e&&c.\u0275\u0275element(0,"div",11)}function Ee(e,t){if(1&e&&c.\u0275\u0275element(0,"i",21),2&e){const e=c.\u0275\u0275nextContext(3);c.\u0275\u0275propertyInterpolate2("title","",e.appLocale.LABEL_COLLAPSE,"/",e.appLocale.LABEL_EXPAND,"")}}function Oe(e,t){if(1&e&&c.\u0275\u0275element(0,"span",22),2&e){const e=c.\u0275\u0275nextContext().$implicit;c.\u0275\u0275property("textContent",e.data.length)}}function xe(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"label",7),c.\u0275\u0275element(1,"input",8)(2,"span",9),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(),t=e.$implicit,i=e.index,n=c.\u0275\u0275nextContext(3);c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(9,ye,n.disabled||n.readonly)),c.\u0275\u0275advance(1),c.\u0275\u0275property("name","radioset_"+n.widgetId)("value",t.key)("disabled",n.disabled||n.readonly)("tabindex",n.tabindex)("checked",t.selected),c.\u0275\u0275attribute("aria-checked",t.selected)("data-attr-index",i),c.\u0275\u0275advance(1),c.\u0275\u0275property("textContent",t.label)}}function Re(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"label",7),c.\u0275\u0275element(1,"input",8)(2,"span",10),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(),t=e.$implicit,i=e.index,n=c.\u0275\u0275nextContext(3);c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(8,ye,n.disabled||n.readonly)),c.\u0275\u0275advance(1),c.\u0275\u0275property("name","radioset_"+n.widgetId)("value",t.key)("disabled",n.disabled||n.readonly)("tabindex",n.tabindex)("checked",t.selected),c.\u0275\u0275attribute("aria-checked",t.selected)("data-attr-index",i)}}const De=function(e,t){return["radio","app-radio","group-list-item",e,t]};function Se(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"li",23),c.\u0275\u0275listener("click",(function(t){const i=c.\u0275\u0275restoreView(e).$implicit,n=c.\u0275\u0275nextContext(3);return c.\u0275\u0275resetView(n.onRadioLabelClick(t,i))})),c.\u0275\u0275template(1,xe,3,11,"label",6),c.\u0275\u0275template(2,Re,3,10,"label",6),c.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,i=c.\u0275\u0275nextContext(3);c.\u0275\u0275classProp("active",e.selected),c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction2(7,De,i.itemclass,i.itemsPerRowClass))("wmItemTemplate",i.content)("userComponentParams",e),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!i.content),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",i.content)}}const Te=function(e){return{"collapsible-content":e}};function Me(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"li",13)(1,"ul",14)(2,"li",15),c.\u0275\u0275listener("click",(function(t){c.\u0275\u0275restoreView(e);const i=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(i.handleHeaderClick(t))})),c.\u0275\u0275elementStart(3,"h4",16),c.\u0275\u0275text(4),c.\u0275\u0275elementStart(5,"div",17),c.\u0275\u0275template(6,Ee,1,2,"i",18),c.\u0275\u0275template(7,Oe,1,1,"span",19),c.\u0275\u0275elementEnd()()(),c.\u0275\u0275template(8,Se,3,10,"li",20),c.\u0275\u0275elementEnd()()}if(2&e){const e=t.$implicit,i=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(2),c.\u0275\u0275property("title",e.key)("ngClass",c.\u0275\u0275pureFunction1(6,Te,i.collapsible)),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1("",e.key," "),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",i.collapsible),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",i.showcount),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngForOf",e.data)}}function Ne(e,t){if(1&e&&c.\u0275\u0275template(0,Me,9,8,"li",12),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngForOf",e.groupedData)}}const ke={widgetType:"wm-radioset",hostClass:"app-radioset list-group inline"};class Le extends j{static{this.initializeProps=(s.register("wm-radioset",ve),void s.registerFormWidget(o.FormWidgetType.RADIOSET,new Map(ve)))}constructor(e){super(e,ke),this.layout="",s.styler(this.nativeElement,this),this.multiple=!1}onRadioLabelClick(e,t){$(e.target).is("input")&&(this.modelByKey=t,this.invokeOnTouched(),this.invokeOnChange(this.datavalue,e||{},!0))}handleEvent(e,t,i,n){"click"===t?this.eventManager.addEventListener(e,t,(e=>{if($(e.target).is("input"))return n.$event=e,i()})):_.includes(["change"],t)||super.handleEvent(e,t,i,n)}onPropertyChange(e,t,i){"tabindex"!==e&&("itemsperrow"===e?o.setListClass(this):super.onPropertyChange(e,t,i))}static{this.\u0275fac=function(e){return new(e||Le)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:Le,selectors:[["","wmRadioset",""]],exportAs:["wmRadioset"],features:[c.\u0275\u0275ProvidersFeature([s.provideAs(Le,n.NG_VALUE_ACCESSOR,!0),s.provideAs(Le,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(Le)]),c.\u0275\u0275InheritDefinitionFeature],attrs:be,decls:5,vars:4,consts:[[3,"ngIf","ngIfElse"],["hidden","",1,"model-holder",3,"disabled"],["aria-readonly","true","class","readonly-wrapper",4,"ngIf"],["groupedListTemplate",""],["partialContainer","","role","presentation",3,"ngClass","active","wmItemTemplate","userComponentParams","click",4,"ngFor","ngForOf"],["partialContainer","","role","presentation",3,"ngClass","wmItemTemplate","userComponentParams","click"],["class","app-radioset-label",3,"ngClass",4,"ngIf"],[1,"app-radioset-label",3,"ngClass"],["type","radio",3,"name","value","disabled","tabindex","checked"],[1,"caption",3,"textContent"],["partial-container-target","",1,"caption","customTemplate"],["aria-readonly","true",1,"readonly-wrapper"],["class","app-list-item-group",4,"ngFor","ngForOf"],[1,"app-list-item-group"],[1,"item-group"],[1,"list-group-header",3,"title","ngClass","click"],[1,"group-title"],[1,"header-action"],["class","app-icon wi action wi-chevron-up",3,"title",4,"ngIf"],["class","label label-default",3,"textContent",4,"ngIf"],["partialContainer","",3,"ngClass","active","wmItemTemplate","userComponentParams","click",4,"ngFor","ngForOf"],[1,"app-icon","wi","action","wi-chevron-up",3,"title"],[1,"label","label-default",3,"textContent"],["partialContainer","",3,"ngClass","wmItemTemplate","userComponentParams","click"]],template:function(e,t){if(1&e&&(c.\u0275\u0275template(0,_e,1,1,"ng-template",0),c.\u0275\u0275element(1,"input",1),c.\u0275\u0275template(2,Ie,1,0,"div",2),c.\u0275\u0275template(3,Ne,1,1,"ng-template",null,3,c.\u0275\u0275templateRefExtractor)),2&e){const e=c.\u0275\u0275reference(4);c.\u0275\u0275property("ngIf",!t.groupby)("ngIfElse",e),c.\u0275\u0275advance(1),c.\u0275\u0275property("disabled",t.disabled||t.readonly),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.readonly||t.disabled)}},dependencies:[d.NgClass,d.NgForOf,d.NgIf,h.ItemTemplateDirective,h.PartialParamHandlerDirective,h.PartialContainerDirective,h.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(Le,[{type:t.Component,args:[{selector:"[wmRadioset]",exportAs:"wmRadioset",providers:[s.provideAs(Le,n.NG_VALUE_ACCESSOR,!0),s.provideAs(Le,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(Le)],template:'<ng-template [ngIf]="!groupby" [ngIfElse]="groupedListTemplate">\n    <li [ngClass]="[\'radio\', \'app-radio\', itemclass, itemsPerRowClass]"\n        [class.active]="item.selected"\n        *ngFor="let item of datasetItems;let i = index"\n        [wmItemTemplate]="content" [userComponentParams]="item" partialContainer\n        (click)="onRadioLabelClick($event, item.key)" role="presentation">\n        \x3c!-- Default item template --\x3e\n        <label *ngIf="!content" class="app-radioset-label"\n               [ngClass]="{\'disabled\':disabled || readonly}">\n            <input [name]="\'radioset_\' + widgetId" type="radio" [attr.aria-checked]="item.selected" [attr.data-attr-index]="i"\n                   [value]="item.key" [disabled]="disabled || readonly" [tabindex]="tabindex" [checked]="item.selected"\n                   [attr.aria-label]="item.key"/>\n            <span class="caption" [textContent]="item.label"></span>\n        </label>\n        \x3c!-- Custom partial template --\x3e\n        <label *ngIf="content" class="app-radioset-label"\n               [ngClass]="{\'disabled\':disabled || readonly}">\n            <input [name]="\'radioset_\' + widgetId" type="radio" [attr.aria-checked]="item.selected" [attr.data-attr-index]="i"\n                   [value]="item.key" [disabled]="disabled || readonly" [tabindex]="tabindex" [checked]="item.selected"\n                   [attr.aria-label]="item.key"/>\n            <span class="caption customTemplate" partial-container-target></span>\n        </label>\n    </li>\n</ng-template>\n\n<input [disabled]="disabled || readonly" hidden class="model-holder">\n<div *ngIf="readonly || disabled" aria-readonly="true" class="readonly-wrapper"></div>\n\n\x3c!-- This template will be displayed when groupby is specified. --\x3e\n<ng-template #groupedListTemplate>\n    <li *ngFor="let groupObj of groupedData" class="app-list-item-group">\n        <ul class="item-group">\n            <li class="list-group-header" (click)="handleHeaderClick($event)" [title]="groupObj.key" [ngClass]="{\'collapsible-content\': collapsible}">\n                <h4 class="group-title">{{groupObj.key}}\n                    <div class="header-action">\n                        <i class="app-icon wi action wi-chevron-up" *ngIf="collapsible" title="{{appLocale.LABEL_COLLAPSE}}/{{appLocale.LABEL_EXPAND}}"></i>\n                        <span *ngIf="showcount" class="label label-default" [textContent]="groupObj.data.length"></span>\n                    </div>\n                </h4>\n            </li>\n            <li *ngFor="let item of groupObj.data; let i = index;"\n                [ngClass]="[\'radio\', \'app-radio\', \'group-list-item\', itemclass, itemsPerRowClass]"\n                [class.active]="item.selected"\n                [wmItemTemplate]="content" [userComponentParams]="item" partialContainer\n                (click)="onRadioLabelClick($event, item)">\n                \x3c!-- Default item template --\x3e\n                <label *ngIf="!content" class="app-radioset-label"\n                       [ngClass]="{\'disabled\':disabled || readonly}">\n                    <input [name]="\'radioset_\' + widgetId" type="radio" [attr.aria-checked]="item.selected" [attr.data-attr-index]="i"\n                           [value]="item.key" [disabled]="disabled || readonly" [tabindex]="tabindex" [checked]="item.selected"/>\n                    <span class="caption" [textContent]="item.label"></span>\n                </label>\n                \x3c!-- Custom partial template --\x3e\n                <label *ngIf="content" class="app-radioset-label"\n                       [ngClass]="{\'disabled\':disabled || readonly}">\n                    <input [name]="\'radioset_\' + widgetId" type="radio" [attr.aria-checked]="item.selected" [attr.data-attr-index]="i"\n                           [value]="item.key" [disabled]="disabled || readonly" [tabindex]="tabindex" [checked]="item.selected"/>\n                    <span class="caption customTemplate" partial-container-target></span>\n                </label>\n            </li>\n        </ul>\n    </li>\n</ng-template>\n'}]}],(function(){return[{type:c.Injector}]}),null);const Fe=new Map([["autofocus",s.PROP_BOOLEAN],["class",{value:"",...s.PROP_STRING}],["compareby",s.PROP_STRING],["datafield",s.PROP_STRING],["dataset",s.PROP_ANY],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["dateformat",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["displayexpression",s.PROP_STRING],["displayfield",s.PROP_STRING],["displayValue",s.PROP_STRING],["groupby",s.PROP_STRING],["hint",s.PROP_STRING],["match",s.PROP_STRING],["multiple",{value:!1,...s.PROP_BOOLEAN}],["name",s.PROP_STRING],["orderby",s.PROP_STRING],["placeholder",s.PROP_STRING],["readonly",s.PROP_BOOLEAN],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["tabindex",{value:0,...s.PROP_NUMBER}],["usekeys",s.PROP_BOOLEAN]]),$e=["select"];function Be(e,t){if(1&e&&c.\u0275\u0275element(0,"option",4),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("textContent",e.placeholder)("hidden",!e.placeholder)}}function je(e,t){if(1&e&&c.\u0275\u0275element(0,"option",8),2&e){const e=t.$implicit;c.\u0275\u0275property("value",e.key)("selected",e.selected)("textContent",e.label)}}function Ve(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"optgroup",6),c.\u0275\u0275template(1,je,1,3,"option",7),c.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;c.\u0275\u0275property("label",e.key),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngForOf",e.data)}}function Ge(e,t){if(1&e&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275template(1,Ve,2,2,"optgroup",5),c.\u0275\u0275elementContainerEnd()),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngForOf",e.groupedData)}}function We(e,t){if(1&e&&c.\u0275\u0275element(0,"option",8),2&e){const e=t.$implicit;c.\u0275\u0275property("value",e.key)("selected",e.selected)("textContent",e.label)}}function Ue(e,t){if(1&e&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275template(1,We,1,3,"option",7),c.\u0275\u0275elementContainerEnd()),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngForOf",e.datasetItems)}}const qe=function(e){return["app-select form-control",e]},ze={widgetType:"wm-select",hostClass:"app-select-wrapper"};class He extends j{static{this.initializeProps=(s.register("wm-select",Fe),s.registerFormWidget(o.FormWidgetType.SELECT,new Map(Fe)),void s.registerFormWidget(o.FormWidgetType.TYPEAHEAD,new Map(Fe)))}set datasource(e){e&&e.execute&&e.execute(o.DataSource.Operation.IS_BOUND_TO_LOCALE)&&(this.datavalue=e.execute(o.DataSource.Operation.GET_DEFAULT_LOCALE))}constructor(e,t){super(e,ze),this.app=t,this.acceptsArray=!0}ngAfterViewInit(){super.ngAfterViewInit(),s.styler(this.selectEl.nativeElement,this),setTimeout((()=>{this.checkForFloatingLabel(null)}),10)}handleEvent(e,t,i,n){_.includes(["blur","change"],t)||super.handleEvent(this.selectEl.nativeElement,t,i,n)}onSelectValueChange(e){if(this.readonly)return this.placeholder?this.selectEl.nativeElement.value=this.placeholder:this.selectEl.nativeElement.value="",void(this.datavalue=this.prevDatavalue);this.invokeOnTouched(),this.invokeOnChange(this.datavalue,e||{},!0)}onPropertyChange(e,t,i){if("required"!==e){if("class"!==e&&"tabindex"!==e)"readonly"===e&&(!0===t?o.setAttr(this.selectEl.nativeElement,"readonly","readonly"):o.removeAttr(this.selectEl.nativeElement,"readonly")),super.onPropertyChange(e,t,i);else if("class"===e){this.selectEl.nativeElement.classList.contains("ng-untouched")&&this.selectEl.nativeElement.classList.contains("ng-valid")&&t.includes("ng-untouched")&&t.includes("ng-invalid")&&setTimeout((()=>{this.selectEl.nativeElement.classList.contains("ng-untouched")&&this.selectEl.nativeElement.classList.contains("ng-valid")&&this.selectEl.nativeElement.classList.contains("ng-invalid")&&this.selectEl.nativeElement.classList.remove("ng-invalid")}))}}else this._onChange(this.datavalue)}isSafariBrowser(){var e={MAC:/Mac/i,MACINTEL:/MacIntel/i};return e.MAC.test(window.navigator.platform)||e.MACINTEL.test(window.navigator.platform)}isIosPlatform(){return o.isIos()||this.isSafariBrowser()}checkForFloatingLabel(e){const t=$(this.selectEl.nativeElement).closest(".app-composite-widget.caption-floating");t.length>0&&(e&&"focus"!==e.type||""!==$(this.selectEl).find("select option:selected").text()||!(this.placeholder||this.datavalue||this.binddatavalue||this.isIosPlatform())?this.datavalue||this.placeholder||this.isIosPlatform()||t.removeClass("float-active"):(!e&&(this.placeholder||this.datavalue||this.binddatavalue||this.isIosPlatform())&&this.app.notify("captionPositionAnimate",{isSelect:!0,nativeEl:t}),this.placeholder&&$(this.selectEl.nativeElement).find("option:first").text(this.placeholder)))}static{this.\u0275fac=function(e){return new(e||He)(c.\u0275\u0275directiveInject(c.Injector),c.\u0275\u0275directiveInject(m.App))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:He,selectors:[["wm-select"]],viewQuery:function(e,i){if(1&e&&c.\u0275\u0275viewQuery($e,7,t.ElementRef),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(i.selectEl=e.first)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(He,n.NG_VALUE_ACCESSOR,!0),s.provideAs(He,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(He)]),c.\u0275\u0275InheritDefinitionFeature],decls:5,vars:15,consts:[["role","listbox","aria-haspopup","true","aria-expanded","false","focus-target","",3,"ngClass","disabled","required","tabindex","ngModel","multiple","autofocus","ngModelChange","change","focus","blur"],["select",""],["value","undefined",3,"textContent","hidden",4,"ngIf"],[4,"ngIf"],["value","undefined",3,"textContent","hidden"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","option",3,"value","selected","textContent",4,"ngFor","ngForOf"],["role","option",3,"value","selected","textContent"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"select",0,1),c.\u0275\u0275listener("ngModelChange",(function(e){return t.modelByKey=e}))("change",(function(e){return t.onSelectValueChange(e)}))("focus",(function(e){return t.checkForFloatingLabel(e)}))("blur",(function(e){return t.invokeOnTouched(e),t.checkForFloatingLabel(e)})),c.\u0275\u0275template(2,Be,1,2,"option",2),c.\u0275\u0275template(3,Ge,2,1,"ng-container",3),c.\u0275\u0275template(4,Ue,2,1,"ng-container",3),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(13,qe,t.class))("disabled",t.disabled)("required",t.required)("tabindex",t.tabindex)("ngModel",t.modelByKey)("multiple",t.multiple)("autofocus",t.autofocus),c.\u0275\u0275attribute("name",t.name)("aria-label",t.hint)("aria-multiselectable",t.multiple),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",!t.isIosPlatform()||!!t.placeholder),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.groupby),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!t.groupby))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,p.NgSelectOption,p.\u0275NgSelectMultipleOption,p.SelectMultipleControlValueAccessor,p.NgControlStatus,p.RequiredValidator,p.NgModel,h.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(He,[{type:t.Component,args:[{selector:"wm-select",providers:[s.provideAs(He,n.NG_VALUE_ACCESSOR,!0),s.provideAs(He,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(He)],template:'<select role="listbox" aria-haspopup="true" aria-expanded="false" #select\n        focus-target\n        [ngClass]="[\'app-select form-control\', class]"\n        [disabled]="disabled"\n        [required]="required"\n        [tabindex]="tabindex"\n        [(ngModel)]="modelByKey"\n        [multiple]="multiple"\n        (change)="onSelectValueChange($event)"\n        (focus)="checkForFloatingLabel($event)"\n        (blur)="invokeOnTouched($event); checkForFloatingLabel($event)"\n        [attr.name]="name"\n        [attr.aria-label]="hint"\n        [attr.aria-multiselectable]="multiple"\n        [autofocus]="autofocus"\n>\n    <option\n    value="undefined"\n    [textContent]="placeholder"\n    *ngIf="!isIosPlatform() || !!placeholder"\n    [hidden]="!placeholder"></option>\n\n    <ng-container *ngIf="groupby">\n        <optgroup *ngFor="let groupObj of groupedData"\n            [label]="groupObj.key">\n            <option *ngFor="let item of groupObj.data;"\n                [value]="item.key"\n                [selected]="item.selected"\n                [textContent]="item.label"\n                role="option"></option>\n        </optgroup>\n    </ng-container>\n\n    <ng-container *ngIf="!groupby">\n        <option *ngFor="let item of datasetItems"\n            [value]="item.key"\n            [selected]="item.selected"\n            [textContent]="item.label"\n            role="option"></option>\n    </ng-container>\n</select>\n'}]}],(function(){return[{type:c.Injector},{type:m.App}]}),{selectEl:[{type:t.ViewChild,args:["select",{static:!0,read:t.ElementRef}]}]});const Qe=new Map([["class",s.PROP_STRING],["compareby",s.PROP_STRING],["datafield",s.PROP_STRING],["dataset",{value:"yes, no, maybe",...s.PROP_ANY}],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["displayexpression",s.PROP_STRING],["displayfield",s.PROP_STRING],["hint",s.PROP_STRING],["iconclass",s.PROP_STRING],["name",s.PROP_STRING],["orderby",s.PROP_STRING],["required",s.PROP_BOOLEAN],["show",{value:!0,...s.PROP_BOOLEAN}],["tabindex",{value:0,...s.PROP_NUMBER}]]),Ye=["wmSwitch",""],Ke=function(e){return["app-icon",e]};function Je(e,t){if(1&e&&c.\u0275\u0275element(0,"i",8),2&e){const e=c.\u0275\u0275nextContext().$implicit,t=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(1,Ke,e.dataObject[t.iconclass]||e.icon))}}const Ze=function(e,t){return{selected:e,disabled:t}};function Xe(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"a",5),c.\u0275\u0275listener("click",(function(t){const i=c.\u0275\u0275restoreView(e),n=i.index,a=i.$implicit,s=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(s.selectOpt(t,n,a))})),c.\u0275\u0275template(1,Je,1,3,"i",6),c.\u0275\u0275element(2,"span",7),c.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,i=c.\u0275\u0275nextContext();c.\u0275\u0275property("name","wm-switch-"+e.key)("ngClass",c.\u0275\u0275pureFunction2(4,Ze,e.selected,i.disabled)),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.dataObject&&e.dataObject[i.iconclass]),c.\u0275\u0275advance(1),c.\u0275\u0275property("textContent",e[i.displayfield]||e.label)}}function et(e,t){if(1&e&&c.\u0275\u0275element(0,"i"),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275classMapInterpolate1("app-icon ",e.selectedItem&&e.selectedItem.dataObject&&e.selectedItem.dataObject[e.iconclass],"")}}const tt={widgetType:"wm-switch",hostClass:"app-switch"};class it extends j{static{this.initializeProps=(s.register("wm-switch",Qe),s.registerFormWidget(o.FormWidgetType.SWITCH,new Map(Qe)),void s.registerFormWidget(o.FormWidgetType.TOGGLE,new Map(Qe)))}constructor(e){super(e,tt),this.options=[],this._debounceSetSelectedValue=o.debounce((e=>{this.setSelectedValue(),this.updateHighlighter(e),e&&o.$appDigest()}),200);const t=this.dataset$.subscribe((()=>this.updateSwitchOptions()));this.registerDestroyListener((()=>t.unsubscribe()));const i=this.datavalue$.subscribe((()=>{this._debounceSetSelectedValue(!0)}));this.registerDestroyListener((()=>i.unsubscribe()))}ngAfterViewInit(){super.ngAfterViewInit(),s.styler(this.nativeElement,this)}onStyleChange(e,t,i){"height"===e?o.setCSS(this.nativeElement,"overflow",t?"auto":""):super.onStyleChange(e,t,i)}setSelectedValue(){o.isDefined(this.datavalue)||o.isDefined(this.toBeProcessedDatavalue)?this.selectedItem=_.find(this.datasetItems,{selected:!0}):this.selectOptAtIndex(0)}updateSwitchOptions(){this.datasetItems.length&&(this.btnwidth=100/this.datasetItems.length,o.setCSS(this.nativeElement.querySelector(".app-switch-overlay"),"width",this.btnwidth+"%")),this._debounceSetSelectedValue(!0)}updateHighlighter(e){const t=$(this.nativeElement).find("span.app-switch-overlay");this.setSelectedValue();let i,n=this.selectedItem?_.findIndex(this.datasetItems,{key:this.selectedItem.key}):-1;null==n&&(n=-1),i=n*this.btnwidth,e?t.css("left",i+"%"):t.animate({left:i+"%"},300)}selectOptAtIndex(e){if(!this.datasetItems.length)return;const t=this.datasetItems[e];this._modelByValue=t.value}selectOpt(e,t,i){if(e.preventDefault(),!this.disabled){if(this.modelByKey=i.key,this.invokeOnTouched(),this.selectedItem&&t===_.findIndex(this.datasetItems,{key:this.selectedItem.key})){if(2!==this.datasetItems.length)return;t=1===t?0:1}this.selectedItem=this.datasetItems[t],this.updateHighlighter(),this.invokeOnChange(this.datavalue,e||{},!0),o.$appDigest()}}onPropertyChange(e,t,i){"disabled"!==e||o.toBoolean(t)?super.onPropertyChange(e,t,i):this.nativeElement.removeAttribute(e)}static{this.\u0275fac=function(e){return new(e||it)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:it,selectors:[["","wmSwitch",""]],exportAs:["wmSwitch"],features:[c.\u0275\u0275ProvidersFeature([s.provideAs(it,n.NG_VALUE_ACCESSOR,!0),s.provideAsWidgetRef(it)]),c.\u0275\u0275InheritDefinitionFeature],attrs:Ye,decls:6,vars:8,consts:[["role","group",1,"btn-group","btn-group-justified"],["focus-target","","href","javascript:void(0);","class","btn btn-default",3,"name","ngClass","click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","app-switch-overlay","switch-handle",3,"title"],[3,"class",4,"ngIf"],["aria-hidden","true",1,"model-holder","ng-hide",3,"name","disabled","value","required"],["focus-target","","href","javascript:void(0);",1,"btn","btn-default",3,"name","ngClass","click"],["aria-hidden","true",3,"ngClass",4,"ngIf"],[1,"caption",3,"textContent"],["aria-hidden","true",3,"ngClass"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275template(1,Xe,3,7,"a",1),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(2,"span",2),c.\u0275\u0275template(3,et,1,3,"i",3),c.\u0275\u0275text(4),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(5,"input",4)),2&e&&(c.\u0275\u0275advance(1),c.\u0275\u0275property("ngForOf",t.datasetItems),c.\u0275\u0275advance(1),c.\u0275\u0275property("title",t.selectedItem?t.selectedItem.label:t.modelByKey),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.iconclass),c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",t.selectedItem?t.selectedItem.label:t.modelByKey,"\n"),c.\u0275\u0275advance(1),c.\u0275\u0275property("name",t.name)("disabled",t.disabled)("value",t.modelByKey)("required",t.required))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,h.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(it,[{type:t.Component,args:[{selector:"[wmSwitch]",providers:[s.provideAs(it,n.NG_VALUE_ACCESSOR,!0),s.provideAsWidgetRef(it)],exportAs:"wmSwitch",template:'<div role="group" class="btn-group btn-group-justified">\n    <a *ngFor="let opt of datasetItems; let $index = index;"\n       focus-target\n       href="javascript:void(0);"\n       class="btn btn-default"\n       [name]="\'wm-switch-\' + opt.key"\n       [ngClass]="{\'selected\': opt.selected, \'disabled\': disabled}"\n       (click)="selectOpt($event, $index, opt)"\n    >\n        <i *ngIf="opt.dataObject && opt.dataObject[iconclass]" aria-hidden="true" [ngClass]="[\'app-icon\', opt.dataObject[iconclass] || opt[\'icon\']]"></i>\n        <span class="caption" [textContent]="opt[displayfield] || opt.label"></span>\n    </a>\n</div>\n<span [title]="selectedItem ? selectedItem.label : modelByKey"\n      class="btn btn-primary app-switch-overlay switch-handle">\n    <i *ngIf="iconclass"\n       class="app-icon {{(selectedItem && selectedItem.dataObject) && selectedItem.dataObject[iconclass]}}"></i>\n    {{selectedItem ? selectedItem.label : modelByKey}}\n</span>\n<input [name]="name" class="model-holder ng-hide" [disabled]="disabled" [value]="modelByKey" [required]="required" aria-hidden="true">\n'}]}],(function(){return[{type:c.Injector}]}),null);const nt=new Map([["autocomplete",{value:!0,...s.PROP_BOOLEAN}],["autotrim",{value:!0,...s.PROP_BOOLEAN}],["autofocus",s.PROP_BOOLEAN],["class",s.PROP_STRING],["datasource",s.PROP_ANY],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["maxvalue",s.PROP_NUMBER],["minvalue",s.PROP_NUMBER],["name",s.PROP_STRING],["placeholder",{value:"Enter text",...s.PROP_STRING}],["readonly",s.PROP_BOOLEAN],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["step",s.PROP_NUMBER],["tabindex",{value:0,...s.PROP_NUMBER}],["type",s.PROP_STRING],["updateon",s.PROP_STRING],["conditionalclass",s.PROP_ANY],["conditionalstyle",s.PROP_ANY]]),at=["input"],st=["type","date"],ot={widgetType:"wm-input-calendar",hostClass:"app-input-wrapper"};class rt extends pe{static{this.initializeProps=void s.register("wm-input-calendar",nt)}constructor(e){super(e,ot)}static{this.\u0275fac=function(e){return new(e||rt)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:rt,selectors:[["wm-input","type","date"],["wm-input","type","datetime-local"],["wm-input","type","month"],["wm-input","type","time"],["wm-input","type","week"]],viewQuery:function(e,t){if(1&e&&(c.\u0275\u0275viewQuery(at,7),c.\u0275\u0275viewQuery(n.NgModel,5)),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.inputEl=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.ngModel=e.first)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(rt,n.NG_VALUE_ACCESSOR,!0),s.provideAs(rt,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(rt)]),c.\u0275\u0275InheritDefinitionFeature],attrs:st,decls:2,vars:17,consts:[["focus-target","","role","textbox",1,"form-control","app-textbox",3,"type","ngModel","readonly","required","disabled","min","max","step","autofocus","autocomplete","ngClass","ngStyle","ngModelChange","blur"],["input",""]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"input",0,1),c.\u0275\u0275listener("ngModelChange",(function(e){return t.datavalue=e}))("blur",(function(e){return t.handleBlur(e)}))("ngModelChange",(function(e){return t.handleChange(e)})),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275property("type",t.type)("ngModel",t.datavalue)("readonly",t.readonly)("required",t.required)("disabled",t.disabled)("min",t.minvalue)("max",t.maxvalue)("step",t.step)("autofocus",t.autofocus)("autocomplete",t.autocomplete?"on":"off")("ngClass",t.conditionalclass)("ngStyle",t.conditionalstyle),c.\u0275\u0275attribute("name",t.name)("tabindex",t.tabindex)("placeholder",t.placeholder)("accesskey",t.shortcutkey)("aria-label",t.hint||t.type+" field"))},dependencies:[d.NgClass,d.NgStyle,p.DefaultValueAccessor,p.NgControlStatus,p.RequiredValidator,p.NgModel],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(rt,[{type:t.Component,args:[{selector:'wm-input[type="date"], wm-input[type="datetime-local"], wm-input[type="month"], wm-input[type="time"], wm-input[type="week"]',providers:[s.provideAs(rt,n.NG_VALUE_ACCESSOR,!0),s.provideAs(rt,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(rt)],template:'<input class="form-control app-textbox"\n       focus-target\n       role="textbox"\n       [type]="type"\n       [attr.name]="name"\n       [(ngModel)]="datavalue"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [min]="minvalue"\n       [max]="maxvalue"\n       [step]="step"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [attr.aria-label]="hint || type + \' field\'"\n       [autofocus]="autofocus"\n       (blur)="handleBlur($event)"\n       (ngModelChange)="handleChange($event)"\n       [autocomplete]="autocomplete ? \'on\' : \'off\'"\n       [ngClass]="conditionalclass"\n       [ngStyle]="conditionalstyle"\n       #input>\n'}]}],(function(){return[{type:c.Injector}]}),{inputEl:[{type:t.ViewChild,args:["input",{static:!0}]}],ngModel:[{type:t.ViewChild,args:[n.NgModel]}]});const lt=new Map([["autocomplete",{value:!0,...s.PROP_BOOLEAN}],["autofocus",s.PROP_BOOLEAN],["autotrim",{value:!0,...s.PROP_BOOLEAN}],["class",s.PROP_STRING],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["name",s.PROP_STRING],["placeholder",{value:"Enter text",...s.PROP_STRING}],["readonly",s.PROP_BOOLEAN],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["tabindex",{value:0,...s.PROP_NUMBER}],["type",{value:"color",...s.PROP_STRING}],["updateon",s.PROP_STRING],["conditionalclass",s.PROP_ANY],["conditionalstyle",s.PROP_ANY]]),ct=["input"],dt=["type","color"],pt={widgetType:"wm-input-color",hostClass:"app-input-wrapper"};class ut extends pe{static{this.initializeProps=void s.register("wm-input-color",lt)}constructor(e){super(e,pt)}static{this.\u0275fac=function(e){return new(e||ut)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:ut,selectors:[["wm-input","type","color"]],viewQuery:function(e,t){if(1&e&&(c.\u0275\u0275viewQuery(ct,7),c.\u0275\u0275viewQuery(n.NgModel,5)),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.inputEl=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.ngModel=e.first)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(ut,n.NG_VALUE_ACCESSOR,!0),s.provideAs(ut,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(ut)]),c.\u0275\u0275InheritDefinitionFeature],attrs:dt,decls:2,vars:14,consts:[["focus-target","","role","textbox",1,"form-control","app-textbox",3,"type","ngModel","readonly","required","disabled","maxlength","autofocus","ngClass","ngStyle","ngModelChange","blur"],["input",""]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"input",0,1),c.\u0275\u0275listener("ngModelChange",(function(e){return t.datavalue=e}))("blur",(function(e){return t.handleBlur(e)}))("ngModelChange",(function(e){return t.handleChange(e)})),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275property("type",t.type)("ngModel",t.datavalue)("readonly",t.readonly)("required",t.required)("disabled",t.disabled)("maxlength",t.maxchars)("autofocus",t.autofocus)("ngClass",t.conditionalclass)("ngStyle",t.conditionalstyle),c.\u0275\u0275attribute("name",t.name)("tabindex",t.tabindex)("placeholder",t.placeholder)("accesskey",t.shortcutkey)("aria-label",t.hint))},dependencies:[d.NgClass,d.NgStyle,p.DefaultValueAccessor,p.NgControlStatus,p.RequiredValidator,p.MaxLengthValidator,p.NgModel],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(ut,[{type:t.Component,args:[{selector:'wm-input[type="color"]',providers:[s.provideAs(ut,n.NG_VALUE_ACCESSOR,!0),s.provideAs(ut,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(ut)],template:'<input class="form-control app-textbox"\n       focus-target\n       [type]="type"\n       role="textbox"\n       [attr.name]="name"\n       [(ngModel)]="datavalue"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [maxlength]="maxchars"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [attr.aria-label]="hint"\n       [autofocus]="autofocus"\n       [ngClass]="conditionalclass"\n       [ngStyle]="conditionalstyle"\n       (blur)="handleBlur($event)"\n       (ngModelChange)="handleChange($event)"\n       #input>\n'}]}],(function(){return[{type:c.Injector}]}),{inputEl:[{type:t.ViewChild,args:["input",{static:!0}]}],ngModel:[{type:t.ViewChild,args:[n.NgModel]}]});const ht=new Map([["autocomplete",{value:!0,...s.PROP_BOOLEAN}],["autofocus",s.PROP_BOOLEAN],["autotrim",{value:!0,...s.PROP_BOOLEAN}],["class",s.PROP_STRING],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["maxchars",s.PROP_NUMBER],["name",s.PROP_STRING],["placeholder",{value:"Enter text",...s.PROP_STRING}],["readonly",s.PROP_BOOLEAN],["regexp",s.PROP_STRING],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["tabindex",{value:0,...s.PROP_NUMBER}],["type",{value:"email",...s.PROP_STRING}],["updateon",s.PROP_STRING],["conditionalclass",s.PROP_ANY],["conditionalstyle",s.PROP_ANY]]),mt=["input"],gt=["type","email"],ft={widgetType:"wm-input-email",hostClass:"app-input-wrapper"};class vt extends pe{static{this.initializeProps=void s.register("wm-input-email",ht)}constructor(e){super(e,ft)}static{this.\u0275fac=function(e){return new(e||vt)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:vt,selectors:[["wm-input","type","email"]],viewQuery:function(e,t){if(1&e&&(c.\u0275\u0275viewQuery(mt,7),c.\u0275\u0275viewQuery(n.NgModel,5)),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.inputEl=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.ngModel=e.first)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(vt,n.NG_VALUE_ACCESSOR,!0),s.provideAs(vt,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(vt)]),c.\u0275\u0275InheritDefinitionFeature],attrs:gt,decls:2,vars:17,consts:[["focus-target","","role","textbox","email","",1,"form-control","app-textbox",3,"type","ngModel","ngModelOptions","readonly","required","disabled","maxlength","pattern","autofocus","ngClass","ngStyle","autocomplete","ngModelChange","blur","keyup.enter"],["input",""]],template:function(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"input",0,1),c.\u0275\u0275listener("ngModelChange",(function(e){return t.datavalue=e}))("blur",(function(e){return t.handleBlur(e)}))("ngModelChange",(function(e){return t.handleChange(e)}))("keyup.enter",(function(){c.\u0275\u0275restoreView(e);const i=c.\u0275\u0275reference(1);return c.\u0275\u0275resetView(t.flushViewChanges(i.value))})),c.\u0275\u0275elementEnd()}2&e&&(c.\u0275\u0275property("type",t.type)("ngModel",t.datavalue)("ngModelOptions",t.ngModelOptions)("readonly",t.readonly)("required",t.required)("disabled",t.disabled)("maxlength",t.maxchars)("pattern",t.regexp)("autofocus",t.autofocus)("ngClass",t.conditionalclass)("ngStyle",t.conditionalstyle)("autocomplete",t.autocomplete?"on":"off"),c.\u0275\u0275attribute("name",t.name)("tabindex",t.tabindex)("placeholder",t.placeholder)("accesskey",t.shortcutkey)("aria-label",t.hint))},dependencies:[d.NgClass,d.NgStyle,p.DefaultValueAccessor,p.NgControlStatus,p.RequiredValidator,p.MaxLengthValidator,p.PatternValidator,p.EmailValidator,p.NgModel],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(vt,[{type:t.Component,args:[{selector:'wm-input[type="email"]',providers:[s.provideAs(vt,n.NG_VALUE_ACCESSOR,!0),s.provideAs(vt,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(vt)],template:'<input class="form-control app-textbox"\n       focus-target\n       role="textbox"\n       [type]="type"\n       [attr.name]="name"\n       [(ngModel)]="datavalue"\n       [ngModelOptions]="ngModelOptions"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [maxlength]="maxchars"\n       [pattern]="regexp"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [attr.aria-label]="hint"\n       [autofocus]="autofocus"\n       [ngClass]="conditionalclass"\n       [ngStyle]="conditionalstyle"\n       (blur)="handleBlur($event)"\n       (ngModelChange)="handleChange($event)"\n       [autocomplete]="autocomplete ? \'on\' : \'off\'"\n       (keyup.enter)="flushViewChanges(input.value)"\n       email\n       #input>\n'}]}],(function(){return[{type:c.Injector}]}),{inputEl:[{type:t.ViewChild,args:["input",{static:!0}]}],ngModel:[{type:t.ViewChild,args:[n.NgModel]}]});const bt=new Map([["autocomplete",{value:!0,...s.PROP_BOOLEAN}],["autofocus",s.PROP_BOOLEAN],["autotrim",{value:!0,...s.PROP_BOOLEAN}],["class",s.PROP_STRING],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["maxchars",s.PROP_NUMBER],["maxvalue",s.PROP_NUMBER],["minvalue",s.PROP_NUMBER],["name",s.PROP_STRING],["placeholder",{value:"Enter text",...s.PROP_STRING}],["readonly",s.PROP_BOOLEAN],["regexp",s.PROP_STRING],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["step",s.PROP_NUMBER],["tabindex",{value:0,...s.PROP_NUMBER}],["type",{value:"number",...s.PROP_STRING}],["updateon",s.PROP_STRING],["conditionalclass",s.PROP_ANY],["conditionalstyle",s.PROP_ANY]]),yt=["input"],wt=["type","number"],Pt=function(e){return{"step-hidden":e}},Ct={widgetType:"wm-input-number",hostClass:"app-input-wrapper"};class At extends pe{static{this.initializeProps=void s.register("wm-input-number",bt)}constructor(e){super(e,Ct)}onArrowPress(e){0===this.step&&e.preventDefault()}validateInputEntry(e){if("e"===e.key&&-1!==e.target.value.indexOf(e.key))return!1}static{this.\u0275fac=function(e){return new(e||At)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:At,selectors:[["wm-input","type","number"]],viewQuery:function(e,t){if(1&e&&(c.\u0275\u0275viewQuery(yt,7),c.\u0275\u0275viewQuery(n.NgModel,5)),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.inputEl=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.ngModel=e.first)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(At,n.NG_VALUE_ACCESSOR,!0),s.provideAs(At,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(At)]),c.\u0275\u0275InheritDefinitionFeature],attrs:wt,decls:2,vars:22,consts:[["focus-target","","role","textbox",1,"form-control","app-textbox",3,"ngClass","type","ngModel","ngModelOptions","readonly","required","disabled","maxlength","min","max","step","autofocus","ngStyle","autocomplete","ngModelChange","blur","keyup.enter","keydown.ArrowUp","keydown.ArrowDown","keypress"],["input",""]],template:function(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"input",0,1),c.\u0275\u0275listener("ngModelChange",(function(e){return t.datavalue=e}))("blur",(function(e){return t.handleBlur(e)}))("ngModelChange",(function(e){return t.handleChange(e)}))("keyup.enter",(function(){c.\u0275\u0275restoreView(e);const i=c.\u0275\u0275reference(1);return c.\u0275\u0275resetView(t.flushViewChanges(i.value))}))("keydown.ArrowUp",(function(e){return t.onArrowPress(e)}))("keydown.ArrowDown",(function(e){return t.onArrowPress(e)}))("keypress",(function(e){return t.validateInputEntry(e)})),c.\u0275\u0275elementEnd()}2&e&&(c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(20,Pt,0===t.step))("type",t.type)("ngModel",t.datavalue)("ngModelOptions",t.ngModelOptions)("readonly",t.readonly)("required",t.required)("disabled",t.disabled)("maxlength",t.maxchars)("min",t.minvalue)("max",t.maxvalue)("step",t.step)("autofocus",t.autofocus)("ngClass",t.conditionalclass)("ngStyle",t.conditionalstyle)("autocomplete",t.autocomplete?"on":"off"),c.\u0275\u0275attribute("name",t.name)("tabindex",t.tabindex)("placeholder",t.placeholder)("accesskey",t.shortcutkey)("aria-label",t.hint))},dependencies:[d.NgClass,d.NgStyle,p.DefaultValueAccessor,p.NgControlStatus,p.RequiredValidator,p.MaxLengthValidator,p.NgModel],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(At,[{type:t.Component,args:[{selector:'wm-input[type="number"]',providers:[s.provideAs(At,n.NG_VALUE_ACCESSOR,!0),s.provideAs(At,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(At)],template:'<input class="form-control app-textbox"\n       [ngClass]="{\'step-hidden\': step === 0}"\n       focus-target\n       role="textbox"\n       [type]="type"\n       [attr.name]="name"\n       [(ngModel)]="datavalue"\n       [ngModelOptions]="ngModelOptions"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [maxlength]="maxchars"\n       [min]="minvalue"\n       [max]="maxvalue"\n       [step]="step"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [attr.aria-label]="hint"\n       [autofocus]="autofocus"\n       [ngClass]="conditionalclass"\n       [ngStyle]="conditionalstyle"\n       (blur)="handleBlur($event)"\n       (ngModelChange)="handleChange($event)"\n       [autocomplete]="autocomplete ? \'on\' : \'off\'"\n       (keyup.enter)="flushViewChanges(input.value)"\n       (keydown.ArrowUp)="onArrowPress($event)"\n       (keydown.ArrowDown)="onArrowPress($event)"\n       (keypress)="validateInputEntry($event)"\n       #input>\n'}]}],(function(){return[{type:c.Injector}]}),{inputEl:[{type:t.ViewChild,args:["input",{static:!0}]}],ngModel:[{type:t.ViewChild,args:[n.NgModel]}]});const _t=new Map([["autocomplete",{value:!0,...s.PROP_BOOLEAN}],["autofocus",s.PROP_BOOLEAN],["autotrim",{value:!0,...s.PROP_BOOLEAN}],["class",s.PROP_STRING],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["displayformat",s.PROP_STRING],["hint",s.PROP_STRING],["maxchars",s.PROP_NUMBER],["name",s.PROP_STRING],["placeholder",{value:"Enter text",...s.PROP_STRING}],["readonly",s.PROP_BOOLEAN],["regexp",s.PROP_STRING],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["showdisplayformaton",{value:"always",...s.PROP_ANY}],["tabindex",{value:0,...s.PROP_NUMBER}],["type",{value:"text",...s.PROP_STRING}],["updateon",s.PROP_STRING],["conditionalclass",s.PROP_ANY],["conditionalstyle",s.PROP_ANY]]),It=["input"],Et=["type","text"],Ot={widgetType:"wm-input-text",hostClass:"app-input-wrapper"};class xt extends pe{static{this.initializeProps=(()=>{s.register("wm-input-text",_t),s.registerFormWidget(o.FormWidgetType.PASSWORD,new Map(_t));const e=new Map(_t),t=t=>{t.forEach(((t,i)=>e.set(i,t)))};t(nt),t(lt),t(ht),t(bt),s.registerFormWidget(o.FormWidgetType.TEXT,new Map(e))})()}constructor(e){super(e,Ot),this.lazy=!1}onPropertyChange(e,t,i){switch(e){case"displayformat":this.maskVal=this.displayformat,this.checkForDisplayFormat();break;case"showdisplayformaton":this.lazy="keypress"===t;break;default:super.onPropertyChange(e,t,i)}}get mask(){return!(!this.displayformat||!(!this.placeholder||this.placeholder&&this.isFocused))&&{mask:this.maskVal,lazy:this.lazy,definitions:{9:/\d/,A:/[a-zA-Z]/,a:/[a-z]/,"*":/\w/}}}checkForDisplayFormat(e){this.displayformat?(this.isFocused=!!(e&&"focus"===e.type||this.datavalue),!this.isFocused&&this.imask&&this.imask.maskRef?(this.imask.maskRef.updateOptions({lazy:!0}),!this.datavalue&&this.imask.maskRef.value&&(this.imask.maskRef.value=this.datavalue)):setTimeout((()=>{if(this.imask&&this.imask.maskRef&&this.imask.maskRef.value){const e=this.imask.maskRef.value.indexOf("_"),t=e>=0?this.imask.maskRef.value.slice(0,e).length:this.imask.maskRef.value.length;t!==this.imask.maskRef.cursorPos&&this.imask.maskRef.updateCursor(t)}}),50)):this.imask&&this.imask.maskRef&&(this.imask.maskRef.updateOptions({lazy:!0}),this.inputEl.nativeElement.value=this.datavalue)}ngOnInit(){super.ngOnInit(),this.isFocused=!!this.datavalue}static{this.\u0275fac=function(e){return new(e||xt)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:xt,selectors:[["wm-input","type","text"],["wm-input",3,"type",""],["wm-input","type","password"],["wm-input","type","search"],["wm-input","type","tel"],["wm-input","type","url"]],viewQuery:function(e,t){if(1&e&&(c.\u0275\u0275viewQuery(It,7),c.\u0275\u0275viewQuery(n.NgModel,5),c.\u0275\u0275viewQuery(It,5,a.IMaskDirective)),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.inputEl=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.ngModel=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.imask=e.first)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(xt,n.NG_VALUE_ACCESSOR,!0),s.provideAs(xt,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(xt)]),c.\u0275\u0275InheritDefinitionFeature],attrs:Et,decls:2,vars:19,consts:[["focus-target","","role","textbox",1,"form-control","app-textbox",3,"type","ngModel","imask","unmask","ngModelOptions","readonly","required","disabled","maxlength","pattern","autofocus","ngClass","ngStyle","autocomplete","ngModelChange","blur","focus","keyup.enter"],["input",""]],template:function(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"input",0,1),c.\u0275\u0275listener("ngModelChange",(function(e){return t.datavalue=e}))("ngModelChange",(function(e){return t.handleChange(e)}))("blur",(function(e){return t.handleBlur(e),t.checkForDisplayFormat(e)}))("focus",(function(e){return t.checkForDisplayFormat(e)}))("keyup.enter",(function(){c.\u0275\u0275restoreView(e);const i=c.\u0275\u0275reference(1);return c.\u0275\u0275resetView(t.flushViewChanges(i.value))})),c.\u0275\u0275elementEnd()}2&e&&(c.\u0275\u0275property("type",t.type)("ngModel",t.datavalue)("imask",t.mask)("unmask",!0)("ngModelOptions",t.ngModelOptions)("readonly",t.readonly)("required",t.required)("disabled",t.disabled)("maxlength",t.maxchars)("pattern",t.regexp)("autofocus",t.autofocus)("ngClass",t.conditionalclass)("ngStyle",t.conditionalstyle)("autocomplete",t.autocomplete?"on":"off"),c.\u0275\u0275attribute("name",t.name)("aria-label",t.hint)("tabindex",t.tabindex)("placeholder",t.placeholder)("accesskey",t.shortcutkey))},dependencies:[d.NgClass,d.NgStyle,p.DefaultValueAccessor,p.NgControlStatus,p.RequiredValidator,p.MaxLengthValidator,p.PatternValidator,p.NgModel,u.IMaskDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(xt,[{type:t.Component,args:[{selector:'wm-input[type="text"], wm-input:not([type]), wm-input[type="password"], wm-input[type="search"], wm-input[type="tel"], wm-input[type="url"]',providers:[s.provideAs(xt,n.NG_VALUE_ACCESSOR,!0),s.provideAs(xt,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(xt)],template:'<input class="form-control app-textbox"\n       focus-target\n       role="textbox"\n       [type]="type"\n       [attr.name]="name"\n       [attr.aria-label]="hint"\n       [(ngModel)]="datavalue"\n       [imask]="mask"\n       [unmask]="true"\n       [ngModelOptions]="ngModelOptions"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [maxlength]="maxchars"\n       [pattern]="regexp"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [autofocus]="autofocus"\n       [ngClass]="conditionalclass"\n       [ngStyle]="conditionalstyle"\n       (ngModelChange)="handleChange($event)"\n       (blur)="handleBlur($event); checkForDisplayFormat($event)"\n       (focus)="checkForDisplayFormat($event)"\n       [autocomplete]="autocomplete ? \'on\' : \'off\'"\n       (keyup.enter)="flushViewChanges(input.value)"\n       #input>\n'}]}],(function(){return[{type:c.Injector}]}),{inputEl:[{type:t.ViewChild,args:["input",{static:!0}]}],ngModel:[{type:t.ViewChild,args:[n.NgModel]}],imask:[{type:t.ViewChild,args:["input",{read:a.IMaskDirective}]}]});const Rt=new Map([["autofocus",s.PROP_BOOLEAN],["autotrim",{value:!0,...s.PROP_BOOLEAN}],["class",s.PROP_STRING],["datavaluesource",s.PROP_ANY],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["maxchars",s.PROP_NUMBER],["name",s.PROP_STRING],["placeholder",{value:"Place your text",...s.PROP_STRING}],["readonly",s.PROP_BOOLEAN],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["tabindex",{value:0,...s.PROP_NUMBER}],["updateon",s.PROP_STRING],["limitdisplaytext",s.PROP_STRING],["charlength",s.PROP_NUMBER],["conditionalclass",s.PROP_ANY],["conditionalstyle",s.PROP_ANY]]),Dt=["textarea"];function St(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",3),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(e.limitdisplaytext)}}const Tt={widgetType:"wm-textarea",hostClass:"app-input-wrapper"};class Mt extends pe{static{this.initializeProps=(s.register("wm-textarea",Rt),void s.registerFormWidget(o.FormWidgetType.TEXTAREA,new Map(Rt)))}constructor(e){super(e,Tt),this.charlength=0}onInputChange(){this.charlength=this.inputEl.nativeElement.value.length}static{this.\u0275fac=function(e){return new(e||Mt)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:Mt,selectors:[["wm-textarea"]],viewQuery:function(e,t){if(1&e&&(c.\u0275\u0275viewQuery(Dt,7),c.\u0275\u0275viewQuery(n.NgModel,5)),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.inputEl=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.ngModel=e.first)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(Mt,n.NG_VALUE_ACCESSOR,!0),s.provideAs(Mt,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(Mt)]),c.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["focus-target","","role","textbox","aria-multiline","true",1,"form-control","app-textarea",3,"ngModel","ngModelOptions","readonly","required","disabled","maxlength","autofocus","ngClass","ngStyle","ngModelChange","blur","input"],["textarea",""],["class","textarea-count",4,"ngIf"],[1,"textarea-count"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"textarea",0,1),c.\u0275\u0275listener("ngModelChange",(function(e){return t.datavalue=e}))("blur",(function(e){return t.handleBlur(e)}))("input",(function(){return t.onInputChange()}))("ngModelChange",(function(e){return t.handleChange(e),t.onInputChange()})),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(2,St,2,1,"div",2)),2&e&&(c.\u0275\u0275property("ngModel",t.datavalue)("ngModelOptions",t.ngModelOptions)("readonly",t.readonly)("required",t.required)("disabled",t.disabled)("maxlength",t.maxchars)("autofocus",t.autofocus)("ngClass",t.conditionalclass)("ngStyle",t.conditionalstyle),c.\u0275\u0275attribute("name",t.name)("tabindex",t.tabindex)("placeholder",t.placeholder)("accesskey",t.shortcutkey)("aria-label",t.hint),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.maxchars))},dependencies:[d.NgClass,d.NgIf,d.NgStyle,p.DefaultValueAccessor,p.NgControlStatus,p.RequiredValidator,p.MaxLengthValidator,p.NgModel],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(Mt,[{type:t.Component,args:[{selector:"wm-textarea",providers:[s.provideAs(Mt,n.NG_VALUE_ACCESSOR,!0),s.provideAs(Mt,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(Mt)],template:'<textarea class="form-control app-textarea"\n          focus-target\n          role="textbox"\n          [attr.name]="name"\n          [(ngModel)]="datavalue"\n          [ngModelOptions]="ngModelOptions"\n          [readonly]="readonly"\n          [required]="required"\n          [disabled]="disabled"\n          [maxlength]="maxchars"\n          [attr.tabindex]="tabindex"\n          [attr.placeholder]="placeholder"\n          [attr.accesskey]="shortcutkey"\n          [attr.aria-label]="hint"\n          aria-multiline="true"\n          [autofocus]="autofocus"\n          [ngClass]="conditionalclass"\n          [ngStyle]="conditionalstyle"\n          (blur)="handleBlur($event)"\n          (input)="onInputChange()"\n          (ngModelChange)="handleChange($event); onInputChange();"\n          #textarea\n></textarea>\n\n<div *ngIf="maxchars" class="textarea-count"  >{{limitdisplaytext}}</div>\n'}]}],(function(){return[{type:c.Injector}]}),{inputEl:[{type:t.ViewChild,args:["textarea",{static:!0}]}],ngModel:[{type:t.ViewChild,args:[n.NgModel]}]});class Nt{constructor(e,i){this.skipFloatPositionWidgets=["radioset","checkboxset","richtext","switch","chips","checkbox","slider","rating","toggle","upload"],this.elementRef=e.get(t.ElementRef),this.nativeEl=this.elementRef.nativeElement,this.app=i}onBlurCb(){let e;this.inputEl.length>1&&this.inputEl.hasClass("mobile-input")&&_.forEach(this.inputEl,(t=>{$(t).hasClass("mobile-input")&&t.value&&(e=t.value)})),this.inputEl.val()||e||(this.compositeEle.classList.remove("float-active"),this.inputEl.removeAttr("placeholder"))}onFocusCb(){this.compositeEle.classList.add("float-active"),this.inputEl.attr("placeholder",this.placeholder)}checkForSelectPlaceholder(){!$(this.nativeEl).find("select option:selected").text()||$(this.nativeEl).find("select").is(":focus")||$(this.inputEl.closest("[widget-id]")).attr("datavalue")||$(this.nativeEl).find("select option:selected").text("")}setDefaultValueAnimation(){!this._isPlaceholderBound&&this.inputEl.attr("placeholder")&&(this.placeholder=this.inputEl.attr("placeholder"),this.inputEl.removeAttr("placeholder")),this.checkForSelectPlaceholder(),(this.inputEl.val()&&!this.inputEl.is("select")||$(this.inputEl.closest("[widget-id]")).attr("datavalue")||$(this.inputEl.parent("[widget-id]")).attr("datavalue.bind")||this.nativeEl.getAttribute("defaultvalue")||this.nativeEl.getAttribute("displayformat")||$(this.nativeEl).find("select option:selected").text()||$(this.nativeEl).find("select").attr("multiple"))&&this.compositeEle.classList.add("float-active")}observeForPlaceholderAttrChange(){this._attrObserver=new MutationObserver((e=>{e.forEach((e=>{"placeholder"===e.attributeName&&this.inputEl.attr("placeholder")&&!this.compositeEle.classList.contains("float-active")&&(this.placeholder=this.inputEl.attr("placeholder"),this.inputEl.removeAttr("placeholder"))}))}));this._attrObserver.observe(this.inputEl[0],{attributes:!0,childList:!1,characterData:!1})}checkForRightAlignedForm(){const e=$(this.compositeEle);if(e.closest(".align-right").length&&e.find(".input-group-btn").length){const t=e.find("label");e.find("[wmdatetime]").length?t.addClass("input-grp-dt-icon"):t.addClass("input-grp-icon")}}ngAfterViewInit(){this.compositeEle=this.nativeEl;const e=this.nativeEl.widget;let t=e.$attrs.get("captionposition");if(e.form&&(t=e.form.$attrs.get("captionposition"),this.compositeEle=this.nativeEl.querySelector(".app-composite-widget"),this._isPlaceholderBound=this.nativeEl.getAttribute("placeholder.bind")),"floating"===t){if(e.form){const e=this.nativeEl.getAttribute("widgettype");this.skipFloatPositionWidgets.indexOf(e)>-1&&(this.compositeEle.classList.remove("caption-floating"),this.compositeEle.classList.add("caption-top")),this.checkForRightAlignedForm()}this.inputEl=$(this.nativeEl).find("input, select, textarea"),this._isPlaceholderBound||(this._isPlaceholderBound=this.inputEl.closest("[widget-id]").attr("placeholder.bind")),setTimeout(this.setDefaultValueAnimation.bind(this),0),this.inputEl.focus(this.onFocusCb.bind(this)),this.inputEl.blur(this.onBlurCb.bind(this)),this._isPlaceholderBound&&this.observeForPlaceholderAttrChange()}}ngOnInit(){this.labelAnimationSubscription=this.app.subscribe("captionPositionAnimate",(e=>{const t=this.inputEl&&this.inputEl.is(":focus"),i=this.inputEl&&this.inputEl.length&&this.inputEl[0].localName;if(e.isSelect&&"select"==i||e.displayVal||e.isFocused||e.isSelectMultiple||t)e.nativeEl.addClass("float-active"),!e.displayVal&&t&&this.inputEl.attr("placeholder",this.placeholder);else if(e.nativeEl.removeClass("float-active"),this.inputEl){const e=this.inputEl.find("option:first");(this.inputEl.attr("placeholder")||e.text())&&(e.length?e.text(""):(this.placeholder=this.inputEl.attr("placeholder"),this.inputEl.removeAttr("placeholder")))}}))}ngOnDestroy(){this.labelAnimationSubscription&&this.labelAnimationSubscription(),this._attrObserver&&this._attrObserver.disconnect()}static{this.\u0275fac=function(e){return new(e||Nt)(c.\u0275\u0275directiveInject(c.Injector),c.\u0275\u0275directiveInject(m.App))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:Nt,selectors:[["","wmCaptionPosition",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(Nt,[{type:t.Directive,args:[{selector:"[wmCaptionPosition]"}]}],(function(){return[{type:c.Injector},{type:m.App}]}),null);const kt=[E,x,Nt,B,oe,ce,fe,Le,He,it,rt,ut,vt,At,xt,Mt];class Lt{static{this.\u0275fac=function(e){return new(e||Lt)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:Lt})}static{this.\u0275inj=c.\u0275\u0275defineInjector({imports:[i.CommonModule,n.FormsModule,s.WmComponentsModule,a.IMaskModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(Lt,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.FormsModule,s.WmComponentsModule,a.IMaskModule],declarations:[...kt],exports:[...kt]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&c.\u0275\u0275setNgModuleScope(Lt,{declarations:[E,x,Nt,B,oe,ce,fe,Le,He,it,rt,ut,vt,At,xt,Mt],imports:[i.CommonModule,n.FormsModule,s.WmComponentsModule,a.IMaskModule],exports:[E,x,Nt,B,oe,ce,fe,Le,He,it,rt,ut,vt,At,xt,Mt]}),e.BaseFormComponent=R,e.BaseFormCustomComponent=S,e.ButtonComponent=E,e.ButtonGroupDirective=x,e.CaptionPositionDirective=Nt,e.CheckboxComponent=B,e.CheckboxsetComponent=oe,e.CompositeDirective=ce,e.DatasetAwareFormComponent=j,e.InputCalendarComponent=rt,e.InputColorComponent=ut,e.InputEmailComponent=vt,e.InputModule=Lt,e.InputNumberComponent=At,e.InputTextComponent=xt,e.NumberComponent=fe,e.NumberLocale=ue,e.RadiosetComponent=Le,e.SelectComponent=He,e.SwitchComponent=it,e.TextareaComponent=Mt})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@wm/core"),require("@wm/components/base"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@wm/core","@wm/components/base","@angular/common"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic={}),e.ng.core,e.wm.core,e.wm.components.base,e.ng.common)}(this,(function(e,t,i,n,a){"use strict";function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var o=s(t),r=s(i),l=s(n),c=s(a);const d=["wmAnchor",""],p=function(e,t,i){return{width:e,height:t,margin:i}};function u(e,t){if(1&e&&(o.\u0275\u0275element(0,"img",5),o.\u0275\u0275pipe(1,"image")),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("src",o.\u0275\u0275pipeBind1(1,2,e.iconurl),o.\u0275\u0275sanitizeUrl)("ngStyle",o.\u0275\u0275pureFunction3(4,p,e.iconwidth,e.iconheight,e.iconmargin))}}function h(e,t){if(1&e&&o.\u0275\u0275element(0,"i",6),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275classMapInterpolate1("app-icon ",e.iconclass,""),o.\u0275\u0275property("ngStyle",o.\u0275\u0275pureFunction3(4,p,e.iconwidth,e.iconheight,e.iconmargin))}}function m(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate2("",e.caption," ",e.appLocale.LABEL_ICON,"")}}function g(e,t){if(1&e&&o.\u0275\u0275element(0,"span",8),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("textContent",e.badgevalue)}}const f=[[["",8,"caret"]]],v=[".caret"],b={widgetType:"wm-anchor",hostClass:"app-anchor",displayType:n.DISPLAY_TYPE.INLINE_BLOCK},y=/Actions.goToPage_(\w+)\.invoke\(\)/g,w=e=>{e.preventDefault()};class P extends n.StylableComponent{static{this.initializeProps=void n.register("wm-anchor",new Map([["animation",n.PROP_STRING],["badgevalue",n.PROP_STRING],["caption",{value:"Link",...n.PROP_STRING}],["class",n.PROP_STRING],["conditionalclass",n.PROP_ANY],["conditionalstyle",n.PROP_ANY],["encodeurl",n.PROP_BOOLEAN],["hint",n.PROP_STRING],["hyperlink",{value:"",...n.PROP_STRING}],["iconclass",n.PROP_STRING],["iconheight",n.PROP_STRING],["iconmargin",n.PROP_STRING],["iconposition",n.PROP_STRING],["iconurl",n.PROP_STRING],["iconwidth",n.PROP_STRING],["name",n.PROP_STRING],["shortcutkey",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["tabindex",{value:0,...n.PROP_NUMBER}],["target",{value:"_self",...n.PROP_STRING}]]))}constructor(e,t){super(e,b),this.app=t,this._eventNotifier=new i.EventNotifier,n.styler(this.nativeElement,this)}processEventAttr(e,t,n){if(super.processEventAttr(e,t,n),!this.hasNavigationToCurrentPageExpr){const e=this.inj.get(i.App);t.split(";").map(Function.prototype.call,String.prototype.trim).some((t=>{y.lastIndex=0;const i=y.exec(t),n=i&&i.length>0;return n&&!this.hasGoToPageExpr&&(this.hasGoToPageExpr=!0,this.goToPageName=i[1]),n&&i[1]===e.activePageName}))&&(this.hasNavigationToCurrentPageExpr=!0)}}onActive(e){this._eventNotifier.subscribe("on-active",e)}handleEvent(e,t,i,n,a){super.handleEvent(e,t,(e=>{this.hasGoToPageExpr&&n.$event&&n.$event.preventDefault(),i()}),n,a)}onPropertyChange(e,t,n){if("hyperlink"===e){if(!t)return i.setAttr(this.nativeElement,"href","javascript:void(0)"),void this.nativeElement.addEventListener("contextmenu",w);this.encodeurl&&(t=i.encodeUrl(t)),t.startsWith("www.")&&(t=`//${t}`),i.setAttr(this.nativeElement,"href",t),this.nativeElement.removeEventListener("contextmenu",w)}else super.onPropertyChange(e,t,n)}init(){this.hasNavigationToCurrentPageExpr&&(i.addClass(this.nativeElement,"active"),i.setAttr(this.nativeElement,"aria-current","page")),(this.hyperlink&&i.getRouteNameFromLink(this.hyperlink)===`/${this.app.activePageName}`||this.hasNavigationToCurrentPageExpr)&&this._eventNotifier.notify("on-active",{})}ngAfterViewInit(){super.ngAfterViewInit(),this.init(),this.hasGoToPageExpr&&(this.cancelSubscription=this.app.subscribe("highlightActiveLink",(e=>{this.hasNavigationToCurrentPageExpr&&this.goToPageName!==this.app.activePageName&&(this.hasNavigationToCurrentPageExpr=!1,i.removeClass(this.nativeElement,"active"),i.removeAttr(this.nativeElement,"aria-current")),this.goToPageName===e.pageName&&(this.hasNavigationToCurrentPageExpr=!0,i.addClass(this.nativeElement,"active"),i.setAttr(this.nativeElement,"aria-current","page"))})))}ngOnAttach(){this.init(),super.ngOnAttach()}ngOnDestroy(){this._eventNotifier.destroy(),this.cancelSubscription&&this.cancelSubscription(),super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||P)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(r.App))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:P,selectors:[["a","wmAnchor",""]],hostVars:3,hostBindings:function(e,t){2&e&&(o.\u0275\u0275hostProperty("target",t.target),o.\u0275\u0275attribute("accesskey",t.shortcutkey)("icon-position",t.iconposition))},exportAs:["wmAnchor"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(P)]),o.\u0275\u0275InheritDefinitionFeature],attrs:d,ngContentSelectors:v,decls:6,vars:5,consts:[["data-identifier","img","alt","Image","class","anchor-image-icon",3,"src","ngStyle",4,"ngIf"],["aria-hidden","true",3,"class","ngStyle",4,"ngIf"],["class","sr-only",4,"ngIf"],[1,"anchor-caption",3,"innerHTML"],["class","badge pull-right",3,"textContent",4,"ngIf"],["data-identifier","img","alt","Image",1,"anchor-image-icon",3,"src","ngStyle"],["aria-hidden","true",3,"ngStyle"],[1,"sr-only"],[1,"badge","pull-right",3,"textContent"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(f),o.\u0275\u0275template(0,u,2,8,"img",0),o.\u0275\u0275template(1,h,1,8,"i",1),o.\u0275\u0275template(2,m,2,2,"span",2),o.\u0275\u0275element(3,"span",3),o.\u0275\u0275projection(4),o.\u0275\u0275template(5,g,1,1,"span",4)),2&e&&(o.\u0275\u0275property("ngIf",t.iconurl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.iconclass),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.iconclass),o.\u0275\u0275advance(1),o.\u0275\u0275property("innerHTML",t.caption,o.\u0275\u0275sanitizeHtml),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.badgevalue))},dependencies:[c.NgIf,c.NgStyle,l.TextContentDirective,l.ImagePipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(P,[{type:t.Component,args:[{selector:"a[wmAnchor]",providers:[n.provideAsWidgetRef(P)],exportAs:"wmAnchor",template:'<img data-identifier="img" alt="Image" class="anchor-image-icon" [src]="iconurl | image" *ngIf="iconurl" [ngStyle]="{width:iconwidth, height:iconheight, margin:iconmargin}"/>\n<i class="app-icon {{iconclass}}" aria-hidden="true" [ngStyle]="{width:iconwidth, height:iconheight, margin:iconmargin}" *ngIf="iconclass"></i>\n<span class="sr-only" *ngIf="iconclass">{{caption}} {{appLocale.LABEL_ICON}}</span>\n<span class="anchor-caption" [innerHTML]="caption"></span>\n<ng-content select=".caret"></ng-content>\n<span *ngIf="badgevalue" class="badge pull-right" [textContent]="badgevalue"></span>\n'}]}],(function(){return[{type:o.Injector},{type:r.App}]}),{target:[{type:t.HostBinding,args:["target"]}],shortcutkey:[{type:t.HostBinding,args:["attr.accesskey"]}],iconposition:[{type:t.HostBinding,args:["attr.icon-position"]}]});const C=["wmAudio",""],A={widgetType:"wm-audio",hostClass:"app-audio",displayType:n.DISPLAY_TYPE.INLINE_BLOCK};class I extends n.StylableComponent{static{this.initializeProps=void n.register("wm-audio",new Map([["audiopreload",{value:"none",...n.PROP_STRING}],["audiosupportmessage",{value:"Your browser does not support the audio tag.",...n.PROP_STRING}],["autoplay",n.PROP_BOOLEAN],["class",n.PROP_STRING],["controls",n.PROP_BOOLEAN],["hint",n.PROP_STRING],["loop",n.PROP_BOOLEAN],["mp3format",n.PROP_STRING],["muted",n.PROP_BOOLEAN],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["tabindex",{value:0,...n.PROP_NUMBER}]]))}constructor(e){super(e,A),n.styler(this.nativeElement,this)}static{this.\u0275fac=function(e){return new(e||I)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:I,selectors:[["","wmAudio",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(I)]),o.\u0275\u0275InheritDefinitionFeature],attrs:C,decls:5,vars:14,consts:[["name","wmAudio","hint","wmAudio","tabindex","1","role","application","aria-describedby","recorded audio",3,"src","muted","autoplay","controls","loop","preload"],["type","audio/mp3",3,"src"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"audio",0),o.\u0275\u0275pipe(1,"trustAs"),o.\u0275\u0275element(2,"source",1),o.\u0275\u0275pipe(3,"trustAs"),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("src",o.\u0275\u0275pipeBind2(1,8,t.mp3format,"resource"),o.\u0275\u0275sanitizeUrl)("muted",t.muted)("autoplay",t.autoplay)("controls",t.controls)("loop",t.loop)("preload",t.audiopreload),o.\u0275\u0275advance(2),o.\u0275\u0275property("src",o.\u0275\u0275pipeBind2(3,11,t.mp3format,"resource"),o.\u0275\u0275sanitizeUrl),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",t.audiosupportmessage,"\n"))},dependencies:[l.TrustAsPipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(I,[{type:t.Component,args:[{selector:"[wmAudio]",providers:[n.provideAsWidgetRef(I)],template:'<audio [src]="mp3format | trustAs: \'resource\'" [muted]="muted" name="wmAudio" hint="wmAudio" tabindex="1" [autoplay]="autoplay"\n    [controls]="controls" [loop]="loop" [preload]="audiopreload" role="application" aria-describedby="recorded audio">\n    <source type="audio/mp3" [src]="mp3format | trustAs: \'resource\'">\n    {{audiosupportmessage}}\n</audio>'}]}],(function(){return[{type:o.Injector}]}),null);const E={widgetType:"wm-html",hostClass:"app-html-container"};class O extends n.StylableComponent{static{this.initializeProps=void n.register("wm-html",new Map([["class",n.PROP_STRING],["content",n.PROP_STRING],["hint",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e,t,a,s){super(e,E),this.boundContent=a,this.sanitizePipe=s,t&&i.setCSS(this.nativeElement,"overflow","auto"),n.styler(this.nativeElement,this)}ngOnInit(){super.ngOnInit(),this.boundContent&&(this.nativeElement.innerHTML=""),!this.content&&this.nativeElement.innerHTML&&(this.content=this.nativeElement.innerHTML)}onPropertyChange(e,n,a){if("content"===e){let e=this.nativeElement.getAttribute("content.bind"),a=!!e&&(n&&e.includes("trustAs:"));"object"==typeof n&&a?i.setProperty(this.nativeElement,"innerHTML",n[Object.keys(n)[0]]):i.setProperty(this.nativeElement,"innerHTML",this.sanitizePipe.transform(n,t.SecurityContext.HTML))}else super.onPropertyChange(e,n,a)}static{this.\u0275fac=function(e){return new(e||O)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275injectAttribute("height"),o.\u0275\u0275injectAttribute("content.bind"),o.\u0275\u0275directiveInject(l.SanitizePipe))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:O,selectors:[["","wmHtml",""]],exportAs:["wmHtml"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(O)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(O,[{type:t.Directive,args:[{selector:"[wmHtml]",providers:[n.provideAsWidgetRef(O)],exportAs:"wmHtml"}]}],(function(){return[{type:o.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["height"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["content.bind"]}]},{type:l.SanitizePipe}]}),null);const x=["wmIcon",""];function R(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span",2),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate2("",e.caption," ",e.appLocale.LABEL_ICON,"")}}function D(e,t){if(1&e&&o.\u0275\u0275element(0,"label",3),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("textContent",e.caption)}}const S={widgetType:"wm-icon",hostClass:"app-icon-wrapper"};class T extends n.StylableComponent{static{this.initializeProps=void n.register("wm-icon",new Map([["animation",n.PROP_STRING],["caption",n.PROP_STRING],["class",n.PROP_STRING],["conditionalclass",n.PROP_ANY],["conditionalstyle",n.PROP_ANY],["hint",n.PROP_STRING],["iconclass",{value:"wm-sl-l sl-user",...n.PROP_STRING}],["iconposition",{value:"left",...n.PROP_STRING}],["iconsize",n.PROP_STRING],["iconurl",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e){super(e,S),n.styler(this.nativeElement,this)}static{this.\u0275fac=function(e){return new(e||T)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:T,selectors:[["","wmIcon",""]],hostVars:3,hostBindings:function(e,t){2&e&&(o.\u0275\u0275attribute("icon-position",t.iconposition),o.\u0275\u0275styleProp("font-size",t.iconsize))},features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(T)]),o.\u0275\u0275InheritDefinitionFeature],attrs:x,decls:3,vars:6,consts:[["class","sr-only",4,"ngIf"],["class","app-label",3,"textContent",4,"ngIf"],[1,"sr-only"],[1,"app-label",3,"textContent"]],template:function(e,t){1&e&&(o.\u0275\u0275element(0,"i"),o.\u0275\u0275template(1,R,2,2,"span",0),o.\u0275\u0275template(2,D,1,1,"label",1)),2&e&&(o.\u0275\u0275classMapInterpolate1("app-icon ",t.iconclass,""),o.\u0275\u0275attribute("aria-label",t.hint||"Icon"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.iconclass),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.caption))},dependencies:[c.NgIf,l.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(T,[{type:t.Component,args:[{selector:"[wmIcon]",providers:[n.provideAsWidgetRef(T)],template:'<i class="app-icon {{iconclass}}" [attr.aria-label]="hint || \'Icon\'"></i>\n<span class="sr-only" *ngIf="iconclass">{{caption}} {{appLocale.LABEL_ICON}}</span>\n<label class="app-label" [textContent]="caption" *ngIf="caption"></label>\n'}]}],(function(){return[{type:o.Injector}]}),{iconposition:[{type:t.HostBinding,args:["attr.icon-position"]}],iconsize:[{type:t.HostBinding,args:["style.fontSize"]}]});const M=["wmIframe",""];function N(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275element(1,"p",3),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("title",e.hintMsg)("textContent",e.errMsg)}}const k={widgetType:"wm-iframe",hostClass:"embed-responsive app-iframe"};class L extends n.StylableComponent{static{this.initializeProps=void n.register("wm-iframe",new Map([["class",n.PROP_STRING],["encodeurl",n.PROP_BOOLEAN],["height",{value:"150px",...n.PROP_STRING}],["iframesrc",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["width",{value:"300px",...n.PROP_STRING}],["hint",n.PROP_STRING]]))}constructor(e,t){super(e,k),this.trustAsPipe=t,this.showContentLoadError=!1,n.styler(this.nativeElement,this)}computeIframeSrc(){if(this.showContentLoadError=!1,this._iframesrc=void 0,this.iframesrc){let e=this.iframesrc;this.encodeurl&&(e=i.encodeUrl(this.iframesrc));const n=this.trustAsPipe.transform(e,t.SecurityContext.RESOURCE_URL);i.isInsecureContentRequest(e)&&(this.showContentLoadError=!0,this.errorMsg=`${this.appLocale.MESSAGE_ERROR_CONTENT_DISPLAY} ${this.iframesrc}`,this.hintMsg=this.errorMsg),this._iframesrc=n}}onPropertyChange(e,t,i){"iframesrc"===e||"encodeurl"===e?this.computeIframeSrc():super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||L)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(l.TrustAsPipe))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:L,selectors:[["","wmIframe",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(L)]),o.\u0275\u0275InheritDefinitionFeature],attrs:M,decls:2,vars:4,consts:[["role","document","scrolling","auto","marginheight","0","marginwidth","0","frameborder","0","seamless","seamless",1,"embed-responsive-item","iframe-content",3,"name"],["class","wm-content-info readonly-wrapper",4,"ngIf"],[1,"wm-content-info","readonly-wrapper"],[1,"wm-message",3,"title","textContent"]],template:function(e,t){1&e&&(o.\u0275\u0275element(0,"iframe",0),o.\u0275\u0275template(1,N,2,2,"div",1)),2&e&&(o.\u0275\u0275property("name",t.name),o.\u0275\u0275attribute("src",t._iframesrc,o.\u0275\u0275sanitizeResourceUrl)("aria-label",t.hint||"iframe"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.showContentLoadError))},dependencies:[c.NgIf,l.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(L,[{type:t.Component,args:[{selector:"[wmIframe]",providers:[n.provideAsWidgetRef(L)],template:'<iframe  class="embed-responsive-item iframe-content" role="document"\n        scrolling="auto"\n        marginheight="0"\n        marginwidth="0"\n        frameborder="0"\n        [name]="name"\n        [attr.src]="_iframesrc"\n        [attr.aria-label]="hint || \'iframe\'"\n        seamless="seamless">\n</iframe>\n<div class="wm-content-info readonly-wrapper" *ngIf="showContentLoadError">\n    <p class="wm-message" [title]="hintMsg" [textContent]="errMsg"></p>\n</div>\n'}]}],(function(){return[{type:o.Injector},{type:l.TrustAsPipe}]}),null);const F={widgetType:"wm-label",hostClass:"app-label",displayType:n.DISPLAY_TYPE.INLINE_BLOCK};class $ extends n.StylableComponent{static{this.initializeProps=void n.register("wm-label",new Map([["animation",n.PROP_STRING],["caption",{value:"Label",...n.PROP_STRING}],["class",n.PROP_STRING],["conditionalclass",n.PROP_ANY],["conditionalstyle",n.PROP_ANY],["type",n.PROP_STRING],["notag",n.PROP_BOOLEAN],["hint",n.PROP_STRING],["name",n.PROP_STRING],["required",n.PROP_BOOLEAN],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e,t){super(e,F),this.sanitizePipe=t,n.styler(this.nativeElement,this)}onPropertyChange(e,n,a){if("caption"===e){let e=this.nativeElement.getAttribute("caption.bind"),a=!!e&&(n&&e.includes("trustAs:"));_.isObject(n)&&!a?i.setProperty(this.nativeElement,"textContent",JSON.stringify(n)):_.isObject(n)&&a?i.setProperty(this.nativeElement,"innerHTML",n[Object.keys(n)[0]]):i.setProperty(this.nativeElement,"innerHTML",this.sanitizePipe.transform(n,t.SecurityContext.HTML))}else"required"===e?i.toggleClass(this.nativeElement,"required",n):super.onPropertyChange(e,n,a)}static{this.\u0275fac=function(e){return new(e||$)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(l.SanitizePipe))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:$,selectors:[["","wmLabel",""]],exportAs:["wmLabel"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef($)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata($,[{type:t.Directive,args:[{selector:"[wmLabel]",providers:[n.provideAsWidgetRef($)],exportAs:"wmLabel"}]}],(function(){return[{type:o.Injector},{type:l.SanitizePipe}]}),null);const B={widgetType:"wm-picture",hostClass:"app-picture",displayType:n.DISPLAY_TYPE.INLINE_BLOCK};class j extends n.StylableComponent{static{this.initializeProps=(()=>{const e=new Map([["animation",n.PROP_STRING],["class",n.PROP_STRING],["conditionalclass",n.PROP_ANY],["conditionalstyle",n.PROP_ANY],["encodeurl",n.PROP_STRING],["hint",n.PROP_STRING],["name",n.PROP_STRING],["pictureaspect",{value:"None",...n.PROP_STRING}],["pictureplaceholder",n.PROP_STRING],["picturesource",n.PROP_STRING],["resizemode",{value:"fill",...n.PROP_STRING}],["shape",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["tabindex",{value:0,...n.PROP_NUMBER}]]);i.isMobileApp()&&e.set("offline",{value:!0,...n.PROP_BOOLEAN}),n.register("wm-picture",e)})()}constructor(e,t){super(e,B),this.imagePipe=t,n.styler(this.nativeElement,this)}setImgSource(){this.imgSource=this.imagePipe.transform(this.picturesource,this.encodeurl,this.pictureplaceholder)}onPropertyChange(e,t,n){if("pictureaspect"===e){let e="",n="";switch(t){case"None":e=this.width,n=this.height;break;case"H":e="100%";break;case"V":n="100%";break;case"Both":e="100%",n="100%"}i.setCSS(this.nativeElement,"width",e,!0),i.setCSS(this.nativeElement,"height",n,!0)}else"encodeurl"===e||"pictureplaceholder"===e?this.setImgSource():"shape"===e?i.switchClass(this.nativeElement,`img-${t}`,`img-${n}`):"hint"===e?i.setAttr(this.nativeElement,"alt",t):"resizemode"===e&&i.setCSS(this.nativeElement,"object-fit",t);super.onPropertyChange(e,t,n)}onStyleChange(e,t,i){"picturesource"===e?this.setImgSource():super.onStyleChange(e,t,i)}ngOnInit(){this.setImgSource(),super.ngOnInit()}static{this.\u0275fac=function(e){return new(e||j)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(l.ImagePipe))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:j,selectors:[["img","wmPicture",""]],hostVars:1,hostBindings:function(e,t){2&e&&o.\u0275\u0275hostProperty("src",t.imgSource,o.\u0275\u0275sanitizeUrl)},exportAs:["wmPicture"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(j)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(j,[{type:t.Directive,args:[{selector:"img[wmPicture]",providers:[n.provideAsWidgetRef(j)],exportAs:"wmPicture"}]}],(function(){return[{type:o.Injector},{type:l.ImagePipe}]}),{imgSource:[{type:t.HostBinding,args:["src"]}]});const V=["wmSpinner",""],G=function(e,t,i,n){return{width:e,height:t,backgroundImage:i,backgroundSize:n}};function W(e,t){if(1&e&&o.\u0275\u0275element(0,"span",5),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",e.animation)("ngStyle",o.\u0275\u0275pureFunction4(2,G,e.imagewidth,e.imageheight,"url("+e.picture+")",e.imagewidth))}}const U=function(e,t){return[e,t]};function q(e,t){if(1&e&&o.\u0275\u0275element(0,"i",6),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275styleProp("fon-size",e.iconsize),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction2(3,U,e.iconclass,e.animation))}}function z(e,t){if(1&e&&o.\u0275\u0275element(0,"span",7),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("innerHTML",e.caption,o.\u0275\u0275sanitizeHtml)}}function H(e,t){if(1&e&&o.\u0275\u0275element(0,"p",10),2&e){const e=t.$implicit;o.\u0275\u0275property("textContent",e)}}function Q(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",8),o.\u0275\u0275template(1,H,1,1,"p",9),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.spinnerMessages)}}const Y={widgetType:"wm-spinner",hostClass:"app-spinner"};class K extends n.StylableComponent{static{this.initializeProps=void n.register("wm-spinner",new Map([["animation",{value:"spin",PROP_STRING:n.PROP_STRING}],["caption",{value:"Loading...",...n.PROP_STRING}],["class",n.PROP_STRING],["iconclass",{value:"fa fa-circle-o-notch fa-spin",...n.PROP_STRING}],["iconsize",n.PROP_STRING],["image",n.PROP_STRING],["imageheight",n.PROP_STRING],["imagewidth",{value:"20px",...n.PROP_STRING}],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["type",{value:"icon",...n.PROP_STRING}],["servicevariabletotrack",n.PROP_STRING],["hint",n.PROP_STRING]]))}get spinnerMessages(){return this._spinnerMessages}set spinnerMessages(e){this.showCaption=_.isEmpty(e),this._spinnerMessages=e}listenOnDataSource(){const e=_.split(this.servicevariabletotrack,",");this.getAppInstance().subscribe("toggle-variable-state",(t=>{const n=t.variable.execute(i.DataSource.Operation.GET_NAME);_.includes(e,n)&&i.validateDataSourceCtx(t.variable,this.getViewParent())&&(this.widget.show=t.active)}))}constructor(e,t){super(e,Y),this.imagePipe=t,this.iconclass="",this.animation="",this.showCaption=!0,n.styler(this.nativeElement,this)}onPropertyChange(e,t,i){"image"===e?this.picture=this.imagePipe.transform(t):"animation"===e?this.animation="spin"===t?"fa-spin":t||"":super.onPropertyChange(e,t,i)}ngOnInit(){super.ngOnInit(),this.servicevariabletotrack&&(this.widget.show=!1,this.listenOnDataSource())}static{this.\u0275fac=function(e){return new(e||K)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(l.ImagePipe))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:K,selectors:[["","wmSpinner",""]],exportAs:["wmSpinner"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(K)]),o.\u0275\u0275InheritDefinitionFeature],attrs:V,decls:5,vars:4,consts:[[1,"spinner-message"],["class","spinner-image animated infinite","aria-hidden","true",3,"ngClass","ngStyle",4,"ngIf"],["class","spinner-image animated infinite","aria-hidden","true",3,"ngClass","fonSize",4,"ngIf"],["class","spinner-text",3,"innerHTML",4,"ngIf"],["class","spinner-messages",4,"ngIf"],["aria-hidden","true",1,"spinner-image","animated","infinite",3,"ngClass","ngStyle"],["aria-hidden","true",1,"spinner-image","animated","infinite",3,"ngClass"],[1,"spinner-text",3,"innerHTML"],[1,"spinner-messages"],[3,"textContent",4,"ngFor","ngForOf"],[3,"textContent"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,W,1,7,"span",1),o.\u0275\u0275template(2,q,1,6,"i",2),o.\u0275\u0275template(3,z,1,1,"span",3),o.\u0275\u0275template(4,Q,2,1,"div",4),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","image"===t.type),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","icon"===t.type),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.showCaption),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.showCaption&&t.spinnerMessages))},dependencies:[c.NgClass,c.NgForOf,c.NgIf,c.NgStyle,l.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(K,[{type:t.Component,args:[{selector:"[wmSpinner]",providers:[n.provideAsWidgetRef(K)],exportAs:"wmSpinner",template:'<div class="spinner-message">\n    <span class="spinner-image animated infinite" [ngClass]="animation" aria-hidden="true"\n        [ngStyle]="{width: imagewidth, height: imageheight, backgroundImage: \'url(\' + picture + \')\', backgroundSize: imagewidth}"\n        *ngIf="type === \'image\'"></span>\n    <i class="spinner-image animated infinite" aria-hidden="true" [ngClass]="[iconclass, animation]" [style.fonSize]="iconsize" *ngIf="type === \'icon\'"></i>\n    <span class="spinner-text" [innerHTML]="caption" *ngIf="showCaption"></span>\n    <div class="spinner-messages" *ngIf="!showCaption && spinnerMessages">\n        <p *ngFor="let value of spinnerMessages" [textContent]="value"></p>\n    </div>\n</div>\n'}]}],(function(){return[{type:o.Injector},{type:l.ImagePipe}]}),null);const J=["wmVideo",""];function Z(e,t){if(1&e&&(o.\u0275\u0275element(0,"source",4),o.\u0275\u0275pipe(1,"trustAs")),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("src",o.\u0275\u0275pipeBind2(1,1,e.mp4format,"resource"),o.\u0275\u0275sanitizeUrl)}}function X(e,t){if(1&e&&(o.\u0275\u0275element(0,"source",5),o.\u0275\u0275pipe(1,"trustAs")),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("src",o.\u0275\u0275pipeBind2(1,1,e.webmformat,"resource"),o.\u0275\u0275sanitizeUrl)}}function ee(e,t){if(1&e&&(o.\u0275\u0275element(0,"source",6),o.\u0275\u0275pipe(1,"trustAs")),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("src",o.\u0275\u0275pipeBind2(1,1,e.oggformat,"resource"),o.\u0275\u0275sanitizeUrl)}}const te={widgetType:"wm-video",hostClass:"app-video",displayType:n.DISPLAY_TYPE.INLINE_BLOCK};class ie extends n.StylableComponent{static{this.initializeProps=void n.register("wm-video",new Map([["autoplay",n.PROP_BOOLEAN],["class",n.PROP_STRING],["controls",n.PROP_BOOLEAN],["hint",n.PROP_STRING],["loop",n.PROP_BOOLEAN],["mp4format",n.PROP_STRING],["muted",n.PROP_BOOLEAN],["name",n.PROP_STRING],["oggformat",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["subtitlelang",{value:"en",...n.PROP_STRING}],["subtitlesource",n.PROP_STRING],["tabindex",{value:0,...n.PROP_NUMBER}],["videoposter",{value:"resources/images/imagelists/default-image.png",...n.PROP_STRING}],["videopreload",{value:"none",...n.PROP_STRING}],["videosupportmessage",{value:"Your browser does not support the video tag.",...n.PROP_STRING}],["webmformat",n.PROP_STRING]]))}constructor(e,t){super(e,te),this.trustAsPipe=t,this.subtitlelang="en",n.styler(this.nativeElement,this)}onPropertyChange(e,n,a){if("subtitlesource"===e){let e=this.nativeElement.querySelector("track");e&&i.removeNode(e,!0),e=i.createElement("track",{kind:"subtitles",label:this.subtitlelang,srclang:this.subtitlelang,src:this.trustAsPipe.transform(n,t.SecurityContext.RESOURCE_URL),default:""},!0),i.appendNode(e,this.nativeElement.querySelector("video"))}else"mp4format"===e?this.mp4format=i.transformFileURI(n):"webmformat"===e?this.webmformat=i.transformFileURI(n):"oggformat"===e&&(this.oggformat=i.transformFileURI(n));super.onPropertyChange(e,n,a)}static{this.\u0275fac=function(e){return new(e||ie)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(l.TrustAsPipe))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:ie,selectors:[["","wmVideo",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(ie)]),o.\u0275\u0275InheritDefinitionFeature],attrs:J,decls:7,vars:16,consts:[["role","application",3,"preload","src","muted","poster","controls","loop","autoplay"],["type","video/mp4",3,"src",4,"ngIf"],["type","video/webm",3,"src",4,"ngIf"],["type","video/ogg",3,"src",4,"ngIf"],["type","video/mp4",3,"src"],["type","video/webm",3,"src"],["type","video/ogg",3,"src"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"video",0),o.\u0275\u0275pipe(1,"trustAs"),o.\u0275\u0275pipe(2,"image"),o.\u0275\u0275template(3,Z,2,4,"source",1),o.\u0275\u0275template(4,X,2,4,"source",2),o.\u0275\u0275template(5,ee,2,4,"source",3),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("preload",t.videopreload)("src",o.\u0275\u0275pipeBind2(1,11,t.mp4format,"resource"),o.\u0275\u0275sanitizeUrl)("muted",t.muted)("poster",o.\u0275\u0275pipeBind1(2,14,t.videoposter),o.\u0275\u0275sanitizeUrl)("controls",t.controls)("loop",t.loop)("autoplay",t.autoplay),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.mp4format),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.webmformat),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.oggformat),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.videosupportmessage,"\n"))},dependencies:[c.NgIf,l.TrustAsPipe,l.ImagePipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(ie,[{type:t.Component,args:[{selector:"[wmVideo]",providers:[n.provideAsWidgetRef(ie)],template:'<video [preload]="videopreload" role="application"\n       [src]="mp4format | trustAs: \'resource\'"\n       [muted]="muted"\n       [poster]="videoposter | image"\n       [controls]="controls"\n       [loop]="loop"\n       [autoplay]="autoplay">\n    <source type="video/mp4" [src]="mp4format | trustAs: \'resource\'" *ngIf="mp4format">\n    <source type="video/webm" [src]="webmformat | trustAs: \'resource\'" *ngIf="webmformat">\n    <source type="video/ogg" [src]="oggformat | trustAs: \'resource\'" *ngIf="oggformat">\n    {{videosupportmessage}}\n</video>'}]}],(function(){return[{type:o.Injector},{type:l.TrustAsPipe}]}),null);const ne=[P,I,O,T,L,$,j,K,ie];class ae{static{this.\u0275fac=function(e){return new(e||ae)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:ae})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[a.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(ae,[{type:t.NgModule,args:[{imports:[a.CommonModule,n.WmComponentsModule],declarations:[...ne],exports:[...ne]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(ae,{declarations:[P,I,O,T,L,$,j,K,ie],imports:[a.CommonModule,n.WmComponentsModule],exports:[P,I,O,T,L,$,j,K,ie]}),e.AnchorComponent=P,e.AudioComponent=I,e.BasicModule=ae,e.HtmlDirective=O,e.IconComponent=T,e.IframeComponent=L,e.LabelDirective=$,e.PictureDirective=j,e.SpinnerComponent=K,e.VideoComponent=ie,e.disableContextMenu=w})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("ng-circle-progress"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","ng-circle-progress","@wm/components/base","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic=e.wm.components.basic||{},e.wm.components.basic.progress={}),e.ng.core,e.ng.common,e.ngCircleProgress,e.wm.components.base,e.wm.core)}(this,(function(e,t,i,n,a,s){"use strict";function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var r=o(t),l=o(i),c=o(n);const d=e=>{const t=(e=(e=e||"9").replace(/\%$/,"")).lastIndexOf(".");return-1===t?0:e.length-t-1},p=e=>!!s.isString(e)&&"%"===(e=e.trim()).charAt(e.length-1),u=["wmProgressBar",""];function h(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",1)(1,"span",2),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&e){const e=t.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275classMapInterpolate1("multi-bar progress-bar ",e.cls,""),r.\u0275\u0275styleProp("width",e.progressBarWidth),r.\u0275\u0275attribute("aria-valuenow",i.datavalue)("aria-valuemin",i.minvalue)("aria-valuemax",i.maxvalue)("aria-label",i.hint||"Progress bar"),r.\u0275\u0275advance(1),r.\u0275\u0275attribute("data-caption-placement",i.captionplacement),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.displayValue)}}const m={widgetType:"wm-progress-bar",hostClass:"progress app-progress"},g={default:"","default-striped":"progress-bar-striped",success:"progress-bar-success","success-striped":"progress-bar-success progress-bar-striped",info:"progress-bar-info","info-striped":"progress-bar-info progress-bar-striped",warning:"progress-bar-warning","warning-striped":"progress-bar-warning progress-bar-striped",danger:"progress-bar-danger","danger-striped":"progress-bar-danger progress-bar-striped"};class f extends a.StylableComponent{static{this.initializeProps=void a.register("wm-progress-bar",new Map([["captionplacement",{value:"hidden",...a.PROP_STRING}],["class",a.PROP_STRING],["dataset",a.PROP_ANY],["datavalue",a.PROP_STRING],["displayformat",a.PROP_STRING],["hint",a.PROP_STRING],["maxvalue",{value:100,...a.PROP_NUMBER}],["minvalue",{value:0,...a.PROP_NUMBER}],["name",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}],["tabindex",{value:0,...a.PROP_NUMBER}],["type",{value:"default",...a.PROP_STRING}]]))}constructor(e,t,i){super(e,m),this.data=[{cls:g.default,progressBarWidth:"0%",displayValue:"0"}],this.hasDataset=!(!t&&!i),a.styler(this.nativeElement,this),this._prepareData=_.debounce((()=>this.prepareData()),50)}onTypeChange(){this.hasDataset||this.data[0]&&(this.data[0].cls=g[this.type])}getFormattedDisplayVal(e){const t=this.displayformat||"9";return e=(e=parseFloat(""+e)).toFixed(d(t)),t&&t.includes("%")&&(e=`${e}%`),e}prepareData(){if(this.dataset&&_.isArray(this.dataset)&&this.type&&this.datavalue)this.data=this.dataset.map((e=>{const t=s.findValueOf(e,this.datavalue).toString();let i=t;return t&&!t.includes("%")&&(i=`${t}%`),{cls:g[s.findValueOf(e,this.type)],progressBarWidth:i,displayValue:this.getFormattedDisplayVal(t)}}));else{let e=0,t=0;if(this.datavalue)if(p(this.datavalue)){e=t=this.datavalue||"0%"}else if(s.isDefined(this.datavalue)){const i=+this.maxvalue-+this.minvalue||1;e=t=100*(+this.datavalue-+this.minvalue)/i+"%"}this.data[0].displayValue=this.getFormattedDisplayVal(t),this.data[0].progressBarWidth=e,this.data[0].cls=g[this.type]}}onPropertyChange(e,t,i){"type"===e?this.onTypeChange():"minvalue"===e||"maxvalue"===e||"datavalue"===e||"dataset"===e||"displayformat"===e?this._prepareData():super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||f)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275injectAttribute("dataset"),r.\u0275\u0275injectAttribute("dataset.bind"))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:f,selectors:[["","wmProgressBar",""]],features:[r.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(f)]),r.\u0275\u0275InheritDefinitionFeature],attrs:u,decls:1,vars:1,consts:[["role","progressbar","tabindex","1",3,"class","width",4,"ngFor","ngForOf"],["role","progressbar","tabindex","1"],[1,"app-progress-label"]],template:function(e,t){1&e&&r.\u0275\u0275template(0,h,3,11,"div",0),2&e&&r.\u0275\u0275property("ngForOf",t.data)},dependencies:[l.NgForOf],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(f,[{type:t.Component,args:[{selector:"[wmProgressBar]",providers:[a.provideAsWidgetRef(f)],template:'<div class="multi-bar progress-bar {{bar.cls}}" *ngFor="let bar of data" [style.width]="bar.progressBarWidth"\n    role="progressbar" [attr.aria-valuenow]="datavalue" [attr.aria-valuemin]="minvalue" [attr.aria-valuemax]="maxvalue"\n    [attr.aria-label]="hint || \'Progress bar\'" tabindex="1">\n    <span class="app-progress-label" [attr.data-caption-placement]="captionplacement">{{bar.displayValue}}</span>\n</div>'}]}],(function(){return[{type:r.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["dataset"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["dataset.bind"]}]}]}),null);const v=["wmProgressCircle",""],b={widgetType:"wm-progress-circle",hostClass:"progress app-progress circle"},y={responsive:!0,innerStrokeWidth:10,outerStrokeWidth:10,unitsFontSize:"15",space:-10,toFixed:0,maxPercent:100,showSubtitle:!1,clockwise:!0,startFromZero:!1,renderOnClick:!1,innerStrokeColor:"",outerStrokeColor:""},w={default:"",success:"progress-circle-success",info:"progress-circle-info",warning:"progress-circle-warning",danger:"progress-circle-danger"};class P extends a.StylableComponent{static{this.initializeProps=void a.register("wm-progress-circle",new Map([["captionplacement",{value:"inside",...a.PROP_STRING}],["class",a.PROP_STRING],["dataset",a.PROP_ANY],["datavalue",{value:"30",...a.PROP_STRING}],["displayformat",{value:"9%",...a.PROP_STRING}],["hint",a.PROP_STRING],["maxvalue",{value:100,...a.PROP_NUMBER}],["minvalue",{value:0,...a.PROP_NUMBER}],["name",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}],["subtitle",a.PROP_STRING],["tabindex",{value:0,...a.PROP_NUMBER}],["title",a.PROP_STRING],["type",{value:"default",...a.PROP_STRING}]]))}constructor(e){super(e,b),a.styler(this.nativeElement,this),this.options=_.clone(y),this.redraw=_.debounce(this._redraw,100)}_redraw(){this.circleRef.render()}ngAfterViewInit(){super.ngAfterViewInit(),this.invokeEventCallback("beforerender",{$event:{}}),this.options=Object.assign(this.circleRef.options,this.options)}getDefaultOptions(){return this.options}getLib(){return"ng-circle-progress"}overrideDefaults(e){_.extend(this.options,e)}updateDisplayValueFormat(){this.options.showTitle=this.options.showSubtitle="inside"===this.captionplacement,this.options.showUnits=!this.title&&this.options.showTitle&&p(this.displayformat),this.options.toFixed=d(this.displayformat),this.options.showTitle&&(this.options.title=this.title||"auto",this.options.showSubtitle=!!this.subtitle,this.options.subtitle=this.subtitle||""),this.redraw()}onPropertyChange(e,t,i){switch(e){case"type":this.$element.removeClass(w[i]),this.$element.addClass(w[t]);break;case"minvalue":case"maxvalue":case"datavalue":p(this.datavalue)?this.percentagevalue=parseFloat(this.datavalue):this.percentagevalue=((e,t=0,i=0)=>{const n=(e-t)/(i-t)*100;return _.isNaN(n)?(console.warn("Circle Progress Bar: One of the properties Min, Max or datavalue is not a valid number"),0):Math.abs(n)})(parseFloat(this.datavalue),this.minvalue,this.maxvalue);break;case"displayformat":case"captionplacement":case"title":case"subtitle":this.updateDisplayValueFormat()}super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||P)(r.\u0275\u0275directiveInject(r.Injector))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:P,selectors:[["","wmProgressCircle",""]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(n.CircleProgressComponent,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.circleRef=e.first)}},features:[r.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(P)]),r.\u0275\u0275InheritDefinitionFeature],attrs:v,decls:1,vars:2,consts:[["tabindex","1","hint","progess-circle",3,"percent","options"]],template:function(e,t){1&e&&r.\u0275\u0275element(0,"circle-progress",0),2&e&&r.\u0275\u0275property("percent",t.percentagevalue)("options",t.options)},dependencies:[c.CircleProgressComponent],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(P,[{type:t.Component,args:[{selector:"[wmProgressCircle]",providers:[a.provideAsWidgetRef(P)],template:'<circle-progress tabindex="1" hint="progess-circle" [percent]="percentagevalue" [options]="options"></circle-progress>'}]}],(function(){return[{type:r.Injector}]}),{circleRef:[{type:t.ViewChild,args:[n.CircleProgressComponent,{static:!0}]}]});const C=[f,P];class A{static{this.\u0275fac=function(e){return new(e||A)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:A})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[i.CommonModule,n.NgCircleProgressModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(A,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.NgCircleProgressModule,a.WmComponentsModule],declarations:[...C],exports:[...C]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(A,{declarations:[f,P],imports:[i.CommonModule,n.NgCircleProgressModule,a.WmComponentsModule],exports:[f,P]}),e.ProgressBarComponent=f,e.ProgressCircleComponent=P,e.ProgressModule=A,e.TYPE_CLASS_MAP=g,e.TYPE_CLASS_MAP_PC=w})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@angular/forms"),require("@wm/core"),require("@wm/components/input")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@angular/forms","@wm/core","@wm/components/input"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic=e.wm.components.basic||{},e.wm.components.basic.richtexteditor={}),e.ng.core,e.ng.common,e.wm.components.base,e.ng.forms,e.wm.core,e.wm.components.input)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(i),d=r(n);const p=new Map([["class",n.PROP_STRING],["datavaluesource",n.PROP_ANY],["datavalue",n.PROP_STRING],["height",n.PROP_STRING],["hint",n.PROP_STRING],["name",n.PROP_STRING],["placeholder",n.PROP_STRING],["readonly",n.PROP_BOOLEAN],["show",{value:!0,...n.PROP_BOOLEAN}],["showpreview",{value:!1,...n.PROP_BOOLEAN}],["tabindex",{value:0,...n.PROP_NUMBER}]]),u=["wmRichTextEditor",""];function h(e,t){if(1&e&&l.\u0275\u0275element(0,"div",3),2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275property("innerHTML",e.proxyModel,l.\u0275\u0275sanitizeHtml)}}const m={widgetType:"wm-richtexteditor",hostClass:"app-richtexteditor clearfix"};class g extends o.BaseFormCustomComponent{static{this.initializeProps=(n.register("wm-richtexteditor",p),void n.registerFormWidget(s.FormWidgetType.RICHTEXT,new Map(p)))}get htmlcontent(){return this.performEditorOperation("code")}get datavalue(){return this.htmlcontent}set datavalue(e){null!=e&&(this.$hiddenInputEle.val(e),this.performEditorOperation("reset"),this.performEditorOperation("code",e))}constructor(e,i,a){super(e,m),this.sanitizePipe=i,this.ngZone=a,this._operationStack=[],this.isEditorLoaded=!1,this.EDITOR_DEFAULT_OPTIONS={toolbar:[["misc",["undo","redo"]],["style",["style"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["height",["height"]],["style",["bold","italic","underline","clear"]],["font",["strikethrough","superscript","subscript"]],["color",["color"]],["insert",["table","picture","link","video","hr"]],["para",["ul","ol","paragraph"]],["misc",["codeview","fullscreen","help"]]],callbacks:{onInit:()=>{this.isEditorLoaded=!0,this._operationStack.length&&(this._operationStack.forEach((e=>{const t=Array.from(e.keys())[0],i=e.get(t);this.performEditorOperation(t,i)})),this._operationStack=[])},onChange:(e,i)=>{this.proxyModel=this.sanitizePipe.transform(e,t.SecurityContext.HTML),this.invokeOnChange(e,(()=>{let e;return"function"==typeof Event?e=new Event("change"):(e=document.createEvent("Event"),e.initEvent("change",!0,!0)),e})(),!0),this.invokeOnTouched()}},fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Merriweather"],placeholder:"write here...",minHeight:100,disableResizeEditor:!0},n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER,["height"]),(()=>{if(!$.summernote.__overidden){const e=$.summernote.ui_template().button.bind($.summernote);$.summernote.ui_template.button=(...t)=>{const i=e(...t),n=i.callback;return i.callback=(e,t)=>(e.addClass("btn"),n(e,t)),i},$.summernote.__overidden=!0}})()}ngOnInit(){this.$richTextEditor=$(this.nativeElement.querySelector("[richTextEditor]")),this.$hiddenInputEle=$(this.nativeElement.querySelector("input.model-holder")),super.ngOnInit(),this.initEditor()}initEditor(){this.ngZone.runOutsideAngular((()=>{this.invokeEventCallback("beforerender",{$event:{}}),this.$richTextEditor.summernote(this.EDITOR_DEFAULT_OPTIONS)}))}getDefaultOptions(){return this.EDITOR_DEFAULT_OPTIONS}getLib(){return"summernote"}overrideDefaults(e){_.extend(this.EDITOR_DEFAULT_OPTIONS,e)}onPropertyChange(e,t,i){"placeholder"===e?this.performEditorOperation("placeholder",t):"disabled"===e||"readonly"===e?this.performEditorOperation(t?"disable":"enable"):super.onPropertyChange(e,t,i)}onStyleChange(e,t,i){"height"===e&&this.performEditorOperation("height",t)}performEditorOperation(e,t){if(!this.isEditorLoaded){const i=new Map;return i.set(e,t),void this._operationStack.push(i)}if("height"===e)s.setCSS(this.nativeElement.querySelector("div.note-editable"),e,t,!0);else{if("placeholder"!==e){if(1===arguments.length&&"code"===e&&this.$richTextEditor.summernote("isEmpty")){const e=this.$richTextEditor.summernote("code");return""===e?e:void 0}return this.$richTextEditor.summernote(e,t)}s.setAttr(this.nativeElement,e,t),s.setHtml(this.nativeElement.querySelector("div.note-placeholder"),t,!0)}}getCurrentPosition(){return this.performEditorOperation("createRange")}undo(){this.performEditorOperation("undo")}focus(){this.performEditorOperation("focus")}ngOnDestroy(){this.performEditorOperation("destroy"),super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||g)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275directiveInject(d.SanitizePipe),l.\u0275\u0275directiveInject(l.NgZone))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:g,selectors:[["div","wmRichTextEditor",""]],exportAs:["wmRichTextEditor"],features:[l.\u0275\u0275ProvidersFeature([n.provideAs(g,a.NG_VALUE_ACCESSOR,!0),n.provideAsWidgetRef(g)]),l.\u0275\u0275InheritDefinitionFeature],attrs:u,decls:3,vars:2,consts:[["richTextEditor",""],["class","ta-preview",3,"innerHTML",4,"ngIf"],["hidden","",1,"model-holder",3,"disabled"],[1,"ta-preview",3,"innerHTML"]],template:function(e,t){1&e&&(l.\u0275\u0275element(0,"div",0),l.\u0275\u0275template(1,h,1,1,"div",1),l.\u0275\u0275element(2,"input",2)),2&e&&(l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",t.showpreview),l.\u0275\u0275advance(1),l.\u0275\u0275property("disabled",t.disabled))},dependencies:[c.NgIf],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(g,[{type:t.Component,args:[{selector:"div[wmRichTextEditor]",providers:[n.provideAs(g,a.NG_VALUE_ACCESSOR,!0),n.provideAsWidgetRef(g)],exportAs:"wmRichTextEditor",template:'<div richTextEditor></div>\n<div [innerHTML]="proxyModel" class="ta-preview" *ngIf="showpreview"></div>\n<input class="model-holder" [disabled]="disabled" hidden>\n'}]}],(function(){return[{type:l.Injector},{type:d.SanitizePipe},{type:l.NgZone}]}),null);const f=[g];class v{static{this.\u0275fac=function(e){return new(e||v)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:v})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(v,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...f],exports:[...f]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(v,{declarations:[g],imports:[i.CommonModule,n.WmComponentsModule],exports:[g]}),e.RichTextEditorComponent=g,e.RichTextEditorModule=v})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("ngx-bootstrap/typeahead"),require("@wm/components/base"),require("rxjs"),require("rxjs/operators"),require("@wm/core"),require("@wm/components/input")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","ngx-bootstrap/typeahead","@wm/components/base","rxjs","rxjs/operators","@wm/core","@wm/components/input"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic=e.wm.components.basic||{},e.wm.components.basic.search={}),e.ng.core,e.ng.common,e.ng.forms,e.typeahead,e.wm.components.base,e.rxjs,e.rxjs.operators,e.wm.core,e.wm.components.input)}(this,(function(e,t,i,n,a,s,o,r,l,c){"use strict";function d(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var p=d(t),u=d(i),h=d(n),m=d(a),g=d(s),f=d(l);const v=new Map([["casesensitive",{value:!1,...s.PROP_BOOLEAN}],["class",s.PROP_STRING],["datacompletemsg",{value:"No more data to load",...s.PROP_STRING}],["datafield",{value:"All Fields",...s.PROP_STRING}],["dataoptions",s.PROP_ANY],["dataset",s.PROP_ANY],["datasource",s.PROP_ANY],["datavalue",s.PROP_STRING],["datavaluesource",s.PROP_ANY],["dateformat",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["displayimagesrc",s.PROP_STRING],["displaylabel",s.PROP_STRING],["displayexpression",s.PROP_STRING],["dropup",s.PROP_BOOLEAN],["groupby",s.PROP_STRING],["hint",s.PROP_STRING],["imagewidth",{value:"16px",...s.PROP_STRING}],["limit",s.PROP_NUMBER],["loadingdatamsg",{value:"Loading items...",...s.PROP_STRING}],["match",s.PROP_STRING],["matchmode",s.PROP_STRING],["minchars",s.PROP_NUMBER],["name",s.PROP_STRING],["navsearchbar",{value:!1,...s.PROP_BOOLEAN}],["orderby",s.PROP_STRING],["placeholder",{value:"Search",...s.PROP_STRING}],["position",s.PROP_STRING],["query",s.PROP_STRING],["readonly",s.PROP_BOOLEAN],["required",s.PROP_BOOLEAN],["searchkey",s.PROP_STRING],["searchon",{value:"typing",...s.PROP_STRING}],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["showclear",{value:!1,...s.PROP_BOOLEAN}],["showsearchicon",s.PROP_BOOLEAN],["tabindex",{value:0,...s.PROP_NUMBER}],["type",{value:"search",...s.PROP_STRING}],["debouncetime",{value:250,...s.PROP_NUMBER}],["width",s.PROP_STRING]]);class b{applyFilter(e,t,i){return e=_.isNumber(e)?e.toString():e,_.includes(i,"start")?_.startsWith(e,t):_.includes(i,"end")?_.endsWith(e,t):_.includes(i,"exact")?_.isEqual(e,t):_.includes(e,t)}filter(e){const t=e.dataset;let i=e.casesensitive;const n=e.matchMode;n&&!_.includes(n,"ignorecase")&&(i=!0);let a,s=e.query;return new Promise(((o,r)=>{if(e.searchKey){const t=_.split(e.searchKey,",");a=_.filter(e.dataset,(e=>t.some((t=>{let a=_.get(e,t),o=s;return i||(a=_.toLower(_.toString(a)),o=_.toLower(_.toString(o))),this.applyFilter(a,o,n)}))))}else a=_.isArray(t)&&_.isObject(t[0])?_.filter(t,(e=>{let t=_.values(e).join(" ");return i||(t=_.toLower(t),s=_.toLower(s)),this.applyFilter(t,s)})):_.filter(t,(e=>(i||(e=_.toLower(e),s=_.toLower(s)),this.applyFilter(e,s,n))));o({data:a,hasMoreData:!1,isLastPage:!0})}))}}class y{filter(e){return this.filterData(e).then((t=>this.onFilterSuccess(e,t)),(()=>this.onFilterFailure()))}filterData(e){if(e.dataoptions){const t=e.dataoptions,i=e.datasource.execute(l.DataSource.Operation.GET_REQUEST_PARAMS,e);if(t.relatedField)return new Promise(((n,a)=>{s.interpolateBindExpressions(e.viewParent,t.filterExpr,(s=>{i.filterExpr=t.filterExpr=s,t.filterExpr=s,e.datasource.execute(l.DataSource.Operation.GET_RELATED_TABLE_DATA,_.assign({relatedField:t.relatedField},i)).then(n,a)}))}));if(t.distinctField)return e.datasource.execute(l.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS,{pagesize:e.limit||e.pagesize,page:e.page,fields:t.distinctField,entityName:t.tableName,filterFields:_.assign(t.filterFields,i.filterFields),filterExpr:l.getClonedObject(t.filterExpr||{})})}return e.datasource.execute(l.DataSource.Operation.SEARCH_RECORDS,e)}isLast(e,t,i,n){if(t===l.AppConstants.INT_MAX_VALUE)return 0!==n&&n<i;return e===(t>i?Math.ceil(t/i):t<0?0:1)}getTransformedData(e,t){const i=e.operation+"Result",n=t[i];if(n){const e={};_.set(e,i,n),t=[e]}else t=[t];return t}onFilterFailure(){return[]}isLastPageForDistinctApi(e,t,i,n){return t>1&&!n&&_.isEmpty(e)&&i===l.AppConstants.INT_MAX_VALUE}onFilterSuccess(e,t){let i,n,a,s,o=t.data;const r=_.split(e.binddataset,"."),c=_.slice(r,_.indexOf(r,"dataSet")+1).join(".");return new Promise(((r,d)=>{const p=t.pagination;if(e.datasource.execute(l.DataSource.Operation.IS_PAGEABLE)&&(a=p.number+1,n=this.isLast(a,e.limit>0&&e.limit||p.totalElements,p.size,p.numberOfElements),s=!0,this.isLastPageForDistinctApi(o,a,p.totalElements,n)))return n=!0,void r({data:[],isLastPage:n,hasMoreData:a>1,isPaginatedData:s,page:a});if(c){if(_.isArray(o)){const e=c.lastIndexOf("[$i]");if(e>-1){const t=c.substr(e+5);i=o.map((e=>l.findValueOf(e,t)))}}else _.isObject(o)&&(i=_.get(o,c));o=i||o}_.isArray(o)||(o=this.getTransformedData(e.datasource,o)),o.length?r({data:o,isLastPage:n,hasMoreData:a>1,isPaginatedData:s,page:a}):r({data:[],isLastPage:n,hasMoreData:a>1,isPaginatedData:s,page:a})}))}}class w{static{this.remoteDataProvider=new y}static{this.localDataProvider=new b}filter(e){let t;const i=e.datasource&&e.datasource.execute(l.DataSource.Operation.IS_UPDATE_REQUIRED,e.hasData);return t=!e.isLocalFilter&&(e.dataoptions||e.datasource&&e.datasource.execute(l.DataSource.Operation.IS_API_AWARE)&&e.searchKey&&i)?w.remoteDataProvider.filter(e):w.localDataProvider.filter(e),t.then((t=>(this.updateDataset=e.datasource&&!e.datasource.execute(l.DataSource.Operation.SUPPORTS_CRUD)&&i,this.hasMoreData=t.hasMoreData,this.isLastPage=t.isLastPage,this.page=t.page,this.isPaginatedData=t.isPaginatedData,t)))}}const P=["ulElement"],C=["liElements"],A=["wmSearch",""];function I(e,t){if(1&e&&p.\u0275\u0275element(0,"img",8),2&e){const e=p.\u0275\u0275nextContext(2).item,t=p.\u0275\u0275nextContext();p.\u0275\u0275styleProp("width",t.imagewidth),p.\u0275\u0275property("src",e.imgSrc,p.\u0275\u0275sanitizeUrl)}}function E(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"a"),p.\u0275\u0275template(1,I,1,3,"img",6),p.\u0275\u0275element(2,"span",7),p.\u0275\u0275elementEnd()),2&e){const e=p.\u0275\u0275nextContext(),t=e.item,i=e.match,n=e.query,a=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.imgSrc),p.\u0275\u0275advance(1),p.\u0275\u0275property("title",t.label)("innerHtml",a.highlight(i,n)||t.label,p.\u0275\u0275sanitizeHtml)}}const O=function(e){return{customTemplate:e}};function x(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"a",9),p.\u0275\u0275element(1,"div",10),p.\u0275\u0275elementEnd()),2&e){const e=p.\u0275\u0275nextContext().match,t=p.\u0275\u0275nextContext();p.\u0275\u0275property("ngClass",p.\u0275\u0275pureFunction1(3,O,t.content))("wmItemTemplate",t.content)("userComponentParams",e.item)}}function R(e,t){if(1&e&&(p.\u0275\u0275template(0,E,3,3,"a",4),p.\u0275\u0275template(1,x,2,5,"a",5)),2&e){const e=p.\u0275\u0275nextContext();p.\u0275\u0275property("ngIf",!e.content),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",e.content)}}function D(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"h4",21),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){const e=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate(e.value)}}const S=function(e,t,i,n){return{item:e,index:t,match:i,query:n}};function T(e,t){if(1&e&&p.\u0275\u0275elementContainer(0,22),2&e){const e=p.\u0275\u0275nextContext().$implicit,t=p.\u0275\u0275nextContext(),i=t.itemTemplate,n=t.query,a=p.\u0275\u0275nextContext();p.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",p.\u0275\u0275pureFunction4(2,S,e.item,a.i,e,n))}}const M=function(e,t){return{active:e,"list-group-header":t}};function N(e,t){if(1&e){const e=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"li",17,18),p.\u0275\u0275listener("mouseenter",(function(){const t=p.\u0275\u0275restoreView(e).$implicit,i=p.\u0275\u0275nextContext(2);return p.\u0275\u0275resetView(i.typeaheadContainer.selectActive(t))}))("click",(function(t){const i=p.\u0275\u0275restoreView(e).$implicit,n=p.\u0275\u0275nextContext(2);return i&&!i.isHeader()&&n.typeaheadContainer.selectMatch(i,t),n.$typeaheadEvent=t,p.\u0275\u0275resetView(n.notifySubscriber())})),p.\u0275\u0275template(2,D,2,1,"h4",19),p.\u0275\u0275template(3,T,1,7,"ng-container",20),p.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,i=p.\u0275\u0275nextContext(2);p.\u0275\u0275property("ngClass",p.\u0275\u0275pureFunction2(3,M,i.typeaheadContainer&&i.typeaheadContainer.isActive(e),e&&e.isHeader())),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",e.isHeader()),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!e.isHeader())}}function k(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"ul",11,12),p.\u0275\u0275template(2,N,4,6,"li",13),p.\u0275\u0275elementStart(3,"div",14),p.\u0275\u0275element(4,"span",15),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"div",14),p.\u0275\u0275element(6,"i",16)(7,"span",15),p.\u0275\u0275elementEnd()()),2&e){const e=t.matches,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",e),p.\u0275\u0275advance(1),p.\u0275\u0275property("hidden",i._loadingItems||!(i.datacompletemsg&&i.dataProvider.isLastPage)),p.\u0275\u0275advance(1),p.\u0275\u0275property("textContent",i.datacompletemsg),p.\u0275\u0275advance(1),p.\u0275\u0275property("hidden",!i._loadingItems),p.\u0275\u0275advance(2),p.\u0275\u0275property("textContent",i.loadingdatamsg)}}function L(e,t){if(1&e){const e=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275elementStart(1,"input",23),p.\u0275\u0275listener("ngModelChange",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.query=t)}))("input",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.onInputChange(t))}))("keydown",(function(){p.\u0275\u0275restoreView(e);const t=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(t.listenQuery=!0)}))("keydown.enter",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return i.$typeaheadEvent=t,p.\u0275\u0275resetView(i.handleEnterEvent(t))}))("keydown.arrowdown",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.selectNext(t))}))("blur",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.invokeOnTouched(t))}))("click",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.handleFocus(t))}))("focus",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return i._unsubscribeDv=!1,i.listenQuery=!0,i.handleFocus(t),p.\u0275\u0275resetView(i.invokeOnFocus(t))}))("focusout",(function(){p.\u0275\u0275restoreView(e);const t=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(t.onFocusOut())}))("typeaheadLoading",(function(){p.\u0275\u0275restoreView(e);const t=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(t._loadingItems)}))("typeaheadOnSelect",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.typeaheadOnSelect(t))})),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(2,"i",24),p.\u0275\u0275listener("click",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.clearSearch(t))})),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementContainerEnd()}if(2&e){const e=p.\u0275\u0275nextContext(),t=p.\u0275\u0275reference(1),i=p.\u0275\u0275reference(3);p.\u0275\u0275advance(1),p.\u0275\u0275property("title",e.query||"")("placeholder",e.placeholder||"")("disabled",e.disabled)("ngModel",e.query)("readonly",e.readonly)("disabled",e.disabled)("typeahead",e.typeaheadDataSource)("typeaheadWaitMs",e.debouncetime)("typeaheadItemTemplate",t)("optionsListTemplate",i)("typeaheadMinLength",e.minchars)("typeaheadOptionsLimit",e.limit)("typeaheadGroupField",e.groupby?"groupby":null)("typeaheadAsync",!0)("typeaheadScrollable",!0)("adaptivePosition",!0)("typeaheadOptionsInScrollableView",e.optionslimitinscrollableview)("dropup",e.dropup)("tabindex",e.tabindex),p.\u0275\u0275attribute("name",e.name)("aria-label",e.hint||"Search field"),p.\u0275\u0275advance(1),p.\u0275\u0275property("hidden",!e.showClosebtn)}}function F(e,t){1&e&&p.\u0275\u0275element(0,"span",32)}const B=function(e){return{disabled:e}};function j(e,t){if(1&e){const e=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"span",33)(1,"form")(2,"button",34),p.\u0275\u0275listener("click",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext(2);return p.\u0275\u0275resetView(i.onSearchSelect(t))})),p.\u0275\u0275elementEnd()()()}if(2&e){const e=p.\u0275\u0275nextContext(2);p.\u0275\u0275property("ngClass",p.\u0275\u0275pureFunction1(2,B,e.disabled)),p.\u0275\u0275advance(2),p.\u0275\u0275property("disabled",e.disabled)}}const V=function(e){return{"show-btn":e}};function G(e,t){if(1&e){const e=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"span",25),p.\u0275\u0275listener("click",(function(){p.\u0275\u0275restoreView(e);const t=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(t.closeSearch())})),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(1,"span",26),p.\u0275\u0275text(2,"Back button"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"input",27),p.\u0275\u0275listener("ngModelChange",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.query=t)}))("input",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.onInputChange(t))}))("keydown",(function(){p.\u0275\u0275restoreView(e);const t=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(t.listenQuery=!0)}))("keydown.enter",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return i.$typeaheadEvent=t,p.\u0275\u0275resetView(i.handleEnterEvent(t))}))("keydown.arrowdown",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.selectNext(t))}))("blur",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return i.invokeOnTouched(t),p.\u0275\u0275resetView(i.onFocusOut())}))("click",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.handleFocus(t))}))("focus",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return i._unsubscribeDv=!1,i.listenQuery=!0,i.handleFocus(t),p.\u0275\u0275resetView(i.invokeOnFocus(t))}))("typeaheadLoading",(function(){p.\u0275\u0275restoreView(e);const t=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(t._loadingItems)}))("typeaheadOnSelect",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.typeaheadOnSelect(t))})),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(4,"input",28),p.\u0275\u0275template(5,F,1,0,"span",29),p.\u0275\u0275elementStart(6,"span",30),p.\u0275\u0275listener("click",(function(t){p.\u0275\u0275restoreView(e);const i=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(i.clearSearch(t,!0))})),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"span",26),p.\u0275\u0275text(8,"Clear button"),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(9,j,3,4,"span",31)}if(2&e){const e=p.\u0275\u0275nextContext(),t=p.\u0275\u0275reference(1),i=p.\u0275\u0275reference(3);p.\u0275\u0275advance(3),p.\u0275\u0275property("title",e.query||"")("placeholder",e.placeholder||"")("container",e.containerTarget||".wm-app")("disabled",e.disabled)("ngModel",e.query)("readonly",e.readonly)("typeahead",e.typeaheadDataSource)("typeaheadWaitMs",e.debouncetime)("typeaheadItemTemplate",t)("optionsListTemplate",i)("typeaheadMinLength",e.minchars)("typeaheadOptionsLimit",e.limit)("typeaheadGroupField",e.groupby?"groupby":null)("typeaheadAsync",!0)("typeaheadScrollable",!0)("adaptivePosition",!0)("typeaheadOptionsInScrollableView",e.optionslimitinscrollableview)("tabindex",e.tabindex)("dropup",e.dropup),p.\u0275\u0275attribute("name",e.name)("aria-label",e.hint||"Search field"),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",e._loadingItems),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngClass",p.\u0275\u0275pureFunction1(24,V,e.isQueryEntered())),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",e.showsearchicon)}}const W={widgetType:"wm-search",hostClass:"input-group"};class U extends c.DatasetAwareFormComponent{static{this.initializeProps=(s.register("wm-search",v),s.registerFormWidget(l.FormWidgetType.AUTOCOMPLETE,new Map(v)),void s.registerFormWidget(l.FormWidgetType.TYPEAHEAD,new Map(v)))}get datasource(){return this._datasource}set datasource(e){this._datasource=e;const t=this.datavalue||this.toBeProcessedDatavalue;this.updateByDatavalue(t)}constructor(e,t,i,n){super(e,W),this.binddatavalue=i,this.binddataset=n,this.query="",this.page=1,this.allowempty=!1,this.app=t,l.addClass(this.nativeElement,"app-search",!0),this.typeaheadDataSource=o.Observable.create((e=>{this.listenQuery&&(this._defaultQueryInvoked=!1,this._loadingItems=!0,e.next(this.query)),this.lastSelectedIndex&&(this.typeahead._container=void 0)})).pipe(r.filter((()=>(this._loadingItems=!1,0===this.minchars||this.query&&this.query.length>=this.minchars))),r.mergeMap((e=>this.getDataSourceAsObservable(e)))),this.dataProvider=new w;const a=this.datavalue$.subscribe((e=>{const t=_.isArray(e)?e[0]:e;if(null===t||""===t)return this._modelByValue="",this.query=this.queryModel="",void(this._lastResult=void 0);this._unsubscribeDv||(this._defaultQueryInvoked=!1,_.isObject(e)||this.prevDatavalue===e||(this._modelByKey=void 0,this.query=this.queryModel=""),this.updateByDatavalue(e)),this.showClosebtn=""!==this.query}));this.registerDestroyListener((()=>a.unsubscribe()));const s=this.dataset$.subscribe((()=>{this.startIndex=this.datasetItems.length,this._lastResult=void 0;const e=this.datavalue||this.toBeProcessedDatavalue;l.isDefined(e)&&this.updateByDataset(e)}));this.registerDestroyListener((()=>s.unsubscribe()))}clearSearch(e,t){this.query="",this.onInputChange(e),this.dataProvider.isLastPage=!1,this.listenQuery=!1,t&&(this.listenQuery=!0,this._unsubscribeDv=!1,this.loadMoreData()),this.invokeEventCallback("clearsearch"),this._loadingItems=!1,e&&this.$element.find(".app-search-input").focus()}clearText(){this.query="",this.showClosebtn=!1}closeSearch(){this._loadingItems=!1,this.page=1,this.insertAtIndex(this.elIndex),this.elIndex=void 0,this.parentEl=void 0,this.$element.removeClass("full-screen"),this._domUpdated&&(this._domUpdated=!1),this.listenQuery=!1,this._unsubscribeDv=!0,this.typeahead.hide()}renderMobileAutoComplete(){l.isDefined(this.elIndex)||(this.parentEl=this.$element.parent(),this.elIndex=this.parentEl.children().index(this.$element)),this.$element.hasClass("full-screen")||(this._domUpdated=!0,this.$element.addClass("full-screen"),"inline"===this.position&&this.$element.addClass(this.position)),this.$element.hasClass("full-screen")&&this.$element.find(".app-search-input").focus()}getDataSourceAsObservable(e){if(this._lastQuery===e&&!_.get(this.dataoptions,"filterFields")&&l.isDefined(this._lastResult))return this._loadingItems=!1,o.of(this._lastResult);if("autocomplete"===this.type&&this.searchkey&&this.query&&this.datavalue){let e=[];const t=_.split(this.searchkey,",");let i;if(this.binddisplaylabel&&(e=_.split(this.binddisplaylabel,"+"),1===e.length))if(_.includes(e[0],"|"))i=!0;else{i=/\[(.*?)\]/.exec(e[0])[1]}if(e.length>1||i&&!_.includes(t,i)||this.displayexpression&&!_.includes(t,this.displayexpression))return this._loadingItems=!1,o.of([])}return this._lastQuery=this.query,o.from(this.getDataSource(e))}handleEvent(e,t,i,n){_.includes(["blur","focus","select","submit","change"],t)||super.handleEvent(e,t,i,n)}highlight(e,t){if(this.typeaheadContainer)return e.value=e.item.label.toString(),this.typeaheadContainer.highlight(e,t)}insertAtIndex(e){if(0===e)this.parentEl.prepend(this.$element);else{this.parentEl.children().eq(e).length?this.$element.insertBefore(this.parentEl.children().eq(e)):this.$element.insertAfter(this.parentEl.children().eq(e-1))}}isMobileAutoComplete(){return"autocomplete"===this.type&&l.isMobile()}isQueryEntered(){return this.showclear&&this.showClosebtn}loadMoreData(e){this.dataProvider.isLastPage||(this.page=e?this.page+1:this.page,this.isScrolled=!0,this._loadingItems=!0,e&&(this._lastQuery=void 0),this.typeahead.onInput({target:{value:_.trim(this.query)||"0"}}))}onFocusOut(){this._unsubscribeDv=!1,this._loadingItems=!1,this.page=1,!this._domUpdated&&this._isOpen&&(this.listenQuery=!1),this._isOpen=!1,this._domUpdated&&this.typeahead&&this.typeahead._container&&(this.typeahead._container.isFocused=!0)}onInputChange(e){this.result=[],this.page=1,this.listenQuery=this.isUpdateOnKeyPress(),this._modelByValue=void 0,""===this.query?(this.queryModel="",this._modelByValue="",this.updatePrevDatavalue(this._lastQuery),this.invokeOnChange(this._modelByValue,{},!0),this.invokeEventCallback("clear",{$event:e}),e&&9!==e.which&&this.invokeEventCallback("submit",{$event:e})):this.invokeEventCallback("change",{$event:e,newVal:this._modelByValue||this.query,oldVal:this.prevDatavalue}),this.showClosebtn=""!==this.query}handleEnterEvent(e){_.get(this.typeahead,"matches.length")||this.onSearchSelect(e)}onSearchSelect(e){let t;const i=this.typeaheadContainer?.active?.value===this.query;if(this.typeaheadContainer&&this.typeaheadContainer.active&&i&&(t=this.typeaheadContainer.active.item),e=this.eventData(e,t||{}),!this.isUpdateOnKeyPress())return this.listenQuery=!0,void this.typeahead.onInput({target:{value:this.query}});this.typeaheadContainer&&this.liElements.length&&i?this.typeaheadContainer.selectActiveMatch():(this.queryModel=this.query,this.invokeEventCallback("submit",{$event:e}))}invokeOnBeforeServiceCall(e){this.invokeEventCallback("beforeservicecall",{inputData:e})}onDropdownOpen(){this.clearData&&this.typeahead.hide();if(_.debounce((()=>{this._isOpen=!0,this.typeaheadContainer=this.typeahead._container||this.typeahead._typeahead.instance,this.typeaheadContainer.liElements=this.liElements,this.typeaheadContainer.ulElement=this.ulElement,l.adjustContainerPosition($("typeahead-container"),this.nativeElement,this.typeahead._typeahead,$("typeahead-container .dropdown-menu"))}))(),this.isMobileAutoComplete()){this.$element.hasClass("full-screen")||this.renderMobileAutoComplete();const e=this.dropdownEl.closest("typeahead-container");e.insertAfter(this.$element.find("input").first());const t=this.$element.closest(".app-content").height();e.css({position:"relative",top:0,height:t+"px"}),this.showClosebtn=this.query&&""!==this.query,_.isUndefined(this.dataProvider.isLastPage)||this.dataProvider.isLastPage||this.triggerSearch()}}selectNext(){const e=this.typeaheadContainer.matches;if(!e)return;const t=e.indexOf(this.typeaheadContainer.active);!this._loadingItems&&!this.dataProvider.isLastPage&&t+1>e.length-1&&(this.lastSelectedIndex=t,this.loadMoreData(!0))}setLastActiveMatchAsSelected(){this.lastSelectedIndex&&(this.typeaheadContainer._active=this.typeaheadContainer.matches[this.lastSelectedIndex],this.typeaheadContainer.nextActiveMatch(),this.lastSelectedIndex=void 0)}triggerSearch(){if(this.dataProvider.isLastPage||!this.$element.hasClass("full-screen"))return;const e=this.dropdownEl,t=e.find("li").last();t.length&&e.length&&e.height()+e.position().top>t.height()+t.position().top&&this.loadMoreData(!0)}isUpdateOnKeyPress(){return"typing"===this.searchon}debounceDefaultQuery(e){this._defaultQueryInvoked=!0,this.getDataSource(e,!0).then((e=>{e.length?(this.queryModel=e,this._lastQuery=this.query=this.queryModel[0].label||"",this._modelByValue=this.queryModel[0].value,this._modelByKey=this.queryModel[0].key,this.showClosebtn=""!==this.query):(this._modelByValue=void 0,this.queryModel=void 0,this.query=""),this.clearData&&_.get(this.typeahead,"_typeahead.isShown")&&this.typeahead.hide()}))}updateByDatavalue(e){this.updateByDataset(e),this.updateByDataSource(e)}updateByDataSource(e){if(l.isDefined(e)&&!_.isObject(e)&&this.datasource&&!l.isDefined(this._modelByKey)&&this.datafield!==s.ALLFIELDS){if(l.isDefined(this.queryModel)&&!_.isEmpty(this.queryModel))return void this.updateDatavalueFromQueryModel();!this._defaultQueryInvoked&&this.datasource.execute(l.DataSource.Operation.SUPPORTS_CRUD)&&this.debounceDefaultQuery(e)}}updateDatavalueFromQueryModel(){l.isDefined(this.queryModel)&&(this._modelByValue=_.isArray(this.queryModel)?this.queryModel[0].value:this.queryModel,this._modelByKey=_.isArray(this.queryModel)?this.queryModel[0].key:this.queryModel,this.toBeProcessedDatavalue=void 0)}updateByDataset(e){if(this._defaultQueryInvoked&&this.searchkey)return;const t=_.find(this.datasetItems,(t=>_.isObject(t.value)?_.isEqual(t.value,e):_.toString(t.value).toLowerCase()===_.toString(e).toLowerCase()));if(t)this.queryModel=[t];else if(this.datafield===s.ALLFIELDS&&_.isObject(e))this.queryModel=this.getTransformedData(s.extractDataAsArray(e));else if(this.prevDatavalue!==e)return this.queryModel=void 0,void(this.query="");this.updateDatavalueFromQueryModel(),this._lastQuery=this.query=l.isDefined(this.queryModel)&&this.queryModel.length?_.get(this.queryModel[0],"label"):"",this.showClosebtn=""!==this.query}handleFocus(e){"search"===this.type&&this.query===this._lastQuery&&this._lastResult&&this.typeahead.keyUpEventEmitter.emit(this.query)}notifySubscriber(){const e=$(this.nativeElement).closest(".app-composite-widget.caption-floating");e.length>0&&this.app.notify("captionPositionAnimate",{displayVal:!0,nativeEl:e})}getDataSource(e,t,i){if(t&&this.datafield===s.ALLFIELDS)return this._loadingItems=!1,Promise.resolve([]);const n={dataset:this.dataset?s.convertDataToObject(this.dataset):void 0,binddataset:this.binddataset,datasource:this.datasource,datafield:this.datafield,hasData:this.dataset&&this.dataset.length,query:e,isLocalFilter:!this.searchkey,searchKey:t?this.datafield:this.searchkey,matchMode:t?"startignorecase":this.matchmode,casesensitive:this.casesensitive,isformfield:this.isformfield,orderby:this.orderby,limit:this.limit,pagesize:this.pagesize,page:this.page,onBeforeservicecall:this.invokeOnBeforeServiceCall.bind(this)};return this.dataoptions&&(n.dataoptions=this.dataoptions,n.viewParent=this.viewParent),this._loadingItems=!0,this.dataProvider.filter(n).then((e=>{e=e.data||e,l.isDefined(this.dataset)&&this.dataset.length||!this.dataProvider.updateDataset||(this.dataset=e),this.dataProvider.hasMoreData?this.formattedDataset=this.formattedDataset.concat(e):this.formattedDataset=e,this.formattedDataset.length>20&&!l.isDefined(this.limit)&&(this.typeahead.typeaheadOptionsLimit=this.formattedDataset.length),this._isOpen&&this.isMobileAutoComplete()&&!_.isUndefined(this.dataProvider.isLastPage)&&!this.dataProvider.isLastPage&&this.triggerSearch();const t=this.getTransformedData(this.formattedDataset,i);return this.result=_.map(t,"value"),t}),(e=>(this._loadingItems=!1,[]))).then((t=>(this.isScrolled&&(_.debounce((()=>{this.setLastActiveMatchAsSelected()}),30)(),this.isScrolled=!1),t.length||(this._modelByValue=void 0,this.queryModel=e),this._unsubscribeDv&&(t=[]),this._loadingItems=!1,this._lastResult=t,t)))}getContext(e){return e&&_.get(e,"widget")?this.getContext(e.viewParent):e}getTransformedData(e,t,i){l.isDefined(t)&&t++;const n=s.transformFormData(this.getContext(this.viewParent),e,this.datafield,{displayField:this.displaylabel||this.displayfield,displayExpr:i?"":this.displayexpression,bindDisplayExpr:i?"":this.binddisplaylabel,bindDisplayImgSrc:this.binddisplayimagesrc,displayImgSrc:this.displayimagesrc},t,this);return s.getUniqObjsByDataField(n,this.datafield,this.displayfield||this.displaylabel,l.toBoolean(this.allowempty))}onScroll(e,t){const i=e.scrollHeight,n=e.clientHeight;!this._loadingItems&&!this.dataProvider.isLastPage&&e.scrollTop+n>=i&&this.loadMoreData(!0)}ngOnInit(){super.ngOnInit(),l.isDefined(this.minchars)||("autocomplete"===this.type?this.minchars=0:this.minchars=1),this.listenQuery=this.isUpdateOnKeyPress(),this.showsearchicon=l.isDefined(this.showsearchicon)?this.showsearchicon:"search"===this.type}ngAfterViewInit(){super.ngAfterViewInit(),s.styler(this.nativeElement,this),this.containerTarget=s.getContainerTargetClass(this.nativeElement)}eventData(e,t){return e&&(e.data={item:t.dataObject,model:t.value,label:t.label,query:this.query}),e}typeaheadOnSelect(e,t){const i=e.item;this.queryModel=i,i.selected=!0,this.query=i.label,this.showClosebtn=""!==this.query,t=t||this.$typeaheadEvent,this._modelByKey=i.key,this._modelByValue=i.value,t=this.eventData(t,i),this.invokeOnTouched(),this.invokeOnChange(this.datavalue,t||{}),this.datavalue!==this.prevDatavalue&&this.updateBoundVariable(this.datavalue),this.$element.hasClass("full-screen")&&this.closeSearch(),this.invokeEventCallback("select",{$event:t,selectedValue:this.datavalue}),this.invokeEventCallback("submit",{$event:t}),this.updatePrevDatavalue(this.datavalue)}onPropertyChange(e,t,i){"tabindex"!==e&&("autocomplete"===this.type&&"displaylabel"===e&&this.displaylabel&&(!this.displayexpression||this.displayexpression&&!this.datasource)&&(this.displayexpression=this.displaylabel,this.displaylabel=void 0),"displaylabel"===e&&this.dataoptions&&null===this.binddisplaylabel&&(this.query=_.get(this._modelByValue,t)||this._modelByValue),"disabled"===e&&(!1===t?this.clearData=!1:(this.clearData=!0,_.get(this.typeahead,"_typeahead.isShown")&&this.typeahead.hide())),super.onPropertyChange(e,t,i))}static{this.\u0275fac=function(e){return new(e||U)(p.\u0275\u0275directiveInject(p.Injector),p.\u0275\u0275directiveInject(f.App),p.\u0275\u0275injectAttribute("datavalue.bind"),p.\u0275\u0275injectAttribute("dataset.bind"))}}static{this.\u0275cmp=p.\u0275\u0275defineComponent({type:U,selectors:[["","wmSearch",""]],viewQuery:function(e,t){if(1&e&&(p.\u0275\u0275viewQuery(a.TypeaheadDirective,5),p.\u0275\u0275viewQuery(P,5),p.\u0275\u0275viewQuery(C,5)),2&e){let e;p.\u0275\u0275queryRefresh(e=p.\u0275\u0275loadQuery())&&(t.typeahead=e.first),p.\u0275\u0275queryRefresh(e=p.\u0275\u0275loadQuery())&&(t.ulElement=e.first),p.\u0275\u0275queryRefresh(e=p.\u0275\u0275loadQuery())&&(t.liElements=e)}},features:[p.\u0275\u0275ProvidersFeature([s.provideAs(U,n.NG_VALUE_ACCESSOR,!0),s.provideAs(U,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(U)]),p.\u0275\u0275InheritDefinitionFeature],attrs:A,decls:7,vars:2,consts:[["customItemTemplate",""],["customListTemplate",""],[4,"ngIf","ngIfElse"],["searchTemplate",""],[4,"ngIf"],["partialContainer","",3,"ngClass","wmItemTemplate","userComponentParams",4,"ngIf"],["alt","Search",3,"src","width",4,"ngIf"],[3,"title","innerHtml"],["alt","Search",3,"src"],["partialContainer","",3,"ngClass","wmItemTemplate","userComponentParams"],["partial-container-target",""],["scrollable","",1,"app-search","dropdown-menu"],["ulElement",""],[3,"ngClass","mouseenter","click",4,"ngFor","ngForOf"],[1,"status",3,"hidden"],[3,"textContent"],[1,"fa","fa-circle-o-notch","fa-spin"],[3,"ngClass","mouseenter","click"],["liElements",""],["class","group-title",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[1,"group-title"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","text","focus-target","","container","body","autocomplete","off","typeaheadOptionField","label",1,"app-textbox","form-control","list-of-objs","app-search-input",3,"title","placeholder","disabled","ngModel","readonly","typeahead","typeaheadWaitMs","typeaheadItemTemplate","optionsListTemplate","typeaheadMinLength","typeaheadOptionsLimit","typeaheadGroupField","typeaheadAsync","typeaheadScrollable","adaptivePosition","typeaheadOptionsInScrollableView","dropup","tabindex","ngModelChange","input","keydown","keydown.enter","keydown.arrowdown","blur","click","focus","focusout","typeaheadLoading","typeaheadOnSelect"],[1,"btn-close","wi","wi-cancel",3,"hidden","click"],["aria-hidden","true",1,"wi","wi-arrow-left","form-control-feedback","back-btn",3,"click"],[1,"sr-only"],["type","text","focus-target","","autocomplete","off","typeaheadOptionField","label",1,"app-textbox","form-control","list-of-objs","app-search-input",3,"title","placeholder","container","disabled","ngModel","readonly","typeahead","typeaheadWaitMs","typeaheadItemTemplate","optionsListTemplate","typeaheadMinLength","typeaheadOptionsLimit","typeaheadGroupField","typeaheadAsync","typeaheadScrollable","adaptivePosition","typeaheadOptionsInScrollableView","tabindex","dropup","ngModelChange","input","keydown","keydown.enter","keydown.arrowdown","blur","click","focus","typeaheadLoading","typeaheadOnSelect"],["ng-model","proxyModel","ng-required","required","tabindex","-1","aria-hidden","true",1,"model-holder"],["aria-hidden","true","class","fa fa-circle-o-notch fa-spin form-control-feedback",4,"ngIf"],[1,"wi","wi-close","form-control-feedback","clear-btn",3,"ngClass","click"],["class","input-group-addon","aria-label","search icon",3,"ngClass",4,"ngIf"],["aria-hidden","true",1,"fa","fa-circle-o-notch","fa-spin","form-control-feedback"],["aria-label","search icon",1,"input-group-addon",3,"ngClass"],["title","Search","type","submit",1,"app-search-button","wm-sl-l","sl-search",3,"disabled","click"]],template:function(e,t){if(1&e&&(p.\u0275\u0275template(0,R,2,2,"ng-template",null,0,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275template(2,k,8,5,"ng-template",null,1,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275template(4,L,3,22,"ng-container",2),p.\u0275\u0275template(5,G,10,26,"ng-template",null,3,p.\u0275\u0275templateRefExtractor)),2&e){const e=p.\u0275\u0275reference(6);p.\u0275\u0275advance(4),p.\u0275\u0275property("ngIf",t.navsearchbar)("ngIfElse",e)}},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&p.\u0275setClassMetadata(U,[{type:t.Component,args:[{selector:"[wmSearch]",providers:[s.provideAs(U,n.NG_VALUE_ACCESSOR,!0),s.provideAs(U,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(U)],template:'<ng-template #customItemTemplate let-model="item" let-index="index" let-query="query" let-match="match">\n    \x3c!-- Default item template --\x3e\n    <a *ngIf="!content">\n        <img *ngIf="model.imgSrc" [src]="model.imgSrc" alt="Search" [style.width]="imagewidth">\n        <span [title]="model.label" [innerHtml]="highlight(match, query) || model.label"></span>\n    </a>\n    \x3c!-- Custom partial template --\x3e\n    <a *ngIf="content" [ngClass]="{customTemplate: content}" partialContainer [wmItemTemplate]="content" [userComponentParams]="match.item">\n        <div partial-container-target></div>\n    </a>\n</ng-template>\n\n<ng-template #customListTemplate let-matches="matches" let-itemTemplate="itemTemplate" let-query="query">\n    <ul #ulElement class="app-search dropdown-menu" scrollable>\n        <li #liElements *ngFor="let match of matches" [ngClass]="{active: typeaheadContainer && typeaheadContainer.isActive(match), \'list-group-header\': match && match.isHeader()}"\n            (mouseenter)="typeaheadContainer.selectActive(match);"\n            (click)="match && !match.isHeader() && typeaheadContainer.selectMatch(match, $event); $typeaheadEvent = $event; notifySubscriber();">\n            \x3c!-- itemTemplate comes from the <input> --\x3e\n            <h4 *ngIf="match.isHeader()" class="group-title">{{match.value}}</h4>\n            <ng-container *ngIf="!match.isHeader()" [ngTemplateOutlet]="itemTemplate"\n                          [ngTemplateOutletContext]="{item: match.item, index: i, match: match, query: query}">\n            </ng-container>\n        </li>\n        <div class="status" [hidden]="_loadingItems || !(datacompletemsg && dataProvider.isLastPage)">\n            <span [textContent]="datacompletemsg"></span>\n        </div>\n        <div class="status" [hidden]="!_loadingItems">\n            <i class="fa fa-circle-o-notch fa-spin"></i>\n            <span [textContent]="loadingdatamsg"></span>\n        </div>\n    </ul>\n</ng-template>\n\n\x3c!--This template is for search inside mobile navbar.--\x3e\n<ng-container *ngIf="navsearchbar; else searchTemplate">\n    <input [title]="query || \'\'" type="text" class="app-textbox form-control list-of-objs app-search-input" [placeholder]="placeholder || \'\'"\n           focus-target\n           container="body"\n           [disabled]="disabled"\n           autocomplete="off"\n           [(ngModel)]="query"\n           [readonly]="readonly"\n           [disabled]="disabled"\n           [typeahead]="typeaheadDataSource"\n           [typeaheadWaitMs]="debouncetime"\n           [typeaheadItemTemplate]="customItemTemplate"\n           [optionsListTemplate]="customListTemplate"\n           (input)="onInputChange($event)"\n           (keydown)="listenQuery = true"\n           (keydown.enter)="$typeaheadEvent = $event;handleEnterEvent($event)"\n           (keydown.arrowdown)="selectNext($event)"\n           (blur)="invokeOnTouched($event)"\n           (click)="handleFocus($event);"\n           (focus)="_unsubscribeDv = false; listenQuery = true; handleFocus($event); invokeOnFocus($event);"\n           (focusout)="onFocusOut()"\n           [typeaheadMinLength]="minchars"\n           [typeaheadOptionsLimit]="limit"\n           (typeaheadLoading)="_loadingItems"\n           (typeaheadOnSelect)="typeaheadOnSelect($event)"\n           typeaheadOptionField="label"\n           [typeaheadGroupField]="groupby ? \'groupby\' : null"\n           [typeaheadAsync]="true"\n           [typeaheadScrollable]="true"\n           [adaptivePosition]="true"\n           [typeaheadOptionsInScrollableView]="optionslimitinscrollableview"\n           [dropup]="dropup"\n           [tabindex]="tabindex"\n           [attr.name]="name"\n           [attr.aria-label]="hint || \'Search field\'"/>\n    <i class="btn-close wi wi-cancel" [hidden]="!showClosebtn" (click)="clearSearch($event);"></i>\n</ng-container>\n\x3c!--This template is for both web and fullscreen mode in mobile.--\x3e\n<ng-template #searchTemplate>\n    <span class="wi wi-arrow-left form-control-feedback back-btn" aria-hidden="true" (click)="closeSearch()"></span>\n    <span class="sr-only">Back button</span>\n    <input [title]="query || \'\'" type="text" class="app-textbox form-control list-of-objs app-search-input" [placeholder]="placeholder || \'\'"\n           focus-target\n           [container]="containerTarget || \'.wm-app\'"\n           [disabled]="disabled"\n           autocomplete="off"\n           [(ngModel)]="query"\n           [readonly]="readonly"\n           [typeahead]="typeaheadDataSource"\n           [typeaheadWaitMs]="debouncetime"\n           [typeaheadItemTemplate]="customItemTemplate"\n           [optionsListTemplate]="customListTemplate"\n           (input)="onInputChange($event)"\n           (keydown)="listenQuery = true"\n           (keydown.enter)="$typeaheadEvent = $event;handleEnterEvent($event)"\n           (keydown.arrowdown)="selectNext($event)"\n           (blur)="invokeOnTouched($event); onFocusOut()"\n           (click)="handleFocus($event);"\n           (focus)="_unsubscribeDv = false; listenQuery = true; handleFocus($event); invokeOnFocus($event)"\n           [typeaheadMinLength]="minchars"\n           [typeaheadOptionsLimit]="limit"\n           (typeaheadLoading)="_loadingItems"\n           (typeaheadOnSelect)="typeaheadOnSelect($event)"\n           typeaheadOptionField="label"\n           [typeaheadGroupField]="groupby ? \'groupby\' : null"\n           [typeaheadAsync]="true"\n           [typeaheadScrollable]="true"\n           [adaptivePosition]="true"\n           [typeaheadOptionsInScrollableView]="optionslimitinscrollableview"\n           [tabindex]="tabindex"\n           [dropup]="dropup"\n           [attr.name]="name"\n           [attr.aria-label]="hint || \'Search field\'">\n    <input class="model-holder" ng-model="proxyModel" ng-required="required" tabindex="-1" aria-hidden="true">\n    <span *ngIf="_loadingItems" aria-hidden="true" class="fa fa-circle-o-notch fa-spin form-control-feedback"></span>\n    <span class="wi wi-close form-control-feedback clear-btn" [ngClass]="{\'show-btn\': isQueryEntered()}" (click)="clearSearch($event, true)"></span>\n    <span class="sr-only">Clear button</span>\n    <span *ngIf="showsearchicon" class="input-group-addon" aria-label="search icon" [ngClass]="{\'disabled\': disabled}">\n        <form>\n            <button title="Search" [disabled]="disabled" class="app-search-button wm-sl-l sl-search" type="submit"\n                    (click)="onSearchSelect($event)"></button>\n        </form>\n    </span>\n</ng-template>\n'}]}],(function(){return[{type:p.Injector},{type:f.App},{type:void 0,decorators:[{type:t.Attribute,args:["datavalue.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["dataset.bind"]}]}]}),{typeahead:[{type:t.ViewChild,args:[a.TypeaheadDirective]}],ulElement:[{type:t.ViewChild,args:["ulElement"]}],liElements:[{type:t.ViewChildren,args:["liElements"]}]});class q{constructor(e,i){this.searchRef=i,this.elementRef=e.get(t.ElementRef)}ngAfterContentInit(){this.elementRef.nativeElement.addEventListener("scroll",this.notifyParent.bind(this)),this.searchRef.dropdownEl=$(this.elementRef.nativeElement),this.searchRef.onDropdownOpen()}ngAfterViewInit(){if(!this.searchRef.isMobileAutoComplete()){const e=this.searchRef.$element.find("input").first();this.searchRef.dropdownEl.width(e.outerWidth())}}notifyParent(e){this.searchRef.onScroll(this.elementRef.nativeElement,e)}static{this.\u0275fac=function(e){return new(e||q)(p.\u0275\u0275directiveInject(p.Injector),p.\u0275\u0275directiveInject(U))}}static{this.\u0275dir=p.\u0275\u0275defineDirective({type:q,selectors:[["","scrollable",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&p.\u0275setClassMetadata(q,[{type:t.Directive,args:[{selector:"[scrollable]"}]}],(function(){return[{type:p.Injector},{type:U}]}),null);const z=[U,q];class H{static{this.\u0275fac=function(e){return new(e||H)}}static{this.\u0275mod=p.\u0275\u0275defineNgModule({type:H})}static{this.\u0275inj=p.\u0275\u0275defineInjector({imports:[i.CommonModule,n.FormsModule,a.TypeaheadModule,s.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&p.\u0275setClassMetadata(H,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.FormsModule,a.TypeaheadModule,s.WmComponentsModule],declarations:[...z],exports:[...z]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&p.\u0275\u0275setNgModuleScope(H,{declarations:[U,q],imports:[i.CommonModule,n.FormsModule,a.TypeaheadModule,s.WmComponentsModule],exports:[U,q]}),p.\u0275\u0275setComponentScope(U,[u.NgClass,u.NgForOf,u.NgIf,u.NgTemplateOutlet,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.NgModel,h.NgForm,m.TypeaheadDirective,g.ItemTemplateDirective,g.PartialParamHandlerDirective,g.PartialContainerDirective,g.TextContentDirective,q],[]),e.ScrollableDirective=q,e.SearchComponent=U,e.SearchModule=H})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic=e.wm.components.basic||{},e.wm.components.basic.tree={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.core)}(this,(function(e,t,i,n,a){"use strict";var s,o,r=(s=t,o=Object.create(null),s&&Object.keys(s).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(o,e,t.get?t:{enumerable:!0,get:function(){return s[e]}})}})),o.default=s,Object.freeze(o));const l=["wmTree",""],c={widgetType:"wm-tree",hostClass:"app-tree"},d="plus-minus";class p extends n.StylableComponent{static{this.initializeProps=void n.register("wm-tree",new Map([["class",n.PROP_STRING],["dataset",{value:"node1, node2, node3",...n.PROP_ANY}],["datavalue",n.PROP_STRING],["levels",{value:0,...n.PROP_NUMBER}],["name",n.PROP_STRING],["nodeaction",n.PROP_STRING],["nodechildren",n.PROP_STRING],["nodeclick",{value:"none",...n.PROP_STRING}],["nodeicon",n.PROP_STRING],["nodeid",n.PROP_STRING],["nodelabel",n.PROP_STRING],["orderby",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["tabindex",{value:0,...n.PROP_NUMBER}],["treeicons",n.PROP_STRING]]))}constructor(e,t,i,a,s,o){super(e,c),this.binddatavalue=t,this.bindnodelabel=i,this.bindnodeicon=a,this.bindnodechildren=s,this.bindnodeid=o,this.setting={data:{simpleData:{enable:!1}},view:{dblClickExpand:!1,fontCss:{"font-awesome":!0},switchIcon:{}},check:{},callback:{}},n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER),this.setting.view.nodeClasses=this.setNodeClasses,this.setting.callback.onClick=this.onClick.bind(this),this.setting.callback.onExpand=this.onExpand.bind(this),this.setting.callback.onCollapse=this.onCollapse.bind(this)}onPropertyChange(e,t,i){switch(e){case"dataset":this.nodes=this.getNodes(t),this.renderTree();break;case"levels":this.level=t,this.renderTree();break;case"nodeicon":this.nodeicon=t,this.renderTree();break;case"nodelabel":this.nodelabel=t,this.renderTree();break;case"nodechildren":this.nodechildren=t,this.renderTree();break;case"orderby":this.orderby=t,this.renderTree();break;case"treeicons":this.treeicons=t,this.renderTree();break;case"class":this.treeClass=t,this.setTreeTemplate(this.treeClass),this.renderTree();default:super.onPropertyChange(e,t,i)}}expandTree(e,t,i){t.map((t=>{const n=t.children;n&&i<e?(t.open=!0,this.expandTree(e,n,i+1)):i=0}))}setTreeTemplate(e){const t=e.split(" ");t.includes("Classic")?this.setting.check.enable=!1:t.includes("Checkbox")?(this.setting.check.enable=!0,this.setting.check.chkStyle="checkbox"):t.includes("Radio")&&(this.setting.check.enable=!0,this.setting.check.chkStyle="radio",this.setting.check.radioType="all")}getNodesFromString(e){return e.split(",").map((e=>({label:e&&e.trim()})))}getNodes(e){let t;return _.isArray(e)?t=n.getOrderedDataset(e,this.orderby):_.isObject(e)?t=[e]:_.isString(e)&&!_.isEmpty(e)&&(e=e.trim())&&(t=this.getNodesFromString(e)),t}setNodeClasses(e,t){return t.icon?{add:[`${t.icon}`]}:""}changeTreeIcons(e){let t=$('ul[name="'+this.name+'"] li span.button.switch');$(t).map(((t,i)=>{$(i).addClass(e),$(i).on("click",(function(t){setTimeout((()=>{$(i).addClass(e)}),0)}))}))}getPath(e,t){return t=null===e.getParentNode()?"/"+e.name+t:this.getPath(e.getParentNode(),t)+"/"+e.name}onClick(e,t,i,n){if("expand"===this.nodeclick){var a=this.zTree.getSelectedNodes();a.length>0&&this.expandNode(a[0],!a[0].open,!0)}this.selectNode(e,i)}onExpand(e,t,i){let n=this,s=this.getPath(i,"");const o={$event:e,$item:a.getClonedObject(i.data),$path:s};this.invokeEventCallback("expand",o);const r=i.children;r?.map((e=>{if(e.isParent){let t=$(`#${e.tId}_switch`);$(t).addClass(n.treeicons||d),$(t).on("click",(function(e){setTimeout((()=>{$(t).addClass(n.treeicons||d)}),0)}))}}))}onCollapse(e,t,i){let n=this.getPath(i,"");const s={$event:e,$item:a.getClonedObject(i.data),$path:n};this.invokeEventCallback("collapse",s)}constructZTreeData(e,t){e.forEach((e=>{const i={},s=n.getEvaluatedData(e,{field:this.nodelabel,bindExpression:this.bindnodelabel},this.viewParent)||e.label,o=n.getEvaluatedData(e,{field:this.nodeicon,bindExpression:this.bindnodeicon},this.viewParent)||e.icon,r=n.getEvaluatedData(e,{field:this.nodeid,bindExpression:this.bindnodeid},this.viewParent),l=n.getEvaluatedData(e,{field:this.nodechildren,bindExpression:this.bindnodechildren},this.viewParent)||e.children;i.name=s,i.icon=o,i.nodeId=r,i.data=a.getClonedObject(e),_.isArray(l)&&l.length&&(i.children=[],this.constructZTreeData(l,i.children)),t.push(i)}))}renderTree(){this.zTreeNodes=[],this.nodes?.length&&(this.nativeElement.setAttribute("id",this.name),this.constructZTreeData(this.nodes,this.zTreeNodes),this.level>0&&this.expandTree(this.level,this.zTreeNodes,0)),this.zTree=$.fn.zTree.init($('ul[name="'+this.name+'"]'),this.setting,this.zTreeNodes),$.fn.zTreeKeyboardNavigation(this.zTree,$('ul[name="'+this.name+'"]'),null,this.treeicons||d),this.postRenderTree()}setChecked(e,t){t.checked=e.checked;const i=n.getEvaluatedData(t,{field:this.nodechildren,bindExpression:this.bindnodechildren},this.viewParent)||t.children;i?.length&&i.forEach(((t,i)=>{this.setChecked(e.children[i],t)}))}selectNode(e,t){if($(`.app-tree[name=${this.name}] li[treenode].selected`).removeClass("selected"),!t)return;$(`#${t.tId}:has(.curSelectedNode)`).addClass("selected");const i=(this.treeClass||"").split(" ");(i.includes("Checkbox")||i.includes("Radio"))&&this.setChecked(t,t.data);const n=this.getPath(t,"");this.selecteditem=a.getClonedObject(t.data)||{},this.selecteditem.path=n;const s={$event:e,$item:a.getClonedObject(t.data),$path:n},o=t.data[this.nodeaction||"action"];o&&a.$parseEvent(o)(this),this.invokeEventCallback("select",s)}expandNode(e,t,i){this.zTree.expandNode(e,t,!1,!1,i);const n=$(`#${e.tId}_switch`);$(n).addClass(this.treeicons||d)}postRenderTree(){setTimeout((()=>{if(this.changeTreeIcons(this.treeicons||d),this.datavalue&&!this.selecteditem){const e=this.zTree.getNodes();let t;e.length&&("FirstNode"===this.datavalue&&(t=e[0]),"LastNode"===this.datavalue&&(t=e[e.length-1])),t&&(this.zTree.selectNode(t,!1),this.selectNode(void 0,t),this.expandNode(t,!0,!1))}}),200)}selectById(e){const t=this.zTree?.transformToArray(this.zTree.getNodes()),i=t?.find((t=>e===t.nodeId));i&&(this.zTree.selectNode(i,!1),this.selectNode(void 0,i))}deselectById(e){this.selecteditem={},this.selectById()}static{this.\u0275fac=function(e){return new(e||p)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275injectAttribute("datavalue.bind"),r.\u0275\u0275injectAttribute("nodelabel.bind"),r.\u0275\u0275injectAttribute("nodeicon.bind"),r.\u0275\u0275injectAttribute("nodechildren.bind"),r.\u0275\u0275injectAttribute("nodeid.bind"))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:p,selectors:[["ul","wmTree",""]],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(p)]),r.\u0275\u0275InheritDefinitionFeature],attrs:l,decls:2,vars:0,consts:[["id","ztree",1,"ztree"],["wmTree",""]],template:function(e,t){1&e&&r.\u0275\u0275element(0,"ul",0,1)},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(p,[{type:t.Component,args:[{selector:"ul[wmTree]",providers:[n.provideAsWidgetRef(p)],encapsulation:t.ViewEncapsulation.None,template:'<ul #wmTree class="ztree" id="ztree"></ul>  '}]}],(function(){return[{type:r.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["datavalue.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["nodelabel.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["nodeicon.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["nodechildren.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["nodeid.bind"]}]}]}),null);const u=[p];class h{static{this.\u0275fac=function(e){return new(e||h)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:h})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(h,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...u],exports:[...u]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(h,{declarations:[p],imports:[i.CommonModule,n.WmComponentsModule],exports:[p]}),e.TreeComponent=p,e.TreeModule=h})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("ngx-bootstrap/datepicker"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","ngx-bootstrap/datepicker","@wm/core","@wm/components/base"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.calendar={}),e.ng.core,e.ng.common,e.ng.forms,e.datepicker,e.wm.core,e.wm.components.base)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(s);const d=["calendar"],p=["datepicker"],u=["wmCalendar",""],h={start:"prev next today",center:"title",end:"dayGridMonth dayGridWeek dayGridDay"},m="basic",g="list",f="Year",v="Month",b="Week",y="Day",w="Today",P="none",C="single",A={START:"00:00",END:"24:00"},I=e=>{const t=(e=moment(e)).format("YYYY"),i=e.format("MM")-1,n=e.format("DD"),a=e.format("HH"),s=e.format("mm"),o=e.format("ss");return new Date(t,i,n,a,s,o)},E={widgetType:"wm-calendar",hostClass:"app-calendar"};class O extends o.StylableComponent{static{this.initializeProps=(()=>{const e=new Map([["calendartype",{value:"basic",...o.PROP_STRING}],["class",o.PROP_STRING],["tabindex",{value:0,...o.PROP_NUMBER}],["controls",{value:"navigation, today, year, month, week, day",...o.PROP_STRING}],["dataset",o.PROP_ANY],["datavalue",o.PROP_STRING],["eventallday",o.PROP_STRING],["eventclass",o.PROP_STRING],["eventend",o.PROP_STRING],["eventstart",o.PROP_STRING],["eventtitle",o.PROP_STRING],["name",o.PROP_STRING],["show",{value:!0,...o.PROP_BOOLEAN}],["showindevice",{displayType:"inline-block",value:"all",...o.PROP_STRING}],["view",o.PROP_STRING],["selectionmode",o.PROP_STRING]]);o.register("wm-calendar",e)})()}selectDate(){let e,t;_.isObject(this.datavalue)&&!_.isDate(this.datavalue)?(e=moment(this.datavalue.start),t=moment(this.datavalue.end)):(e=moment(this.datavalue),t=moment(this.datavalue).add(1,"day").startOf("day")),this.$fullCalendar.gotoDate(moment(e)._d),this.$fullCalendar.select(e.valueOf(),t.valueOf())}gotoDate(){this.$fullCalendar.gotoDate(moment(this.datavalue)._d)}gotoNextYear(){this.$fullCalendar.nextYear()}gotoPrevYear(){this.$fullCalendar.prevYear()}gotoMonth(e){let t=this.$fullCalendar.getDate();const i=t.getMonth();t=moment(t),i<e?this.$fullCalendar.gotoDate(t.add(e-i-1,"M").valueOf()):this.$fullCalendar.gotoDate(t.subtract(i-e+1,"M").valueOf())}gotoNextMonth(){const e=moment(this.$fullCalendar.getDate());this.$fullCalendar.gotoDate(e.add(1,"M").valueOf())}gotoPrevMonth(){const e=moment(this.$fullCalendar.getDate());this.$fullCalendar.gotoDate(e.subtract(1,"M").valueOf())}rerenderEvents(){this.$fullCalendar.render()}setSelectedData(e,t){let i=this.dataset;if(!i)return;const n=[],a=this.eventstart||"start",s=this.eventend||"end",o=moment(new Date(e)).format("MM/DD/YYYY"),r=moment(new Date(t)).subtract(1,"days").format("MM/DD/YYYY");return i=i.data||i,i.forEach((e=>{if(!e[a])return;const t=moment(new Date(e[a])).format("MM/DD/YYYY"),i=moment(new Date(e[s]||e[a])).format("MM/DD/YYYY");moment(t).isSameOrAfter(o)&&moment(i).isSameOrBefore(r)&&n.push(e)})),n}eventDrop(e){let t=this.convertEventObjForOldAndNewData(e.event),i=this.convertEventObjForOldAndNewData(e.oldEvent);this.invokeEventCallback("eventdrop",{$event:e.jsEvent,$newData:t,$oldData:i,$delta:e.delta,$revertFunc:e.revert,$ui:{},$view:e.view})}getDefaultDate(){if(this.datavalue)return new Date(this.datavalue)}getDefaultOptions(){return this.calendarOptions}getLib(){return"fullcalendar"}select(e){this.selecteddates={start:I(e.start),end:I(e.end)},this.selecteddata=this.setSelectedData(e.start,e.end),this.invokeEventCallback("select",{$start:e.start.valueOf(),$end:e.end.valueOf(),$view:e.view,$data:this.selecteddata})}unselect(){this.$fullCalendar.unselect()}convertEventObj(e){if(!e.extendedProps._eventMetadata)return e;const t=e.extendedProps._eventMetadata;return Object.setPrototypeOf(t,e),t}convertEventObjForOldAndNewData(e){const t=e.extendedProps;return _.extend(e,t),e}eventResize(e){let t=this.convertEventObjForOldAndNewData(e.event),i=this.convertEventObjForOldAndNewData(e.oldEvent);this.invokeEventCallback("eventresize",{$event:e.jsEvent,$newData:t,$oldData:i,$delta:e.delta,$revertFunc:e.revert,$ui:{},$view:e.view})}onEventChangeStart(e){this.oldData=s.getClonedObject(e)}eventClick(e){let t=this.convertEventObj(e.event);this.invokeEventCallback("eventclick",{$event:e.jsEvent,$data:t,$view:e.view})}eventDidMount(e){let t=this.convertEventObj(e.event);this.calendartype===g&&this.$element.find(".fc-list-table").addClass("table"),this.invokeEventCallback("eventrender",{$event:e.el,$data:t,$view:e.view})}viewDidMount(e){this.calendartype===g&&this.$element.find(".fc-list-table").addClass("table"),this.invokeEventCallback("viewrender",{$view:e})}datesSet(e){this.currentview={start:moment(e.start).format("YYYY-MM-DD"),end:moment(e.end).format("YYYY-MM-DD")}}dateClick(e){const t=I(e.date).valueOf();this.invokeEventCallback("dateclick",{$dateInfo:t})}updateCalendarHeaderOptions(){const e=this.controls,t=this.calendartype,i=new RegExp("\\bday\\b","g");let n="",a="";e&&t&&(_.includes(e,"navigation")&&(n+=" prev next"),_.includes(e,"today")&&(n+=" today"),_.includes(e,"year")&&(a+=t===g?"listYear":""),_.includes(e,"month")&&(a+=t===g?" listMonth":" dayGridMonth"),_.includes(e,"week")&&(a+=t===m?" dayGridWeek":t===g?" listWeek":" timeGridWeek"),i.test(e)&&(a+=t===m?" dayGridDay":t===g?" listDay":" timeGridDay")," "===n.charAt(0)&&(n=n.substring(1))," "===a.charAt(0)&&(a=a.substring(1)),_.extend(this.calendarOptions.calendar.headerToolbar,{start:n,end:a}))}constructor(e,t){super(e,E),this.controls="navigation, today, year, month, week, day",this.eventSources=[],this.dataSetEvents={events:[]},this.changesStack=[],this.calendarOptions={calendar:{height:600,eventSources:this.eventSources,editable:!0,locale:s.getSessionStorageItem("selectedLocale")||"en",selectable:!1,longPressDelay:s.isMobile()?1:1e3,headerToolbar:h,nextDayThreshold:A,views:{month:{dayMaxEventsRow:!0}},unselectAuto:!1,eventDrop:this.eventDrop.bind(this),eventResizeStart:this.onEventChangeStart.bind(this),eventDragStart:this.onEventChangeStart.bind(this),eventResize:this.eventResize.bind(this),eventClick:this.eventClick.bind(this),select:this.select.bind(this),eventDidMount:this.eventDidMount.bind(this),viewDidMount:this.viewDidMount.bind(this),datesSet:this.datesSet.bind(this),dateClick:this.dateClick.bind(this)}},this.dayClass=[],this.eventSources.push(this.dataSetEvents);const i=window.FullCalendar;i.__wm_locale_initialized||(t.initCalendarLocale(),i.__wm_locale_initialized=!0),this.cancelLocaleChangeSubscription=this.getAppInstance().subscribe("locale-changed",(e=>{this.setLocale(),this.applyCalendarOptions("option","locale",e.fullCalendar||"en"),this.redraw()}))}ngOnInit(){super.ngOnInit(),o.styler(this.nativeElement,this,o.APPLY_STYLES_TYPE.CONTAINER,["height"]),this.setLocale()}onStyleChange(e,t,i){super.onStyleChange(e,t,i),"height"===e&&(this.calendarOptions.calendar.height=this.calculateHeight(t),this.updateCalendarOptions("option","height",this.calendarOptions.calendar.height))}onPropertyChange(e,t,i){switch(super.onPropertyChange(e,t,i),e){case"selectionmode":t!==P?(this.calendarOptions.calendar.selectable=!0,this.updateCalendarOptions("option","selectable",!0),t===C?(this.calendarOptions.calendar.selectConstraint={startTime:"00:00",endTime:"24:00"},this.updateCalendarOptions("option","selectConstraint",this.calendarOptions.calendar.selectConstraint)):this.updateCalendarOptions("option","selectConstraint",{})):(this.calendarOptions.calendar.selectable=!1,this.updateCalendarOptions("option","selectable",!1));break;case"view":"month"!==t||this.calendartype===g?this.calendarOptions.calendar.defaultView=this.calendartype+_.capitalize(t):this.calendarOptions.calendar.defaultView=t,this.updateCalendarOptions("changeView",this.calendarOptions.calendar.defaultView);break;case"calendartype":this.calendartype=t||"dayGrid";case"controls":this.updateCalendarHeaderOptions();break;case"dataset":let e;this.dataset=t,e=o.createArrayFrom(s.getClonedObject(t)),e=this.constructCalendarDataset(e),this.dataSetEvents.events=e.filter((e=>{if(e.start=e.start||e.end,e.start)return!0})),this.renderEventDataSet();break;case"show":this.$fullCalendar?.changeView(this.getViewType(this.view?this.view:"dayGridMonth"))}}calculateHeight(e){const t=$(this.nativeElement).parent(),i=e||"650px";let n,a=t.css("height");return _.includes(i,"%")?(_.includes(a,"%")&&(a=t.height()),n=parseInt(a,10)*Number(i.replace(/\%/g,""))/100):n=parseInt(i,10),this.calendarOptions.calendar.views.month.eventLimit=parseInt(""+n/200,10)+1,n}ngAfterViewInit(){super.ngAfterViewInit();const e=this._calendar.nativeElement,t=new window.FullCalendar.Calendar(e,this.calendarOptions.calendar);this.$fullCalendar=t,this.invokeEventCallback("beforerender",{$event:{}}),t.render(),this.changesStack.length&&(this.changesStack.forEach((e=>{this.applyCalendarOptions(e.operationType,e.argumentKey,e.argumentValue)})),this.changesStack.length=0),setTimeout((()=>{this.$fullCalendar.changeView(this.getViewType(this.view?this.view:"dayGridMonth"))}),50)}constructCalendarDataset(e){const t={title:this.eventtitle||"title",allDay:this.eventallday||"allday",start:this.eventstart||"start",end:this.eventend||"end",className:this.eventclass||"className"};return e.forEach((e=>{e._eventMetadata=_.clone(e),_.isEmpty(e._eventMetadata.url)&&delete e._eventMetadata.url,_.isEmpty(e.url)&&delete e.url,_.mapKeys(t,((t,i)=>{let n;n="title"===i?o.getEvaluatedData(e,{expression:t},this.viewParent):"allDay"===i?!!_.get(e,t):_.get(e,t),n&&(e[i]=n)}))})),e}setLocale(){const e=_.get(this.appLocale,"LABEL_CALENDAR_YEAR")||f,t=_.get(this.appLocale,"LABEL_CALENDAR_MONTH")||v,i=_.get(this.appLocale,"LABEL_CALENDAR_WEEK")||b,n=_.get(this.appLocale,"LABEL_CALENDAR_DAY")||y,a=_.get(this.appLocale,"LABEL_CALENDAR_TODAY")||w;this.calendarOptions.calendar.buttonText={year:e,month:t,week:i,day:n,today:a,listYear:e,listMonth:t,listWeek:i,listDay:n}}overrideDefaults(e){_.isObject(e)&&Object.entries(e).map((e=>this.$fullCalendar.setOption(e[0],e[1])))}updateCalendarOptions(e,t,i){this.$fullCalendar?this.applyCalendarOptions(e,t,i):this.changesStack.push({operationType:e,argumentKey:t,argumentValue:i})}redraw(){this.updateCalendarOptions("render"),this.$fullCalendar?.changeView(this.getViewType(this.view?this.view:"dayGridMonth"))}onValueChange(e){this.proxyModel=e;const t=this.proxyModel&&moment(this.proxyModel).startOf("day").format("YYYY/MM/DD"),i=this.eventData[t],n=moment(this.proxyModel),a=moment(this.proxyModel).endOf("day");this.selecteddata=i,this.selecteddates={start:moment(t).valueOf(),end:moment(t).endOf("day").valueOf()},this.calendarOptions.calendar.select(n.valueOf(),a.valueOf(),{},this,i),i&&this.calendarOptions.calendar.eventClick(i,{},this)}addEventSource(e){if(_.isEmpty(e))console.warn("addEventSource method requires an object as a parameter.");else if("google"===e.source){if(!e.googleCalendarApiKey||!e.googleCalendarId)return void console.warn("For google calendar integration, 'googleCalendarApiKey' and 'googleCalendarId' should be passed in the parameter object.");this.$fullCalendar.setOption("googleCalendarApiKey",e.googleCalendarApiKey),this.$fullCalendar.addEventSource({googleCalendarId:e.googleCalendarId})}}getViewType(e){const t=this.calendartype,i=this.view;let n;return n="month"===i?t===g?"listMonth":"dayGridMonth":"week"===i?t===m?"dayGridWeek":t===g?"listWeek":"timeGridWeek":"day"===i?t===m?"dayGridDay":t===g?"listDay":"timeGridDay":"year"===i?t===g?"listYear":"":e,n}applyCalendarOptions(e,t,i){switch(e){case"render":this.$fullCalendar.render();break;case"option":this.$fullCalendar.setOption(t,i);break;case"changeView":const e=this.getViewType(t);this.$fullCalendar.changeView(e)}}renderEventDataSet(){const e=this;this.$fullCalendar.batchRendering((function(){const t=e.$fullCalendar.getEvents();_.each(t,(function(t){e.$fullCalendar.getEventById(t.id).remove()})),_.each(e.dataSetEvents.events,(function(t){e.$fullCalendar.addEvent(t)}))}))}ngOnDestroy(){this.cancelLocaleChangeSubscription&&this.cancelLocaleChangeSubscription()}static{this.\u0275fac=function(e){return new(e||O)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275directiveInject(c.AbstractI18nService))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:O,selectors:[["","wmCalendar",""]],viewQuery:function(e,t){if(1&e&&(l.\u0275\u0275viewQuery(d,5),l.\u0275\u0275viewQuery(p,5)),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t._calendar=e.first),l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t._datepicker=e.first)}},features:[l.\u0275\u0275ProvidersFeature([o.provideAsWidgetRef(O)]),l.\u0275\u0275InheritDefinitionFeature],attrs:u,decls:2,vars:1,consts:[["calendar",""]],template:function(e,t){1&e&&l.\u0275\u0275element(0,"div",null,0),2&e&&l.\u0275\u0275attribute("aria-label",t.view||"month")},styles:['.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc *:before,.fc *:after{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc th,.fc td{vertical-align:top;padding:0}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid #ddd;border:1px solid var(--fc-border-color, #ddd)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;src:url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=) format("truetype");font-weight:400;font-style:normal}.fc-icon{display:inline-block;width:1em;height:1em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-family:fcicons!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;overflow:visible;text-transform:none;margin:0;font-family:inherit;font-size:inherit;line-height:inherit}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button::-moz-focus-inner{padding:0;border-style:none}.fc .fc-button{display:inline-block;font-weight:400;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.4em .65em;font-size:1em;line-height:1.5;border-radius:.25em}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{outline:0;box-shadow:0 0 0 .2rem #2c3e5040}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{color:#fff;color:var(--fc-button-text-color, #fff);background-color:#2c3e50;background-color:var(--fc-button-bg-color, #2C3E50);border-color:#2c3e50;border-color:var(--fc-button-border-color, #2C3E50)}.fc .fc-button-primary:hover{color:#fff;color:var(--fc-button-text-color, #fff);background-color:#1e2b37;background-color:var(--fc-button-hover-bg-color, #1e2b37);border-color:#1a252f;border-color:var(--fc-button-hover-border-color, #1a252f)}.fc .fc-button-primary:disabled{color:#fff;color:var(--fc-button-text-color, #fff);background-color:#2c3e50;background-color:var(--fc-button-bg-color, #2C3E50);border-color:#2c3e50;border-color:var(--fc-button-border-color, #2C3E50)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem #4c5b6a80}.fc .fc-button-primary:not(:disabled):active,.fc .fc-button-primary:not(:disabled).fc-button-active{color:#fff;color:var(--fc-button-text-color, #fff);background-color:#1a252f;background-color:var(--fc-button-active-bg-color, #1a252f);border-color:#151e27;border-color:var(--fc-button-active-border-color, #151e27)}.fc .fc-button-primary:not(:disabled):active:focus,.fc .fc-button-primary:not(:disabled).fc-button-active:focus{box-shadow:0 0 0 .2rem #4c5b6a80}.fc .fc-button .fc-icon{vertical-align:middle;font-size:1.5em}.fc .fc-button-group{position:relative;display:inline-flex;vertical-align:middle}.fc .fc-button-group>.fc-button{position:relative;flex:1 1 auto}.fc .fc-button-group>.fc-button:hover{z-index:1}.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button.fc-button-active{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){margin-left:-1px;border-top-left-radius:0;border-bottom-left-radius:0}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){margin-right:-1px;border-top-right-radius:0;border-bottom-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-top-left-radius:0;border-bottom-left-radius:0}.fc .fc-toolbar{display:flex;justify-content:space-between;align-items:center}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{position:absolute;inset:0}.fc .fc-scroller-harness{position:relative;overflow:hidden;direction:ltr}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid #ddd;border:1px solid var(--fc-border-color, #ddd)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{width:100%;table-layout:fixed}.fc .fc-scrollgrid table{border-top-style:hidden;border-left-style:hidden;border-right-style:hidden}.fc .fc-scrollgrid{border-collapse:separate;border-right-width:0;border-bottom-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section{height:1px}.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section table{height:1px}.fc .fc-scrollgrid-section-liquid{height:auto}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-top-width:0;border-left-width:0}.fc .fc-scrollgrid-section-header>*,.fc .fc-scrollgrid-section-footer>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:#fff;background:var(--fc-page-bg-color, #fff);position:sticky;z-index:2}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{position:absolute;inset:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-non-business,.fc .fc-highlight{position:absolute;inset:0}.fc .fc-non-business{background:#d7d7d74d;background:var(--fc-non-business-color, rgba(215, 215, 215, .3))}.fc .fc-bg-event{background:#8fdf82;background:var(--fc-bg-event-color, rgb(143, 223, 130));opacity:.3;opacity:var(--fc-bg-event-opacity, .3)}.fc .fc-bg-event .fc-event-title{margin:.5em;font-size:.85em;font-size:var(--fc-small-font-size, .85em);font-style:italic}.fc .fc-highlight{background:#bce8f14d;background:var(--fc-highlight-color, rgba(188, 232, 241, .3))}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:#d0d0d04d;background:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3))}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event[href],.fc-event.fc-event-draggable{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px #0000004d}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event:hover .fc-event-resizer,.fc-event-selected .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{border-radius:4px;border-radius:calc(var(--fc-event-resizer-dot-total-width, 8px) / 2);border-width:1px;border-width:var(--fc-event-resizer-dot-border-width, 1px);width:8px;width:var(--fc-event-resizer-dot-total-width, 8px);height:8px;height:var(--fc-event-resizer-dot-total-width, 8px);border-style:solid;border-color:inherit;background:#fff;background:var(--fc-page-bg-color, #fff)}.fc-event-selected .fc-event-resizer:before{content:"";position:absolute;inset:-20px}.fc-event-selected{box-shadow:0 2px 5px #0003}.fc-event-selected:before{content:"";position:absolute;z-index:3;inset:0}.fc-event-selected:after{content:"";background:#00000040;background:var(--fc-event-selected-overlay-color, rgba(0, 0, 0, .25));position:absolute;z-index:1;inset:-1px}.fc-h-event{display:block;border:1px solid #3788d8;border:1px solid var(--fc-event-border-color, #3788d8);background-color:#3788d8;background-color:var(--fc-event-bg-color, #3788d8)}.fc-h-event .fc-event-main{color:#fff;color:var(--fc-event-text-color, #fff)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;vertical-align:top;left:0;right:0;max-width:100%;overflow:hidden}.fc-h-event.fc-event-selected:before{top:-10px;bottom:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-top-right-radius:0;border-bottom-right-radius:0;border-right-width:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{top:0;bottom:0;width:8px;width:var(--fc-event-resizer-thickness, 8px)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:-4px;left:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:-4px;right:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-h-event.fc-event-selected .fc-event-resizer{top:50%;margin-top:-4px;margin-top:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:-4px;left:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:-4px;right:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}:root{--fc-daygrid-event-dot-width: 8px}.fc .fc-popover{position:fixed;top:0;box-shadow:0 2px 6px #00000026}.fc .fc-popover-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;opacity:.65;font-size:1.1em}.fc-theme-standard .fc-popover{border:1px solid #ddd;border:1px solid var(--fc-border-color, #ddd);background:#fff;background:var(--fc-page-bg-color, #fff)}.fc-theme-standard .fc-popover-header{background:#d0d0d04d;background:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3))}.fc-daygrid-day-frame:before,.fc-daygrid-day-events:before,.fc-daygrid-event-harness:before{content:"";clear:both;display:table}.fc-daygrid-day-frame:after,.fc-daygrid-day-events:after,.fc-daygrid-event-harness:after{content:"";clear:both;display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:#ffdc2826;background-color:var(--fc-today-bg-color, rgba(255, 220, 40, .15))}.fc .fc-daygrid-day-frame{position:relative;min-height:100%}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{position:relative;z-index:4;padding:4px}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{position:absolute;left:0;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{position:relative;min-height:2em}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{position:absolute;top:0;left:0;right:0}.fc .fc-daygrid-bg-harness{position:absolute;top:0;bottom:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{z-index:6;margin-top:1px}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:2px 3px 0}.fc .fc-daygrid-more-link{position:relative;z-index:4;cursor:pointer}.fc .fc-daygrid-week-number{position:absolute;z-index:5;top:0;padding:2px;min-width:1.5em;text-align:center;background-color:#d0d0d04d;background-color:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3));color:gray;color:var(--fc-neutral-text-color, #808080)}.fc .fc-more-popover{z-index:8}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-week-number{left:0;border-radius:0 0 3px}.fc-direction-rtl .fc-daygrid-week-number{right:0;border-radius:0 0 0 3px}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{position:relative;white-space:nowrap;border-radius:3px;font-size:.85em;font-size:var(--fc-small-font-size, .85em)}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{display:flex;align-items:center;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;min-width:0;overflow:hidden;font-weight:700}.fc-daygrid-dot-event:hover,.fc-daygrid-dot-event.fc-event-mirror{background:#0000001a}.fc-daygrid-dot-event.fc-event-selected:before{top:-10px;bottom:-10px}.fc-daygrid-event-dot{margin:0 4px;box-sizing:content-box;width:0;height:0;border:4px solid #3788d8;border:calc(var(--fc-daygrid-event-dot-width, 8px) / 2) solid var(--fc-event-border-color, #3788d8);border-radius:4px;border-radius:calc(var(--fc-daygrid-event-dot-width, 8px) / 2)}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}.fc-v-event{display:block;border:1px solid #3788d8;border:1px solid var(--fc-event-border-color, #3788d8);background-color:#3788d8;background-color:var(--fc-event-bg-color, #3788d8)}.fc-v-event .fc-event-main{color:#fff;color:var(--fc-event-text-color, #fff);height:100%}.fc-v-event .fc-event-main-frame{height:100%;display:flex;flex-direction:column}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{top:0;bottom:0;max-height:100%;overflow:hidden}.fc-v-event:not(.fc-event-start){border-top-width:0;border-top-left-radius:0;border-top-right-radius:0}.fc-v-event:not(.fc-event-end){border-bottom-width:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:8px;height:var(--fc-event-resizer-thickness, 8px);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:-4px;top:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:-4px;bottom:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:-4px;margin-left:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:-4px;top:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:-4px;bottom:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{position:relative;z-index:1;min-height:100%}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table{position:relative;z-index:1}.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{height:1.5em;border-bottom:0}.fc .fc-timegrid-slot:empty:before{content:"\\a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{overflow:hidden;display:flex;align-items:center;justify-content:flex-end}.fc .fc-timegrid-axis-cushion{max-width:60px;flex-shrink:0}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{height:auto;position:absolute;inset:0}.fc .fc-timegrid-col.fc-day-today{background-color:#ffdc2826;background-color:var(--fc-today-bg-color, rgba(255, 220, 40, .15))}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-liquid-hack .fc-timegrid-col-frame{height:auto;position:absolute;inset:0}.fc-media-screen .fc-timegrid-cols{position:absolute;inset:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{position:absolute;top:0;left:0;right:0}.fc-media-screen .fc-timegrid-event-harness{position:absolute}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{position:absolute;left:0;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror{box-shadow:0 0 0 1px #fff;box-shadow:0 0 0 1px var(--fc-page-bg-color, #fff)}.fc-timegrid-event{font-size:.85em;font-size:var(--fc-small-font-size, .85em);border-radius:3px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{white-space:nowrap;font-size:.85em;font-size:var(--fc-small-font-size, .85em);margin-bottom:1px}.fc-timegrid-event-condensed .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-condensed .fc-event-time:after{content:"\\a0-\\a0"}.fc-timegrid-event-condensed .fc-event-title{font-size:.85em;font-size:var(--fc-small-font-size, .85em)}.fc-media-screen .fc-timegrid-event{position:absolute;inset:0 0 1px}.fc .fc-timegrid-now-indicator-line{position:absolute;z-index:4;left:0;right:0;border-style:solid;border-color:red;border-color:var(--fc-now-indicator-color, red);border-width:1px 0 0}.fc .fc-timegrid-now-indicator-arrow{position:absolute;z-index:4;margin-top:-5px;border-style:solid;border-color:red;border-color:var(--fc-now-indicator-color, red)}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{left:0;border-width:5px 0 5px 6px;border-top-color:transparent;border-bottom-color:transparent}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{right:0;border-width:5px 6px 5px 0;border-top-color:transparent;border-bottom-color:transparent}:root{--fc-list-event-dot-width: 10px;--fc-list-event-hover-bg-color: #f5f5f5}.fc-theme-standard .fc-list{border:1px solid #ddd;border:1px solid var(--fc-border-color, #ddd)}.fc .fc-list-empty{background-color:#d0d0d04d;background-color:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3));height:100%;display:flex;justify-content:center;align-items:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{width:100%;border-style:hidden}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{position:sticky;top:0;background:#fff;background:var(--fc-page-bg-color, #fff)}.fc .fc-list-table th{padding:0}.fc .fc-list-table td,.fc .fc-list-day-cushion{padding:8px 14px}.fc .fc-list-day-cushion:after{content:"";clear:both;display:table}.fc-theme-standard .fc-list-day-cushion{background-color:#d0d0d04d;background-color:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3))}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:#f5f5f5;background-color:var(--fc-list-event-hover-bg-color, #f5f5f5)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{display:inline-block;box-sizing:content-box;width:0;height:0;border:5px solid #3788d8;border:calc(var(--fc-list-event-dot-width, 10px) / 2) solid var(--fc-event-border-color, #3788d8);border-radius:5px;border-radius:calc(var(--fc-list-event-dot-width, 10px) / 2)}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}.fc-theme-bootstrap a:not([href]){color:inherit}\n'],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(O,[{type:t.Component,args:[{selector:"[wmCalendar]",providers:[o.provideAsWidgetRef(O)],encapsulation:t.ViewEncapsulation.None,template:"<div #calendar [attr.aria-label]=\"view || 'month'\"></div>\n",styles:['.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc *:before,.fc *:after{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc th,.fc td{vertical-align:top;padding:0}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid #ddd;border:1px solid var(--fc-border-color, #ddd)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;src:url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=) format("truetype");font-weight:400;font-style:normal}.fc-icon{display:inline-block;width:1em;height:1em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-family:fcicons!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;overflow:visible;text-transform:none;margin:0;font-family:inherit;font-size:inherit;line-height:inherit}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button::-moz-focus-inner{padding:0;border-style:none}.fc .fc-button{display:inline-block;font-weight:400;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.4em .65em;font-size:1em;line-height:1.5;border-radius:.25em}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{outline:0;box-shadow:0 0 0 .2rem #2c3e5040}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{color:#fff;color:var(--fc-button-text-color, #fff);background-color:#2c3e50;background-color:var(--fc-button-bg-color, #2C3E50);border-color:#2c3e50;border-color:var(--fc-button-border-color, #2C3E50)}.fc .fc-button-primary:hover{color:#fff;color:var(--fc-button-text-color, #fff);background-color:#1e2b37;background-color:var(--fc-button-hover-bg-color, #1e2b37);border-color:#1a252f;border-color:var(--fc-button-hover-border-color, #1a252f)}.fc .fc-button-primary:disabled{color:#fff;color:var(--fc-button-text-color, #fff);background-color:#2c3e50;background-color:var(--fc-button-bg-color, #2C3E50);border-color:#2c3e50;border-color:var(--fc-button-border-color, #2C3E50)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem #4c5b6a80}.fc .fc-button-primary:not(:disabled):active,.fc .fc-button-primary:not(:disabled).fc-button-active{color:#fff;color:var(--fc-button-text-color, #fff);background-color:#1a252f;background-color:var(--fc-button-active-bg-color, #1a252f);border-color:#151e27;border-color:var(--fc-button-active-border-color, #151e27)}.fc .fc-button-primary:not(:disabled):active:focus,.fc .fc-button-primary:not(:disabled).fc-button-active:focus{box-shadow:0 0 0 .2rem #4c5b6a80}.fc .fc-button .fc-icon{vertical-align:middle;font-size:1.5em}.fc .fc-button-group{position:relative;display:inline-flex;vertical-align:middle}.fc .fc-button-group>.fc-button{position:relative;flex:1 1 auto}.fc .fc-button-group>.fc-button:hover{z-index:1}.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button.fc-button-active{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){margin-left:-1px;border-top-left-radius:0;border-bottom-left-radius:0}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){margin-right:-1px;border-top-right-radius:0;border-bottom-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-top-left-radius:0;border-bottom-left-radius:0}.fc .fc-toolbar{display:flex;justify-content:space-between;align-items:center}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{position:absolute;inset:0}.fc .fc-scroller-harness{position:relative;overflow:hidden;direction:ltr}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid #ddd;border:1px solid var(--fc-border-color, #ddd)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{width:100%;table-layout:fixed}.fc .fc-scrollgrid table{border-top-style:hidden;border-left-style:hidden;border-right-style:hidden}.fc .fc-scrollgrid{border-collapse:separate;border-right-width:0;border-bottom-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section{height:1px}.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section table{height:1px}.fc .fc-scrollgrid-section-liquid{height:auto}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-top-width:0;border-left-width:0}.fc .fc-scrollgrid-section-header>*,.fc .fc-scrollgrid-section-footer>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:#fff;background:var(--fc-page-bg-color, #fff);position:sticky;z-index:2}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{position:absolute;inset:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-non-business,.fc .fc-highlight{position:absolute;inset:0}.fc .fc-non-business{background:#d7d7d74d;background:var(--fc-non-business-color, rgba(215, 215, 215, .3))}.fc .fc-bg-event{background:#8fdf82;background:var(--fc-bg-event-color, rgb(143, 223, 130));opacity:.3;opacity:var(--fc-bg-event-opacity, .3)}.fc .fc-bg-event .fc-event-title{margin:.5em;font-size:.85em;font-size:var(--fc-small-font-size, .85em);font-style:italic}.fc .fc-highlight{background:#bce8f14d;background:var(--fc-highlight-color, rgba(188, 232, 241, .3))}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:#d0d0d04d;background:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3))}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event[href],.fc-event.fc-event-draggable{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px #0000004d}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event:hover .fc-event-resizer,.fc-event-selected .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{border-radius:4px;border-radius:calc(var(--fc-event-resizer-dot-total-width, 8px) / 2);border-width:1px;border-width:var(--fc-event-resizer-dot-border-width, 1px);width:8px;width:var(--fc-event-resizer-dot-total-width, 8px);height:8px;height:var(--fc-event-resizer-dot-total-width, 8px);border-style:solid;border-color:inherit;background:#fff;background:var(--fc-page-bg-color, #fff)}.fc-event-selected .fc-event-resizer:before{content:"";position:absolute;inset:-20px}.fc-event-selected{box-shadow:0 2px 5px #0003}.fc-event-selected:before{content:"";position:absolute;z-index:3;inset:0}.fc-event-selected:after{content:"";background:#00000040;background:var(--fc-event-selected-overlay-color, rgba(0, 0, 0, .25));position:absolute;z-index:1;inset:-1px}.fc-h-event{display:block;border:1px solid #3788d8;border:1px solid var(--fc-event-border-color, #3788d8);background-color:#3788d8;background-color:var(--fc-event-bg-color, #3788d8)}.fc-h-event .fc-event-main{color:#fff;color:var(--fc-event-text-color, #fff)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;vertical-align:top;left:0;right:0;max-width:100%;overflow:hidden}.fc-h-event.fc-event-selected:before{top:-10px;bottom:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-top-right-radius:0;border-bottom-right-radius:0;border-right-width:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{top:0;bottom:0;width:8px;width:var(--fc-event-resizer-thickness, 8px)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:-4px;left:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:-4px;right:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-h-event.fc-event-selected .fc-event-resizer{top:50%;margin-top:-4px;margin-top:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:-4px;left:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:-4px;right:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}:root{--fc-daygrid-event-dot-width: 8px}.fc .fc-popover{position:fixed;top:0;box-shadow:0 2px 6px #00000026}.fc .fc-popover-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;opacity:.65;font-size:1.1em}.fc-theme-standard .fc-popover{border:1px solid #ddd;border:1px solid var(--fc-border-color, #ddd);background:#fff;background:var(--fc-page-bg-color, #fff)}.fc-theme-standard .fc-popover-header{background:#d0d0d04d;background:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3))}.fc-daygrid-day-frame:before,.fc-daygrid-day-events:before,.fc-daygrid-event-harness:before{content:"";clear:both;display:table}.fc-daygrid-day-frame:after,.fc-daygrid-day-events:after,.fc-daygrid-event-harness:after{content:"";clear:both;display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:#ffdc2826;background-color:var(--fc-today-bg-color, rgba(255, 220, 40, .15))}.fc .fc-daygrid-day-frame{position:relative;min-height:100%}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{position:relative;z-index:4;padding:4px}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{position:absolute;left:0;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{position:relative;min-height:2em}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{position:absolute;top:0;left:0;right:0}.fc .fc-daygrid-bg-harness{position:absolute;top:0;bottom:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{z-index:6;margin-top:1px}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:2px 3px 0}.fc .fc-daygrid-more-link{position:relative;z-index:4;cursor:pointer}.fc .fc-daygrid-week-number{position:absolute;z-index:5;top:0;padding:2px;min-width:1.5em;text-align:center;background-color:#d0d0d04d;background-color:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3));color:gray;color:var(--fc-neutral-text-color, #808080)}.fc .fc-more-popover{z-index:8}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-week-number{left:0;border-radius:0 0 3px}.fc-direction-rtl .fc-daygrid-week-number{right:0;border-radius:0 0 0 3px}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{position:relative;white-space:nowrap;border-radius:3px;font-size:.85em;font-size:var(--fc-small-font-size, .85em)}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{display:flex;align-items:center;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;min-width:0;overflow:hidden;font-weight:700}.fc-daygrid-dot-event:hover,.fc-daygrid-dot-event.fc-event-mirror{background:#0000001a}.fc-daygrid-dot-event.fc-event-selected:before{top:-10px;bottom:-10px}.fc-daygrid-event-dot{margin:0 4px;box-sizing:content-box;width:0;height:0;border:4px solid #3788d8;border:calc(var(--fc-daygrid-event-dot-width, 8px) / 2) solid var(--fc-event-border-color, #3788d8);border-radius:4px;border-radius:calc(var(--fc-daygrid-event-dot-width, 8px) / 2)}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}.fc-v-event{display:block;border:1px solid #3788d8;border:1px solid var(--fc-event-border-color, #3788d8);background-color:#3788d8;background-color:var(--fc-event-bg-color, #3788d8)}.fc-v-event .fc-event-main{color:#fff;color:var(--fc-event-text-color, #fff);height:100%}.fc-v-event .fc-event-main-frame{height:100%;display:flex;flex-direction:column}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{top:0;bottom:0;max-height:100%;overflow:hidden}.fc-v-event:not(.fc-event-start){border-top-width:0;border-top-left-radius:0;border-top-right-radius:0}.fc-v-event:not(.fc-event-end){border-bottom-width:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:8px;height:var(--fc-event-resizer-thickness, 8px);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:-4px;top:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:-4px;bottom:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:-4px;margin-left:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:-4px;top:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:-4px;bottom:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{position:relative;z-index:1;min-height:100%}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table{position:relative;z-index:1}.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{height:1.5em;border-bottom:0}.fc .fc-timegrid-slot:empty:before{content:"\\a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{overflow:hidden;display:flex;align-items:center;justify-content:flex-end}.fc .fc-timegrid-axis-cushion{max-width:60px;flex-shrink:0}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{height:auto;position:absolute;inset:0}.fc .fc-timegrid-col.fc-day-today{background-color:#ffdc2826;background-color:var(--fc-today-bg-color, rgba(255, 220, 40, .15))}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-liquid-hack .fc-timegrid-col-frame{height:auto;position:absolute;inset:0}.fc-media-screen .fc-timegrid-cols{position:absolute;inset:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{position:absolute;top:0;left:0;right:0}.fc-media-screen .fc-timegrid-event-harness{position:absolute}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{position:absolute;left:0;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror{box-shadow:0 0 0 1px #fff;box-shadow:0 0 0 1px var(--fc-page-bg-color, #fff)}.fc-timegrid-event{font-size:.85em;font-size:var(--fc-small-font-size, .85em);border-radius:3px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{white-space:nowrap;font-size:.85em;font-size:var(--fc-small-font-size, .85em);margin-bottom:1px}.fc-timegrid-event-condensed .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-condensed .fc-event-time:after{content:"\\a0-\\a0"}.fc-timegrid-event-condensed .fc-event-title{font-size:.85em;font-size:var(--fc-small-font-size, .85em)}.fc-media-screen .fc-timegrid-event{position:absolute;inset:0 0 1px}.fc .fc-timegrid-now-indicator-line{position:absolute;z-index:4;left:0;right:0;border-style:solid;border-color:red;border-color:var(--fc-now-indicator-color, red);border-width:1px 0 0}.fc .fc-timegrid-now-indicator-arrow{position:absolute;z-index:4;margin-top:-5px;border-style:solid;border-color:red;border-color:var(--fc-now-indicator-color, red)}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{left:0;border-width:5px 0 5px 6px;border-top-color:transparent;border-bottom-color:transparent}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{right:0;border-width:5px 6px 5px 0;border-top-color:transparent;border-bottom-color:transparent}:root{--fc-list-event-dot-width: 10px;--fc-list-event-hover-bg-color: #f5f5f5}.fc-theme-standard .fc-list{border:1px solid #ddd;border:1px solid var(--fc-border-color, #ddd)}.fc .fc-list-empty{background-color:#d0d0d04d;background-color:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3));height:100%;display:flex;justify-content:center;align-items:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{width:100%;border-style:hidden}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{position:sticky;top:0;background:#fff;background:var(--fc-page-bg-color, #fff)}.fc .fc-list-table th{padding:0}.fc .fc-list-table td,.fc .fc-list-day-cushion{padding:8px 14px}.fc .fc-list-day-cushion:after{content:"";clear:both;display:table}.fc-theme-standard .fc-list-day-cushion{background-color:#d0d0d04d;background-color:var(--fc-neutral-bg-color, rgba(208, 208, 208, .3))}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:#f5f5f5;background-color:var(--fc-list-event-hover-bg-color, #f5f5f5)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{display:inline-block;box-sizing:content-box;width:0;height:0;border:5px solid #3788d8;border:calc(var(--fc-list-event-dot-width, 10px) / 2) solid var(--fc-event-border-color, #3788d8);border-radius:5px;border-radius:calc(var(--fc-list-event-dot-width, 10px) / 2)}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}.fc-theme-bootstrap a:not([href]){color:inherit}\n']}]}],(function(){return[{type:l.Injector},{type:c.AbstractI18nService}]}),{_calendar:[{type:t.ViewChild,args:["calendar"]}],_datepicker:[{type:t.ViewChild,args:["datepicker"]}]});const x=[O];class R{static{this.\u0275fac=function(e){return new(e||R)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:R})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[s.CoreModule,a.BsDatepickerModule,i.CommonModule,n.FormsModule,o.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(R,[{type:t.NgModule,args:[{imports:[s.CoreModule,a.BsDatepickerModule,i.CommonModule,n.FormsModule,o.WmComponentsModule],declarations:[...x],exports:[...x]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(R,{declarations:[O],imports:[s.CoreModule,a.BsDatepickerModule,i.CommonModule,n.FormsModule,o.WmComponentsModule],exports:[O]}),e.CalendarComponent=O,e.CalendarModule=R})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/basic/search"),require("@angular/forms"),require("@wm/core"),require("@wm/components/input")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/basic/search","@angular/forms","@wm/core","@wm/components/input"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.chips={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.basic.search,e.ng.forms,e.wm.core,e.wm.components.input)}(this,(function(e,t,i,n,a,s,o,r){"use strict";function l(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var c=l(t),d=l(i),p=l(n),u=l(a);const h=new Map([["allowonlyselect",n.PROP_BOOLEAN],["autofocus",n.PROP_BOOLEAN],["chipclass",n.PROP_STRING],["class",n.PROP_STRING],["compareby",n.PROP_STRING],["datafield",n.PROP_STRING],["dataoptions",n.PROP_ANY],["dataset",{value:"Option 1, Option 2, Option 3",...n.PROP_ANY}],["datasource",n.PROP_ANY],["datavalue",n.PROP_ANY],["datavaluesource",n.PROP_ANY],["dateformat",n.PROP_STRING],["disabled",n.PROP_BOOLEAN],["displayexpression",n.PROP_STRING],["displayfield",n.PROP_STRING],["displayimagesrc",n.PROP_STRING],["enablereorder",n.PROP_BOOLEAN],["groupby",n.PROP_STRING],["inputposition",{value:"last",...n.PROP_STRING}],["inputwidth",{value:"default",...n.PROP_STRING}],["limit",n.PROP_NUMBER],["loadingdatamsg",{value:"Loading items...",...n.PROP_STRING}],["match",n.PROP_STRING],["matchmode",n.PROP_STRING],["maxsize",n.PROP_NUMBER],["minchars",{value:1,...n.PROP_NUMBER}],["name",n.PROP_STRING],["navsearchbar",{value:!1,...n.PROP_BOOLEAN}],["orderby",n.PROP_STRING],["placeholder",{value:"Type here..",...n.PROP_STRING}],["query",n.PROP_STRING],["readonly",n.PROP_BOOLEAN],["searchkey",n.PROP_STRING],["shortcutkey",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["showsearchicon",n.PROP_BOOLEAN],["tabindex",{value:0,...n.PROP_NUMBER}],["type",{value:"search",...n.PROP_STRING}],["debouncetime",{value:250,...n.PROP_NUMBER}]]),m=["wmChips",""];function g(e,t){if(1&e&&c.\u0275\u0275element(0,"img",9),2&e){const e=c.\u0275\u0275nextContext().$implicit;c.\u0275\u0275property("src",e.imgSrc,c.\u0275\u0275sanitizeUrl)}}function f(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"button",10),c.\u0275\u0275listener("click",(function(t){c.\u0275\u0275restoreView(e);const i=c.\u0275\u0275nextContext(),n=i.$implicit,a=i.index,s=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(s.removeItem(t,n,a))})),c.\u0275\u0275element(1,"i",11),c.\u0275\u0275elementEnd()}}const v=function(e,t){return{active:e,disabled:t}},b=function(e,t){return{"chip-duplicate bg-danger":e,"chip-picture":t}};function y(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"li",4)(1,"a",5),c.\u0275\u0275listener("click",(function(t){const i=c.\u0275\u0275restoreView(e).$implicit,n=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(n.handleChipClick(t,i))}))("keydown.delete",(function(t){const i=c.\u0275\u0275restoreView(e),n=i.$implicit,a=i.index,s=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(s.onDelete(t,n,a))}))("keydown.backspace",(function(t){const i=c.\u0275\u0275restoreView(e),n=i.$implicit,a=i.index,s=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(s.onBackspace(t,n,a))}))("keydown.arrowleft",(function(){const t=c.\u0275\u0275restoreView(e),i=t.$implicit,n=t.index,a=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(a.onArrowLeft(i,n))}))("keydown.arrowright",(function(){const t=c.\u0275\u0275restoreView(e),i=t.$implicit,n=t.index,a=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(a.onArrowRight(i,n))}))("focus",(function(t){const i=c.\u0275\u0275restoreView(e).$implicit,n=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(n.handleChipFocus(t,i))}))("blur",(function(){const t=c.\u0275\u0275restoreView(e).$implicit,i=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(i.readonly?0:t.active=!1)})),c.\u0275\u0275template(2,g,1,1,"img",6),c.\u0275\u0275element(3,"span",7),c.\u0275\u0275template(4,f,2,0,"button",8),c.\u0275\u0275elementEnd()()}if(2&e){const e=t.$implicit,i=c.\u0275\u0275nextContext();c.\u0275\u0275classMapInterpolate1("chip-item ",i.chipclass&&!i.bindChipclass?i.chipclass:"",""),c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction2(9,v,e.active,i.disabled)),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction2(12,b,e.isDuplicate,e.imgSrc)),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.imgSrc),c.\u0275\u0275advance(1),c.\u0275\u0275property("textContent",e.label)("title",e.label),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!i.readonly)}}const w=function(e){return{"full-width":e}},P={widgetType:"wm-chips",hostClass:"app-chips nav nav-pills list-inline"};class C extends r.DatasetAwareFormComponent{static{this.initializeProps=(n.register("wm-chips",h),void n.registerFormWidget(o.FormWidgetType.CHIPS,new Map(h)))}get datasource(){return this._datasource}set datasource(e){this._datasource=e,this.searchComponent.datasource=e,this._debounceUpdateQueryModel(this.datavalue||this.toBeProcessedDatavalue)}constructor(e,t,i,a,s,r,l){super(e,P),this.bindDisplayField=t,this.bindDisplayExpr=i,this.bindDisplayImgSrc=a,this.bindDataField=s,this.bindDataSet=r,this.bindChipclass=l,this.chipsList=[],this.maxSizeReached="Max size reached",this._unsubscribeDv=!1,n.styler(this.nativeElement,this),o.isDefined(this.showsearchicon)||(this.showsearchicon=!1),this.multiple=!0,this.nextItemIndex=0,this._debounceUpdateQueryModel=o.debounce((e=>{this.updateQueryModel(e).then((()=>{this.bindChipclass&&_.forEach(this.chipsList,((e,t)=>{this.registerChipItemClass(e,t)}))}))}),150);const c=this.dataset$.subscribe((()=>{this.searchComponent.dataset=this.dataset,this.searchComponent._lastResult=void 0,this.nextItemIndex=this.datasetItems.length,this._debounceUpdateQueryModel(this.datavalue||this.toBeProcessedDatavalue)}));this.registerDestroyListener((()=>c.unsubscribe()));const d=this.datavalue$.subscribe((e=>{this._unsubscribeDv||(this.chipsList=[],this._debounceUpdateQueryModel(e))}));this.registerDestroyListener((()=>d.unsubscribe()))}ngOnInit(){super.ngOnInit(),this.searchComponent.multiple=!0,this.searchComponent.binddisplayimagesrc=this.bindDisplayImgSrc,this.searchComponent.displayimagesrc=this.displayimagesrc,this.searchComponent.binddisplaylabel=this.bindDisplayExpr,this.searchComponent.displaylabel=this.displayfield,this.searchComponent.datafield=this.bindDataField||this.datafield,this.searchComponent.binddataset=this.bindDataSet,this.searchComponent.dataset=this.dataset,this.searchComponent.searchkey=this.searchkey,this.searchComponent.limit=this.limit,this.searchComponent.debouncetime=this.debouncetime,this.searchComponent.matchmode=this.matchmode,this.getTransformedData=(e,t)=>this.searchComponent.getTransformedData([e],this.nextItemIndex++,t)}ngAfterViewInit(){super.ngAfterViewInit(),this.enablereorder&&this.configureDnD()}registerChipItemClass(e,t){if(this.bindChipclass){const i=`${this.widgetId}_chipItemClass_${t}`;o.$unwatch(i),this.registerDestroyListener(o.$watch(this.bindChipclass,this.viewParent,{item:e,$index:t},((e,i)=>{this.applyItemClass(n.getConditionalClasses(e,i),t)}),i))}}applyItemClass(e,t){const i=this.nativeElement.querySelectorAll(".chip-item").item(t);$(i).removeClass(e.toRemove).addClass(e.toAdd)}removeDuplicates(){this.chipsList=n.getUniqObjsByDataField(this.chipsList,this.datafield,this.displayfield||this.displaylabel)}updateQueryModel(e){const t=[];if(!e)return this.chipsList=[],Promise.resolve();let i=_.clone(e);const a=this.chipsList;this.chipsList=[],this.maxsize&&i.length>this.maxsize&&(this._modelByValue=i=_.slice(i,0,this.maxsize),e=i);const s=[];return i.forEach(((t,i)=>{const o=_.find(this.datasetItems,(e=>_.isObject(e.value)?_.isEqual(e.value,t):_.toString(e.value)===_.toString(t)));if(o)this.chipsList.push(o);else if(this.datafield!==n.ALLFIELDS)s.push(t);else if(this.datafield===n.ALLFIELDS){let n,s=!1;if(_.isObject(t)){const e=a.find((e=>_.isEqual(e.value,t)));e&&(s=e.iscustom)}else n=this.createCustomDataModel(t),s=!0,n&&e.splice(i,1,n);n=n||t;const o=this.getTransformedData(n,s)[0];s&&(o.iscustom=s),this.chipsList.push(o)}})),s.length&&t.push(this.getDefaultModel(s,this.nextItemIndex).then((t=>{this.chipsList=this.chipsList.concat(t||[]),i.forEach(((t,i)=>{if(!_.find(this.chipsList,(e=>e.value.toString()===t.toString()))){if(this.allowonlyselect){const i=e.indexOf(t);return void(i>-1&&e.splice(i,1))}const i=this.getTransformedData(t,!0)[0];i.iscustom=!0,this.chipsList.push(i)}}))}))),this.resetSearchModel(!0),Promise.all(t).then((()=>{this._modelByValue=e,this.removeDuplicates(),this.updateMaxSize(),o.$appDigest()}))}resetSearchModel(e){this._unsubscribeDv=!0,this.searchComponent.clearSearch(void 0,!this.minchars&&!e),this._unsubscribeDv=!1}addItem(e,t){const i=t;let a,s;if(i&&o.isDefined(i.datavalue)&&""!==i.queryModel){if(!i.query||!_.trim(i.query))return;s=i.queryModel}else{if(this.allowonlyselect)return;let e;if(this.datafield===n.ALLFIELDS&&!_.isObject(this.searchComponent.query)&&_.trim(this.searchComponent.query)&&(e=this.createCustomDataModel(this.searchComponent.query),!e))return void this.resetSearchModel();const t=e||_.trim(this.searchComponent.query);if(t){s=this.getTransformedData(t,!0)[0],s.iscustom=!0}}o.isDefined(s)&&""!==s&&(a=this.invokeEventCallback("beforeadd",{$event:e,newItem:s}),o.isDefined(a)&&!o.toBoolean(a)||(this.isDuplicate(s)?this.resetSearchModel():(this.registerChipItemClass(s,this.chipsList.length),this.chipsList.push(s),this.datavalue?this._modelByValue=[...this._modelByValue,s.value]:this._modelByValue=[s.value],this._unsubscribeDv=!0,this.invokeOnTouched(),this.invokeOnChange(this._modelByValue,e||{},!0),this.invokeEventCallback("add",{$event:e,$item:s}),this.updateMaxSize(),this.resetSearchModel(),!e||"Enter"!==e.key&&13!==e.keyCode||this.stopEvent(e))))}createCustomDataModel(e){const t=this.displayfield||(this.datafield!==n.ALLFIELDS?this.datafield:void 0);if(t){const i={};return i[t]=e,i}}isDuplicate(e){return this.datafield===n.ALLFIELDS?_.findIndex(this.chipsList,{value:e.value})>-1:_.findIndex(this.chipsList,{key:e.key})>-1}updateMaxSize(){this.saturate=this.maxsize>0&&this.chipsList.length===this.maxsize}getDefaultModel(e,t){return this.nextItemIndex++,this.searchComponent.getDataSource(e,!0,t).then((t=>_.filter(e,(e=>{_.find(t,{value:e})}))))}handleChipClick(e,t){this.readonly||(e.currentTarget.focus(),this.invokeEventCallback("chipclick",{$event:e,$item:t}))}handleChipFocus(e,t){this.readonly||(t.active=!0,this.invokeEventCallback("chipselect",{$event:e,$item:t}))}stopEvent(e){e.stopPropagation(),e.preventDefault()}onTextDelete(e){o.isAppleProduct&&this.onInputClear(e)}onInputClear(e){this.chipsList&&this.chipsList.length&&!this.searchComponent.query&&(this.$element.find("li.chip-item > a.app-chip").last().focus(),this.stopEvent(e))}onBackspace(e,t,i){this.readonly||this.removeItem(e,t,i,!0)}onDelete(e,t,i){this.readonly||this.removeItem(e,t,i)}onArrowLeft(e,t){this.readonly||(this.searchComponent.query||o.isDefined(t)||o.isDefined(e)?t>0?this.$element.find("li.chip-item > a.app-chip").get(t-1).focus():this.focusSearchBox():this.$element.find("li.chip-item > a.app-chip").last().focus())}onArrowRight(e,t){this.readonly||(this.searchComponent.query||o.isDefined(t)||o.isDefined(e)?t<this.chipsList.length-1?this.$element.find("li.chip-item > a.app-chip").get(t+1).focus():this.focusSearchBox():this.$element.find("li.chip-item > a.app-chip").first().focus())}focusSearchBox(){this.$element.find(".app-chip-input > input.app-textbox").focus()}removeItem(e,t,i,n){e.stopPropagation();const a=_.isArray(i)?i:[i],s=_.max(a),r=_.reduce(a,((e,t)=>(e.push(this.chipsList[t]),e)),[]),l=this.invokeEventCallback("beforeremove",{$event:e,$item:1===r.length?r[0]:r});if(o.isDefined(l)&&!o.toBoolean(l))return;const c=_.clone(this.datavalue);setTimeout((()=>{const e=this.chipsList.length,t=this.$element.find("li.chip-item > a.app-chip");e&&n?e-1<s?t.get(e-1).focus():(this.chipsList[s].active=!0,t.get(s).focus()):this.focusSearchBox()}));_.pullAt(this.chipsList,a).forEach((e=>{this._modelByValue=_.filter(this._modelByValue,(t=>!(_.isObject(t)?_.isEqual(t,e.value):_.toString(t)===_.toString(e.value))))})),this._unsubscribeDv=!1,this.invokeOnChange(this._modelByValue,e,!0),this.invokeEventCallback("change",{$event:e,newVal:this.datavalue,oldVal:c}),this.updateMaxSize(),this.invokeEventCallback("remove",{$event:e,$item:1===r.length?r[0]:r})}swapElementsInArray(e,t,i){const n=_.pullAt(e,i)[0];e.splice(t,0,n)}resetReorder(){this.$element.removeData("oldIndex")}invokeOnBeforeServiceCall(e){this.invokeEventCallback("beforeservicecall",{inputData:e})}handleEvent(e,t,i,n){"remove"!==t&&"beforeremove"!==t&&"chipselect"!==t&&"chipclick"!==t&&"add"!==t&&"reorder"!==t&&"change"!==t&&super.handleEvent(e,t,i,n)}configureDnD(){n.configureDnD(this.$element,{items:"> li:not(.app-chip-search)",placeholder:"chip-placeholder"},this.onReorderStart.bind(this),this.update.bind(this))}onReorderStart(e,t){const i=t.helper;i.width(i.width()+1),this.$element.data("oldIndex",t.item.index()-("first"===this.inputposition?1:0))}update(e,t){let i,n,a;if(n=t.item.index()-("first"===this.inputposition?1:0),a=this.$element.data("oldIndex"),n=this.chipsList.length===n?n-1:n,i={oldIndex:a,newIndex:n,item:this.chipsList[a]},n===a)return void this.resetReorder();i.item=this.chipsList[a];const s=this.invokeEventCallback("beforereorder",{$event:e,$data:this.chipsList,$changedItem:i});o.isDefined(s)&&!1===o.toBoolean(s)?this.resetReorder():(this.swapElementsInArray(this.chipsList,n,a),this.swapElementsInArray(this._modelByValue,n,a),i.item=this.chipsList[n],this.chipsList=[...this.chipsList],this.resetReorder(),this.invokeEventCallback("reorder",{$event:e,$data:this.chipsList,$changedItem:i}))}onPropertyChange(e,t,i){if("tabindex"!==e){if("dataoptions"===e&&(this.searchComponent.dataoptions=t),"datafield"===e&&(this.searchComponent.datafield=this.datafield),"displayfield"===e&&(this.searchComponent.displaylabel=this.displayfield),"displayexpression"===e&&(this.searchComponent.binddisplaylabel=this.binddisplayexpression?this.binddisplayexpression:this.displayexpression),"displayimagesrc"===e&&(this.searchComponent.binddisplayimagesrc=this.binddisplayimagesrc?this.binddisplayimagesrc:this.displayimagesrc),"limit"===e&&(this.searchComponent.limit=this.limit),"matchmode"===e&&(this.searchComponent.matchmode=this.matchmode),"groupby"===e&&(this.searchComponent.groupby=this.groupby),"enablereorder"===e&&(this.$element.hasClass("ui-sortable")?this.$element.sortable("option","disabled",!t):t&&this.configureDnD()),"readonly"===e&&(t?this.$element.addClass("readonly"):this.$element.removeClass("readonly")),"inputposition"===e){const e=this.$element.find("li.app-chip-search");"first"===t?this.$element.prepend(e):this.$element.append(e)}"autofocus"===e&&t&&setTimeout((()=>{const e=this.$element.find(".app-chip-input > input.app-textbox");e&&e.length&&this.focusSearchBox()})),super.onPropertyChange(e,t,i)}}static{this.\u0275fac=function(e){return new(e||C)(c.\u0275\u0275directiveInject(c.Injector),c.\u0275\u0275injectAttribute("displayfield.bind"),c.\u0275\u0275injectAttribute("displayexpression.bind"),c.\u0275\u0275injectAttribute("displayimagesrc.bind"),c.\u0275\u0275injectAttribute("datafield.bind"),c.\u0275\u0275injectAttribute("dataset.bind"),c.\u0275\u0275injectAttribute("chipclass.bind"))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:C,selectors:[["","wmChips",""]],viewQuery:function(e,t){if(1&e&&c.\u0275\u0275viewQuery(a.SearchComponent,7),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.searchComponent=e.first)}},features:[c.\u0275\u0275ProvidersFeature([n.provideAs(C,s.NG_VALUE_ACCESSOR,!0),n.provideAsWidgetRef(C)]),c.\u0275\u0275InheritDefinitionFeature],attrs:m,decls:4,vars:4,consts:[["role","option",3,"class","ngClass",4,"ngFor","ngForOf"],[1,"app-chip-search",3,"ngClass"],["wmSearch","","name","app-chip-search","submit.event","addItem($event, widget)","beforeservicecall.event","invokeOnBeforeServiceCall(inputData)","disabled.bind","disabled || readonly || saturate","datafield.bind","datafield","allowonlyselect.bind","allowonlyselect","searchkey.bind","searchkey","orderby.bind","orderby","placeholder.bind","saturate ? maxSizeReached : placeholder","showsearchicon.bind","showsearchicon","tabindex.bind","tabindex","minchars.bind","minchars","debouncetime.bind","debouncetime","matchmode.bind","matchmode","groupby.bind","groupby","match.bind","match","dateformat.bind","dateformat",1,"app-chip-input",3,"keydown.enter","keydown.delete","keydown.backspace","keydown.arrowleft","keydown.arrowright"],["search",""],["role","option",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"app-chip",3,"ngClass","click","keydown.delete","keydown.backspace","keydown.arrowleft","keydown.arrowright","focus","blur"],["data-identifier","img","alt","Chip Image","class","button-image-icon",3,"src",4,"ngIf"],[1,"app-chip-title",3,"textContent","title"],["type","button","tabindex","-1","aria-label","Clear Button","class","btn btn-transparent",3,"click",4,"ngIf"],["data-identifier","img","alt","Chip Image",1,"button-image-icon",3,"src"],["type","button","tabindex","-1","aria-label","Clear Button",1,"btn","btn-transparent",3,"click"],[1,"app-icon","wi","wi-close"]],template:function(e,t){1&e&&(c.\u0275\u0275template(0,y,5,15,"li",0),c.\u0275\u0275elementStart(1,"li",1)(2,"div",2,3),c.\u0275\u0275listener("keydown.enter",(function(e){return t.stopEvent(e)}))("keydown.delete",(function(e){return t.onTextDelete(e)}))("keydown.backspace",(function(e){return t.onInputClear(e)}))("keydown.arrowleft",(function(){return t.onArrowLeft()}))("keydown.arrowright",(function(){return t.onArrowRight()})),c.\u0275\u0275elementEnd()()),2&e&&(c.\u0275\u0275property("ngForOf",t.chipsList),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(2,w,"full"===t.inputwidth)))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,u.SearchComponent,p.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(C,[{type:t.Component,args:[{selector:"[wmChips]",providers:[n.provideAs(C,s.NG_VALUE_ACCESSOR,!0),n.provideAsWidgetRef(C)],template:'<li class="chip-item {{chipclass && !bindChipclass ? chipclass : \'\'}}" role="option" *ngFor="let item of chipsList; let $index = index;"\n    [ngClass]="{\'active\': item.active, \'disabled\': disabled}">\n    <a class="app-chip" href="javascript:void(0);" tabindex="-1"\n       (click)="handleChipClick($event, item)"\n       (keydown.delete)="onDelete($event, item, $index)"\n       (keydown.backspace)="onBackspace($event, item, $index)"\n       (keydown.arrowleft)="onArrowLeft(item, $index)"\n       (keydown.arrowright)="onArrowRight(item, $index)"\n       (focus)="handleChipFocus($event, item)"\n       (blur)="readonly ? 0 : item.active = false"\n       [ngClass]="{\'chip-duplicate bg-danger\': item.isDuplicate, \'chip-picture\': item.imgSrc}">\n        <img data-identifier="img" alt="Chip Image" class="button-image-icon" [src]="item.imgSrc" *ngIf="item.imgSrc"/>\n        <span class="app-chip-title" [textContent]="item.label" [title]="item.label"></span>\n        <button type="button" tabindex="-1" aria-label="Clear Button" class="btn btn-transparent" (click)="removeItem($event, item, $index);" *ngIf="!readonly">\n            <i class="app-icon wi wi-close"></i>\n        </button>\n    </a>\n</li>\n<li class="app-chip-search" [ngClass]="{\'full-width\': inputwidth === \'full\'}">\n    <div #search wmSearch class="app-chip-input"\n         name="app-chip-search"\n         submit.event="addItem($event, widget)"\n         beforeservicecall.event="invokeOnBeforeServiceCall(inputData)"\n         disabled.bind="disabled || readonly || saturate"\n         datafield.bind="datafield"\n         allowonlyselect.bind="allowonlyselect"\n         searchkey.bind="searchkey"\n         orderby.bind="orderby"\n         placeholder.bind="saturate ? maxSizeReached : placeholder"\n         showsearchicon.bind="showsearchicon"\n         tabindex.bind="tabindex"\n         minchars.bind="minchars"\n         debouncetime.bind="debouncetime"\n         matchmode.bind="matchmode"\n         groupby.bind="groupby"\n         match.bind="match"\n         dateformat.bind="dateformat"\n         (keydown.enter)="stopEvent($event)"\n         (keydown.delete)="onTextDelete($event)"\n         (keydown.backspace)="onInputClear($event)"\n         (keydown.arrowleft)="onArrowLeft()"\n         (keydown.arrowright)="onArrowRight()">\n    </div>\n</li>\n'}]}],(function(){return[{type:c.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["displayfield.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["displayexpression.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["displayimagesrc.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["datafield.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["dataset.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["chipclass.bind"]}]}]}),{searchComponent:[{type:t.ViewChild,args:[a.SearchComponent,{static:!0}]}]});const A=[C];class I{static{this.\u0275fac=function(e){return new(e||I)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:I})}static{this.\u0275inj=c.\u0275\u0275defineInjector({imports:[i.CommonModule,a.SearchModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(I,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.SearchModule,n.WmComponentsModule],declarations:[...A],exports:[...A]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&c.\u0275\u0275setNgModuleScope(I,{declarations:[C],imports:[i.CommonModule,a.SearchModule,n.WmComponentsModule],exports:[C]}),e.ChipsComponent=C,e.ChipsModule=I})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("ngx-color-picker"),require("@wm/components/base"),require("@wm/core"),require("@wm/components/input")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","ngx-color-picker","@wm/components/base","@wm/core","@wm/components/input"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.colorpicker={}),e.ng.core,e.ng.common,e.ng.forms,e.ngxColorpicker,e.wm.components.base,e.wm.core,e.wm.components.input)}(this,(function(e,t,i,n,a,s,o,r){"use strict";function l(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var c=l(t),d=l(n),p=l(a);const u=new Map([["autoclose",{value:"outsideClick",...s.PROP_STRING}],["class",s.PROP_STRING],["datavalue",s.PROP_STRING],["disabled",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["name",s.PROP_STRING],["placeholder",{value:"Select Color",...s.PROP_STRING}],["readonly",s.PROP_BOOLEAN],["required",s.PROP_BOOLEAN],["shortcutkey",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["tabindex",{value:0,...s.PROP_NUMBER}]]),h=["input"],m=["wmColorPicker",""],g=function(){return{updateOn:"change"}},f={widgetType:"wm-colorpicker",hostClass:"input-group app-colorpicker",displayType:"inline-block"};class v extends r.BaseFormCustomComponent{static{this.initializeProps=(s.register("wm-colorpicker",u),void s.registerFormWidget(o.FormWidgetType.COLORPICKER,new Map(u)))}constructor(e){super(e,f),s.styler(this.nativeElement,this)}colorPickerToggleChange(e){const t=this.nativeElement.querySelector(".color-picker");t&&(e?o.removeClass(t,"hidden"):o.addClass(t,"hidden"))}colorPickerOpen(e){if(this.autoclose===s.AUTOCLOSE_TYPE.ALWAYS){this.nativeElement.querySelector(".color-picker").onclick=()=>this.cpDirective.closeDialog()}}open(){this.cpDirective.openDialog()}close(){this.cpDirective.closeDialog()}handleEvent(e,t,i,n){"change"!==t&&"blur"!==t&&super.handleEvent(this.inputEl.nativeElement,t,i,n)}handleChange(e){this.invokeOnChange(this.datavalue,{type:"change"},this.ngModel.valid)}onPropertyChange(e,t,i){"tabindex"!==e&&("required"!==e?"datavalue"!==e?("autoclose"===e&&(this.outsideclick=t===s.AUTOCLOSE_TYPE.OUTSIDECLICK||t===s.AUTOCLOSE_TYPE.ALWAYS),super.onPropertyChange(e,t,i)):this._onChange(t):this._onChange(this.datavalue))}static{this.\u0275fac=function(e){return new(e||v)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:v,selectors:[["","wmColorPicker",""]],viewQuery:function(e,i){if(1&e&&(c.\u0275\u0275viewQuery(n.NgModel,5),c.\u0275\u0275viewQuery(h,7,t.ElementRef),c.\u0275\u0275viewQuery(a.ColorPickerDirective,5)),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(i.ngModel=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(i.inputEl=e.first),c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(i.cpDirective=e.first)}},features:[c.\u0275\u0275ProvidersFeature([s.provideAs(v,n.NG_VALUE_ACCESSOR,!0),s.provideAs(v,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(v)]),c.\u0275\u0275InheritDefinitionFeature],attrs:m,decls:5,vars:15,consts:[["aria-haspopup","true","aria-expanded","false","focus-target","",1,"form-control","app-textbox",3,"colorPicker","cpPosition","cpCloseClickOutside","disabled","required","tabindex","ngModel","ngModelOptions","colorPickerChange","cpToggleChange","colorPickerOpen","ngModelChange","blur"],["input",""],[1,"input-group-addon","colorpicker-container"],[1,"colored-box"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"input",0,1),c.\u0275\u0275listener("colorPickerChange",(function(e){return t.datavalue=e}))("colorPickerChange",(function(e){return t.handleChange(e)}))("cpToggleChange",(function(e){return t.colorPickerToggleChange(e)}))("colorPickerOpen",(function(e){return t.colorPickerOpen(e)}))("ngModelChange",(function(e){return t.datavalue=e}))("ngModelChange",(function(e){return t.handleChange(e)}))("blur",(function(e){return t.invokeOnTouched(e)})),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(2,"span",2)(3,"i",3),c.\u0275\u0275text(4,"\xa0"),c.\u0275\u0275elementEnd()()),2&e&&(c.\u0275\u0275property("colorPicker",t.datavalue)("cpPosition","bottom")("cpCloseClickOutside",t.outsideclick)("disabled",t.readonly||t.disabled)("required",t.required)("tabindex",t.tabindex)("ngModel",t.datavalue)("ngModelOptions",c.\u0275\u0275pureFunction0(14,g)),c.\u0275\u0275attribute("name",t.name)("aria-label",t.hint)("placeholder",t.placeholder)("accesskey",t.shortcutkey),c.\u0275\u0275advance(3),c.\u0275\u0275styleProp("background-color",t.datavalue))},dependencies:[p.ColorPickerDirective,d.DefaultValueAccessor,d.NgControlStatus,d.RequiredValidator,d.NgModel],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(v,[{type:t.Component,args:[{selector:"[wmColorPicker]",providers:[s.provideAs(v,n.NG_VALUE_ACCESSOR,!0),s.provideAs(v,n.NG_VALIDATORS,!0),s.provideAsWidgetRef(v)],template:'<input class="form-control app-textbox" aria-haspopup="true" aria-expanded="false"\n       #input\n       focus-target\n       [attr.name]="name"\n       [attr.aria-label]="hint"\n       [(colorPicker)]="datavalue"\n       (colorPickerChange)="handleChange($event);"\n       (cpToggleChange)="colorPickerToggleChange($event)"\n       [cpPosition]="\'bottom\'"\n       [cpCloseClickOutside]="outsideclick"\n       (colorPickerOpen)="colorPickerOpen($event)"\n       [attr.placeholder]="placeholder"\n       [disabled]="readonly || disabled"\n       [required]="required"\n       [tabindex]="tabindex"\n       [(ngModel)]="datavalue"\n       (ngModelChange)="handleChange($event);"\n       [ngModelOptions]="{updateOn: \'change\'}"\n       (blur)="invokeOnTouched($event)"\n       [attr.accesskey]="shortcutkey">\n<span class="input-group-addon colorpicker-container">\n    <i class="colored-box" [style.backgroundColor]="datavalue">&nbsp;</i>\n</span>\n'}]}],(function(){return[{type:c.Injector}]}),{ngModel:[{type:t.ViewChild,args:[n.NgModel]}],inputEl:[{type:t.ViewChild,args:["input",{static:!0,read:t.ElementRef}]}],cpDirective:[{type:t.ViewChild,args:[a.ColorPickerDirective]}]});const b=[v];class y{static{this.\u0275fac=function(e){return new(e||y)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:y})}static{this.\u0275inj=c.\u0275\u0275defineInjector({imports:[i.CommonModule,a.ColorPickerModule,n.FormsModule,s.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(y,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.ColorPickerModule,n.FormsModule,s.WmComponentsModule],declarations:[...b],exports:[...b]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&c.\u0275\u0275setNgModuleScope(y,{declarations:[v],imports:[i.CommonModule,a.ColorPickerModule,n.FormsModule,s.WmComponentsModule],exports:[v]}),e.ColorPickerComponent=v,e.ColorPickerModule=y})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@wm/components/base"),require("@wm/components/input"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","@wm/components/base","@wm/components/input","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.currency={}),e.ng.core,e.ng.common,e.ng.forms,e.wm.components.base,e.wm.components.input,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(n),d=r(a),p=r(o);const u=new Map([["class",a.PROP_STRING],["currency",a.PROP_STRING],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["maxvalue",a.PROP_NUMBER],["minvalue",a.PROP_NUMBER],["name",a.PROP_STRING],["placeholder",{value:"Enter value",...a.PROP_STRING}],["readonly",a.PROP_BOOLEAN],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}],["step",{value:1,...a.PROP_NUMBER}],["tabindex",{value:0,...a.PROP_NUMBER}],["trailingzero",{value:!1,...a.PROP_BOOLEAN}],["inputmode",{value:"natural",...a.PROP_STRING}]]),h=["input"],m=["wmCurrency",""],g={widgetType:"wm-currency",hostClass:"input-group app-currency"};class f extends s.NumberLocale{static{this.initializeProps=(a.register("wm-currency",u),void a.registerFormWidget(o.FormWidgetType.CURRENCY,new Map(u)))}constructor(e,t,i,n){super(e,g,i,n),this.appDefaults=t,this.currencyCode=this.appDefaults.currencyCode||"USD",this.currencySymbol=o.CURRENCY_INFO[this.appDefaults.currencyCode||"USD"].symbol}onPropertyChange(e,t,i){"currency"===e?(this.currencyCode=t,this.currencySymbol=o.CURRENCY_INFO[this.currencyCode||this.appDefaults.currencyCode].symbol):super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||f)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275directiveInject(p.AppDefaults),l.\u0275\u0275directiveInject(p.AbstractI18nService),l.\u0275\u0275directiveInject(d.TrailingZeroDecimalPipe))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:f,selectors:[["","wmCurrency",""]],viewQuery:function(e,i){if(1&e&&(l.\u0275\u0275viewQuery(n.NgModel,7),l.\u0275\u0275viewQuery(h,7,t.ElementRef)),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.ngModel=e.first),l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.inputEl=e.first)}},features:[l.\u0275\u0275ProvidersFeature([a.provideAs(f,n.NG_VALUE_ACCESSOR,!0),a.provideAs(f,n.NG_VALIDATORS,!0),a.provideAsWidgetRef(f)]),l.\u0275\u0275InheritDefinitionFeature],attrs:m,decls:3,vars:13,consts:[[1,"input-group-addon",3,"textContent"],["role","textbox","type","text","inputmode","decimal","focus-target","",1,"form-control","app-textbox","app-currency-input",3,"autofocus","readonly","disabled","required","pattern","ngModel","ngModelOptions","focus","input","blur","ngModelChange","keydown","keydown.enter","keydown.ArrowUp","keydown.ArrowDown"],["input",""]],template:function(e,t){1&e&&(l.\u0275\u0275element(0,"span",0),l.\u0275\u0275elementStart(1,"input",1,2),l.\u0275\u0275listener("focus",(function(e){return t.checkForTrailingZeros(e)}))("input",(function(e){return t.onInputChange(e.target.value)}))("blur",(function(e){return t.handleBlur(e),t.checkForTrailingZeros(e)}))("ngModelChange",(function(e){return t.onModelChange(e)}))("keydown",(function(e){return t.validateInputEntry(e)}))("keydown.enter",(function(e){return t.onEnter(e)}))("keydown.ArrowUp",(function(e){return t.onArrowPress(e,"UP")}))("keydown.ArrowDown",(function(e){return t.onArrowPress(e,"DOWN")})),l.\u0275\u0275elementEnd()),2&e&&(l.\u0275\u0275property("textContent",t.currencySymbol),l.\u0275\u0275advance(1),l.\u0275\u0275property("autofocus",t.autofocus)("readonly",t.readonly)("disabled",t.disabled)("required",t.required)("pattern",t.regexp)("ngModel",t.displayValue)("ngModelOptions",t.ngModelOptions),l.\u0275\u0275attribute("name",t.name)("aria-label",t.hint||t.currencyCode)("tabindex",t.tabindex)("placeholder",t.placeholder)("accesskey",t.shortcutkey))},dependencies:[c.DefaultValueAccessor,c.NgControlStatus,c.RequiredValidator,c.PatternValidator,c.NgModel,d.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(f,[{type:t.Component,args:[{selector:"[wmCurrency]",providers:[a.provideAs(f,n.NG_VALUE_ACCESSOR,!0),a.provideAs(f,n.NG_VALIDATORS,!0),a.provideAsWidgetRef(f)],template:'<span class="input-group-addon" [textContent]="currencySymbol"></span>\n<input class="form-control app-textbox app-currency-input"\n       #input\n       role="textbox"\n       type="text"\n       inputmode="decimal"\n       focus-target\n       [autofocus]="autofocus"\n       [readonly]="readonly"\n       [disabled]="disabled"\n       [required]="required"\n       [pattern]="regexp"\n       [attr.name]="name"\n       [attr.aria-label]="hint || currencyCode"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [ngModel]="displayValue"\n       [ngModelOptions]="ngModelOptions"\n\n       (focus)="checkForTrailingZeros($event)"\n       (input)="onInputChange($event.target.value)"\n       (blur)="handleBlur($event); checkForTrailingZeros($event);"\n       (ngModelChange)="onModelChange($event)"\n       (keydown)="validateInputEntry($event);"\n       (keydown.enter)="onEnter($event)"\n       (keydown.ArrowUp)="onArrowPress($event, \'UP\')"\n       (keydown.ArrowDown)="onArrowPress($event, \'DOWN\')">\n'}]}],(function(){return[{type:l.Injector},{type:p.AppDefaults},{type:p.AbstractI18nService},{type:d.TrailingZeroDecimalPipe}]}),{ngModel:[{type:t.ViewChild,args:[n.NgModel,{static:!0}]}],inputEl:[{type:t.ViewChild,args:["input",{static:!0,read:t.ElementRef}]}]});const v=[f];class b{static{this.\u0275fac=function(e){return new(e||b)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:b})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,n.FormsModule,s.InputModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(b,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.FormsModule,s.InputModule,a.WmComponentsModule],declarations:[...v],exports:[...v]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(b,{declarations:[f],imports:[i.CommonModule,n.FormsModule,s.InputModule,a.WmComponentsModule],exports:[f]}),e.CurrencyComponent=f,e.CurrencyModule=b})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("ngx-bootstrap/datepicker"),require("ngx-bootstrap/dropdown"),require("ngx-bootstrap/timepicker"),require("@wm/components/base"),require("@wm/core"),require("@wm/components/input"),require("ngx-bootstrap/modal"),require("imask"),require("angular-imask")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","ngx-bootstrap/datepicker","ngx-bootstrap/dropdown","ngx-bootstrap/timepicker","@wm/components/base","@wm/core","@wm/components/input","ngx-bootstrap/modal","imask","angular-imask"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.epoch={}),e.ng.core,e.ng.common,e.ng.forms,e.datepicker,e.dropdown,e.timepicker,e.wm.components.base,e.wm.core,e.wm.components.input,e.modal,e.IMask,e.angularIMask)}(this,(function(e,t,i,n,a,s,o,r,l,c,d,p,u){"use strict";function h(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var m=h(t),g=h(i),f=h(n),v=h(a),b=h(s),y=h(o),w=h(l),P=h(d),C=h(u);const A=["*"];function I(e,t){if(1&e&&(m.\u0275\u0275elementStart(0,"div",5),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate1(" ",e.label," ")}}class E{static{this.\u0275fac=function(e){return new(e||E)}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:E,selectors:[["wm-pickergroup"]],ngContentSelectors:A,decls:2,vars:0,consts:[[1,"app-picker-group"]],template:function(e,t){1&e&&(m.\u0275\u0275projectionDef(),m.\u0275\u0275elementStart(0,"div",0),m.\u0275\u0275projection(1),m.\u0275\u0275elementEnd())},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&m.\u0275setClassMetadata(E,[{type:t.Component,args:[{selector:"wm-pickergroup",template:'\n        <div class="app-picker-group">\n            <ng-content></ng-content>\n        </div>\n    '}]}],null,null);class O{constructor(e){this.inj=e,this.change=new t.EventEmitter,this._selectedIndex=0,this._options=[],this.noOfEmptyElements=2,this.$el=$(e.get(t.ElementRef).nativeElement)}set selectedValue(e){this._selectedValue=e,this.reRender()}get selectedValue(){return this._selectedValue}set options(e){this._options=e.map((e=>({label:e.label,value:void 0!==e.value?e.value:e.label}))),this.reRender()}get options(){return this._options}reRender(){this._selectedIndex=this.options.findIndex((e=>e.value===this.selectedValue)),this.pickerAnimator?.select(this._selectedIndex+this.noOfEmptyElements)}set selectedIndex(e){this._selectedIndex=e,this._selectedValue=this.options[e].value,this.change.emit(this.options[e])}get selectedIndex(){return this._selectedIndex}ngAfterViewInit(){this.pickerAnimator=new x(this)}static{this.\u0275fac=function(e){return new(e||O)(m.\u0275\u0275directiveInject(m.Injector))}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:O,selectors:[["wm-picker"]],inputs:{selectedValue:"selectedValue",options:"options"},outputs:{change:"change"},decls:12,vars:1,consts:[[1,"app-picker"],[1,"app-picker-option-container"],[1,"app-picker-option","app-picker-empty-option"],["class","app-picker-option",4,"ngFor","ngForOf"],[1,"app-picker-ruler"],[1,"app-picker-option"]],template:function(e,t){1&e&&(m.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),m.\u0275\u0275text(3,"E"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(4,"div",2),m.\u0275\u0275text(5,"E"),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(6,I,2,1,"div",3),m.\u0275\u0275elementStart(7,"div",2),m.\u0275\u0275text(8,"E"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(9,"div",2),m.\u0275\u0275text(10,"E"),m.\u0275\u0275elementEnd()(),m.\u0275\u0275element(11,"div",4),m.\u0275\u0275elementEnd()),2&e&&(m.\u0275\u0275advance(6),m.\u0275\u0275property("ngForOf",t.options))},dependencies:[g.NgForOf],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&m.\u0275setClassMetadata(O,[{type:t.Component,args:[{selector:"wm-picker",template:'\n        <div class="app-picker">\n            <div class="app-picker-option-container">\n                <div class="app-picker-option app-picker-empty-option">E</div>\n                <div class="app-picker-option app-picker-empty-option">E</div>\n                <div *ngFor="let option of options; index as i;" class="app-picker-option">\n                    {{option.label}}\n                </div>\n                <div class="app-picker-option app-picker-empty-option">E</div>\n                <div class="app-picker-option app-picker-empty-option">E</div>\n            </div>\n            <div class="app-picker-ruler"></div>\n        </div>\n    '}]}],(function(){return[{type:m.Injector}]}),{change:[{type:t.Output}],selectedValue:[{type:t.Input}],options:[{type:t.Input}]});class x{constructor(e){this.picker=e;let t=e.selectedIndex+e.noOfEmptyElements;const i=e=>t+Math.floor(e/16);this.select(t),this.getElement().swipey({direction:$.fn.swipey.DIRECTIONS.VERTICAL,threshold:10,target:e.$el,onSwipe:(e,t)=>{this.select(i(-1*t.length))},onSwipeEnd:(n,a)=>{const s=i(-1*a.length);this.select(s),t=e.selectedIndex+e.noOfEmptyElements}})}getElement(){return this.picker.$el.find(".app-picker-option-container:first")}getOptionElements(){return this.getElement().find(".app-picker-option")}select(e){const t=this.getOptionElements();if(e<this.picker.noOfEmptyElements||e>=t.length-this.picker.noOfEmptyElements)return;this.getElement().find(".app-picker-option.app-picker-option-selected").removeClass("app-picker-option-selected"),t.eq(e).addClass("app-picker-option-selected"),this.picker.selectedIndex=e-this.picker.noOfEmptyElements;const i=e-this.picker.noOfEmptyElements,n=e+this.picker.noOfEmptyElements;t.each(((t,a)=>{if(t>=i&&t<=n){const i=30*(t-e),n=1-.3*Math.abs(t-e);$(a).css({transform:"perspective(500px) rotateX("+i+"deg)",opacity:n}).show()}else $(a).hide()}))}}const R=["datetimepickerTemplate"];function D(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"bs-datepicker-inline",11),m.\u0275\u0275listener("bsValueChange",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext(2);return m.\u0275\u0275resetView(i.onDateUpdate(t))})),m.\u0275\u0275elementEnd()}if(2&e){const e=m.\u0275\u0275nextContext(2);m.\u0275\u0275property("bsConfig",e.bsDatepickerConfig)("datesDisabled",e.excludedDatesToDisable)("bsValue",e.changedValue)}}function S(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"wm-timepicker",12),m.\u0275\u0275listener("change",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext(2);return m.\u0275\u0275resetView(i.onTimeUpdate(t))})),m.\u0275\u0275elementEnd()}if(2&e){const e=m.\u0275\u0275nextContext(2);m.\u0275\u0275property("value",e.changedValue)("min",e.minTime)("max",e.maxTime)}}function T(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"button",13),m.\u0275\u0275listener("click",(function(){m.\u0275\u0275restoreView(e);const t=m.\u0275\u0275nextContext(2);return m.\u0275\u0275resetView(t.setToday())})),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()}if(2&e){const e=m.\u0275\u0275nextContext(2);m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate(e.appLocale.LABEL_TODAY_DATE||"Today")}}function M(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"button",14),m.\u0275\u0275listener("click",(function(){m.\u0275\u0275restoreView(e);const t=m.\u0275\u0275nextContext(2);return m.\u0275\u0275resetView(t.onOkClick())})),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()}if(2&e){const e=m.\u0275\u0275nextContext(2);m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate(e.appLocale.LABEL_OK||"Ok")}}function N(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",1)(1,"div",2),m.\u0275\u0275element(2,"div",3),m.\u0275\u0275template(3,D,1,3,"bs-datepicker-inline",4),m.\u0275\u0275template(4,S,1,3,"wm-timepicker",5),m.\u0275\u0275elementStart(5,"span",6),m.\u0275\u0275text(6),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(7,"div",7),m.\u0275\u0275template(8,T,2,1,"button",8),m.\u0275\u0275template(9,M,2,1,"button",9),m.\u0275\u0275elementStart(10,"button",10),m.\u0275\u0275listener("click",(function(){m.\u0275\u0275restoreView(e);const t=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(t.clear())})),m.\u0275\u0275text(11),m.\u0275\u0275elementEnd()()()}if(2&e){const e=m.\u0275\u0275nextContext();m.\u0275\u0275advance(3),m.\u0275\u0275property("ngIf","DATE_TIME"===e.mode||"DATE"===e.mode),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf","DATE_TIME"===e.mode||"TIME"===e.mode),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate1(" ",e.getDateLabel()," "),m.\u0275\u0275advance(2),m.\u0275\u0275property("ngIf","DATE_TIME"===e.mode||"DATE"===e.mode),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf","DATE_TIME"===e.mode||"TIME"===e.mode),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(e.appLocale.LABEL_CLEAR_DATE||"Clear")}}class k{constructor(e,i){this.inj=e,this.bsModalService=i,this.isDateOpen=!0,this.isTimeOpen=!1,this.mode="DATE_TIME",this.placement="MODAL",this.change=new t.EventEmitter,this._value=new Date,this.changedValue=null,this.appLocale=e.get(l.App).appLocale||{}}set value(e){e=e||new Date,this._value=e,this.changedValue=e}set bsDatepickerConfig(e){this._bsDatepickerConfig=e,this._bsDatepickerConfig.showClearButton=!1,this._bsDatepickerConfig.showTodayButton=!1}set excludedDaysToDisable(e){this._bsDatepickerConfig.daysDisabled=e}get bsDatepickerConfig(){return this._bsDatepickerConfig}set displayFormat(e){e&&(this._displayFormat=e.replace(/y/g,"Y").replace(/d/g,"D").replace("a","A"))}validateSelectedDate(){if(!this.changedValue)return!0;const e=moment(this.changedValue),t=this._bsDatepickerConfig?.minDate,i=this._bsDatepickerConfig?.maxDate;if(t&&("DATE"===this.mode&&moment(t).startOf("day").toDate()>this.changedValue||"DATE"!==this.mode&&t>this.changedValue))return!1;if(i&&("DATE"===this.mode&&moment(i).endOf("day").toDate()<this.changedValue||"DATE"!==this.mode&&i<this.changedValue))return!1;if(this._bsDatepickerConfig?.daysDisabled?.indexOf(e.day())>=0)return!1;const n=e.startOf("day").toDate().getTime();return!this.excludedDatesToDisable?.find((e=>e.getTime()===n))}get displayFormat(){if(this._displayFormat)return this._displayFormat}hightlightToday(){const e=(new Date).getDate().toString();_.filter($(`body>modal-container .date-picker-modal span:contains(${e})`).not(".is-other-month,.current-date"),(t=>{$(t).text()===e&&$(t).addClass("current-date text-info")}))}hideOnClick(){$("body>modal-container .date-picker-modal .app-datetime-picker").click((e=>e.stopPropagation())),$("body>modal-container .date-picker-modal").click((()=>this.onCancelClick()))}getDateLabel(){return moment(this.changedValue).format(this.displayFormat)}openDatePicker(){this.isTimeOpen=!1,this.isDateOpen=!0}openTimePicker(){this.isTimeOpen=!0,this.isDateOpen=!1}onDateUpdate(e){const t=this.changedValue;"DATE"===this.mode?(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)):t&&e&&(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds())),this.changedValue=e,"DATE"===this.mode&&t!==e&&this.validateSelectedDate()&&this.onOkClick()}onTimeUpdate(e){this.changedValue=e}show(){this.reset(),this.modalRef=this.bsModalService.show(this.datetimepickerTemplate,{animated:!0,backdrop:"static",class:"date-picker-modal modal-dialog-centered"}),setTimeout((()=>{this.hideOnClick()}),500)}clear(){this.changedValue=null,this.triggerChange(),this.hideModal()}setToday(){const e=moment().startOf("day").toDate();this.onDateUpdate(e)}reset(){this.changedValue=this._value}hideModal(){this.modalRef?.id&&this.bsModalService.hide(this.modalRef.id)}onCancelClick(){this.changedValue=this._value,this.hideModal()}onOkClick(){this.validateSelectedDate()&&this.triggerChange(),this.hideModal()}triggerChange(){this.value!==this.changedValue&&this.change.emit(this.changedValue)}ngAfterViewInit(){}ngOnDestroy(){this.hideModal()}static{this.\u0275fac=function(e){return new(e||k)(m.\u0275\u0275directiveInject(m.Injector),m.\u0275\u0275directiveInject(P.BsModalService))}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:k,selectors:[["wm-datetimepicker"]],viewQuery:function(e,t){if(1&e&&m.\u0275\u0275viewQuery(R,7),2&e){let e;m.\u0275\u0275queryRefresh(e=m.\u0275\u0275loadQuery())&&(t.datetimepickerTemplate=e.first)}},inputs:{mode:"mode",placement:"placement",_bsDatepickerConfig:["config","_bsDatepickerConfig"],minTime:"minTime",maxTime:"maxTime",_displayFormat:"_displayFormat",excludedDatesToDisable:"excludedDatesToDisable",value:"value",bsDatepickerConfig:["config","bsDatepickerConfig"],excludedDaysToDisable:"excludedDaysToDisable",displayFormat:"displayFormat"},outputs:{change:"change"},decls:2,vars:0,consts:[["datetimepickerTemplate",""],[1,"app-datetime-picker"],[1,"modal-body"],[1,"mobile-datetime-picker-options"],["bsDatepicker","",3,"bsConfig","datesDisabled","bsValue","bsValueChange",4,"ngIf"],[3,"value","min","max","change",4,"ngIf"],[1,"text-primary","date-picker-value"],[1,"modal-footer"],["class","btn btn-secondary today-btn",3,"click",4,"ngIf"],["class","btn btn-primary pull-right ok-btn",3,"click",4,"ngIf"],[1,"btn","btn-secondary","pull-right","clear-btn",3,"click"],["bsDatepicker","",3,"bsConfig","datesDisabled","bsValue","bsValueChange"],[3,"value","min","max","change"],[1,"btn","btn-secondary","today-btn",3,"click"],[1,"btn","btn-primary","pull-right","ok-btn",3,"click"]],template:function(e,t){1&e&&m.\u0275\u0275template(0,N,12,6,"ng-template",null,0,m.\u0275\u0275templateRefExtractor)},dependencies:function(){return[g.NgIf,v.BsDatepickerDirective,v.BsDatepickerInlineDirective,L]},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&m.\u0275setClassMetadata(k,[{type:t.Component,args:[{selector:"wm-datetimepicker",template:'\n    <ng-template #datetimepickerTemplate>\n        <div class="app-datetime-picker">\n            <div class="modal-body">\n                <div class="mobile-datetime-picker-options">\n\n                </div>\n                <bs-datepicker-inline\n                    [bsConfig]="bsDatepickerConfig"\n                    [datesDisabled]="excludedDatesToDisable"\n                    bsDatepicker\n                    [bsValue]="changedValue"\n                    (bsValueChange)="onDateUpdate($event)"\n                    *ngIf="mode === \'DATE_TIME\' || mode === \'DATE\'">\n                </bs-datepicker-inline>\n                <wm-timepicker\n                    [value]="changedValue"\n                    [min]="minTime"\n                    [max]="maxTime"\n                    (change)="onTimeUpdate($event)"\n                    *ngIf="mode === \'DATE_TIME\' || mode === \'TIME\'"></wm-timepicker>\n                <span class="text-primary date-picker-value">\n                    {{getDateLabel()}}\n                </span>\n            </div>\n            <div class="modal-footer">\n                <button\n                    *ngIf="mode === \'DATE_TIME\' || mode === \'DATE\'"\n                    class="btn btn-secondary today-btn"\n                    (click)="setToday()">{{appLocale.LABEL_TODAY_DATE || "Today" }}</button>\n                <button\n                    class="btn btn-primary pull-right ok-btn"\n                    *ngIf="mode === \'DATE_TIME\' || mode === \'TIME\'"\n                    (click)="onOkClick()">{{appLocale.LABEL_OK || "Ok" }}</button>\n                <button\n                    class="btn btn-secondary pull-right clear-btn"\n                    (click)="clear()">{{appLocale.LABEL_CLEAR_DATE || "Clear" }}</button>\n            </div>\n        </div>\n    </ng-template>\n    '}]}],(function(){return[{type:m.Injector},{type:P.BsModalService}]}),{datetimepickerTemplate:[{type:t.ViewChild,args:["datetimepickerTemplate",{static:!0}]}],mode:[{type:t.Input}],placement:[{type:t.Input}],_bsDatepickerConfig:[{type:t.Input,args:["config"]}],minTime:[{type:t.Input}],maxTime:[{type:t.Input}],_displayFormat:[{type:t.Input}],change:[{type:t.Output}],excludedDatesToDisable:[{type:t.Input}],value:[{type:t.Input}],bsDatepickerConfig:[{type:t.Input,args:["config"]}],excludedDaysToDisable:[{type:t.Input}],displayFormat:[{type:t.Input}]});class L{constructor(e){this.inj=e,this.options={hour:[],minute:[],second:[],meridian:["AM","PM"]},this.value=new Date,this.min=null,this.max=null,this.change=new t.EventEmitter,this.options.hour=this.populateNumbers(0,23),this.options.minute=this.populateNumbers(0,59),this.options.second=this.populateNumbers(0,59)}populateNumbers(e,t){const i=[];for(let n=e;n<=t;n++)i.push({label:(n<10?"0":"")+n,value:n});return i}set({index:e,value:t},i){"HOUR"===i?this.value=moment(this.value).hour(parseInt(t)).toDate():"MINUTE"===i?this.value=moment(this.value).minute(parseInt(t)).toDate():"SECOND"===i?this.value=moment(this.value).second(parseInt(t)).toDate():"MERIDIAN"===i&&(this.value=moment(this.value).minute(t).toDate()),this.min&&this.value<this.min&&(this.value=this.min),this.max&&this.value>this.max&&(this.value=this.max),this.change.emit(this.value)}get hour(){return moment(this.value).hour()}get minute(){return moment(this.value).minute()}get second(){return moment(this.value).second()}get meridian(){return"AM"}onDateUpdate(e){}ngAfterViewInit(){}static{this.\u0275fac=function(e){return new(e||L)(m.\u0275\u0275directiveInject(m.Injector))}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:L,selectors:[["wm-timepicker"]],inputs:{value:"value",min:"min",max:"max"},outputs:{change:"change"},decls:8,vars:6,consts:[[3,"options","selectedValue","change"],[1,"app-time-separator"]],template:function(e,t){1&e&&(m.\u0275\u0275elementStart(0,"wm-pickergroup")(1,"wm-picker",0),m.\u0275\u0275listener("change",(function(e){return t.set(e,"HOUR")})),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(2,"span",1),m.\u0275\u0275text(3,":"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(4,"wm-picker",0),m.\u0275\u0275listener("change",(function(e){return t.set(e,"MINUTE")})),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(5,"span",1),m.\u0275\u0275text(6,":"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(7,"wm-picker",0),m.\u0275\u0275listener("change",(function(e){return t.set(e,"SECOND")})),m.\u0275\u0275elementEnd()()),2&e&&(m.\u0275\u0275advance(1),m.\u0275\u0275property("options",t.options.hour)("selectedValue",t.hour),m.\u0275\u0275advance(3),m.\u0275\u0275property("options",t.options.minute)("selectedValue",t.minute),m.\u0275\u0275advance(3),m.\u0275\u0275property("options",t.options.minute)("selectedValue",t.second))},dependencies:[O,E],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&m.\u0275setClassMetadata(L,[{type:t.Component,args:[{selector:"wm-timepicker",template:'\n        <wm-pickergroup>\n            <wm-picker\n                [options]="options.hour"\n                [selectedValue]="hour"\n                (change)="set($event, \'HOUR\')"></wm-picker>\n            <span class="app-time-separator">:</span>\n            <wm-picker\n                [options]="options.minute"\n                [selectedValue]="minute"\n                (change)="set($event, \'MINUTE\')"></wm-picker>\n            <span class="app-time-separator">:</span>\n            <wm-picker\n                [options]="options.minute"\n                [selectedValue]="second"\n                (change)="set($event, \'SECOND\')"></wm-picker>\n        </wm-pickergroup>\n    '}]}],(function(){return[{type:m.Injector}]}),{value:[{type:t.Input}],min:[{type:t.Input}],max:[{type:t.Input}],change:[{type:t.Output}]});const F="CURRENT_DATE",B=["January","February","March","April","May","June","July","August","September","October","November","December"],j="default",V="default";function G(e){return Object.assign(new o.TimepickerConfig,{meridians:i.getLocaleDayPeriods(e.getSelectedLocale(),i.FormStyle.Format,i.TranslationWidth.Abbreviated)})}class W extends c.BaseFormCustomComponent{get timeZone(){return this.inj.get(l.AbstractI18nService).getTimezone(this)}constructor(e,t){super(e,t),this.isReadOnly=!1,this.clicked=!1,this.formatsByLocale={timezone:""},this._dateOptions=new a.BsDatepickerConfig,this.i18nService=this.inj.get(l.AbstractI18nService),this.invokeEventCallback("beforeload"),this.datePipe=this.inj.get(r.ToDatePipe),this.selectedLocale=this.i18nService.getSelectedLocale(),this._dateOptions.todayPosition="left",this._dateOptions.clearPosition="right",this.meridians=i.getLocaleDayPeriods(this.selectedLocale,i.FormStyle.Format,i.TranslationWidth.Abbreviated),this.loadNativeDateInput=l.isMobile()&&!this.showcustompicker,this.cancelLocaleChangeSubscription=this.getAppInstance().subscribe("locale-changed",(e=>{this.datePipe.datePipe.locale=e.angular,this._dateOptions.todayButtonLabel=this.i18nService.getLocalizedMessage("LABEL_TODAY_DATE"),this._dateOptions.clearButtonLabel=this.i18nService.getLocalizedMessage("LABEL_CLEAR_DATE")}))}isDropDownDisplayEnabledOnInput(e){return e===j}isDataEntryModeEnabledOnInput(e){return e===V}showValidation(e,t,i,n){if(i)return console.warn("min max date validation failed ",n),$(e.target).val(t)}resetDisplayInput(){$(this.nativeElement).find(".display-input").val("")}validate(e){return this.invalidDateTimeFormat?{invalidDateTimeFormat:{valid:!1}}:!_.isUndefined(this.dateNotInRange)&&this.dateNotInRange?{dateNotInRange:{valid:!1}}:!_.isUndefined(this.timeNotInRange)&&this.timeNotInRange?{timeNotInRange:{valid:!1}}:this.show&&this.required?e.value?null:{required:!0}:(this.validateType="",null)}formatValidation(e,t,i){const n=this.datepattern||this.timepattern,a=this.timeZone,s=l.getFormattedDate(this.datePipe,e,n,a,null,null,this);if(t=t.trim())if("timestamp"===n){if(!_.isNaN(t)&&_.parseInt(t)!==s)return this.invalidDateTimeFormat=!0,this.validateType="incorrectformat",this.invokeOnChange(this.datavalue,void 0,!1),!1}else if(i&&(t=l.getFormattedDate(this.datePipe,t,n,a)),t!==s)return this.invalidDateTimeFormat=!0,this.validateType="incorrectformat",this.invokeOnChange(this.datavalue,void 0,!1),!1;return!0}minDateMaxDateValidationOnInput(e,t,i,n){if(e){const a=e;e=moment(e).startOf("day").toDate();const s=moment(l.getDateObj(this.mindate)).startOf("day").toDate(),o=moment(l.getDateObj(this.maxdate)).startOf("day").toDate();if(this.mindate&&e<s){const e=`${this.appLocale.LABEL_MINDATE_VALIDATION_MESSAGE} ${this.mindate}.`;return this.invokeOnChange(this.datavalue,void 0,!1),n&&l.getFormattedDate(this.datePipe,s,this.datepattern,this.timeZone,null,null,this)===i?$(t.target).val(i):(this.dateNotInRange=!0,this.validateType="mindate",this.showValidation(t,i,n,e))}if(this.maxdate&&e>o){const e=`${this.appLocale.LABEL_MAXDATE_VALIDATION_MESSAGE} ${this.maxdate}.`;return this.invokeOnChange(this.datavalue,void 0,!1),n&&l.getFormattedDate(this.datePipe,o,this.datepattern,this.timeZone,null,null,this)===i?$(t.target).val(i):(this.dateNotInRange=!0,this.validateType="maxdate",this.showValidation(t,i,n,e))}if(this.excludedates){let e;if(e=l.isString(this.excludedates)?_.split(this.excludedates,","):this.excludedates,e=e.map((e=>l.getFormattedDate(this.datePipe,e,this.datepattern,this.timeZone,null,null,this))),e.indexOf(l.getFormattedDate(this.datePipe,a,this.datepattern,this.timeZone,null,null,this))>-1)return this.dateNotInRange=!0,this.validateType="excludedates",void this.invokeOnChange(this.datavalue,void 0,!1)}if(this.excludedays){const e=_.split(this.excludedays,","),t=_.get(a,"getDay")?a.getDay():a;if(e.indexOf(t.toString())>-1)return this.dateNotInRange=!0,this.validateType="excludedays",void this.invokeOnChange(this.datavalue,void 0,!1)}}n||(this.dateNotInRange=!1,this.invokeOnChange(this.datavalue,void 0,!1))}hightlightToday(e){const t=$(".bs-datepicker-head .current").first().text(),i=$(".bs-datepicker-head .current").eq(1).text(),n=new Date(e).toLocaleString("default",{month:"long"}),a=e.getFullYear().toString();if(t==n&&i==a){const t=e.getDate().toString();_.filter($(`span:contains(${t})`).not(".is-other-month"),(e=>{$(e).text()===t&&$(e).addClass("current-date text-info")}))}}isOtheryear(e){return 0===e.getMonth()&&11===this.activeDate.getMonth()||11===e.getMonth()&&0===this.activeDate.getMonth()}showDatePickerModal(e){this.activeDate=e||new Date,this.setNextData(this.activeDate),this.datetimepickerComponent.show(),setTimeout((()=>{this.addDatepickerMouseEvents(),this.setActiveDateFocus(this.activeDate,!0)}),500)}goToOtherMonthOryear(e,t){const i=$(`.bs-datepicker-head .${e}`);i.attr("disabled")||(i.trigger("click"),"days"===t?this.loadDays():"month"===t?this.loadMonths():"year"===t&&this.loadYears())}setActiveDateFocus(e,t){this.setNextData(e),this.clicked=!1;const i=this.activeDate.getMonth();t||(e.getMonth()<i?this.isOtheryear(e)?this.goToOtherMonthOryear("next","days"):this.goToOtherMonthOryear("previous","days"):e.getMonth()>i&&(this.isOtheryear(e)?this.goToOtherMonthOryear("previous","days"):this.goToOtherMonthOryear("next","days"))),setTimeout((()=>{const t=e.getDate().toString();_.filter($(`span:contains(${t})`).not(".is-other-month"),(i=>{const n=$(".bs-datepicker-head .current").first().text(),a=$(".bs-datepicker-head .current").eq(1).text(),s=(new Date).toLocaleString("default",{month:"long"});$(i).text()===t&&n==s&&a==(new Date).getFullYear()&&($(i).hasClass("selected")&&$(i).parent().attr("aria-selected","true"),$(i).attr("aria-label",moment(e).format("dddd, MMMM Do YYYY")),$("[bsdatepickerdaydecorator]").not(".is-other-month").attr("tabindex","-1"),$(i).attr("tabindex","0"),$(i).focus(),this.activeDate=e)})),e.getDate()===(new Date).getDate()&&e.getMonth()===(new Date).getMonth()&&e.getFullYear()===(new Date).getFullYear()&&this.hightlightToday(e)}))}getMonth(e,t){const i=new Date(e);let n=i.getMonth();const a=i.getFullYear();n+=t;const s=new Date(a,n),o=s.toLocaleString("en-US",{month:"long"});return{date:s,fullMonth:o}}setFocusForMonthOrDay(){const e=$(".bs-datepicker-head .current").first().text(),t=$(".bs-datepicker-body");if(t.find("table.months").length>0){_.parseInt(e)!==this.activeDate.getFullYear()&&this.loadMonths();const t=new Date(_.parseInt(e),this.activeDate.getMonth(),this.activeDate.getDate());this.setActiveMonthFocus(t,!0)}else if(t.find("table.days").length>0){const t=B.indexOf(e);t!==this.activeDate.getMonth()&&this.loadDays();const i=new Date(this.activeDate.getFullYear(),t,1);this.setActiveDateFocus(i,!0)}}setFocusForCurrentMonthOryear(){const e=$(".bs-datepicker-body");e.find("table.months").length>0?(this.loadMonths(),this.setActiveMonthFocus(this.activeDate,!0)):e.find("table.years").length>0&&(this.loadYears(),this.setActiveYearFocus(this.activeDate,!0))}setFocusForDate(e){const t=$(".bs-datepicker-body");if(t.find("table.months").length>0){this.loadMonths();const t=new Date(this.activeDate.getFullYear()+e,0,this.activeDate.getDate());this.setActiveMonthFocus(t,!0)}else if(t.find("table.years").length>0){this.loadYears();const e=t.find("table.years span").first().text(),i=new Date(_.parseInt(e),this.activeDate.getMonth(),this.activeDate.getDate());this.setActiveYearFocus(i,!0)}else if(t.find("table.days").length>0){this.loadDays();const t=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth()+e,1);this.setActiveDateFocus(t,!0)}}addDatepickerKeyboardEvents(e,t){this.elementScope=e;const i=document.querySelector(`.${e.dateContainerCls}`);l.setAttr(i,"tabindex","0"),i.onkeydown=e=>{if("Escape"===e.key){this.elementScope.hideDatepickerDropdown();const e=this.elementScope.nativeElement.querySelector(".display-input");setTimeout((()=>e.focus()))}},this.loadDays(),this.setActiveDateFocus(this.activeDate)}setNextData(e){this.next=this.getMonth(e,1),this.prev=this.getMonth(e,-1)}loadDays(){setTimeout((()=>{$("[bsdatepickerdaydecorator]").not(".is-other-month").attr("tabindex","0"),this.addKeyBoardEventsForDays(),this.addDatepickerMouseEvents()}))}addKeyBoardEventsForDays(){$(".bs-datepicker-body").keydown((e=>{let t;if("ArrowDown"===e.key)e.preventDefault(),t=moment(this.activeDate).add(7,"days").toDate(),this.setActiveDateFocus(t);else if(e.ctrlKey&&"ArrowUp"===e.key)$(".bs-datepicker-head .current").first().click(),this.loadMonths(),this.setActiveMonthFocus(this.activeDate);else if("ArrowUp"===e.key)e.preventDefault(),t=moment(this.activeDate).add(-7,"days").toDate(),this.setActiveDateFocus(t);else if("ArrowLeft"===e.key)t=moment(this.activeDate).add(-1,"days").toDate(),this.setActiveDateFocus(t);else if("ArrowRight"===e.key)t=moment(this.activeDate).add(1,"days").toDate(),this.setActiveDateFocus(t);else if("PageUp"===e.key)e.preventDefault(),t=moment(this.activeDate).add(-1,"month").toDate(),this.setActiveDateFocus(t);else if("PageDown"===e.key)e.preventDefault(),t=moment(this.activeDate).add(1,"month").toDate(),this.setActiveDateFocus(t);else if("Enter"===e.key){if($(document.activeElement).hasClass("disabled"))return;$(document.activeElement).click(),this.elementScope.hideDatepickerDropdown();const e=this.elementScope.nativeElement.querySelector(".display-input");setTimeout((()=>e.focus()))}})),this.focusBlurDatePickerHeadButtons()}focusBlurDatePickerHeadButtons(){const e=$(".bs-datepicker-head button");e.on("focus",(function(){$(this).css("background-color","#9AA0A3")})),e.on("blur",(function(){$(this).css("background-color","")}))}loadMonths(){setTimeout((()=>{this.addKeyBoardEventsForMonths(),this.addDatepickerMouseEvents()}))}addKeyBoardEventsForMonths(){$(".bs-datepicker-body").keydown((e=>{let t;if(e.ctrlKey&&"ArrowDown"===e.key||"Enter"===e.key){if($(document.activeElement).parent().hasClass("disabled"))return;$(document.activeElement).click(),this.loadDays();const e=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth(),1);this.setActiveDateFocus(e)}else e.ctrlKey&&"ArrowUp"===e.key?($(".bs-datepicker-head .current").first().click(),this.loadYears(),this.setActiveYearFocus(this.activeDate)):"ArrowDown"===e.key?(e.preventDefault(),t=moment(this.activeDate).add(3,"month").toDate(),this.setActiveMonthFocus(t)):"ArrowUp"===e.key?(e.preventDefault(),t=moment(this.activeDate).add(-3,"month").toDate(),this.setActiveMonthFocus(t)):"ArrowLeft"===e.key?(t=moment(this.activeDate).add(-1,"month").toDate(),this.setActiveMonthFocus(t)):"ArrowRight"===e.key&&(t=moment(this.activeDate).add(1,"month").toDate(),this.setActiveMonthFocus(t))})),this.focusBlurDatePickerHeadButtons()}loadYears(){setTimeout((()=>{this.addKeyBoardEventsForYears(),this.addDatepickerMouseEvents()}))}setActiveMonthFocus(e,t){this.setNextData(e);const i=B[e.getMonth()];t||(e.getFullYear()<this.activeDate.getFullYear()?this.goToOtherMonthOryear("previous","month"):e.getFullYear()>this.activeDate.getFullYear()&&this.goToOtherMonthOryear("next","month")),setTimeout((()=>{$(".bs-datepicker-body table.months span").attr("tabindex","-1"),$(`.bs-datepicker-body table.months span:contains(${i})`).attr("tabindex","0"),$(`.bs-datepicker-body table.months span:contains(${i})`).focus(),this.activeDate=e}))}addKeyBoardEventsForYears(){$(".bs-datepicker-body").keydown((e=>{let t;if(e.ctrlKey&&"ArrowDown"===e.key||"Enter"===e.key){if($(document.activeElement).parent().hasClass("disabled"))return;$(document.activeElement).click(),this.loadMonths(),this.setActiveMonthFocus(this.activeDate)}else"ArrowDown"===e.key?(e.preventDefault(),t=moment(this.activeDate).add(4,"year").toDate(),this.setActiveYearFocus(t)):"ArrowUp"===e.key?(e.preventDefault(),t=moment(this.activeDate).add(-4,"year").toDate(),this.setActiveYearFocus(t)):"ArrowLeft"===e.key?(t=moment(this.activeDate).add(-1,"year").toDate(),this.setActiveYearFocus(t)):"ArrowRight"===e.key&&(t=moment(this.activeDate).add(1,"year").toDate(),this.setActiveYearFocus(t))})),this.focusBlurDatePickerHeadButtons()}setActiveYearFocus(e,t){const i=e.getFullYear(),n=$(".bs-datepicker-body table.years span"),a=n.first().text(),s=n.last().text();t||(e.getFullYear()<_.parseInt(a)?this.goToOtherMonthOryear("previous","year"):e.getFullYear()>_.parseInt(s)&&this.goToOtherMonthOryear("next","year")),setTimeout((()=>{$(".bs-datepicker-body table.years span").attr("tabindex","-1"),$(`.bs-datepicker-body table.years span:contains(${i})`).attr("tabindex","0"),$(`.bs-datepicker-body table.years span:contains(${i})`).focus(),this.activeDate=e}))}focusTimePickerPopover(e){this.elementScope=e,this.elementScope.ngZone.runOutsideAngular((()=>{setTimeout((()=>{$("timepicker .form-group").first().find("> input.form-control").focus()}))}))}bindTimePickerKeyboardEvents(){setTimeout((()=>{const e=$("body").find("> bs-dropdown-container timepicker");e.attr("tabindex",0),this.addEventsOnTimePicker(e)}))}focusOnInputEl(){$(this.nativeElement).closest(".caption-floating").length>0&&setTimeout((()=>{$(this.nativeElement).find(".app-textbox").focus()}),100)}isValidDate(e){return e&&e instanceof Date&&!isNaN(e.getTime())}timeFormatValidation(){const e=$(this.nativeElement).find("input").val(),t=l.getNativeDateObject(e,{meridians:this.meridians,pattern:this.datepattern});this.formatValidation(t,e)&&(this.invalidDateTimeFormat=!1,this.invokeOnChange(this.datavalue,void 0,!1))}updateTimeValue(e,t,i){let n=e.find('input[aria-label="minutes"]'),a=e.find('input[aria-label="seconds"]');n.value=a.value="00",t.length<2?setTimeout((()=>{"minutes"===i?this.bsTimePicker.updateMinutes(n):this.bsTimePicker.updateSeconds(a)}),500):"minutes"===i?this.bsTimePicker.updateMinutes(n):this.bsTimePicker.updateSeconds(a)}addEventsOnTimePicker(e){const t=e.find(".bs-timepicker-field");t.first().on("keyup",(i=>{const n=i.target.value;_.forEach(t,((t,a)=>{if(i.target!==t&&""===t.value&&n.length){const t=1===a?"minutes":"seconds";this.updateTimeValue(e,n,t)}}))})),this.removeKeyupListener=()=>{t.first().off("keyup")},e.on("keydown",(e=>{const t=$(e.target),i=t.parent(),n=this.elementScope;let a,s;if("Escape"===e.key&&n.hideTimepickerDropdown(),t.hasClass("bs-timepicker-field")){if(i.is(":first-child")?(e.shiftKey&&"Tab"===e.key||"Enter"===e.key||"Escape"===e.key)&&(n.setIsTimeOpen(!1),this.focus(),a=!0,s=!0):i.is(":last-child")||i.next().next().find("button.disabled").length?"Tab"!==e.key&&"Escape"!==e.key&&"Enter"!==e.key||(n.setIsTimeOpen(!1),this.focus(),a=!0,s=!0):"Enter"!==e.key&&"Escape"!==e.key||(n.setIsTimeOpen(!1),this.focus(),a=!0,s=!0),a&&e.stopPropagation(),s&&e.preventDefault(),n.mintime&&n.maxtime&&!this.isValidDate(n.bsTimeValue)&&("ArrowDown"===e.key?n.bsTimeValue=n.maxTime:"ArrowUp"===e.key&&(n.bsTimeValue=n.minTime)),"Tab"===e.key){this.invalidDateTimeFormat=!1,this.invokeOnChange(this.datavalue,void 0,!1);const e=this.datepattern||this.timepattern;l.getFormattedDate(n.datePipe,n.bsTimeValue,e,this.timeZone,null,null,this)===n.displayValue&&$(this.nativeElement).find(".display-input").val(n.displayValue)}"ArrowDown"!==e.key&&"ArrowUp"!==e.key||this.timeFormatValidation()}else t.hasClass("btn-default")&&("Tab"!==e.key&&"Escape"!==e.key||(n.setIsTimeOpen(!1),this.focus()))})),e.find("a").on("click",(e=>{const t=this.elementScope,i=$(e.target);t.mintime&&t.maxtime&&!this.isValidDate(t.bsTimeValue)&&(i.find("span").hasClass("bs-chevron-down")?t.bsTimeValue=t.maxTime:i.find("span").hasClass("bs-chevron-up")&&(t.bsTimeValue=t.minTime)),this.timeFormatValidation()}))}updateFormat(e){"datepattern"===e?(this._dateOptions.dateInputFormat=this.datepattern,this.showseconds=_.includes(this.datepattern,"s"),this.ismeridian=_.includes(this.datepattern,"h")):"timepattern"===e&&(this.showseconds=_.includes(this.timepattern,"s"),this.ismeridian=_.includes(this.timepattern,"h"))}getMobileInput(){return this.nativeElement.querySelector(".mobile-input")}onDateTimeInputBlur(){const e=this.getMobileInput();if(e&&!l.hasCordova()){const t=this.nativeElement.children;for(let e=0;e<t.length;e++)t[e].classList.remove("add-opacity");e.classList.remove("remove-opacity")}}onDateTimeInputFocus(e=!1){if(!this.loadNativeDateInput)return;const t=this.getMobileInput();if(!e||l.hasCordova())t&&this._triggeredByUser&&(t.focus(),t.click());else{const e=this.nativeElement.children;for(let t=0;t<e.length;t++)e[t].classList.add("add-opacity");t.classList.add("remove-opacity")}}getCordovaPluginDatePickerApi(){if(l.isIos())return _.get(window,"cordova.wavemaker.datePicker.selectDate")}addDatepickerMouseEvents(){$(".bs-datepicker-head .previous span").attr("aria-hidden",!0),$(".bs-datepicker-head .next span").attr("aria-hidden",!0),$(".bs-datepicker-head").on("click",".previous",(e=>{this.next=this.getMonth(this.activeDate,0),this.prev=this.getMonth(this.activeDate,-2),this.clicked=!0,e.originalEvent&&this.setFocusForDate(-1);var t=this.getMonth(this.activeDate,-1);setTimeout((()=>{$(".bs-datepicker-head .previous span").attr("aria-hidden",!0),$(".bs-datepicker-head .next span").attr("aria-hidden",!0),$(".bs-datepicker-head .next").attr("aria-label",`Next Month, ${this.next.fullMonth} ${this.next.date.getFullYear()}`),$(".bs-datepicker-head .previous").attr("aria-label",`Previous Month, ${this.prev.fullMonth} ${this.prev.date.getFullYear()}`),$(".bs-datepicker-head .current").first().append(`<h2 aria-hidden="false" aria-atomic="true" aria-live='polite' class="sr-only">Changed to Previous Month, ${t.fullMonth} and year ${t.date.getFullYear()}</h2>`),$(".bs-datepicker-head").on("focus",".current",(function(){$(".bs-datepicker-head .current").find("h2").remove()})),$(".bs-datepicker-head .previous").focus()}))})),$(".bs-datepicker-head").on("click",".next",(e=>{this.next=this.getMonth(this.activeDate,2),this.prev=this.getMonth(this.activeDate,0),this.clicked=!0,e.originalEvent&&this.setFocusForDate(1);var t=this.getMonth(this.activeDate,1);setTimeout((()=>{$(".bs-datepicker-head .previous span").attr("aria-hidden",!0),$(".bs-datepicker-head .next span").attr("aria-hidden",!0),$(".bs-datepicker-head .next").attr("aria-label",`Next Month, ${this.next.fullMonth} ${this.next.date.getFullYear()}`),$(".bs-datepicker-head .previous").attr("aria-label",`Previous Month, ${this.prev.fullMonth} ${this.prev.date.getFullYear()}`),$(".bs-datepicker-head .current").first().append(`<h2 aria-hidden="false" aria-atomic="true" aria-live='polite' class="sr-only">Changed to Next Month, ${t.fullMonth} and year ${t.date.getFullYear()}</h2>`),$(".bs-datepicker-head").on("focus",".current",(function(){$(".bs-datepicker-head .current").find("h2").remove()})),$(".bs-datepicker-head .next").focus()}))})),$(".bs-datepicker-head").on("click",".current",(e=>{e.originalEvent&&this.setFocusForCurrentMonthOryear()})),$(".bs-datepicker-body").on("click",".bs-datepicker-action-buttons",(e=>{e.stopPropagation(),e.originalEvent&&this.setFocusForMonthOrDay()})),$(".bs-datepicker-head .next").attr("aria-label",`Next Month, ${this.next.fullMonth} ${this.next.date.getFullYear()}`),$(".bs-datepicker-head .previous").attr("aria-label",`Previous Month, ${this.prev.fullMonth} ${this.prev.date.getFullYear()}`)}blurDateInput(e){const t=this.nativeElement.querySelector(".display-input");e&&setTimeout((()=>t.blur()))}onPropertyChange(e,t,i){"tabindex"!==e&&("required"!==e?"datepattern"===e?this.updateFormat(e):"showweeks"===e?this._dateOptions.showWeekNumbers=t:"mindate"===e?(this._dateOptions.minDate=t===F?this.mindate=new Date:l.getDateObj(t),this.minDateMaxDateValidationOnInput(this.datavalue)):"maxdate"===e?(this._dateOptions.maxDate=t===F?this.maxdate=new Date:l.getDateObj(t),this.minDateMaxDateValidationOnInput(this.datavalue)):"excludedates"===e||"excludedays"===e?(this.excludedays&&(this.excludedDaysToDisable=_.split(this.excludedays,",").map((e=>+e))),this.excludedates&&(this.excludedDatesToDisable=this.excludedates,l.isString(this.excludedates)&&(this.excludedDatesToDisable=_.split(this.excludedates,",")),this.excludedDatesToDisable=this.excludedDatesToDisable.map((e=>l.getDateObj(e)))),this.minDateMaxDateValidationOnInput(this.datavalue)):"selectfromothermonth"===e?this._dateOptions.selectFromOtherMonth=t:"todaybutton"===e?this._dateOptions.showTodayButton=t:"clearbutton"===e?this._dateOptions.showClearButton=t:"todaybuttonlabel"===e?this._dateOptions.todayButtonLabel=this.i18nService.getLocalizedMessage(t)||t:"clearbuttonlabel"===e?this._dateOptions.clearButtonLabel=this.i18nService.getLocalizedMessage(t)||t:"showcustompicker"===e?this.loadNativeDateInput=l.isMobile()&&!this.showcustompicker:"adaptiveposition"===e?this._dateOptions.adaptivePosition=t:super.onPropertyChange(e,t,i):this._onChange(this.datavalue))}ngAfterViewInit(){super.ngAfterViewInit(),this.containerTarget=r.getContainerTargetClass(this.nativeElement),this.isReadOnly="undefined"!=this.dataentrymode&&!this.isDataEntryModeEnabledOnInput(this.dataentrymode);const e=this.getMobileInput();e&&setTimeout((()=>{e.style.width="100%",e.style.height="100%"}))}ngOnDestroy(){this.dateOnShowSubscription&&this.dateOnShowSubscription.unsubscribe(),this.cancelLocaleChangeSubscription&&this.cancelLocaleChangeSubscription(),super.ngOnDestroy()}ngOnDetach(){this.datetimepickerComponent?.hideModal()}setTimezone(e){this.i18nService.setTimezone(e,this)}static{this.\u0275fac=function(e){m.\u0275\u0275invalidFactory()}}static{this.\u0275dir=m.\u0275\u0275defineDirective({type:W,viewQuery:function(e,t){if(1&e&&(m.\u0275\u0275viewQuery(s.BsDropdownDirective,5),m.\u0275\u0275viewQuery(o.TimepickerComponent,5),m.\u0275\u0275viewQuery(k,5)),2&e){let e;m.\u0275\u0275queryRefresh(e=m.\u0275\u0275loadQuery())&&(t.bsDropdown=e.first),m.\u0275\u0275queryRefresh(e=m.\u0275\u0275loadQuery())&&(t.bsTimePicker=e.first),m.\u0275\u0275queryRefresh(e=m.\u0275\u0275loadQuery())&&(t.datetimepickerComponent=e.first)}},features:[m.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&m.\u0275setClassMetadata(W,[{type:t.Directive}],(function(){return[{type:m.Injector},{type:void 0}]}),{bsDropdown:[{type:t.ViewChild,args:[s.BsDropdownDirective]}],bsTimePicker:[{type:t.ViewChild,args:[o.TimepickerComponent]}],datetimepickerComponent:[{type:t.ViewChild,args:[k]}]});const U=new Map([["autofocus",r.PROP_BOOLEAN],["class",r.PROP_STRING],["dataentrymode",{value:"default",...r.PROP_STRING}],["datavaluesource",r.PROP_ANY],["datavalue",r.PROP_STRING],["datepattern",r.PROP_STRING],["disabled",r.PROP_BOOLEAN],["excludedays",r.PROP_STRING],["excludedates",r.PROP_STRING],["hint",r.PROP_STRING],["maxdate",r.PROP_STRING],["mindate",r.PROP_STRING],["name",r.PROP_STRING],["outputformat",{value:"yyyy-MM-dd",...r.PROP_STRING}],["placeholder",{value:"Select Date",...r.PROP_STRING}],["readonly",r.PROP_BOOLEAN],["required",r.PROP_BOOLEAN],["shortcutkey",r.PROP_STRING],["show",{value:!0,...r.PROP_BOOLEAN}],["showdropdownon",{value:"default",...r.PROP_STRING}],["showbuttonbar",{value:!0,...r.PROP_BOOLEAN}],["showcustompicker",{value:!1,...r.PROP_BOOLEAN}],["showindevice",{displayType:"inline-block",value:"all",...r.PROP_STRING}],["showweeks",{value:!1,...r.PROP_BOOLEAN}],["tabindex",{value:0,...r.PROP_NUMBER}],["selectfromothermonth",{value:!0,...r.PROP_BOOLEAN}],["todaybutton",{value:!0,...r.PROP_BOOLEAN}],["clearbutton",{value:!0,...r.PROP_BOOLEAN}],["adaptiveposition",{value:!0,...r.PROP_BOOLEAN}],["todaybuttonlabel",{value:"LABEL_TODAY_DATE",...r.PROP_STRING}],["clearbuttonlabel",{value:"LABEL_CLEAR_DATE",...r.PROP_STRING}],["showdateformatasplaceholder",r.PROP_BOOLEAN]]);const q=["dateInput"],z=["wmDate",""];function H(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"wm-datetimepicker",9),m.\u0275\u0275listener("change",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.onDateChange(t))})),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(1,"div",10),m.\u0275\u0275listener("click",(function(){m.\u0275\u0275restoreView(e);const t=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(!(t.disabled||t.readonly||t.isCurrentDate)&&t.showDatePickerModal(t.bsDataValue))}))("focus",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return i.onDateTimeInputFocus(!0),m.\u0275\u0275resetView(i.invokeOnFocus(t))}))("blur",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return i.onDateTimeInputBlur(),m.\u0275\u0275resetView(i.invokeOnTouched(t))})),m.\u0275\u0275elementEnd()}if(2&e){const e=m.\u0275\u0275nextContext();m.\u0275\u0275property("config",e._dateOptions)("placement",e.modal)("excludedDaysToDisable",e.excludedDaysToDisable)("excludedDatesToDisable",e.excludedDatesToDisable)("displayFormat",e.dateInputFormat)("value",e.bsDataValue),m.\u0275\u0275advance(1),m.\u0275\u0275property("tabindex",e.tabindex||0),m.\u0275\u0275attribute("aria-label",e.displayValue?"Change Date "+e.displayValue:e.hint||"Choose Date")}}const Q={widgetType:"wm-date",hostClass:"app-date input-group"};class Y extends W{static{this.initializeProps=(r.register("wm-date",U),void r.registerFormWidget(l.FormWidgetType.DATE,new Map(U)))}get timestamp(){return this.bsDataValue?this.bsDataValue.valueOf():void 0}get dateInputFormat(){return this._dateOptions.dateInputFormat||"yyyy-MM-dd"}get displayValue(){return l.getFormattedDate(this.datePipe,this.bsDataValue,this.dateInputFormat,this.timeZone,null,this.isCurrentDate,this)||""}get nativeDisplayValue(){return l.getFormattedDate(this.datePipe,this.bsDataValue,"yyyy-MM-dd",this.timeZone,null,this.isCurrentDate,this)||""}get datavalue(){return l.getFormattedDate(this.datePipe,this.bsDataValue,this.outputformat,this.timeZone,null,this.isCurrentDate,this)||""}set datavalue(e){"CURRENT_DATE"===e?(setTimeout((()=>{this.bsDataValue=this.timeZone?l.getMomentLocaleObject(this.timeZone):new Date}),50),this.isCurrentDate=!0):(this.bsDataValue=e?l.getDateObj(e,{isNativePicker:this.loadNativeDateInput},this.timeZone):void 0,this.isCurrentDate=!1),this.invokeOnChange(this.datavalue,void 0,!0),this.cdRef.detectChanges()}constructor(e,t,i){super(e,Q),this.cdRef=t,this.appDefaults=i,this.isOpen=!1,this.isEnterPressedOnDateInput=!1,this.showdateformatasplaceholder=!1,r.styler(this.nativeElement,this),this.dateContainerCls=`app-date-${this.widgetId}`,this._dateOptions.containerClass=`app-date ${this.dateContainerCls}`,this._dateOptions.showWeekNumbers=!1,this._bsDefaultLoadCheck=!0,this.datepattern=this.appDefaults.dateFormat||l.getDisplayDateTimeFormat(l.FormWidgetType.DATE),this.updateFormat("datepattern")}onDisplayDateChange(e,t=!1){if(this.updateIMask(),this.isEnterPressedOnDateInput)return void(this.isEnterPressedOnDateInput=!1);const i=l.getDateObj(e.target.value,{pattern:this.datepattern,isNativePicker:t});this.formatValidation(i,e.target.value,t)&&(t&&this.minDateMaxDateValidationOnInput(i,e,this.displayValue,t)||this.setDataValue(i))}setDataValue(e){this.invalidDateTimeFormat=!1,this.minDateMaxDateValidationOnInput(e),l.getFormattedDate(this.datePipe,e,this.dateInputFormat,this.timeZone,null,this.isCurrentDate,this)===this.displayValue&&$(this.nativeElement).find(".display-input").val(this.displayValue),e?(this.bsDataValue=e,this.updateIMask()):this.bsDataValue=void 0,this.invokeOnChange(this.datavalue,{},!0)}onDatePickerOpen(){this.isOpen=!0,this.activeDate=this.bsDataValue?this.bsDataValue:this.timeZone?l.getMomentLocaleObject(this.timeZone):new Date,this.bsDataValue||this.hightlightToday(this.activeDate),this.updateIMask(),this.$element.find(".model-holder").width("1px");$("bs-datepicker-container").attr("aria-label","Use Arrow keys to navigate dates, Choose Date from datepicker"),$(".bs-calendar-container").removeAttr("role");const e=$(".bs-datepicker-container")[0];if(this.focusTrap=r.setFocusTrap(e,!0),this.focusTrap.activate(),this.addDatepickerKeyboardEvents(this,!1),l.adjustContainerPosition($("bs-datepicker-container"),this.nativeElement,this.bsDatePickerDirective._datepicker),l.adjustContainerRightEdges($("bs-datepicker-container"),this.nativeElement,this.bsDatePickerDirective._datepicker),this.timeZone){const e=document.querySelector(`.${this.dateContainerCls} .bs-datepicker-buttons .btn-today-wrapper button`),t=i=>{const n=l.getMomentLocaleObject(this.timeZone);new Date(this.bsDataValue).toDateString()!==new Date(n).toDateString()&&(this.bsDataValue=n),e.removeEventListener("click",t)};e.addEventListener("click",t)}}onInputBlur(e){this.updateIMask(),$(e.relatedTarget).hasClass("current-date")||(this.invokeOnTouched(),this.invokeEventCallback("blur",{$event:e}))}updateIMask(){this.imask?.maskRef?.updateValue()}hideDatepickerDropdown(){this.invokeOnTouched(),this.isOpen=!1,this.focusTrap?.deactivate(),this.isEnterPressedOnDateInput=!1,this.deregisterEventListener&&this.deregisterEventListener(),this.blurDateInput(this.isOpen)}handleEvent(e,t,i,n){_.includes(["blur","focus","change","click"],t)||super.handleEvent(e,t,i,n)}toggleDpDropdown(e,t=!1){this.loadNativeDateInput&&(t||this.onDateTimeInputFocus()),"click"===e.type&&this.invokeEventCallback("click",{$event:e}),e.target&&$(e.target).is("input")&&!this.isDropDownDisplayEnabledOnInput(this.showdropdownon)?e.stopPropagation():(this.bsDatePickerDirective.toggle(),this.addBodyClickListener(this.bsDatePickerDirective.isOpen))}addBodyClickListener(e){if(!e)return;const t=document.querySelector("body");setTimeout((()=>{const e=t.querySelector(`.${this.dateContainerCls}`);this.deregisterEventListener=l.addEventListenerOnElement(t,e,this.nativeElement,"click",this.isDropDownDisplayEnabledOnInput(this.showdropdownon),(()=>{this.isOpen=!1}),0,!0)}),350)}onDisplayKeydown(e){if(this.isDropDownDisplayEnabledOnInput(this.showdropdownon))if(e.stopPropagation(),"Enter"===e.key){const t=l.getDateObj(e.target.value,{pattern:this.datepattern});e.preventDefault();const i=l.getFormattedDate(this.datePipe,t,this.dateInputFormat,this.timeZone,null,this.isCurrentDate,this),n=e.target.value.trim();n&&"timestamp"===this.datepattern?_.isNaN(n)||_.parseInt(n)===i||(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,e,!1)):n&&n!==i?(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,e,!1)):(this.invalidDateTimeFormat=!1,this.isEnterPressedOnDateInput=!0,this.bsDatePickerDirective.bsValue=e.target.value?t:"",this.updateIMask()),this.toggleDpDropdown(e)}else this.hideDatepickerDropdown();else this.hideDatepickerDropdown()}onDateChange(e){this._bsDefaultLoadCheck?this._bsDefaultLoadCheck=!1:this.setDataValue(e)}onPropertyChange(e,t,i){"showdateformatasplaceholder"===e?(this.showdateformatasplaceholder=t,this.imask?.destroyMask(),this.showdateformatasplaceholder&&"timestamp"!==this.datepattern&&(this.mask=function(e,t){if("timestamp"==e)return!1;const i=e.toUpperCase().replace(/E/g,"d");return{mask:Date,pattern:i,format:e=>moment(e,i).format(i),parse:e=>moment(e,i).toDate(),blocks:{YYYY:{mask:p.MaskedRange,from:1900,to:9999,placeholderChar:"Y",maxLength:4},YYY:{mask:p.MaskedRange,from:900,to:999,placeholderChar:"Y",maxLength:3},YY:{mask:p.MaskedRange,from:0,to:99,placeholderChar:"Y",maxLength:2},Y:{mask:p.MaskedRange,from:1900,to:9999,placeholderChar:"Y",maxLength:4},M:{mask:p.MaskedRange,from:1,to:12,placeholderChar:"M",maxLength:2},MM:{mask:p.MaskedRange,from:1,to:12,placeholderChar:"M",maxLength:2},MMM:{mask:p.MaskedEnum,enum:Array.from({length:12},((e,i)=>new Date(0,i).toLocaleString(t,{month:"short"}))),placeholderChar:"M",maxLength:3},MMMM:{mask:p.MaskedEnum,enum:Array.from({length:12},((e,i)=>new Date(0,i).toLocaleString(t,{month:"long"}))),placeholderChar:"M",maxLength:4},DD:{mask:p.MaskedRange,from:1,to:31,placeholderChar:"D",maxLength:2},D:{mask:p.MaskedRange,from:1,to:31,placeholderChar:"D",maxLength:2},ddd:{mask:p.MaskedEnum,enum:Array.from({length:7},((e,i)=>new Date(0,0,i+1).toLocaleString(t,{weekday:"short"}))),placeholderChar:"E",maxLength:3},dddd:{mask:p.MaskedEnum,enum:Array.from({length:7},((e,i)=>new Date(0,0,i+1).toLocaleString(t,{weekday:"long"}))),placeholderChar:"E",minLength:6}},autofix:!0,lazy:!1,overwrite:!0,skipInvalid:!0}}(this.datepattern,this.selectedLocale),this.updateIMask())):super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||Y)(m.\u0275\u0275directiveInject(m.Injector),m.\u0275\u0275directiveInject(m.ChangeDetectorRef),m.\u0275\u0275directiveInject(w.AppDefaults))}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:Y,selectors:[["","wmDate",""]],viewQuery:function(e,t){if(1&e&&(m.\u0275\u0275viewQuery(a.BsDatepickerDirective,5),m.\u0275\u0275viewQuery(q,5,u.IMaskDirective)),2&e){let e;m.\u0275\u0275queryRefresh(e=m.\u0275\u0275loadQuery())&&(t.bsDatePickerDirective=e.first),m.\u0275\u0275queryRefresh(e=m.\u0275\u0275loadQuery())&&(t.imask=e.first)}},features:[m.\u0275\u0275ProvidersFeature([r.provideAs(Y,n.NG_VALUE_ACCESSOR,!0),r.provideAs(Y,n.NG_VALIDATORS,!0),r.provideAsWidgetRef(Y)]),m.\u0275\u0275InheritDefinitionFeature],attrs:z,decls:9,vars:27,consts:[["focus-target","","type","text",1,"form-control","app-textbox","app-dateinput","display-input",3,"name","imask","unmask","tabindex","value","disabled","autofocus","required","readOnly","click","focus","blur","change","keydown"],["dateInput",""],[1,"input-group-btn"],["type","button","aria-haspopup","true","aria-expanded","false",1,"btn","btn-default","btn-time",3,"tabindex","disabled","click"],["aria-hidden","true",1,"app-icon","wm-sl-l","sl-calendar"],[2,"width","0","display","inline-block"],["aria-label","datepicker dropdownmenu","aria-controls","date","bsDatepicker","","placement","bottom right",1,"model-holder",3,"tabindex","container","bsConfig","isOpen","daysDisabled","datesDisabled","isDisabled","bsValue","onShown","onHidden","bsValueChange"],["datepicker","bsDatepicker"],[3,"ngIf"],["dateTimePicker","","mode","DATE",3,"config","placement","excludedDaysToDisable","excludedDatesToDisable","displayFormat","value","change"],["role","button",1,"mobile-input","mobile-datepicker-container",3,"tabindex","click","focus","blur"]],template:function(e,t){1&e&&(m.\u0275\u0275elementStart(0,"input",0,1),m.\u0275\u0275listener("click",(function(e){return t.toggleDpDropdown(e,!0)}))("focus",(function(e){return t.onDateTimeInputFocus(),t.invokeOnFocus(e),t.updateIMask()}))("blur",(function(e){return t.onInputBlur(e)}))("change",(function(e){return t.onDisplayDateChange(e)}))("keydown",(function(e){return t._triggeredByUser=!0,t.onDisplayKeydown(e)})),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(2,"span",2)(3,"button",3),m.\u0275\u0275listener("click",(function(e){return t.toggleDpDropdown(e,!1)})),m.\u0275\u0275element(4,"i",4),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(5,"div",5)(6,"input",6,7),m.\u0275\u0275listener("onShown",(function(){return t.onDatePickerOpen()}))("onHidden",(function(){return t.hideDatepickerDropdown()}))("bsValueChange",(function(e){return t.onDateChange(e)})),m.\u0275\u0275elementEnd()(),m.\u0275\u0275template(8,H,2,8,"ng-template",8)),2&e&&(m.\u0275\u0275property("name",t.name)("imask",t.mask)("unmask",!0)("tabindex",t.loadNativeDateInput?"-1":t.tabindex)("value",t.displayValue)("disabled",t.disabled||t.readonly)("autofocus",t.autofocus)("required",t.required)("readOnly",t.isReadOnly),m.\u0275\u0275attribute("aria-hidden",!!t.loadNativeDateInput)("placeholder",t.placeholder)("accesskey",t.shortcutkey)("aria-label",t.hint),m.\u0275\u0275advance(3),m.\u0275\u0275property("tabindex",t.loadNativeDateInput?"-1":t.tabindex)("disabled",t.disabled||t.readonly),m.\u0275\u0275attribute("aria-hidden",!!t.loadNativeDateInput)("aria-label",t.displayValue?"Change Date "+t.displayValue:"Choose date by pressing enter"),m.\u0275\u0275advance(3),m.\u0275\u0275property("tabindex",-1)("container",t.containerTarget||".wm-app")("bsConfig",t._dateOptions)("isOpen",t.isOpen)("daysDisabled",t.excludedDaysToDisable)("datesDisabled",t.excludedDatesToDisable)("isDisabled",t.disabled||t.readonly)("bsValue",t.bsDataValue),m.\u0275\u0275attribute("aria-hidden",!!t.loadNativeDateInput),m.\u0275\u0275advance(2),m.\u0275\u0275property("ngIf",t.loadNativeDateInput))},dependencies:[g.NgIf,v.BsDatepickerDirective,v.BsDatepickerInputDirective,C.IMaskDirective,k],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&m.\u0275setClassMetadata(Y,[{type:t.Component,args:[{selector:"[wmDate]",providers:[r.provideAs(Y,n.NG_VALUE_ACCESSOR,!0),r.provideAs(Y,n.NG_VALIDATORS,!0),r.provideAsWidgetRef(Y)],template:'    <input class="form-control app-textbox app-dateinput display-input"\n        focus-target\n        type="text"\n        [name]="name"\n        #dateInput\n        [imask]="mask"\n        [unmask]="true"\n        [tabindex]="loadNativeDateInput ? \'-1\' : tabindex"\n        [attr.aria-hidden]="!!loadNativeDateInput"\n        [value]="displayValue"\n        (click)="toggleDpDropdown($event, true)"\n        (focus)="onDateTimeInputFocus(); invokeOnFocus($event); updateIMask()"\n        (blur)="onInputBlur($event)"\n        [disabled]="disabled || readonly"\n        [autofocus]="autofocus"\n        [required]="required"\n        [readOnly]="isReadOnly"\n        [attr.placeholder]="placeholder"\n        [attr.accesskey]="shortcutkey"\n        [attr.aria-label]="hint"\n        (change)="onDisplayDateChange($event)"\n        (keydown)="this._triggeredByUser = true; onDisplayKeydown($event);">\n\n    <span class="input-group-btn">\n        <button type="button"\n            class="btn btn-default btn-time"\n            [tabindex]="loadNativeDateInput ? \'-1\' : tabindex"\n            [attr.aria-hidden]="!!loadNativeDateInput"\n            [disabled]="disabled || readonly"\n            [attr.aria-label]="displayValue ? \'Change Date \' + displayValue : \'Choose date by pressing enter\'"\n            aria-haspopup="true"\n            aria-expanded="false"\n            (click)="toggleDpDropdown($event, false)">\n            <i aria-hidden="true"\n                class="app-icon wm-sl-l sl-calendar"></i>\n        </button>\n    </span>\n    <div style="width: 0;display: inline-block;">\n    <input class="model-holder"\n        aria-label="datepicker dropdownmenu"\n        aria-controls="date"\n        [tabindex]="-1"\n        [attr.aria-hidden]="!!loadNativeDateInput"\n        [container]="containerTarget || \'.wm-app\'"\n        [bsConfig]="_dateOptions"\n        [isOpen]="isOpen"\n        #datepicker="bsDatepicker"\n        bsDatepicker\n        [daysDisabled]="excludedDaysToDisable"\n        [datesDisabled]="excludedDatesToDisable"\n        placement="bottom right"\n        [isDisabled]="disabled || readonly"\n        [bsValue]="bsDataValue"\n        (onShown)="onDatePickerOpen()"\n        (onHidden)="hideDatepickerDropdown()"\n        (bsValueChange)="onDateChange($event)">\n</div>\n\n<ng-template [ngIf]="loadNativeDateInput">\n    <wm-datetimepicker\n        dateTimePicker\n        mode="DATE"\n        [config]="_dateOptions"\n        [placement]="modal"\n        [excludedDaysToDisable]="excludedDaysToDisable"\n        [excludedDatesToDisable]="excludedDatesToDisable"\n        [displayFormat]="dateInputFormat"\n        [value]="bsDataValue"\n        (change)="onDateChange($event)">\n    </wm-datetimepicker>\n    <div class="mobile-input mobile-datepicker-container"\n        [tabindex]="tabindex || 0"\n         (click)="!(disabled || readonly || isCurrentDate) && showDatePickerModal(bsDataValue)"\n        (focus)="onDateTimeInputFocus(true); invokeOnFocus($event);"\n        (blur)="onDateTimeInputBlur(); invokeOnTouched($event)"\n         [attr.aria-label]="displayValue ? \'Change Date \' + displayValue : hint || \'Choose Date\'"\n         role="button">\n    </div>\n</ng-template>\n'}]}],(function(){return[{type:m.Injector},{type:m.ChangeDetectorRef},{type:w.AppDefaults}]}),{bsDatePickerDirective:[{type:t.ViewChild,args:[a.BsDatepickerDirective]}],imask:[{type:t.ViewChild,args:["dateInput",{read:u.IMaskDirective}]}]});const K=new Map([["autofocus",r.PROP_BOOLEAN],["class",r.PROP_STRING],["dataentrymode",{value:"default",...r.PROP_STRING}],["datavaluesource",r.PROP_ANY],["datavalue",r.PROP_STRING],["datepattern",r.PROP_STRING],["disabled",r.PROP_BOOLEAN],["excludedays",r.PROP_STRING],["excludedates",r.PROP_STRING],["hint",r.PROP_STRING],["hourstep",{value:1,...r.PROP_NUMBER}],["maxdate",r.PROP_STRING],["mindate",r.PROP_STRING],["minutestep",{value:15,...r.PROP_NUMBER}],["name",r.PROP_STRING],["outputformat",{value:"timestamp",...r.PROP_STRING}],["placeholder",{value:"Select date time",...r.PROP_STRING}],["readonly",r.PROP_BOOLEAN],["required",r.PROP_BOOLEAN],["secondsstep",{value:1,...r.PROP_NUMBER}],["shortcutkey",r.PROP_STRING],["show",{value:!0,...r.PROP_BOOLEAN}],["showdropdownon",{value:"default",...r.PROP_STRING}],["showbuttonbar",r.PROP_BOOLEAN],["showcustompicker",{value:!1,...r.PROP_BOOLEAN}],["showindevice",{displayType:"inline-block",value:"all",...r.PROP_STRING}],["showweeks",r.PROP_BOOLEAN],["tabindex",{value:0,...r.PROP_NUMBER}],["timestamp",r.PROP_STRING],["selectfromothermonth",{value:!0,...r.PROP_BOOLEAN}],["todaybutton",{value:!0,...r.PROP_BOOLEAN}],["clearbutton",{value:!0,...r.PROP_BOOLEAN}],["adaptiveposition",{value:!0,...r.PROP_BOOLEAN}],["todaybuttonlabel",{value:"LABEL_TODAY_DATE",...r.PROP_STRING}],["clearbuttonlabel",{value:"LABEL_CLEAR_DATE",...r.PROP_STRING}]]),J=["wmDateTime",""];function Z(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",12),m.\u0275\u0275listener("click",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.preventTpClose(t))})),m.\u0275\u0275elementStart(1,"timepicker",13),m.\u0275\u0275listener("ngModelChange",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.bsTimeValue=t)}))("isValid",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.isValid(t))}))("ngModelChange",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.onModelUpdate(t,"time"))})),m.\u0275\u0275elementEnd()()}if(2&e){const e=m.\u0275\u0275nextContext();m.\u0275\u0275advance(1),m.\u0275\u0275property("showMeridian",e.ismeridian)("readonlyInput",e.disabled||e.readonly||e.isCurrentDate)("ngModel",e.bsTimeValue)("min",e.minTime)("max",e.maxTime)("hourStep",e.hourstep)("minuteStep",e.minutestep)("secondsStep",e.secondsstep)("mousewheel",!0)("arrowkeys",!0)("showSeconds",e.showseconds)}}function X(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"wm-datetimepicker",14),m.\u0275\u0275listener("change",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.onModelUpdate(t,"date"))})),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(1,"div",15),m.\u0275\u0275listener("click",(function(){m.\u0275\u0275restoreView(e);const t=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(!(t.disabled||t.readonly||t.isCurrentDate)&&t.showDatePickerModal(t.bsDateValue))}))("focus",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return i.onDateTimeInputFocus(!0),m.\u0275\u0275resetView(i.invokeOnFocus(t))}))("blur",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return i.onDateTimeInputBlur(),m.\u0275\u0275resetView(i.invokeOnTouched(t))})),m.\u0275\u0275elementEnd()}if(2&e){const e=m.\u0275\u0275nextContext();m.\u0275\u0275property("config",e._dateOptions)("placement",e.modal)("excludedDaysToDisable",e.excludedDaysToDisable)("excludedDatesToDisable",e.excludedDatesToDisable)("displayFormat",e.dateInputFormat)("value",e.bsDateValue),m.\u0275\u0275advance(1),m.\u0275\u0275property("tabindex",e.tabindex||0),m.\u0275\u0275attribute("aria-label",e.displayValue?"Change Date "+e.displayValue:e.hint||"Choose Date")}}const ee={widgetType:"wm-datetime",hostClass:"app-datetime input-group"},te="CURRENT_DATE";class ie extends W{static{this.initializeProps=(r.register("wm-datetime",K),r.registerFormWidget(l.FormWidgetType.DATETIME,new Map(K)),void r.registerFormWidget(l.FormWidgetType.TIMESTAMP,new Map(K)))}get timestamp(){return this.proxyModel?this.proxyModel.valueOf():void 0}get dateInputFormat(){return this._dateOptions.dateInputFormat||"yyyy-MM-ddTHH:mm:ss"}get displayValue(){return l.getFormattedDate(this.datePipe,this.proxyModel,this.dateInputFormat,this.timeZone,this.key,this.isCurrentDate,this)||""}get nativeDisplayValue(){return l.getFormattedDate(this.datePipe,this.proxyModel,"yyyy-MM-ddTHH:mm:ss",this.timeZone,this.key,this.isCurrentDate,this)||""}get datavalue(){return this.isCurrentDate&&!this.proxyModel?te:l.getFormattedDate(this.datePipe,this.proxyModel,this.outputformat,this.timeZone,null,null,this)}set datavalue(e){e===te?(this.isCurrentDate=!0,this.setTimeInterval()):(this.proxyModel=e?l.getDateObj(e,{isNativePicker:this.loadNativeDateInput},this.timeZone):void 0,this.clearTimeInterval(),this.isCurrentDate=!1),this.bsTimeValue=this.bsDateValue=this.proxyModel,this.cdRef.detectChanges()}constructor(e,t,i,n,a){super(e,ee),this.ngZone=t,this.cdRef=i,this.appDefaults=n,this.isEnterPressedOnDateInput=!1,this.isTimeOpen=!1,this.isDateOpen=!1,this.isCurrentDate=!1,this._debouncedOnChange=_.debounce(this.invokeOnChange,10),this.registerDestroyListener((()=>this.clearTimeInterval())),r.styler(this.nativeElement,this),this.app=a,this.dateContainerCls=`app-date-${this.widgetId}`,this._dateOptions.containerClass=`app-date ${this.dateContainerCls}`,this._dateOptions.showWeekNumbers=!1,this.datepattern=this.appDefaults.dateTimeFormat||l.getDisplayDateTimeFormat(l.FormWidgetType.DATETIME),this.updateFormat("datepattern")}setTimeInterval(){this.timeinterval||(this.timeinterval=setInterval((()=>{const e=this.timeZone?l.getMomentLocaleObject(this.timeZone):new Date;this.onModelUpdate(e)}),1e3))}clearTimeInterval(){this.timeinterval&&(clearInterval(this.timeinterval),this.timeinterval=null)}toggleTimePicker(e,t){this.loadNativeDateInput?this.onDateTimeInputFocus():(this.isTimeOpen=e,t&&"click"===t.type&&this.invokeEventCallback("click",{$event:t}),this.addTimepickerClickListener(this.isTimeOpen))}addTimepickerClickListener(e){if(!e)return;const t=document.querySelector("body");setTimeout((()=>{const e=$(t).find(">bs-dropdown-container .dropdown-menu").get(0);this.deregisterTimepickeEventListener=l.addEventListenerOnElement(t,e,this.nativeElement,"click",this.isDropDownDisplayEnabledOnInput(this.showdropdownon),(()=>{this.toggleTimePicker(!1)}),0,!0)}),350)}setIsTimeOpen(e){this.isTimeOpen=e}hideTimepickerDropdown(){this.invokeOnTouched(),this.toggleTimePicker(!1),this.deregisterTimepickeEventListener&&this.deregisterTimepickeEventListener();const e=$(this.nativeElement).closest(".app-composite-widget.caption-floating");e.length>0&&this.app.notify("captionPositionAnimate",{displayVal:this.displayValue,nativeEl:e})}onTimepickerOpen(){const e=document.querySelectorAll("timepicker");_.forEach(e,(e=>{l.addClass(e.parentElement,"app-datetime",!0)})),this.bsDatePickerDirective.hide(),this.focusTimePickerPopover(this),this.bindTimePickerKeyboardEvents(),l.adjustContainerPosition($("bs-dropdown-container"),this.nativeElement,this.bsDropdown._dropdown,$("bs-dropdown-container .dropdown-menu")),l.adjustContainerRightEdges($("bs-dropdown-container"),this.nativeElement,this.bsDropdown._dropdown,$("bs-dropdown-container .dropdown-menu"))}onDatePickerOpen(){this.isDateOpen=!this.isDateOpen,this.toggleTimePicker(!1),this.$element.find(".model-holder").width("1px");$("bs-datepicker-container").attr("aria-label","Use Arrow keys to navigate dates, Choose Date from datepicker"),$(".bs-calendar-container").removeAttr("role");const e=$(".bs-datepicker-container")[0];this.focusTrap=r.setFocusTrap(e,!0),this.focusTrap.activate(),this.bsDateValue?this.activeDate=this.bsDateValue:this.activeDate=new Date,this.bsDateValue||this.hightlightToday(this.activeDate),this.addDatepickerKeyboardEvents(this,!0),l.adjustContainerPosition($("bs-datepicker-container"),this.nativeElement,this.bsDatePickerDirective._datepicker)}onModelUpdate(e,t){if("date"===t&&(this.invalidDateTimeFormat=!1,l.getFormattedDate(this.datePipe,e,this.dateInputFormat,this.timeZone,this.key,this.isCurrentDate,this)===this.displayValue&&$(this.nativeElement).find(".display-input").val(this.displayValue)),this.minDateMaxDateValidationOnInput(e),!e)return this.bsDateValue&&this.bsTimePicker&&(""===this.bsTimePicker.hours||""===this.bsTimePicker.minutes||""===this.bsTimePicker.seconds)?this.bsDateValue=this.bsTimeValue=this.proxyModel=moment(this.bsDateValue).startOf("day").toDate():this.bsDateValue=this.bsTimeValue=this.proxyModel=void 0,void((e!==this.datavalue||!this.datavalue&&this.prevDatavalue)&&this._debouncedOnChange(this.datavalue,{},!0));"date"===t&&this.isDateOpen&&this.toggleTimePicker(!0),this.proxyModel=e,this.proxyModel&&(this.bsDateValue=this.bsTimeValue=e),this._debouncedOnChange(this.datavalue,{},!0),this.cdRef.detectChanges();const i=$(".bs-timepicker-field");if(this.timeZone&&"datetimestamp"===this.key&&i.length){const t=l.getFormattedDate(this.datePipe,e,this.getTimePattern(),this.timeZone,this.key,null,this);this.updateTimepickerFields(t,i)}}getTimePattern(){let e;const t=this.datepattern.toLowerCase().indexOf("h");let i=this.datepattern.toLowerCase().indexOf(":ss");i>-1?i+=3:(i=this.datepattern.toLowerCase().indexOf(":mm"),i>-1&&(i+=3));const n=this.datepattern.toLowerCase().indexOf("a");return e=this.datepattern.substr(t,i),n>-1&&(e+=" a"),e}updateTimepickerFields(e,t){const i=$("timepicker button.text-center"),n=e.split(" "),a=n[0].split(":");for(let e=0;e<t.length;e++)t[e].value=a[e];i?.html()?.trim()!==n[1]&&i.text(n[1])}preventTpClose(e){e.stopImmediatePropagation()}toggleDpDropdown(e,t=!1){this.loadNativeDateInput?t||this.onDateTimeInputFocus():("click"===e.type&&this.invokeEventCallback("click",{$event:e}),e.target&&$(e.target).is("input")&&!this.isDropDownDisplayEnabledOnInput(this.showdropdownon)?e.stopPropagation():(this.bsDatePickerDirective.toggle(),this.addBodyClickListener(this.bsDatePickerDirective.isOpen)))}addBodyClickListener(e){if(!e)return;const t=document.querySelector("body");setTimeout((()=>{const e=t.querySelector(`.${this.dateContainerCls}`);this.deregisterDatepickerEventListener=l.addEventListenerOnElement(t,e,this.nativeElement,"click",this.isDropDownDisplayEnabledOnInput(this.showdropdownon),(()=>{this.bsDatePickerDirective.hide()}),0,!0)}),350)}hideDatepickerDropdown(){this.isDateOpen=!1,this.focusTrap?.deactivate(),this.invokeOnTouched(),this.bsDatePickerDirective.hide(),this.bsDateValue&&this.toggleTimePicker(!0),this.isEnterPressedOnDateInput=!1,this.deregisterDatepickerEventListener&&this.deregisterDatepickerEventListener();const e=$(this.nativeElement).closest(".app-composite-widget.caption-floating");e.length>0&&this.app.notify("captionPositionAnimate",{displayVal:this.displayValue,nativeEl:e}),this.blurDateInput(this.isDateOpen)}onDateChange(e,t){if(this.isEnterPressedOnDateInput)return void(this.isEnterPressedOnDateInput=!1);let i=e.target.value.trim();i=i?l.getNativeDateObject(i,{pattern:this.loadNativeDateInput?this.outputformat:this.datepattern,meridians:this.meridians,isNativePicker:this.loadNativeDateInput}):void 0,this.formatValidation(i,e.target.value,t)&&(t&&this.minDateMaxDateValidationOnInput(i,e,this.displayValue,t)||(this.invalidDateTimeFormat=!1,this.onModelUpdate(i)))}onDisplayKeydown(e){if(this.isDropDownDisplayEnabledOnInput(this.showdropdownon)){e.stopPropagation();let t=e.target.value.trim();if("Enter"===e.key||"ArrowDown"===e.key){t=t?l.getNativeDateObject(t,{pattern:this.loadNativeDateInput?this.outputformat:this.datepattern,meridians:this.meridians}):void 0,e.preventDefault();const i=l.getFormattedDate(this.datePipe,t,this.dateInputFormat,this.timeZone,this.key,this.isCurrentDate,this),n=e.target.value.trim();n&&"timestamp"===this.datepattern?_.isNaN(n)||_.parseInt(n)===i||(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,e,!1)):n&&n!==i?(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,e,!1)):(this.invalidDateTimeFormat=!1,this.isEnterPressedOnDateInput=!0,this.bsDatePickerDirective.bsValue=t),this.toggleDpDropdown(e)}else this.hideDatepickerDropdown(),this.hideTimepickerDropdown()}else this.hideDatepickerDropdown(),this.hideTimepickerDropdown()}isValid(e){if(!e){const e=$(this.nativeElement).find("input").val(),t=l.getNativeDateObject(e,{pattern:this.loadNativeDateInput?this.outputformat:this.datepattern,meridians:this.meridians,isNativePicker:this.loadNativeDateInput});if(!this.formatValidation(t,e))return}}handleEvent(e,t,i,n){_.includes(["blur","focus","change","click"],t)||super.handleEvent(e,t,i,n)}onInputBlur(e){$(e.relatedTarget).hasClass("current-date")||(this.invokeOnTouched(),this.invokeEventCallback("blur",{$event:e}))}static{this.\u0275fac=function(e){return new(e||ie)(m.\u0275\u0275directiveInject(m.Injector),m.\u0275\u0275directiveInject(m.NgZone),m.\u0275\u0275directiveInject(m.ChangeDetectorRef),m.\u0275\u0275directiveInject(w.AppDefaults),m.\u0275\u0275directiveInject(w.App))}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:ie,selectors:[["","wmDateTime",""]],viewQuery:function(e,t){if(1&e&&m.\u0275\u0275viewQuery(a.BsDatepickerDirective,5),2&e){let e;m.\u0275\u0275queryRefresh(e=m.\u0275\u0275loadQuery())&&(t.bsDatePickerDirective=e.first)}},features:[m.\u0275\u0275ProvidersFeature([r.provideAs(ie,n.NG_VALUE_ACCESSOR,!0),r.provideAs(ie,n.NG_VALIDATORS,!0),r.provideAsWidgetRef(ie),{provide:o.TimepickerConfig,deps:[l.AbstractI18nService],useFactory:G}]),m.\u0275\u0275InheritDefinitionFeature],attrs:J,decls:12,vars:30,consts:[["dropdown","","autoClose","false",2,"display","inherit",3,"isOpen","container","onShown"],["focus-target","","type","text",1,"form-control","app-textbox","display-input",3,"name","tabindex","value","autofocus","disabled","required","readOnly","click","focus","blur","change","keydown"],[1,"input-group-btn"],["type","button","aria-haspopup","true","aria-expanded","false",1,"btn","btn-default","btn-date",3,"tabindex","disabled","click"],["aria-hidden","true",1,"app-icon","wm-sl-l","sl-calendar"],["type","button","aria-label","Select time","aria-haspopup","true","aria-expanded","false",1,"btn","btn-default","btn-time",3,"tabindex","disabled","click"],["aria-hidden","true",1,"app-icon","wm-sl-l","sl-time"],[2,"width","0","display","inline-block"],["aria-label","datepicker dropdownmenu","aria-controls","date","focus-target","","placement","bottom right","bsDatepicker","",1,"model-holder",3,"tabindex","container","bsConfig","isOpen","daysDisabled","datesDisabled","isDisabled","bsValue","onShown","onHidden","bsValueChange"],["datepicker","bsDatepicker"],["class","dropdown-menu","aria-label","timepicker dropdown","aria-controls","time",3,"click",4,"dropdownMenu"],[3,"ngIf"],["aria-label","timepicker dropdown","aria-controls","time",1,"dropdown-menu",3,"click"],[1,"model-holder",3,"showMeridian","readonlyInput","ngModel","min","max","hourStep","minuteStep","secondsStep","mousewheel","arrowkeys","showSeconds","ngModelChange","isValid"],["dateTimePicker","",3,"config","placement","excludedDaysToDisable","excludedDatesToDisable","displayFormat","value","change"],["role","button",1,"mobile-input","mobile-datepicker-container",3,"tabindex","click","focus","blur"]],template:function(e,t){1&e&&(m.\u0275\u0275elementStart(0,"div",0),m.\u0275\u0275listener("onShown",(function(){return t.onTimepickerOpen()})),m.\u0275\u0275elementStart(1,"input",1),m.\u0275\u0275listener("click",(function(e){return t.toggleDpDropdown(e,!0)}))("focus",(function(e){return t.onDateTimeInputFocus(),t.invokeOnFocus(e)}))("blur",(function(e){return t.onInputBlur(e)}))("change",(function(e){return t.onDateChange(e)}))("keydown",(function(e){return t._triggeredByUser=!0,t.onDisplayKeydown(e)})),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(2,"span",2)(3,"button",3),m.\u0275\u0275listener("click",(function(e){return t.toggleDpDropdown(e,!1)})),m.\u0275\u0275element(4,"i",4),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(5,"button",5),m.\u0275\u0275listener("click",(function(e){return t.toggleTimePicker(!t.isTimeOpen,e)})),m.\u0275\u0275element(6,"i",6),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(7,"div",7)(8,"input",8,9),m.\u0275\u0275listener("onShown",(function(){return t.onDatePickerOpen()}))("onHidden",(function(){return t.hideDatepickerDropdown()}))("bsValueChange",(function(e){return t.onModelUpdate(e,"date")})),m.\u0275\u0275elementEnd()(),m.\u0275\u0275template(10,Z,2,11,"div",10),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(11,X,2,8,"ng-template",11)),2&e&&(m.\u0275\u0275property("isOpen",t.isTimeOpen)("container","body"),m.\u0275\u0275advance(1),m.\u0275\u0275property("name",t.name)("tabindex",t.loadNativeDateInput?"-1":t.tabindex)("value",t.displayValue)("autofocus",t.autofocus)("disabled",t.disabled||t.readonly||t.isCurrentDate)("required",t.required)("readOnly",t.isReadOnly),m.\u0275\u0275attribute("aria-label",t.hint)("aria-hidden",!!t.loadNativeDateInput)("placeholder",t.placeholder)("accesskey",t.shortcutkey),m.\u0275\u0275advance(2),m.\u0275\u0275property("tabindex",t.loadNativeDateInput?"-1":t.tabindex)("disabled",t.disabled||t.readonly||t.isCurrentDate),m.\u0275\u0275attribute("aria-hidden",!!t.loadNativeDateInput)("aria-label",t.displayValue?"Change Date "+t.displayValue:"Choose date by pressing enter"),m.\u0275\u0275advance(2),m.\u0275\u0275property("tabindex",t.loadNativeDateInput?"-1":t.tabindex)("disabled",t.disabled||t.readonly||t.isCurrentDate),m.\u0275\u0275attribute("aria-hidden",!!t.loadNativeDateInput),m.\u0275\u0275advance(3),m.\u0275\u0275property("tabindex",-1)("container",t.containerTarget||".wm-app")("bsConfig",t._dateOptions)("isOpen",t.isDateOpen)("daysDisabled",t.excludedDaysToDisable)("datesDisabled",t.excludedDatesToDisable)("isDisabled",t.disabled||t.readonly||t.isCurrentDate)("bsValue",t.bsDateValue),m.\u0275\u0275attribute("aria-hidden",!!t.loadNativeDateInput),m.\u0275\u0275advance(3),m.\u0275\u0275property("ngIf",t.loadNativeDateInput))},dependencies:[g.NgIf,v.BsDatepickerDirective,v.BsDatepickerInputDirective,b.BsDropdownMenuDirective,b.BsDropdownDirective,f.NgControlStatus,f.NgModel,y.TimepickerComponent,k],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&m.\u0275setClassMetadata(ie,[{type:t.Component,args:[{selector:"[wmDateTime]",providers:[r.provideAs(ie,n.NG_VALUE_ACCESSOR,!0),r.provideAs(ie,n.NG_VALIDATORS,!0),r.provideAsWidgetRef(ie),{provide:o.TimepickerConfig,deps:[l.AbstractI18nService],useFactory:G}],template:'    <div dropdown\n        [isOpen]="isTimeOpen"\n        autoClose="false"\n        [container]="\'body\'"\n        (onShown)="onTimepickerOpen()"\n        style="display: inherit;">\n        <input class="form-control app-textbox display-input"\n            [attr.aria-label]="hint"\n            focus-target\n            [name]="name"\n            [tabindex]="loadNativeDateInput ? \'-1\' : tabindex"\n            [attr.aria-hidden]="!!loadNativeDateInput"\n            type="text"\n            [value]="displayValue"\n            (click)="toggleDpDropdown($event, true)"\n            (focus)="onDateTimeInputFocus(); invokeOnFocus($event);"\n            (blur)="onInputBlur($event)"\n            (change)="onDateChange($event)"\n            [autofocus]="autofocus"\n            [disabled]="disabled || readonly || isCurrentDate"\n            [required]="required"\n            [readOnly]="isReadOnly"\n            [attr.placeholder]="placeholder"\n            [attr.accesskey]="shortcutkey"\n            (keydown)="this._triggeredByUser = true; onDisplayKeydown($event)">\n\n        <span class="input-group-btn">\n            <button type="button"\n                class="btn btn-default btn-date"\n                [tabindex]="loadNativeDateInput ? \'-1\' : tabindex"\n                [attr.aria-hidden]="!!loadNativeDateInput"\n                [disabled]="disabled || readonly || isCurrentDate"\n                [attr.aria-label]="displayValue ? \'Change Date \' + displayValue : \'Choose date by pressing enter\'"\n                aria-haspopup="true"\n                aria-expanded="false"\n                (click)="toggleDpDropdown($event, false)">\n                <i aria-hidden="true"\n                    class="app-icon wm-sl-l sl-calendar"></i>\n            </button>\n            <button type="button"\n                class="btn btn-default btn-time"\n                [tabindex]="loadNativeDateInput ? \'-1\' : tabindex"\n                [attr.aria-hidden]="!!loadNativeDateInput"\n                [disabled]="disabled || readonly || isCurrentDate"\n                aria-label="Select time"\n                aria-haspopup="true"\n                aria-expanded="false"\n                (click)="toggleTimePicker(!isTimeOpen, $event)">\n                <i aria-hidden="true"\n                    class="app-icon wm-sl-l sl-time"></i>\n            </button>\n        </span>\n        <div style="width: 0;display: inline-block;">\n        <input class="model-holder"\n            aria-label="datepicker dropdownmenu"\n            aria-controls="date"\n            focus-target\n            [tabindex]="-1"\n            [attr.aria-hidden]="!!loadNativeDateInput"\n            [container]="containerTarget || \'.wm-app\'"\n            [bsConfig]="_dateOptions"\n            [isOpen]="isDateOpen"\n             placement="bottom right"\n            (onShown)="onDatePickerOpen()"\n            (onHidden)="hideDatepickerDropdown()"\n            [daysDisabled]="excludedDaysToDisable"\n            [datesDisabled]="excludedDatesToDisable"\n            #datepicker=bsDatepicker\n            bsDatepicker\n            [isDisabled]="disabled || readonly || isCurrentDate"\n            [bsValue]="bsDateValue"\n            (bsValueChange)="onModelUpdate($event, \'date\')">\n    </div>\n        <div *dropdownMenu\n            class="dropdown-menu"\n            aria-label="timepicker dropdown"\n            aria-controls="time"\n            (click)="preventTpClose($event)">\n            <timepicker class="model-holder"\n                [showMeridian]="ismeridian"\n                [readonlyInput]="disabled || readonly || isCurrentDate"\n                [(ngModel)]="bsTimeValue"\n                [min]="minTime"\n                [max]="maxTime"\n                [hourStep]="hourstep"\n                [minuteStep]="minutestep"\n                [secondsStep]="secondsstep"\n                [mousewheel]="true"\n                [arrowkeys]="true"\n                (isValid)="isValid($event)"\n                [showSeconds]="showseconds"\n                (ngModelChange)="onModelUpdate($event, \'time\')"></timepicker>\n        </div>\n    </div>\n<ng-template [ngIf]="loadNativeDateInput">\n    <wm-datetimepicker\n        dateTimePicker\n        [config]="_dateOptions"\n        [placement]="modal"\n        [excludedDaysToDisable]="excludedDaysToDisable"\n        [excludedDatesToDisable]="excludedDatesToDisable"\n        [displayFormat]="dateInputFormat"\n        [value]="bsDateValue"\n        (change)="onModelUpdate($event, \'date\')">\n    </wm-datetimepicker>\n    <div class="mobile-input mobile-datepicker-container"\n        [tabindex]="tabindex || 0"\n         (click)="!(disabled || readonly || isCurrentDate) && showDatePickerModal(bsDateValue)"\n         [attr.aria-label]="displayValue ? \'Change Date \' + displayValue : hint || \'Choose Date\'"\n        (focus)="onDateTimeInputFocus(true); invokeOnFocus($event)"\n        (blur)="onDateTimeInputBlur(); invokeOnTouched($event)"\n         role="button">\n    </div>\n</ng-template>\n'}]}],(function(){return[{type:m.Injector},{type:m.NgZone},{type:m.ChangeDetectorRef},{type:w.AppDefaults},{type:w.App}]}),{bsDatePickerDirective:[{type:t.ViewChild,args:[a.BsDatepickerDirective]}]});const ne=new Map([["autofocus",r.PROP_BOOLEAN],["class",r.PROP_STRING],["dataentrymode",{value:"default",...r.PROP_STRING}],["datavaluesource",r.PROP_ANY],["datavalue",r.PROP_STRING],["disabled",r.PROP_BOOLEAN],["hint",r.PROP_STRING],["hourstep",{value:1,...r.PROP_NUMBER}],["maxtime",r.PROP_STRING],["mintime",r.PROP_STRING],["minutestep",{value:15,...r.PROP_NUMBER}],["name",r.PROP_STRING],["outputformat",{value:"HH:mm:ss",...r.PROP_STRING}],["placeholder",{value:"Select time",...r.PROP_STRING}],["readonly",r.PROP_BOOLEAN],["required",r.PROP_BOOLEAN],["shortcutkey",r.PROP_STRING],["show",{value:!0,...r.PROP_BOOLEAN}],["showdropdownon",{value:"default",...r.PROP_STRING}],["showcustompicker",{value:!1,...r.PROP_BOOLEAN}],["secondsstep",{value:1,...r.PROP_NUMBER}],["tabindex",{value:0,...r.PROP_NUMBER}],["timepattern",r.PROP_STRING],["timestamp",r.PROP_STRING]]),ae=["wmTime",""];function se(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",7),m.\u0275\u0275listener("click",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.preventTpClose(t))})),m.\u0275\u0275elementStart(1,"timepicker",8),m.\u0275\u0275listener("ngModelChange",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.bsTimeValue=t)}))("isValid",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.isValid(t))}))("ngModelChange",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.onTimeChange(t))})),m.\u0275\u0275elementEnd()()}if(2&e){const e=m.\u0275\u0275nextContext();m.\u0275\u0275advance(1),m.\u0275\u0275property("showMeridian",e.ismeridian)("readonlyInput",e.isDisabled)("ngModel",e.bsTimeValue)("disabled",e.disabled||e.readonly||e.isCurrentTime)("min",e.minTime)("max",e.maxTime)("hourStep",e.hourstep)("minuteStep",e.minutestep)("secondsStep",e.secondsstep)("mousewheel",!0)("arrowkeys",!0)("showSeconds",e.showseconds)}}function oe(e,t){if(1&e){const e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"wm-datetimepicker",9),m.\u0275\u0275listener("change",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(i.onTimeChange(t))})),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(1,"div",10),m.\u0275\u0275listener("click",(function(){m.\u0275\u0275restoreView(e);const t=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(!(t.disabled||t.readonly||t.isCurrentTime)&&t.showDatePickerModal(t.bsTimeValue))}))("focus",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return i.onDateTimeInputFocus(!0),i.invokeOnFocus(t),m.\u0275\u0275resetView(i.assignModel())}))("blur",(function(t){m.\u0275\u0275restoreView(e);const i=m.\u0275\u0275nextContext();return i.onDateTimeInputBlur(),m.\u0275\u0275resetView(i.invokeOnTouched(t))})),m.\u0275\u0275elementEnd()}if(2&e){const e=m.\u0275\u0275nextContext();m.\u0275\u0275property("minTime",e.minTime)("maxTime",e.maxTime)("placement",e.modal)("displayFormat",e.timepattern)("value",e.bsTimeValue),m.\u0275\u0275advance(1),m.\u0275\u0275attribute("aria-label",e.displayValue?"Change time  "+e.displayValue:e.hint||"Select time")}}const re="CURRENT_TIME",le={widgetType:"wm-time",hostClass:"input-group app-timeinput"};class ce extends W{static{this.initializeProps=(r.register("wm-time",ne),void r.registerFormWidget(l.FormWidgetType.TIME,new Map(ne)))}get timestamp(){return this.bsTimeValue?this.bsTimeValue.valueOf():void 0}get datavalue(){return this.isCurrentTime&&!this.bsTimeValue?re:l.getFormattedDate(this.datePipe,this.bsTimeValue,this.outputformat,this.timeZone,null,null,this)||""}set datavalue(e){e?e===re?(this.isCurrentTime=!0,this.setTimeInterval()):(this.clearTimeInterval(),this.bsTimeValue=l.getNativeDateObject(e,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput}),this.isCurrentTime=!1,this.mintimeMaxtimeValidation()):(this.bsTimeValue=void 0,this.clearTimeInterval(),this.isCurrentTime=!1),this.invokeOnChange(this.datavalue),l.$appDigest()}get displayValue(){return l.getFormattedDate(this.datePipe,this.bsTimeValue,this.timepattern,this.timeZone,null,null,this)||""}get nativeDisplayValue(){return l.getFormattedDate(this.datePipe,this.bsTimeValue,"HH:mm:ss",this.timeZone,null,null,this)||""}constructor(e,t,i,n){super(e,le),this.ngZone=t,this.appDefaults=i,this.status={isopen:!1},r.styler(this.nativeElement,this),this.registerDestroyListener((()=>this.clearTimeInterval())),this.timepattern=this.appDefaults.timeFormat||l.getDisplayDateTimeFormat(l.FormWidgetType.TIME),this.updateFormat("timepattern"),this.app=n}onPropertyChange(e,t,i){"tabindex"!==e&&("timepattern"===e&&this.updateFormat("timepattern"),"mintime"===e?(this.minTime=l.getNativeDateObject(t,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput}),this.mintimeMaxtimeValidation()):"maxtime"===e?(this.maxTime=l.getNativeDateObject(t,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput}),this.mintimeMaxtimeValidation()):super.onPropertyChange(e,t,i))}setValidateType(e,t,i){this.timeNotInRange&&(i<e?this.validateType="mintime":i>t&&(this.validateType="maxtime"))}mintimeMaxtimeValidation(){this.timeNotInRange=this.minTime&&this.maxTime&&(this.bsTimeValue<this.minTime||this.bsTimeValue>this.maxTime),this.setValidateType(this.minTime,this.maxTime,this.bsTimeValue),this.invokeOnChange(this.datavalue,void 0,!1)}toggleDropdown(e,t=!1){this.loadNativeDateInput?t||this.onDateTimeInputFocus():("click"===e.type&&this.invokeEventCallback("click",{$event:e}),e.target&&$(e.target).is("input")&&!this.isDropDownDisplayEnabledOnInput(this.showdropdownon)||(this.ngZone.run((()=>{this.status.isopen=!this.status.isopen})),this.addBodyClickListener(this.status.isopen)))}preventTpClose(e){e.stopImmediatePropagation();const t=$(this.nativeElement).closest(".app-composite-widget.caption-floating");t.length>0&&this.app.notify("captionPositionAnimate",{displayVal:this.displayValue,nativeEl:t})}addBodyClickListener(e){if(!e)return;const t=document.querySelector("body");setTimeout((()=>{const e=$(t).find(">bs-dropdown-container .dropdown-menu").get(0);this.deregisterEventListener=l.addEventListenerOnElement(t,e,this.nativeElement,"click",this.isDropDownDisplayEnabledOnInput(this.showdropdownon),(()=>{this.status.isopen=!1}),0,!0)}),350)}onDisplayKeydown(e){this.isDropDownDisplayEnabledOnInput(this.showdropdownon)?(e.stopPropagation(),"Enter"===e.key||"ArrowDown"===e.key?(e.preventDefault(),this.toggleDropdown(e)):this.hideTimepickerDropdown()):this.hideTimepickerDropdown()}onDisplayTimeChange(e){const t=l.getNativeDateObject(e.target.value,{meridians:this.meridians,pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput});this.formatValidation(t,e.target.value)&&(this.invalidDateTimeFormat=!1,this.onTimeChange(t))}onInputBlur(e){$(e.relatedTarget).hasClass("bs-timepicker-field")||(this.invokeOnTouched(),this.invokeEventCallback("blur",{$event:e}))}onTimeChange(e,t){let i,n,a;t&&(e=l.getNativeDateObject(e.target.value,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput})),e?(this.bsTimeValue=e,this.timeNotInRange=this.minTime&&this.maxTime&&(e<this.minTime||e>this.maxTime),this.setValidateType(this.minTime,this.maxTime,e)):(this.bsTimePicker&&this.bsTimePicker.min&&this.bsTimePicker.max&&(a=moment(new Date(this.bsTimePicker.min)).format("A"),moment(new Date(this.bsTimePicker.max)).format("A"),i=this.bsTimePicker.hours+":"+(this.bsTimePicker.minutes||0)+":"+(this.bsTimePicker.seconds||0)+(this.bsTimePicker.showMeridian?" "+a:""),n=l.getNativeDateObject(i,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput}),this.bsTimePicker.meridian=a,this.timeNotInRange=this.bsTimePicker.min>n||this.bsTimePicker.max<n,this.setValidateType(this.bsTimePicker.min,this.bsTimePicker.max,n)),this.bsTimeValue=n),this.invokeOnTouched(),this.invokeOnChange(this.datavalue,{},!0)}setTimeInterval(){this.timeinterval||(this.timeinterval=setInterval((()=>{const e=this.timeZone?l.getMomentLocaleObject(this.timeZone):new Date;e.setSeconds(e.getSeconds()+1),this.datavalue=re,this.onTimeChange(e)}),1e3))}clearTimeInterval(){this.timeinterval&&(clearInterval(this.timeinterval),this.timeinterval=null)}setIsTimeOpen(e){this.status.isopen=e}handleEvent(e,t,i,n){_.includes(["blur","focus","change","click"],t)||super.handleEvent(e,t,i,n)}hideTimepickerDropdown(){this.invokeOnTouched(),this.status.isopen=!1,this.deregisterEventListener&&this.deregisterEventListener(),this.removeKeyupListener();const e=$(this.nativeElement).closest(".app-composite-widget.caption-floating");e.length>0&&this.app.notify("captionPositionAnimate",{displayVal:this.displayValue,nativeEl:e}),this.blurDateInput(!0)}isValid(e){if(!e){const e=$(this.nativeElement).find("input").val(),t=l.getNativeDateObject(e,{meridians:this.meridians,pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput});if(!this.formatValidation(t,e))return}}onShown(){const e=document.querySelectorAll("timepicker");_.forEach(e,(e=>{l.addClass(e.parentElement,"app-datetime",!0)})),this.focusTimePickerPopover(this),this.bindTimePickerKeyboardEvents(),l.adjustContainerPosition($("bs-dropdown-container"),this.nativeElement,this.bsDropdown._dropdown,$("bs-dropdown-container .dropdown-menu"))}assignModel(){this.displayInputElem||(this.displayInputElem=this.getMobileInput()),this.displayInputElem.value=_.get(this,"nativeDisplayValue")}static{this.\u0275fac=function(e){return new(e||ce)(m.\u0275\u0275directiveInject(m.Injector),m.\u0275\u0275directiveInject(m.NgZone),m.\u0275\u0275directiveInject(w.AppDefaults),m.\u0275\u0275directiveInject(w.App))}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:ce,selectors:[["","wmTime",""]],features:[m.\u0275\u0275ProvidersFeature([r.provideAs(ce,n.NG_VALUE_ACCESSOR,!0),r.provideAs(ce,n.NG_VALIDATORS,!0),r.provideAsWidgetRef(ce),{provide:o.TimepickerConfig,deps:[l.AbstractI18nService],useFactory:G}]),m.\u0275\u0275InheritDefinitionFeature],attrs:ae,decls:7,vars:16,consts:[["dropdown","",2,"display","inherit",3,"isOpen","container","onShown","onHidden"],["focus-target","","type","text","role","timer",1,"form-control","app-textbox","display-input",3,"tabindex","name","value","disabled","autofocus","required","readOnly","click","focus","blur","change","keydown"],[1,"input-group-btn","dropdown-toggle"],["type","button","aria-label","Select time","aria-haspopup","true","aria-expanded","false",1,"btn","btn-default","btn-date",3,"tabindex","disabled","click"],["aria-hidden","true",1,"app-icon","wm-sl-l","sl-time"],["class","dropdown-menu",3,"click",4,"dropdownMenu"],[3,"ngIf"],[1,"dropdown-menu",3,"click"],[1,"model-holder",3,"showMeridian","readonlyInput","ngModel","disabled","min","max","hourStep","minuteStep","secondsStep","mousewheel","arrowkeys","showSeconds","ngModelChange","isValid"],["dateTimePicker","","mode","TIME",3,"minTime","maxTime","placement","displayFormat","value","change"],["tabindex","1000000","role","button",1,"mobile-input","mobile-datepicker-container",3,"click","focus","blur"]],template:function(e,t){1&e&&(m.\u0275\u0275elementStart(0,"div",0),m.\u0275\u0275listener("onShown",(function(){return t.onShown()}))("onHidden",(function(){return t.hideTimepickerDropdown()})),m.\u0275\u0275elementStart(1,"input",1),m.\u0275\u0275listener("click",(function(e){return t.toggleDropdown(e,!0)}))("focus",(function(e){return t.onDateTimeInputFocus(),t.invokeOnFocus(e)}))("blur",(function(e){return t.onInputBlur(e)}))("change",(function(e){return t.onDisplayTimeChange(e)}))("keydown",(function(e){return t._triggeredByUser=!0,t.onDisplayKeydown(e)})),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(2,"span",2)(3,"button",3),m.\u0275\u0275listener("click",(function(e){return t.toggleDropdown(e,!1)})),m.\u0275\u0275element(4,"i",4),m.\u0275\u0275elementEnd()(),m.\u0275\u0275template(5,se,2,12,"div",5),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(6,oe,2,6,"ng-template",6)),2&e&&(m.\u0275\u0275property("isOpen",t.status.isopen)("container","body"),m.\u0275\u0275advance(1),m.\u0275\u0275property("tabindex",t.tabindex)("name",t.name)("value",t.displayValue)("disabled",t.disabled||t.readonly||t.isCurrentTime)("autofocus",t.autofocus)("required",t.required)("readOnly",t.isReadOnly),m.\u0275\u0275attribute("aria-label",t.hint)("placeholder",t.placeholder)("accesskey",t.shortcutkey)("aria-atomic",t.isCurrentTime?"true":"false"),m.\u0275\u0275advance(2),m.\u0275\u0275property("tabindex",t.tabindex)("disabled",t.disabled||t.readonly||t.isCurrentTime),m.\u0275\u0275advance(3),m.\u0275\u0275property("ngIf",t.loadNativeDateInput))},dependencies:[g.NgIf,b.BsDropdownMenuDirective,b.BsDropdownDirective,f.NgControlStatus,f.NgModel,y.TimepickerComponent,k],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&m.\u0275setClassMetadata(ce,[{type:t.Component,args:[{selector:"[wmTime]",providers:[r.provideAs(ce,n.NG_VALUE_ACCESSOR,!0),r.provideAs(ce,n.NG_VALIDATORS,!0),r.provideAsWidgetRef(ce),{provide:o.TimepickerConfig,deps:[l.AbstractI18nService],useFactory:G}],template:'    <div dropdown [isOpen]="status.isopen" (onShown)="onShown()" (onHidden)="hideTimepickerDropdown()" [container]="\'body\'" style="display: inherit">\n        <input class="form-control app-textbox display-input" [attr.aria-label]="hint"\n               focus-target\n               [tabindex]="tabindex"\n               [name]="name"\n               type="text"\n               role="timer"\n               [value]="displayValue"\n               [disabled]="disabled || readonly || isCurrentTime"\n               [autofocus]="autofocus"\n               [attr.placeholder]="placeholder"\n               [attr.accesskey]="shortcutkey"\n               [attr.aria-atomic]="isCurrentTime ? \'true\' : \'false\'"\n               [required]="required"\n               [readOnly]="isReadOnly"\n               (click)="toggleDropdown($event, true)"\n               (focus)="onDateTimeInputFocus(); invokeOnFocus($event);"\n               (blur)="onInputBlur($event)"\n               (change)="onDisplayTimeChange($event)"\n               (keydown)="this._triggeredByUser = true; onDisplayKeydown($event)">\n        <span class="input-group-btn dropdown-toggle">\n            <button type="button" class="btn btn-default btn-date" [tabindex]="tabindex" [disabled]="disabled || readonly || isCurrentTime" aria-label="Select time" aria-haspopup="true" aria-expanded="false" (click)="toggleDropdown($event, false)"><i aria-hidden="true" class="app-icon wm-sl-l sl-time"></i></button>\n        </span>\n        <div *dropdownMenu class="dropdown-menu" (click)="preventTpClose($event)">\n            <timepicker class="model-holder"\n                        [showMeridian]="ismeridian"\n                        [readonlyInput]="isDisabled"\n                        [(ngModel)]="bsTimeValue"\n                        [disabled]="disabled || readonly || isCurrentTime"\n                        [min]="minTime"\n                        [max]="maxTime"\n                        [hourStep]="hourstep"\n                        [minuteStep]="minutestep"\n                        [secondsStep]="secondsstep"\n                        [mousewheel]="true"\n                        [arrowkeys]="true"\n                        (isValid)="isValid($event)"\n                        [showSeconds]="showseconds" (ngModelChange)="onTimeChange($event)"></timepicker>\n        </div>\n    </div>\n<ng-template [ngIf]="loadNativeDateInput">\n    <wm-datetimepicker\n        dateTimePicker\n        mode="TIME"\n        [minTime]="minTime"\n        [maxTime]="maxTime"\n        [placement]="modal"\n        [displayFormat]="timepattern"\n        [value]="bsTimeValue"\n        (change)="onTimeChange($event)">\n    </wm-datetimepicker>\n    <div class="mobile-input mobile-datepicker-container"\n        tabindex="1000000"\n         (click)="!(disabled || readonly || isCurrentTime) && showDatePickerModal(bsTimeValue)"\n         [attr.aria-label]="displayValue ? \'Change time  \' + displayValue : hint || \'Select time\'"\n        (focus)="onDateTimeInputFocus(true); invokeOnFocus($event); assignModel()"\n        (blur)="onDateTimeInputBlur(); invokeOnTouched($event)"\n         role="button">\n    </div>\n</ng-template>\n'}]}],(function(){return[{type:m.Injector},{type:m.NgZone},{type:w.AppDefaults},{type:w.App}]}),null);const de=[Y,ie,ce,k,L,O,E];class pe{static{this.\u0275fac=function(e){return new(e||pe)}}static{this.\u0275mod=m.\u0275\u0275defineNgModule({type:pe})}static{this.\u0275inj=m.\u0275\u0275defineInjector({imports:[i.CommonModule,a.BsDatepickerModule,s.BsDropdownModule,n.FormsModule,o.TimepickerModule,r.WmComponentsModule,u.IMaskModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&m.\u0275setClassMetadata(pe,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.BsDatepickerModule,s.BsDropdownModule,n.FormsModule,o.TimepickerModule,r.WmComponentsModule,u.IMaskModule],declarations:[...de],exports:[...de]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&m.\u0275\u0275setNgModuleScope(pe,{declarations:[Y,ie,ce,k,L,O,E],imports:[i.CommonModule,a.BsDatepickerModule,s.BsDropdownModule,n.FormsModule,o.TimepickerModule,r.WmComponentsModule,u.IMaskModule],exports:[Y,ie,ce,k,L,O,E]}),e.DateComponent=Y,e.DateTimePickerComponent=k,e.DatetimeComponent=ie,e.EpochModule=pe,e.PickerComponent=O,e.PickerGroupComponent=E,e.TimeComponent=ce,e.TimePickerComponent=L})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("rxjs"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","rxjs","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.fileupload={}),e.ng.core,e.ng.common,e.wm.components.base,e.rxjs,e.wm.core)}(this,(function(e,t,i,n,a,s){"use strict";function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var r=o(t),l=o(i),c=o(n),d=o(s);const p=["wmFileUpload",""];function u(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",13),r.\u0275\u0275listener("click",(function(t){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(i.onFileElemClick(t))}))("change",(function(t){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(i.onFileSelect(t,t.target.files))})),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("disabled",e.disabled)("accept",e.chooseFilter),r.\u0275\u0275attribute("aria-label",e.hint||"File selection field")}}const h=function(e){return{"highlight-drop-box":e}};function m(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",6)(1,"div",7),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(t.triggerFileSelect())}))("dragover",(function(t){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(i.dragOverHandler(t))}))("drop",(function(t){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(i.onFileDrop(t))})),r.\u0275\u0275element(2,"i"),r.\u0275\u0275elementStart(3,"div",8),r.\u0275\u0275element(4,"label",9),r.\u0275\u0275elementStart(5,"form",10),r.\u0275\u0275template(6,u,1,3,"input",11),r.\u0275\u0275elementStart(7,"a",12),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd()()()()()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(8,h,e.highlightDropArea)),r.\u0275\u0275advance(1),r.\u0275\u0275classMap(e.iconclass),r.\u0275\u0275advance(2),r.\u0275\u0275property("innerHtml",e.caption,r.\u0275\u0275sanitizeHtml),r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("name",e.formName),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.multiple),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.fileUploadMessage)}}function g(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",13),r.\u0275\u0275listener("click",(function(t){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(i.onFileElemClick(t))}))("change",(function(t){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(i.onFileSelect(t,t.target.files))})),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("disabled",e.disabled)("accept",e.chooseFilter),r.\u0275\u0275attribute("aria-label",e.hint||"File selection field")}}function f(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",21),r.\u0275\u0275listener("click",(function(t){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(i.onFileElemClick(t))}))("change",(function(t){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(i.onFileSelect(t,t.target.files))})),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("disabled",e.disabled)("accept",e.chooseFilter),r.\u0275\u0275attribute("aria-label",e.hint||"File selection field")}}function v(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",14)(1,"div",15)(2,"form",10),r.\u0275\u0275template(3,g,1,3,"input",11),r.\u0275\u0275template(4,f,1,3,"input",16),r.\u0275\u0275elementStart(5,"button",17),r.\u0275\u0275element(6,"i",18)(7,"span",19),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275element(8,"div",20),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate("name",e.formName),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.multiple),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.multiple),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(8,h,e.highlightDropArea)),r.\u0275\u0275advance(1),r.\u0275\u0275classMap(e.iconclass),r.\u0275\u0275advance(1),r.\u0275\u0275property("innerHTML",e.caption,r.\u0275\u0275sanitizeHtml)}}function b(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",22),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(t.openFileSelector())})),r.\u0275\u0275element(1,"i")(2,"span",19),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("disabled",e.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275classMap(e.iconclass),r.\u0275\u0275advance(1),r.\u0275\u0275property("innerHTML",e.caption,r.\u0275\u0275sanitizeHtml)}}function y(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"span",36),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"filesize"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2).$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(2,1,e.size,0))}}const w=function(e){return{width:e}};function P(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",37),r.\u0275\u0275element(1,"div",38),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2).$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngStyle",r.\u0275\u0275pureFunction1(1,w,e.progress+"%"))}}function C(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",39)(1,"a",40),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext(2).$implicit,i=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(i.abortFileUpload(t))})),r.\u0275\u0275element(2,"i",41),r.\u0275\u0275elementEnd()()}}function A(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",39),r.\u0275\u0275element(1,"span"),r.\u0275\u0275pipe(2,"stateClass"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2).$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275classMapInterpolate1("status-icon ",r.\u0275\u0275pipeBind1(2,3,e.status),"")}}function I(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",39)(1,"a",42),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext(2).$implicit,i=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(i.clear(t))})),r.\u0275\u0275element(2,"i"),r.\u0275\u0275elementEnd()()}if(2&e){const e=r.\u0275\u0275nextContext(4);r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("title",e.cleariconhint),r.\u0275\u0275advance(1),r.\u0275\u0275classMap(e.cleariconclass)}}function E(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",43),r.\u0275\u0275element(1,"span"),r.\u0275\u0275pipe(2,"stateClass"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2).$implicit,t=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",e.errMsg||t.appLocale.MESSAGE_FILE_UPLOAD_FAILED),r.\u0275\u0275advance(1),r.\u0275\u0275classMapInterpolate1("status-icon ",r.\u0275\u0275pipeBind1(2,4,e.status),"")}}function O(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"li",26)(1,"div",27),r.\u0275\u0275element(2,"div",28),r.\u0275\u0275pipe(3,"fileIconClass"),r.\u0275\u0275elementStart(4,"div",29)(5,"p",30)(6,"label",31),r.\u0275\u0275text(7),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(8,"br"),r.\u0275\u0275template(9,y,3,4,"span",32),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(10,P,2,3,"div",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(11,C,3,0,"div",34),r.\u0275\u0275template(12,A,3,5,"div",34),r.\u0275\u0275template(13,I,3,4,"div",34),r.\u0275\u0275template(14,E,3,6,"div",35),r.\u0275\u0275elementEnd()()),2&e){const e=r.\u0275\u0275nextContext().$implicit,t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275classMapInterpolate1("media-left media-middle file-icon ",r.\u0275\u0275pipeBind1(3,11,t.getFileExtension(e.name)),""),r.\u0275\u0275propertyInterpolate("title",t.getFileExtension(e.name)),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate(e.name),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",0!==e.fileLength),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","onProgress"===e.status),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","onProgress"===e.status||"queued"===e.status),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","success"===e.status),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",""!==t.cleariconclass&&"onProgress"!==e.status),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","error"===e.status)}}function x(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275template(1,O,15,13,"li",25),r.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","abort"!==e.status)}}const R=function(e,t){return{height:e,overflow:t}};function D(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"ul",23),r.\u0275\u0275template(1,x,2,1,"div",24),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngStyle",r.\u0275\u0275pureFunction2(2,R,e.filelistheight,e.overflow)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.selectedFiles)}}function S(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"li",26)(1,"div",27),r.\u0275\u0275element(2,"div",46),r.\u0275\u0275elementStart(3,"div",29)(4,"p",30)(5,"label",31),r.\u0275\u0275text(6),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(7,"br"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(8,"div",39),r.\u0275\u0275element(9,"span",47),r.\u0275\u0275elementEnd()()()),2&e){const e=t.$implicit;r.\u0275\u0275advance(6),r.\u0275\u0275textInterpolate(e.name)}}function T(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"ul",44),r.\u0275\u0275template(1,S,10,1,"li",45),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275propertyInterpolate("title",e.appLocale.MESSAGE_FOLDER_UPLOADS_NOT_ALLOWED),r.\u0275\u0275property("ngStyle",r.\u0275\u0275pureFunction2(3,R,e.filelistheight,e.overflow)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.selectedFolders)}}const M={widgetType:"wm-fileupload",hostClass:"app-fileupload"};class N extends n.StylableComponent{static{this.initializeProps=(n.register("wm-fileupload",new Map([["caption",n.PROP_STRING],["name",n.PROP_STRING],["tabindex",n.PROP_NUMBER],["multiple",n.PROP_BOOLEAN],["fileuploadmessage",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["disabled",n.PROP_BOOLEAN],["contenttype",n.PROP_STRING],["maxfilesize",n.PROP_NUMBER],["iconclass",{value:"wm-sl-l sl-cloud-upload",...n.PROP_STRING}],["cleariconclass",{value:"",...n.PROP_STRING}],["cleariconhint",{value:"Clear",...n.PROP_STRING}],["class",n.PROP_STRING],["uploadpath",{...n.PROP_STRING}],["datasource",n.PROP_STRING],["selectedFiles",n.PROP_STRING],["destination",n.PROP_STRING],["filelistheight",n.PROP_NUMBER]])),void n.registerFormWidget(s.FormWidgetType.UPLOAD,new Map([["disabled",n.PROP_BOOLEAN],["extensions",n.PROP_STRING],["filetype",n.PROP_STRING],["multiple",n.PROP_BOOLEAN],["readonly",n.PROP_BOOLEAN],["required",n.PROP_BOOLEAN]])))}isValidFile(e,t,i,n){let a,o;return!t||(o=_.toLower(t).split(","),(_.includes(o,"image/*")||_.includes(o,"image")&&n)&&(a=s.isImageFile(e),a)||(_.includes(o,"audio/*")||_.includes(o,"audio")&&n)&&(a=s.isAudioFile(e),a)||(_.includes(o,"video/*")||_.includes(o,"video")&&n)&&(a=s.isVideoFile(e),a)||_.includes(o,"."+_.toLower(i))&&(a=!0),a)}getValidFiles(e){const t=[],i=[],n=parseFloat(this.maxfilesize)*this.FILESIZE_MB||this.FILESIZE_MB,a=(this.maxfilesize||"1")+"MB";return this.chooseFilter===this.DEVICE_CONTENTTYPES.FILES&&(this.chooseFilter=""),_.forEach(e,(e=>{if(this.isValidFile(e.name,this.chooseFilter,this.getFileExtension(e.name),this._isMobileType))if(e.size>n){const t=`${this.appLocale.LABEL_FILE_EXCEED_VALIDATION_MESSAGE} ${a}`;this.handleErrorFiles("INVALID_FILE_SIZE",t,e,i)}else t.push(e);else{const t=`${this.appLocale.LABEL_FILE_EXTENTION_VALIDATION_MESSAGE} ${this.chooseFilter}`;this.handleErrorFiles("INVALID_FILE_EXTENSION",t,e,i)}})),{validFiles:t,errorFiles:i}}handleErrorFiles(e,t,i,n){this.hasEventCallback("error")||this.app.notifyApp(t,"Error");const a={key:e,message:t};i.error=a,n.push(i)}getCaption(e,t,i){return _.includes(this.DEFAULT_CAPTIONS,e)?t&&!i?this.DEFAULT_CAPTIONS.MULTIPLE_SELECT:this.DEFAULT_CAPTIONS.SELECT:e}changeServerUploadPath(e){this.selectedUploadTypePath=e}getFileExtension(e){return e&&_.includes(e,".")?e.substring(e.lastIndexOf(".")+1):"file"}onSelectEventCall(e,t){this.selectedFiles=t,setTimeout((()=>{this.invokeEventCallback("select",{$event:$.extend(e.$files||{},t),selectedFiles:t})}))}onFileElemClick(e){this.highlightDropArea=!0,this.$element.find(".file-input")[0].value=null,e.stopPropagation(),window.addEventListener("focus",this.disableDropZone.bind(this))}disableDropZone(){this.highlightDropArea=!1,window.removeEventListener("focus",this.disableDropZone)}clear(e){this.selectedFiles=e?this.selectedFiles.filter((t=>t!==e)):[]}setClearIconClass(e){this.cleariconclass=e}setClearIconHint(e){this.cleariconhint=e}onFileSelect(e,t){let i;const n=this.getValidFiles(t);t=n.validFiles,"change"===e.type&&(this.selectedFolders=[]),_.isEmpty(n.errorFiles)||this.invokeEventCallback("error",{$event:e,files:n.errorFiles}),t.length&&(this.progressObservable=new a.Subject,i=this.invokeEventCallback("beforeselect",{$event:$.extend(e.$files||{},t),files:t}),this.datasource?(this.datasource._progressObservable=this.progressObservable,this.datasource._progressObservable.asObservable().subscribe((e=>{_.forEach(this.selectedFiles,(t=>{t.name===e.fileName&&(t.progress=e.progress,100===t.progress?t.status="success":(t.status=e.status,e.errMsg&&(t.errMsg=e.errMsg)))}))}))):this.selectedFiles=t,!1!==i&&this.onSelectEventCall(e,t))}dragOverHandler(e){e.preventDefault(),e.stopPropagation()}onFileDrop(e){e.preventDefault();let t=[];this.selectedFolders=[];const i=e.dataTransfer.items;if(i.length>0){for(var n=0;n<i.length;n++)i[n].webkitGetAsEntry().isFile?t.push(i[n].getAsFile()):i[n].webkitGetAsEntry().isDirectory&&this.selectedFolders.push(i[n].getAsFile());this.onFileSelect(e,t)}}dragOverCb(e){e.preventDefault(),$(this.nativeElement).find("#dropzone").addClass("highlight-drop-box")}dropCb(){$(this.nativeElement).find("#dropzone").removeClass("highlight-drop-box")}triggerFileSelect(){this.$element.find(".file-input").trigger("click")}abortFileUpload(e){this.datasource.execute(s.DataSource.Operation.CANCEL,e)}onPropertyChange(e,t,i){switch(e){case"uploadpath":this.changeServerUploadPath(t);break;case"contenttype":this.chooseFilter=t.split(" ").join(",");break;case"multiple":this.formName=this.name+(this.multiple?"-multiple-fileupload":"-single-fileupload"),this.caption=this.getCaption(this.caption,this.multiple,this._isMobileType);break;case"fileuploadmessage":this.fileUploadMessage=t}super.onPropertyChange(e,t,i)}constructor(e,t,i){super(e,M),this.app=t,this.onSelectEvt=i,this.selectedFiles=[],this.selectedFolders=[],this.fileTransfers={},this.caption="Upload",this.formName="",this.DEFAULT_CAPTIONS={MULTIPLE_SELECT:"Drop your files here.",SELECT:"Select"},this.DEVICE_CONTENTTYPES={IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILES:"files"},this.FILESIZE_MB=1048576,this.CONSTANT_FILE_SERVICE="FileService",this.uploadData={file:void 0,uploadPath:void 0},this.chooseFilter="",this.fileUploadMessage="Drop your files here or click here to browse",this.uploadedFiles={fileName:"",path:"",length:"",status:""},this.uploadUrl="services"}ngOnInit(){super.ngOnInit(),document.addEventListener("dragover",this.dragOverCb.bind(this)),document.addEventListener("drop",this.dropCb.bind(this)),document.addEventListener("mouseleave",this.dropCb.bind(this))}ngAfterViewInit(){n.styler(this.nativeElement.querySelector(".app-button, .drop-box"),this)}ngOnDestroy(){document.removeEventListener("dragover",this.dragOverCb),document.removeEventListener("drop",this.dropCb),document.removeEventListener("mouseleave",this.dropCb),super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||N)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(d.App),r.\u0275\u0275injectAttribute("select.event"))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:N,selectors:[["","wmFileUpload",""]],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(N)]),r.\u0275\u0275InheritDefinitionFeature],attrs:p,decls:6,vars:5,consts:[["init-widget","",1,"app-fileupload"],["class","app-multi-file-upload",4,"ngIf"],["class","app-single-file-upload",4,"ngIf"],["focus-target","","class","app-button btn btn-default",3,"disabled","click",4,"ngIf"],["class","list-group file-upload",3,"ngStyle",4,"ngIf"],["class","list-group file-upload",3,"ngStyle","title",4,"ngIf"],[1,"app-multi-file-upload"],["id","dropzone",1,"drop-box",3,"ngClass","click","dragover","drop"],[1,"message"],[1,"caption",3,"innerHtml"],[1,"form-horizontal",3,"name"],["class","file-input","type","file","name","files","multiple","",3,"disabled","accept","click","change",4,"ngIf"],["href","javascript:void(0);",1,"app-anchor"],["type","file","name","files","multiple","",1,"file-input",3,"disabled","accept","click","change"],[1,"app-single-file-upload"],[1,"app-button-wrapper"],["class","file-input","type","file","name","files",3,"disabled","accept","click","change",4,"ngIf"],["id","dropzone","focus-target","",1,"app-button","btn","btn-default",3,"ngClass"],["aria-hidden","true"],[1,"caption",3,"innerHTML"],[1,"app-files-upload-status","single"],["type","file","name","files",1,"file-input",3,"disabled","accept","click","change"],["focus-target","",1,"app-button","btn","btn-default",3,"disabled","click"],[1,"list-group","file-upload",3,"ngStyle"],[4,"ngFor","ngForOf"],["class","list-group-item file-upload-status",4,"ngIf"],[1,"list-group-item","file-upload-status"],[1,"media","upload-file-list"],[3,"title"],[1,"media-body","media-middle","file-details"],[1,"uploaddetails"],[1,"upload-title"],["class","filesize",4,"ngIf"],["class","progress",4,"ngIf"],["class","media-right media-middle",4,"ngIf"],["class","media-right media-middle",3,"title",4,"ngIf"],[1,"filesize"],[1,"progress"],[1,"progress-bar","progress-bar-striped","progress-bar-info",3,"ngStyle"],[1,"media-right","media-middle"],["type","button",1,"btn","btn-transparent","file-upload-stop",3,"click"],[1,"wi","wi-close"],["type","button",1,"btn","btn-transparent","btn-default","status-icon",3,"title","click"],[1,"media-right","media-middle",3,"title"],[1,"list-group","file-upload",3,"ngStyle","title"],["class","list-group-item file-upload-status",4,"ngFor","ngForOf"],[1,"media-left","media-middle","file-icon","fa","fa-folder-o"],[1,"status-icon","wi","wi-cancel","text-danger"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,m,9,10,"div",1),r.\u0275\u0275template(2,v,9,10,"div",2),r.\u0275\u0275template(3,b,3,5,"button",3),r.\u0275\u0275template(4,D,2,5,"ul",4),r.\u0275\u0275template(5,T,2,6,"ul",5),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t._isMobileType&&t.multiple),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t._isCordova&&(!t.multiple||t._isMobileType)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t._isCordova),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.selectedFiles.length>0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.selectedFolders.length>0))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgStyle,c.FileIconClassPipe,c.FileSizePipe,c.StateClassPipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(N,[{type:t.Component,args:[{selector:"[wmFileUpload]",providers:[n.provideAsWidgetRef(N)],template:'<div class="app-fileupload" init-widget>\n    \x3c!-- drag and drop files UI in web --\x3e\n    <div class="app-multi-file-upload" *ngIf="!_isMobileType && multiple">\n        <div id="dropzone" class="drop-box" (click)="triggerFileSelect()" [ngClass]="{\'highlight-drop-box\' : highlightDropArea}" (dragover)="dragOverHandler($event);" (drop)="onFileDrop($event);">\n            <i class="{{iconclass}}"></i>\n            <div class="message">\n                <label [innerHtml]="caption" class="caption"></label>\n                <form class="form-horizontal" name="{{formName}}">\n                    <input class="file-input" [attr.aria-label]="hint || \'File selection field\'" type="file" name="files" *ngIf="multiple" [disabled]="disabled" [accept]="chooseFilter" (click)="onFileElemClick($event)" (change)="onFileSelect($event, $event.target.files)" multiple >\n                    <a href="javascript:void(0);" class="app-anchor">{{fileUploadMessage}}</a>\n                </form>\n            </div>\n        </div>\n    </div>\n    \x3c!-- single file upload in web and single , multiple file upload UI in mobile runmode --\x3e\n    <div class="app-single-file-upload" *ngIf="!_isCordova && (!multiple || _isMobileType)">\n        <div class="app-button-wrapper">\n            <form class="form-horizontal" name="{{formName}}">\n                \x3c!-- support for file upload in Mobileapp in its runmode (Web) --\x3e\n                <input class="file-input" [attr.aria-label]="hint || \'File selection field\'" type="file" name="files" *ngIf="multiple" [disabled]="disabled" [accept]="chooseFilter" (click)="onFileElemClick($event)" (change)="onFileSelect($event, $event.target.files)" multiple>\n                <input class="file-input" [attr.aria-label]="hint || \'File selection field\'" type="file" name="files" *ngIf="!multiple" [disabled]="disabled" [accept]="chooseFilter" (click)="onFileElemClick($event)" (change)="onFileSelect($event, $event.target.files)" >\n                <button id="dropzone" focus-target class="app-button btn btn-default" [ngClass]="{\'highlight-drop-box\' : highlightDropArea}">\n                    <i class="{{iconclass}}" aria-hidden="true"></i>\n                    <span class="caption" [innerHTML]="caption"></span>\n                </button>\n            </form>\n        </div>\n        <div class="app-files-upload-status single"></div>\n    </div>\n    \x3c!-- support for file upload in Mobile Application (device) --\x3e\n    <button *ngIf="_isCordova" focus-target class="app-button btn btn-default" (click)="openFileSelector()" [disabled]="disabled">\n        <i class="{{iconclass}}"></i>\n        <span class="caption" [innerHTML]="caption"></span>\n    </button>\n    \x3c!-- list of selectedfiles UI --\x3e\n    <ul class="list-group file-upload" [ngStyle]="{height: filelistheight, overflow: overflow}" *ngIf="selectedFiles.length > 0" >\n        <div *ngFor="let ft of selectedFiles">\n            <li class="list-group-item file-upload-status" *ngIf="ft.status !== \'abort\'">\n                <div class="media upload-file-list">\n                    <div class="media-left media-middle file-icon {{getFileExtension(ft.name) | fileIconClass}}" title="{{getFileExtension(ft.name)}}"></div>\n                    <div class="media-body media-middle file-details">\n                        <p class="uploaddetails">\n                            <label class="upload-title">{{ft.name}}</label><br/>\n                            <span class="filesize" *ngIf="ft.fileLength  !== 0">{{ft.size | filesize:0}}</span>\n                        </p>\n                        <div class="progress" *ngIf="ft.status === \'onProgress\'">\n                            <div class="progress-bar progress-bar-striped progress-bar-info" [ngStyle]="{width: (ft.progress +\'%\')}"></div>\n                        </div>\n                    </div>\n                    <div class="media-right media-middle" *ngIf="ft.status === \'onProgress\' || ft.status === \'queued\'">\n                        <a class="btn btn-transparent file-upload-stop" type="button" (click)="abortFileUpload(ft)">\n                            <i class="wi wi-close"></i>\n                        </a>\n                    </div>\n\n                    <div class="media-right media-middle"  *ngIf="ft.status === \'success\'">\n                        <span class="status-icon {{ft.status | stateClass }}"></span>\n                    </div>\n                    <div *ngIf="cleariconclass !== \'\' && ft.status !== \'onProgress\'" class="media-right media-middle">\n                        <a (click)="clear(ft)" class="btn btn-transparent btn-default status-icon" title="{{cleariconhint}}" type="button">\n                            <i class="{{cleariconclass}}"></i>\n                        </a>\n                    </div>\n                    <div class="media-right media-middle"  *ngIf="ft.status === \'error\'" title="{{ft.errMsg || this.appLocale.MESSAGE_FILE_UPLOAD_FAILED}}">\n                        <span class="status-icon {{ft.status | stateClass }}"></span>\n                    </div>\n                </div>\n            </li>\n        </div>\n    </ul>\n    \x3c!-- list of selectedfolders UI to show the error in title --\x3e\n    <ul class="list-group file-upload" [ngStyle]="{height: filelistheight, overflow: overflow}" title="{{this.appLocale.MESSAGE_FOLDER_UPLOADS_NOT_ALLOWED}}" *ngIf="selectedFolders.length > 0" >\n        <li *ngFor="let ft of selectedFolders" class="list-group-item file-upload-status">\n            <div class="media upload-file-list">\n                <div class="media-left media-middle file-icon fa fa-folder-o"></div>\n                <div class="media-body media-middle file-details">\n                    <p class="uploaddetails">\n                        <label class="upload-title">{{ft.name}}</label><br/>\n                    </p>\n                </div>\n                <div class="media-right media-middle" >\n                    <span class="status-icon  wi wi-cancel text-danger"></span>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>\n'}]}],(function(){return[{type:r.Injector},{type:d.App},{type:void 0,decorators:[{type:t.Attribute,args:["select.event"]}]}]}),null);const k=[N];class L{static{this.\u0275fac=function(e){return new(e||L)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:L})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(L,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...k],exports:[...k]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(L,{declarations:[N],imports:[i.CommonModule,n.WmComponentsModule],exports:[N]}),e.FileUploadComponent=N,e.FileUploadModule=L})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@wm/components/base"),require("@wm/core"),require("@wm/components/input")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","@wm/components/base","@wm/core","@wm/components/input"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.rating={}),e.ng.core,e.ng.common,e.ng.forms,e.wm.components.base,e.wm.core,e.wm.components.input)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(i),d=r(n),p=r(a);const u=new Map([["caption",a.PROP_STRING],["class",a.PROP_STRING],["datafield",a.PROP_STRING],["dataset",a.PROP_ANY],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["displayexpression",a.PROP_STRING],["displayfield",a.PROP_STRING],["iconcolor",a.PROP_STRING],["iconsize",a.PROP_STRING],["maxvalue",{value:5,...a.PROP_NUMBER}],["name",a.PROP_STRING],["orderby",a.PROP_STRING],["readonly",a.PROP_BOOLEAN],["show",{value:!0,...a.PROP_BOOLEAN}],["showcaptions",{value:!0,...a.PROP_BOOLEAN}],["tabindex",{value:0,...a.PROP_NUMBER}],["usekeys",a.PROP_BOOLEAN]]),h=["ratingInput"],m=["wmRating",""],g=function(e){return{active:e}},f=function(e,t){return{"font-size":e,color:t}};function v(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"label",7),l.\u0275\u0275listener("touchstart",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(i.onTouchStart(t))}))("mouseleave",(function(t){const i=l.\u0275\u0275restoreView(e).$implicit,n=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(n.onMouseleave(t,i))}))("mouseover",(function(t){const i=l.\u0275\u0275restoreView(e).$implicit,n=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(n.onMouseOver(t,i))})),l.\u0275\u0275elementStart(1,"input",8,9),l.\u0275\u0275listener("click",(function(t){const i=l.\u0275\u0275restoreView(e).$implicit,n=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(n.onRatingClick(t,i))})),l.\u0275\u0275elementEnd()()}if(2&e){const e=t.$implicit,i=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(8,g,e.index<=i.selectedRatingValue))("ngStyle",l.\u0275\u0275pureFunction2(10,f,i.iconsize,e.index<=i.selectedRatingValue&&i.iconcolor))("title",e.label||e.index)("for",i._id+"-"+e.index),l.\u0275\u0275advance(1),l.\u0275\u0275property("id",i._id+"-"+e.index)("value",e.key||e.index),l.\u0275\u0275attribute("aria-label",(e.label||e.index)+" out of "+i.ratingItems.length+" ratings")("aria-checked",e.label===i.datavalue?"true":"false")}}function b(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"div",5),l.\u0275\u0275template(1,v,3,13,"label",6),l.\u0275\u0275elementEnd()),2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",e.ratingItems)}}function y(e,t){if(1&e&&l.\u0275\u0275element(0,"label",10),2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275property("textContent",e.caption)}}const w=function(e){return{"font-size":e}},P=function(e,t){return{width:e,color:t}},C={widgetType:"wm-rating",hostClass:"app-ratings"};class A extends o.DatasetAwareFormComponent{static{this.initializeProps=(a.register("wm-rating",u),void a.registerFormWidget(s.FormWidgetType.RATING,new Map(u)))}get selectedRatingValue(){return this._selectedRatingValue}set selectedRatingValue(e){this._selectedRatingValue=e,this.calculateRatingsWidth()}constructor(e){super(e,C),this._id=s.generateGUId(),a.styler(this.nativeElement,this);const t=this.dataset$.subscribe((()=>{this.prepareRatingDataset()}));this.registerDestroyListener((()=>t.unsubscribe()));const i=this.datavalue$.subscribe((()=>this.onDatavalueChange(this.datavalue)));this.registerDestroyListener((()=>i.unsubscribe()))}handleEvent(e,t,i,n){"change"!==t&&"blur"!==t&&super.handleEvent(this.ratingEl.nativeElement,t,i,n)}prepareRatingDataset(){this.datasetItems.length||(this.ratingItems=[],this.caption="");let e=[],t=this.datasetItems;const i=parseInt(this.maxvalue||this.datasetItems.length,10),n=(i>10?10:i)||5;t.length&&t.length>n&&(t=_.slice(t,0,n));for(let i=n;i>0;i--)if(t.length){if(!(i>t.length)){t=a.getOrderedDataset(t,"index:desc"),e=e.concat(t);break}e.push({key:i,value:i,index:i,label:i})}else e.push({key:i,value:i,index:i,label:i});this.ratingItems=e,t.length||(this.datasetItems=e),this.onDatavalueChange(this.datavalue)}onRatingClick(e,t){this.modelByKey=t.key,this.selectedRatingValue=t.index,this.showcaptions||(this.caption=t.label),this.invokeOnTouched(),this.invokeOnChange(this.datavalue,e||{},!0)}onDatavalueChange(e){if(_.isEmpty(this.datasetItems))this.selectedRatingValue=0;else{let t=_.find(this.datasetItems,{selected:!0});t||_.isUndefined(e)||(t=_.find(this.datasetItems,(function(t){return _.toString(t.index)===e})),t&&(t.selected=!0)),t||(this.modelByKey=void 0,this.caption=""),this.selectedRatingValue=t?t.index:0,t&&(this.caption=t.label)}this.readonly&&(this.selectedRatingValue||isNaN(e)||(this.selectedRatingValue=parseFloat(e)<=this.maxvalue?e:this.maxvalue),this.ratingsWidth=this.calculateRatingsWidth(e))}calculateRatingsWidth(e){const t=parseFloat(this.selectedRatingValue),i=.925,n=parseInt(this.maxvalue||this.datasetItems.length,10)||5;return s.setCSS(this.nativeElement.querySelector(".ratings-container"),"width",i*n+"em"),void 0===(e=e||this.datavalue)||""===e||null===e?(this.caption="",0):t<=n&&t>=0?t*i+"em":t>n?n*i+"em":void 0}onPropertyChange(e,t,i){if("readonly"===e)t&&(this.ratingsWidth=this.calculateRatingsWidth());else if("maxvalue"===e){let e=this.datavalue;this.prepareRatingDataset(),this.resetDatasetItems(),_.isUndefined(e)||(this.datavalue=e)}else super.onPropertyChange(e,t,i)}onTouchStart(e){this.touchEnabled=!0,this.onTouchStart=s.noop}onMouseleave(){this.caption=this.displayValue}onMouseOver(e,t){this.caption=t.label,!this.touchEnabled&&!e.target.classList.contains("rating-label-hover")&&e.target.classList.add("rating-label-hover")}static{this.\u0275fac=function(e){return new(e||A)(l.\u0275\u0275directiveInject(l.Injector))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:A,selectors:[["","wmRating",""]],viewQuery:function(e,i){if(1&e&&l.\u0275\u0275viewQuery(h,5,t.ElementRef),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.ratingEl=e.first)}},features:[l.\u0275\u0275ProvidersFeature([a.provideAs(A,n.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(A)]),l.\u0275\u0275InheritDefinitionFeature],attrs:m,decls:5,vars:12,consts:[["ngDefaultControl","","aria-multiselectable","true",1,"ratings-wrapper",3,"ngModel","ngModelChange","focus"],["class","rating-style",4,"ngIf"],[1,"ratings-container","disabled",3,"ngStyle"],[1,"ratings","active",3,"ngStyle"],["class","caption",3,"textContent",4,"ngIf"],[1,"rating-style"],[3,"ngClass","ngStyle","title","for","touchstart","mouseleave","mouseover",4,"ngFor","ngForOf"],[3,"ngClass","ngStyle","title","for","touchstart","mouseleave","mouseover"],["type","radio","role","radio","name","ratings-id",3,"id","value","click"],["ratingInput",""],[1,"caption",3,"textContent"]],template:function(e,t){1&e&&(l.\u0275\u0275elementStart(0,"div",0),l.\u0275\u0275listener("ngModelChange",(function(e){return t.modelByKey=e}))("focus",(function(e){return t.onFocus(e)})),l.\u0275\u0275template(1,b,2,1,"div",1),l.\u0275\u0275elementStart(2,"div",2),l.\u0275\u0275element(3,"div",3),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(4,y,1,1,"label",4),l.\u0275\u0275elementEnd()),2&e&&(l.\u0275\u0275property("ngModel",t.modelByKey),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",!t.readonly),l.\u0275\u0275advance(1),l.\u0275\u0275classProp("hidden",!t.readonly),l.\u0275\u0275property("ngStyle",l.\u0275\u0275pureFunction1(7,w,t.iconsize)),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngStyle",l.\u0275\u0275pureFunction2(9,P,t.ratingsWidth,t.iconcolor)),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",t.showcaptions))},dependencies:[c.NgClass,c.NgForOf,c.NgIf,c.NgStyle,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,p.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(A,[{type:t.Component,args:[{selector:"[wmRating]",providers:[a.provideAs(A,n.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(A)],template:'<div [(ngModel)]="modelByKey" (focus)="onFocus($event)" ngDefaultControl class="ratings-wrapper" aria-multiselectable="true">\n    <div *ngIf="!readonly" class="rating-style">\n        <label *ngFor="let rate of ratingItems;"\n               [ngClass]="{active : rate.index <= selectedRatingValue}"\n               [ngStyle]="{\'font-size\' :iconsize, color: rate.index <= selectedRatingValue && iconcolor}"\n               [title]="rate.label || rate.index"\n               (touchstart)="onTouchStart($event)"\n               (mouseleave)="onMouseleave($event, rate)"\n               (mouseover)="onMouseOver($event, rate)"\n               [for]="_id + \'-\' + rate.index">\n            <input #ratingInput type="radio" role="radio" [attr.aria-label]="(rate.label || rate.index) + \' out of \' + ratingItems.length + \' ratings\'" [attr.aria-checked]="rate.label === datavalue ? \'true\' : \'false\'"\n                   [id]="_id + \'-\' + rate.index" (click)="onRatingClick($event, rate)" name="ratings-id" [value]="rate.key || rate.index"/>\n        </label>\n    </div>\n    <div [class.hidden]="!readonly" [ngStyle]="{\'font-size\' :iconsize}" class="ratings-container disabled" >\n        <div class="ratings active" [ngStyle]="{width: ratingsWidth, color: iconcolor}"></div>\n    </div>\n    <label *ngIf="showcaptions" class="caption" [textContent]="caption"></label>\n</div>\n'}]}],(function(){return[{type:l.Injector}]}),{ratingEl:[{type:t.ViewChild,args:["ratingInput",{read:t.ElementRef}]}]});const I=[A];class E{static{this.\u0275fac=function(e){return new(e||E)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:E})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,n.FormsModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(E,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.FormsModule,a.WmComponentsModule],declarations:[...I],exports:[...I]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(E,{declarations:[A],imports:[i.CommonModule,n.FormsModule,a.WmComponentsModule],exports:[A]}),e.RatingComponent=A,e.RatingModule=E})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@wm/components/base"),require("@wm/components/input"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","@wm/components/base","@wm/components/input","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.slider={}),e.ng.core,e.ng.common,e.ng.forms,e.wm.components.base,e.wm.components.input,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(i),d=r(n),p=r(a);const u=new Map([["class",a.PROP_STRING],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["maxvalue",a.PROP_NUMBER],["minvalue",a.PROP_NUMBER],["name",a.PROP_STRING],["readonly",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}],["step",a.PROP_NUMBER],["tabindex",{value:0,...a.PROP_NUMBER}]]),h=["wmSlider",""];function m(e,t){1&e&&l.\u0275\u0275element(0,"div",4)}const g={widgetType:"wm-slider",hostClass:"app-slider slider"};class f extends s.BaseFormCustomComponent{static{this.initializeProps=(a.register("wm-slider",u),void a.registerFormWidget(o.FormWidgetType.SLIDER,new Map(u)))}constructor(e){super(e,g),a.styler(this.nativeElement,this)}handleEvent(e,t,i,n){"change"!==t&&"blur"!==t&&super.handleEvent(e,t,i,n)}handleChange(e){this.invokeOnChange(this.datavalue,{type:"change"},this.ngModel.valid)}onPropertyChange(e,t,i){"tabindex"!==e&&super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||f)(l.\u0275\u0275directiveInject(l.Injector))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:f,selectors:[["","wmSlider",""]],viewQuery:function(e,t){if(1&e&&l.\u0275\u0275viewQuery(n.NgModel,5),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.ngModel=e.first)}},features:[l.\u0275\u0275ProvidersFeature([a.provideAs(f,n.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(f)]),l.\u0275\u0275InheritDefinitionFeature],attrs:h,decls:4,vars:19,consts:[[1,"app-slider-value","pull-left",3,"textContent"],[1,"app-slider-value","pull-right",3,"textContent"],["aria-orientation","horizontal","focus-target","","type","range",1,"range-input",3,"title","ngModel","disabled","tabindex","ngModelChange","blur"],["aria-readonly","true","class","readonly-wrapper",4,"ngIf"],["aria-readonly","true",1,"readonly-wrapper"]],template:function(e,t){1&e&&(l.\u0275\u0275element(0,"span",0)(1,"span",1),l.\u0275\u0275elementStart(2,"input",2),l.\u0275\u0275listener("ngModelChange",(function(e){return t.datavalue=e}))("blur",(function(e){return t.invokeOnTouched(e)}))("ngModelChange",(function(e){return t.handleChange(e)})),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(3,m,1,0,"div",3)),2&e&&(l.\u0275\u0275property("textContent",t.minvalue),l.\u0275\u0275attribute("aria-valuemin",t.minvalue),l.\u0275\u0275advance(1),l.\u0275\u0275property("textContent",t.maxvalue),l.\u0275\u0275attribute("aria-valuemax",t.maxvalue),l.\u0275\u0275advance(1),l.\u0275\u0275property("title",t.datavalue)("ngModel",t.datavalue)("disabled",t.disabled)("tabindex",t.tabindex)("tabindex",t.tabindex),l.\u0275\u0275attribute("min",t.minvalue)("max",t.maxvalue)("step",t.step)("accesskey",t.shortcutkey)("aria-label",t.hint||"Slider")("aria-valuemin",t.minvalue)("aria-valuemax",t.maxvalue)("aria-valuenow",t.datavalue)("name",t.name),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",t.readonly||t.disabled))},dependencies:[c.NgIf,d.DefaultValueAccessor,d.RangeValueAccessor,d.NgControlStatus,d.NgModel,p.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(f,[{type:t.Component,args:[{selector:"[wmSlider]",providers:[a.provideAs(f,n.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(f)],template:'<span class="app-slider-value pull-left" [attr.aria-valuemin]="minvalue" [textContent]="minvalue"></span>\n<span class="app-slider-value pull-right" [attr.aria-valuemax]="maxvalue" [textContent]="maxvalue"></span>\n<input class="range-input" aria-orientation="horizontal"\n       focus-target\n       type="range" [title]="datavalue"\n       [attr.min]="minvalue"\n       [attr.max]="maxvalue"\n       [attr.step]="step"\n       [(ngModel)]="datavalue"\n       [disabled]="disabled"\n       [attr.accesskey]="shortcutkey"\n       [attr.aria-label]="hint || \'Slider\'"\n       [attr.aria-valuemin]="minvalue"\n       [attr.aria-valuemax]="maxvalue"\n       [attr.aria-valuenow]="datavalue"\n       [tabindex]="tabindex"\n       (blur)="invokeOnTouched($event)"\n       (ngModelChange)="handleChange($event)"\n       [attr.name]="name"\n       [tabindex]="tabindex"/>\n<div *ngIf="readonly || disabled" aria-readonly="true" class="readonly-wrapper"></div>\n'}]}],(function(){return[{type:l.Injector}]}),{ngModel:[{type:t.ViewChild,args:[n.NgModel]}]});const v=[f];class b{static{this.\u0275fac=function(e){return new(e||b)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:b})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,n.FormsModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(b,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.FormsModule,a.WmComponentsModule],declarations:[...v],exports:[...v]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(b,{declarations:[f],imports:[i.CommonModule,n.FormsModule,a.WmComponentsModule],exports:[f]}),e.SliderComponent=f,e.SliderModule=b})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/basic"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/basic","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.chart={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.basic,e.wm.core)}(this,(function(e,t,i,n,a,s){"use strict";function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var r=o(t),l=o(i),c=o(a),d=o(s);const p=["Column","Line","Area","Cumulative Line","Bar","Pie","Donut","Bubble"],u=["circle","square","diamond","cross","triangle-up","triangle-down"],h=["01/01/2001","01/01/2002","01/01/2003"],m={Terrestrial:{colors:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],tooltip:{backgroundColor:"#de7d28",textColor:"#FFFFFF"}},Annabelle:{colors:["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],tooltip:{backgroundColor:"#2e306f",textColor:"#FFFFFF"}},Azure:{colors:["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],tooltip:{backgroundColor:"#3182bd",textColor:"#FFFFFF"}},Retro:{colors:["#0ca7a1","#ffa615","#334957","#acc5c2","#988f90","#8accc9","#515151","#f27861","#36c9fd","#794668","#0f709d","#0d2738","#44be78","#4a1839","#6a393f","#557d8b","#6c331c","#1c1c1c","#861500","#09562a"],tooltip:{backgroundColor:"#80513a",textColor:"#FFFFFF"}},Mellow:{colors:["#f0dcbf","#88c877","#aeb918","#2e2c23","#ddddd2","#dfe956","#4c963b","#5d3801","#e1eec3","#cd8472","#fcfab3","#9a4635","#9295ad","#2e3f12","#565677","#557d8b","#4f4d02","#0c0c1b","#833324","#24120e"],tooltip:{backgroundColor:"#7c9e73",textColor:"#FFFFFF"}},Orient:{colors:["#a80000","#cc6c3c","#f0e400","#000084","#fccc6c","#009c6c","#cc309c","#78cc00","#fc84e4","#48e4fc","#4878d8","#186c0c","#606060","#a8a8a8","#000000","#d7d7d7","#75a06e","#190d0b","#888888","#694b84"],tooltip:{backgroundColor:"#c14242",textColor:"#FFFFFF"}},GrayScale:{colors:["#141414","#353535","#5b5b5b","#848484","#a8a8a8","#c3c3c3","#e0e0e0","#c8c8c8","#a5a5a5","#878787","#656565","#4e4e4e","#303030","#1c1c1c","#4f4f4f","#3b3b3b","#757575","#606060","#868686","#c1c1c1"],tooltip:{backgroundColor:"#575757",textColor:"#FFFFFF"}},Flyer:{colors:["#3f454c","#5a646e","#848778","#cededf","#74c4dd","#0946ed","#380bb1","#000ff0","#f54a23","#1db262","#bca3aa","#ffa500","#a86b32","#63a18c","#56795e","#934343","#b75f5f","#752d2d","#4e1111","#920606"],tooltip:{backgroundColor:"#47637c",textColor:"#FFFFFF"}},Luminosity:{colors:["#FFFFFF","#e4e4e4","#00bcd4","#f0dd2f","#00aabf","#018376","#e91e63","#39e5d4","#ff6d6d","#00ff76","#ff9800","#969696","#ff4200","#e00000","#95cbe5","#5331ff","#fff4a7","#e7a800","#0061e4","#d5e7ff"],tooltip:{backgroundColor:"#47637c",textColor:"#FFFFFF"}}},g=["xaxislabel","yaxislabel","xunits","yunits","xnumberformat","xdateformat","ynumberformat","showvalues","showlabels","viewtype","areaviewtype","staggerlabels","reducexticks","offsettop","offsetbottom","offsetright","offsetleft","barspacing","xaxislabeldistance","yaxislabeldistance","theme","labeltype","donutratio","showlabelsoutside","showxdistance","showydistance","shape","nodatamessage","captions","showxaxis","showyaxis","centerlabel","customcolors","showlegend","legendtype","xdomain","ydomain","tooltips","linethickness","highlightpoints","interpolation","labelthreshold"],f={small:.3,medium:.5,large:.8},v={small:.3,medium:.6,large:.7},b=_.invert(f),y=_.invert(v),w={Thousand:{prefix:"K",divider:1e3},Million:{prefix:"M",divider:1e6},Billion:{prefix:"B",divider:1e9}},P="#preview-chart",C=["Column","Line","Pie","Bar","Donut","Bubble"],A=["Line","Area","Cumulative Line"],I=["Cumulative Line","Area"],E="Europe",O="Asia",x="America",R="Australia",D=e=>"Bar"===e,S=e=>"Donut"===e,T=e=>"Bubble"===e,M=e=>"Area"===e,N=e=>(e=>"Pie"===e)(e)||S(e),k=e=>_.includes(C,e)||!_.includes(p,e),L=e=>_.includes(A,e),F=(e,t)=>"value"===t?f[e]:"key"===t?b[e]:void 0,B=(e,t)=>"value"===t?v[e]:"key"===t?y[e]:void 0,j=e=>((e,t,i)=>{let n=[],a=[],s=[],o=[],r=[],l=[],c=[],d=[],p=[],h=[];switch(e){case"jsonFormat":n=[{x:"01/01/2001",y:4e6},{x:"01/01/2002",y:1e6},{x:"01/01/2003",y:5e6}],a=[{x:"01/01/2001",y:3e6},{x:"01/01/2002",y:4e6},{x:"01/01/2003",y:7e6}],s=[{x:"01/01/2001",y:2e6},{x:"01/01/2002",y:8e6},{x:"01/01/2003",y:6e6}],h[0]={values:n,key:E},t>=2&&(h[1]={values:a,key:O}),t>=3&&(h[2]={values:s,key:x});break;case"lineChartFormat":n=[{x:1,y:4e6},{x:2,y:1e6},{x:3,y:5e6}],a=[{x:1,y:3e6},{x:2,y:4e6},{x:3,y:7e6}],s=[{x:1,y:2e6},{x:2,y:8e6},{x:3,y:6e6}],h[0]={values:n,key:E},t>=2&&(h[1]={values:a,key:O}),t>=3&&(h[2]={values:s,key:x});break;case"arrayFormat":o=[[1,4e6],[2,1e6],[3,5e6]],r=[[1,3e6],[2,4e6],[3,7e6]],l=[[1,2e6],[2,8e6],[3,6e6]],h[0]={values:o,key:E},t>=2&&(h[1]={values:r,key:O}),t>=3&&(h[2]={values:l,key:x});break;case"bubbleFormat":c=[{x:80.66,y:33739900,size:78,shape:i="random"===i?u[Math.floor(Math.random()*u.length)]:i},{x:79.84,y:81902300,size:90,shape:i},{x:78.6,y:5523100,size:45,shape:i}],d=[{x:72.73,y:79716200,size:98,shape:i},{x:80.05,y:61801600,size:20,shape:i},{x:72.49,y:73137200,size:34,shape:i}],p=[{x:68.09,y:33739900,size:45,shape:i},{x:81.55,y:7485600,size:78,shape:i},{x:68.6,y:14185e4,size:56,shape:i}],h[0]={values:c,key:E},t>=2&&(h[1]={values:d,key:O}),t>=3&&(h[2]={values:p,key:x});break;case"pieChartFormat":h=[{x:E,y:1e6},{x:O,y:2e6},{x:x,y:3e6},{x:R,y:4e6}]}return h})((e=>{const t=e.type;return(e=>"Line"===e)(t)?"lineChartFormat":N(t)?"pieChartFormat":T(t)?"bubbleFormat":k(t)?"jsonFormat":"arrayFormat"})(e),_.split(e.yaxisdatakey,",").length,e.shape),V=(e,t)=>{return!("Min"!==e[t+"domain"]||(i=e.type,!(e=>"Column"===e)(i)&&!M(i)));var i},G=e=>!(!_.isFinite(e.min)||!_.isFinite(e.max)),W=e=>{const t=Math.floor(e);return Math.abs(e)-t>0?e-.1:t-1},U=(e,t)=>isNaN(parseInt(e,10))?t(e,"value"):e,q=(e,t)=>("%c"==(e=e||"%x")&&(e="%a %b %e %X %Y"),d3.timeFormat(e)(new Date(moment(moment(t).format()).valueOf()))),z=(e,t)=>{let i,n,a;if(e){let s;s="Thousand"==e||"Million"==e||"Billion"==e?d3.format(",.2s"):"%"==e?d3.format(".2%"):".f"==e?d3.format(".2f"):d3.format(e),i=s(t),n=w[e]&&w[e].divider||0,a=w[e]&&w[e].prefix,a&&0!==n&&(i=d3.format(".2f")(t/n)+a)}else i=t>=1e3?d3.format(".1s")(t):t;var s;return i=(s=i)?("number"==typeof s?s.toString():s).replace(/\.0+([A-Za-z]*)$/,"$1").replace(/\.([1-9]+)0+([A-Za-z]*)$/,".$1$2"):s,i},H=(e,t,i,n)=>{e.tooltip.contentGenerator((e=>{let a,s=e.data.x;return a=z(t.ynumberformat,e.data.y),N(i.type)&&(n=e.data.x,s=""),'<table><tbody><tr class="value"><b>'+s+'</b></tr><tr><td class="legend-color-guide"><div style="background-color:'+e.color+';"></div></td><td class="key">'+n+'</td><td class="value">'+a+"</td></tr></tbody></table>"}))},Q=(e,t,i,n,a)=>{n=((e,t)=>(t&&!s.isEmptyObject(t)||(t={}),_.forEach(g,(i=>{_.isUndefined(t[i])&&(t[i]=e[i])})),t))(e,n);let o,r,l,c,d,u,b,y,w,P=[];const C={},A={};switch(e.type){case"Column":u=U(n.barspacing,F)||f.medium,o=nv.models.multiBarChart().x((e=>e.x)).y((e=>e.y)).reduceXTicks(n.reducexticks).rotateLabels(0).showControls(!1).stacked("Stacked"===n.viewtype).groupSpacing(u);break;case"Cumulative Line":o=nv.models.cumulativeLineChart().x((e=>e[0])).y((e=>e[1])).showControls(!1).useInteractiveGuideline(n.tooltips).interpolate(n.interpolation);break;case"Line":o=nv.models.lineChart().useInteractiveGuideline(n.tooltips).interpolate(n.interpolation);break;case"Area":o=nv.models.stackedAreaChart().x((e=>e.x)).y((e=>e.y)).clipEdge(!0).showControls(!1).style(n.areaviewtype).useInteractiveGuideline(n.tooltips).interpolate(n.interpolation);break;case"Bar":u=U(n.barspacing,F)||f.medium,o=nv.models.multiBarHorizontalChart().x((e=>e.x)).y((e=>e.y)).showControls(!1).stacked("Stacked"===n.viewtype).showValues(n.showvalues).groupSpacing(u);break;case"Pie":case"Donut":c=((e,t,i)=>{const n={};switch(e){case"hide":n.showlabels=!1;break;case"inside":n.showlabels=!0,n.showlabelsoutside=!1;break;case"outside":n.showlabels=!0,n.showlabelsoutside=!0}return n})(n.showlabels,n.showlabelsoutside),d=U(n.donutratio,B)||v.medium,o=nv.models.pieChart().x((e=>e.x)).y((e=>e.y)).showLabels(c.showlabels).labelType(n.labeltype).valueFormat(d3.format("%")).title(n.centerlabel).labelThreshold(n.labelthreshold||.01).labelsOutside(c.showlabelsoutside),S(e.type)&&o.donut(!0).donutRatio(d),"key-value"===n.labeltype&&o.labelType((e=>e.data.x+" "+e.data.y));break;case"Bubble":o=nv.models.scatterChart().x((e=>e.x)).y((e=>e.y)).showDistX(n.showxdistance).showDistY(n.showydistance)}var I;return t&&(C.min=t.min.x||t.min[0],C.max=t.max.x||t.max[0],G(C)&&(C.min=W(C.min),o.xDomain([C.min,C.max]))),i&&(A.min=i.min.y||i.min[1],A.max=i.max.y||i.max[1],G(A)&&(A.min=W(A.min),o.yDomain([A.min,A.max]))),o.legend.vers(n.legendtype&&n.legendtype.toLowerCase()||"furious"),_.includes(p,e.type)||(o=nv.models.multiBarChart().x((e=>e.x)).y((e=>e.y))),N(e.type)?("percent"===n.labeltype?o.valueFormat(d3.format("%")):o.valueFormat((e=>z(n.ynumberformat,e))),H(o,n,e)):(o.showXAxis(n.showxaxis).showYAxis(n.showyaxis),o.legendPosition(n.showlegend),r=n.xaxislabel||s.prettifyLabels(e.xaxisdatakey)||"x caption",l=n.yaxislabel||s.prettifyLabels(e.yaxisdatakey)||"y caption",e.yaxisdatakey&&e.yaxisdatakey.split(",").length>1&&(w=!0),w||T(e.type)||H(o,n,e,l),r+=n.xunits?"("+n.xunits+")":"",l+=n.yunits?"("+n.yunits+")":"",o.xAxis.axisLabel(r).axisLabelDistance(n.xaxislabeldistance).staggerLabels(n.staggerlabels),n.xdateformat||a&&!T(e.type)?L(e.type)?o.xAxis.tickFormat((t=>(y=a?h[t-1]:e.xDataKeyArr[t],q(n.xdateformat,y)))):o.xAxis.tickFormat((e=>q(n.xdateformat,e))):n.xnumberformat?o.xAxis.tickFormat((e=>z(n.xnumberformat,e))):L(e.type)&&o.xAxis.tickFormat((t=>e.xDataKeyArr[t])),o.yAxis.axisLabel(l).axisLabelDistance(n.yaxislabeldistance).staggerLabels(n.staggerlabels).tickFormat((e=>z(n.ynumberformat,e))),D(e.type)&&o.valueFormat((e=>z(n.ynumberformat,e)))),_.isString(n.customcolors)&&n.customcolors&&(P=_.split(n.customcolors,",")),_.isArray(n.customcolors)&&(P=n.customcolors),b="false"!==(I=n.showlegend)&&!1!==I&&("true"===I||!0===I||"hide"!==I),o.showLegend(b).margin({top:n.offsettop,right:n.offsetright,bottom:n.offsetbottom,left:n.offsetleft}).color(P.length?P:m[n.theme].colors),o.tooltip.enabled(n.tooltips),e.message=n.nodatamessage||"No data found",o.noData(e.message),L(e.type)&&e.highlightpoints&&o.dispatch.on("stateChange",(()=>{setTimeout((()=>Y(e)),100)})),!e.showlegend||"Donut"!==e.type&&"Pie"!==e.type||"right"===e.showlegend&&o.legendPosition("right"),o},Y=(e,t)=>{const i=t?null:e.$id;L(e.type)&&(((e,t)=>{t=t||1.5;const i=(e?d3.select("#wmChart"+e+" svg"):d3.select(P+" svg")).selectAll(".nv-line");0!==i.size()&&i.style("stroke-width",t)})(i,e.linethickness),((e,t)=>{const i=e?d3.select("#wmChart"+e+" svg"):d3.select(P+" svg");t?i.selectAll(".nv-point").style("stroke-width","6px").style("fill-opacity","0.95").style("stroke-opacity","0.95"):i.selectAll(".nv-point").style("stroke-width","0px").style("fill-opacity","0")})(i,e.highlightpoints))},K=["wmChart",""];function J(e,t){if(1&e&&r.\u0275\u0275element(0,"div",9),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("innerHTML",e.subheading,r.\u0275\u0275sanitizeHtml)}}function Z(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",4)(1,"h3",5)(2,"div",6),r.\u0275\u0275element(3,"i"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(4,"div",7),r.\u0275\u0275template(5,J,1,1,"div",8),r.\u0275\u0275elementEnd()()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275classMapInterpolate1("app-icon panel-icon ",e.iconclass,""),r.\u0275\u0275classProp("ng-hide",!e.iconclass),r.\u0275\u0275advance(1),r.\u0275\u0275property("innerHTML",e.title,r.\u0275\u0275sanitizeHtml),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.subheading)}}const X=function(e){return{error:e}};function ee(e,t){if(1&e&&(r.\u0275\u0275namespaceSVG(),r.\u0275\u0275namespaceHTML(),r.\u0275\u0275elementStart(0,"div",10),r.\u0275\u0275element(1,"p",11),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("title",e.hintMsg)("ngClass",r.\u0275\u0275pureFunction1(3,X,e.invalidConfig))("innerText",e.errMsg)}}const te=function(e,t){return{loading:e,"panel-body":t}},ie={widgetType:"wm-chart",hostClass:"app-chart"},ne="none",ae=["aggregation","aggregationcolumn","groupby","orderby"],se={Column:"rect.nv-bar",Bar:"g.nv-bar",Area:".nv-stackedarea .nv-point","Cumulative Line":".nv-cumulativeLine .nv-scatterWrap path.nv-point",Line:".nv-lineChart .nv-scatterWrap path.nv-point",Pie:".nv-pieChart .nv-slice path",Donut:".nv-pieChart .nv-slice path",Bubble:".nv-scatterChart .nv-point-paths path"},oe={fontunit:"font-size",fontsize:"font-size",color:"fill",fontfamily:"font-family",fontweight:"font-weight",fontstyle:"font-style",textdecoration:"text-decoration"},re={average:"AVG",count:"COUNT",maximum:"MAX",minimum:"MIN",sum:"SUM"},le=e=>!0===e||"true"===e||!1!==e&&"false"!==e&&e,ce=e=>{let t;const i=[],n=[];return _.forEach(_.split(e,","),(function(e){t=_.split(e,":"),i.push(t[0]),n.push(t[1])})),{columns:i,orders:n}},de=e=>e?e.replace(/\./g,"$"):null,pe=(e,t)=>{const i=d3.select("#wmChart"+t+" svg").selectAll("text");i.empty()||i.style(e)};class ue extends n.StylableComponent{static{this.initializeProps=void n.register("wm-chart",new Map([["aggregation",{value:"none",...n.PROP_STRING}],["aggregationcolumn",n.PROP_STRING],["areaviewtype",{value:"stack",...n.PROP_STRING}],["barspacing",{value:"medium",...n.PROP_STRING}],["bubblesize",n.PROP_STRING],["centerlabel",n.PROP_STRING],["class",n.PROP_STRING],["customcolors",n.PROP_ANY],["dataset",n.PROP_ANY],["datasource",n.PROP_STRING],["donutratio",{value:"medium",...n.PROP_STRING}],["formattype",{value:"",PROP_STRING:n.PROP_STRING}],["groupby",n.PROP_STRING],["height",{value:"210px",PROP_STRING:n.PROP_STRING}],["highlightpoints",n.PROP_BOOLEAN],["iconclass",n.PROP_STRING],["interpolation",{value:"linear",...n.PROP_STRING}],["labelthreshold",{value:.01,...n.PROP_NUMBER}],["labeltype",{value:"percent",...n.PROP_STRING}],["legendtype",{value:"furious",...n.PROP_STRING}],["linethickness",n.PROP_STRING],["loadingdatamsg",{value:"Loading...",...n.PROP_STRING}],["name",n.PROP_STRING],["nodatamessage",{value:"No Data Available.",...n.PROP_STRING}],["offset",n.PROP_STRING],["offsetbottom",{value:55,...n.PROP_NUMBER}],["offsetleft",{value:75,...n.PROP_NUMBER}],["offsetright",{value:25,...n.PROP_NUMBER}],["offsettop",{value:25,...n.PROP_NUMBER}],["orderby",n.PROP_STRING],["reducexticks",{value:!0,...n.PROP_BOOLEAN}],["shape",{value:"circle",...n.PROP_STRING}],["show",{value:!0,...n.PROP_BOOLEAN}],["showlabels",{value:"outside",...n.PROP_STRING}],["showlabelsoutside",{value:!0,...n.PROP_BOOLEAN}],["showlegend",{value:"top",...n.PROP_STRING}],["showvalues",{value:!1,...n.PROP_BOOLEAN}],["showxaxis",{value:!0,...n.PROP_BOOLEAN}],["showxdistance",{value:!1,...n.PROP_BOOLEAN}],["showyaxis",{value:!0,...n.PROP_BOOLEAN}],["showydistance",{value:!1,...n.PROP_BOOLEAN}],["staggerlabels",{value:!1,...n.PROP_BOOLEAN}],["subheading",n.PROP_STRING],["theme",n.PROP_STRING],["title",n.PROP_STRING],["tooltips",{value:!0,...n.PROP_BOOLEAN}],["type",n.PROP_STRING],["viewtype",{value:"Grouped",...n.PROP_STRING}],["xaxisdatakey",n.PROP_STRING],["xaxislabel",n.PROP_STRING],["xaxislabeldistance",{value:12,...n.PROP_NUMBER}],["xdateformat",n.PROP_STRING],["xdomain",{value:"Default",...n.PROP_STRING}],["xnumberformat",n.PROP_STRING],["xunits",n.PROP_STRING],["yaxisdatakey",n.PROP_STRING],["yaxislabel",n.PROP_STRING],["yaxislabeldistance",{value:12,...n.PROP_NUMBER}],["ydomain",{value:"Default",...n.PROP_STRING}],["ynumberformat",n.PROP_STRING],["yunits",n.PROP_STRING]]))}isGroupByEnabled(){return!(!this.groupby||this.groupby===ne)}isValidAxis(){return!this.binddataset||this.xaxisdatakey&&this.yaxisdatakey}isAggregationEnabled(){return!(!this.isGroupByEnabled()||this.aggregation===ne||!this.aggregationcolumn)}isDataFilteringEnabled(){return this.isAggregationEnabled()||!this.isVisuallyGrouped&&this.orderby}getxAxisVal(e,t,i){const n=_.get(e,t);return L(this.type)&&!s.isNumberType(this.xAxisDataType)?(this.xDataKeyArr.push(n),n instanceof Date?n:i):n}getXMinMaxValues(e){if(!e)return;const t={};return t.min=_.minBy(e.values,(e=>e.x||e[0])),t.max=_.maxBy(e.values,(e=>e.x||e[0])),t}getYMinMaxValues(e){const t={},i=[],n=[];if(e)return _.forEach(e,(e=>{i.push(_.minBy(e.values,(function(e){return e.y||e[1]}))),n.push(_.maxBy(e.values,(function(e){return e.y||e[1]})))})),t.min=_.minBy(i,(e=>e.y||e[1])),t.max=_.maxBy(n,(e=>e.y||e[1])),t}getValidData(e){return 1===e.length&&void 0===e[0]?[]:e}valueFinder(e,t,i,n,a){const s=this.getxAxisVal(e,t,n),o=_.get(e,i),r=parseFloat(o)||o,l=parseFloat(e[this.bubblesize])||2;let c={};var d;return k(this.type)?(c.x=s,c.y=r,T(this.type)&&(c.size=l,c.shape=a||"circle")):(d=this.type,_.includes(I,d)&&(c=[s,r])),c._dataObj=e,c}setErrMsg(e){this.showNoDataMsg&&(this.showContentLoadError=!0,this.invalidConfig=!0,this.errMsg="")}processChartData(){if(this.sampleData=j(this),this.xDataKeyArr=[],!this.binddataset)return this.xDataKeyArr=h,this.sampleData;if(!this.chartData||!this.chartData.length)return[];let e,t=[],i=[],n=[];const a=this.xaxisdatakey,o=this.yaxisdatakey?this.yaxisdatakey.split(","):[],r=this.chartData;return _.isArray(r)&&(N(this.type)?(e=o[0],t=_.map(r,((t,i)=>{if(!s.isEmptyObject(r[i]))return this.valueFinder(r[i],a,e)})),t=this.getValidData(t)):(T(this.type)&&(i="random"===this.shape?u:this.shape),o.forEach(((e,o)=>{n=_.map(r,((t,n)=>{if(!s.isEmptyObject(r[n]))return this.valueFinder(r[n],a,e,n,_.isArray(i)&&i[o]||this.shape)})),n=this.getValidData(n),t.push({values:n,key:s.prettifyLabels(e)})})))),t}setChartData(e){e&&(this._processedData=e)}getChartData(){return this._processedData}getVisuallyGroupedData(e,t){let i,n,a={},s=[];const o=[],r=M(this.type),l=_.first(_.split(this.yaxisdatakey,","));return this.xDataKeyArr=[],e=_.orderBy(e,_.split(this.groupby,",")),this.orderby&&(i=ce(this.orderby),e=_.orderBy(e,i.columns,i.orders)),e=_.groupBy(e,t),r&&(n=_.max(_.map(e,(e=>e.length)))),_.forEach(e,((e,t)=>{s=M?_.fill(new Array(n),[0,0]):[],_.forEachRight(e,((e,t)=>{s[t]=this.valueFinder(e,this.xaxisdatakey,l,t)})),a={key:t,values:s},o.push(a)})),o}getGroupingDetails(){if(this.isGroupByEnabled()&&!this.isAggregationEnabled()){let e,t,i,n=!1,a=[];const s=this.groupby&&this.groupby!==ne?this.groupby.split(","):[],o=this.yaxisdatakey?this.yaxisdatakey.split(","):[];return s.length>1&&(s.every(((t,a)=>this.xaxisdatakey===t||-1!==$.inArray(t,o)||(n=!0,e=t,i=a,s.splice(i,1),!1))),e&&a.push(e),s.length&&(a=_.concat(a,s))),this.xaxisdatakey!==this.aggregationcolumn&&a.push(this.xaxisdatakey),_.forEach(o,(e=>{e!==this.aggregationcolumn&&a.push(e)})),t=a.join(","),this.isVisuallyGrouped=n,{expression:t,isVisuallyGrouped:n,visualGroupingColumn:e}}return{expression:"",isVisuallyGrouped:!1,visualGroupingColumn:""}}getAggregatedData(e){const t=this.datasource,i=this.yaxisdatakey?this.yaxisdatakey.split(","):[],n={};let a,o,r,l=[],c=[];t&&(this.isGroupByEnabled()&&(c=_.split(this.groupby,",")),this.orderby&&(a=_.replace(this.orderby,/:/g," "),l=_.uniq(_.concat(l,c,[this.aggregationcolumn])),r=ce(this.orderby).columns,_.forEach(_.intersection(l,r),(e=>{o=de(e),a=_.replace(a,e,o)}))),this.isAggregationEnabled()&&(n.groupByFields=c,n.aggregations=[{field:this.aggregationcolumn,type:re[this.aggregation],alias:de(this.aggregationcolumn)}]),t.execute("getAggregatedData",{aggregations:n,sort:a}).then((t=>{const n=[],a=de(this.aggregationcolumn),o=de(this.xaxisdatakey),r=[];i.forEach((e=>r.push(de(e)))),_.forEach(t.body.content,(e=>{const t={};this.isAggregationEnabled()&&(t[this.aggregationcolumn]=e[a],t[this.aggregationcolumn]=_.get(e,a)||_.get(e,this.aggregationcolumn)),t[this.xaxisdatakey]=_.get(e,o)||_.get(e,this.xaxisdatakey),i.forEach(((i,n)=>{t[i]=e[r[n]],t[i]=_.get(e,r[n])||_.get(e,i)})),n.push(t)})),this.chartData=n,s.triggerFn(e)}),(()=>{this.chartData=[],this.setErrMsg("MESSAGE_ERROR_FETCH_DATA"),s.triggerFn(e)})))}setLabelsMaxWidth(){let e,t,i,n,a,s,o,r,l,c,d,p;const u=parseInt(this.fontsize,10)||12,h=D(this.type);e=$("#wmChart"+this.$id+" svg").find("g.nv-x").find("g.tick").find("text"),e.each((function(){const e=$(this);let i,s;if(e.text()&&"1"===e.css("opacity"))return i=e.parent().attr("transform").split(","),n=parseFloat(i[0].substr(10)),a=parseFloat(i[1]||"0"),!h&&n>0?s=n:a>0&&(s=a),t?(t=s-t,!1):(t=s,!0)})),h?(c=$("#wmChart"+this.$id+" svg>g.nv-wrap>g>g.nv-barsWrap")[0],d=$("#wmChart"+this.$id+" svg>g.nv-wrap>g>g.nv-y")[0],p=$("#wmChart"+this.$id+" svg")[0],s=c?c.getBoundingClientRect().height:0,l=d?p.getBoundingClientRect().width-d.getBoundingClientRect().width:p.getBoundingClientRect().width,i=Math.round(l/u),t<u&&(o=s/u,r=Math.ceil(this.chartData.length/o),d3.select("#wmChart"+this.$id+" svg").select("g.nv-x").selectAll("g.tick").select("text").each((function(e,t){t%r!=0&&d3.select(this).attr("opacity",0)})))):i=Math.round(t/u),i=Math.abs(i),e.each((function(){this.textContent.length>i&&(this.textContent=this.textContent.substr(0,i)+"...")}))}getDefaultColumns(){let e,t,i,n;const a=[],o=this.datasource.execute(s.DataSource.Operation.GET_PROPERTIES_MAP)||[];for(i=0;i<o.length&&a.length<=2;i+=1)e=o[i].type,!o[i].isRelated&&s.isNumberType(e)?a.push(o[i].fieldName):"string"!==e||t||(t=o[i].fieldName);return t&&a.length>0&&!T(this.type)&&(n=a[0],a[0]=t,a[1]=n),a}attachClickEvent(){let e;d3.select("#wmChart"+this.$id+" svg").selectAll(se[this.type]).style("pointer-events","all").on("click",((t,i,n)=>{switch(this.type){case"Column":case"Bar":e=i._dataObj;break;case"Pie":case"Donut":e=i.data._dataObj;break;case"Area":case"Cumulative Line":case"Line":e=i[0]._dataObj;break;case"Bubble":e=i}this.selecteditem=e,this.invokeEventCallback("select",{$event:d3.event,selectedChartItem:i,selectedItem:this.selecteditem})}))}postPlotProcess(e){let t,i,n,a;const o={},r=this.$element;Y(this),N(this.type)?this.showlabelsoutside||(t=d3.select("#wmChart"+this.$id+" svg"),i=t.select(".nv-pieLabels").selectAll(".nv-label"),n=t.select(".nv-pie").selectAll(".nv-slice"),a=[],n&&n.length&&(n.each((function(){d3.select(this).attr("transform",(function(e){a.push((e=>{const t=90*(e.startAngle+e.endAngle)/Math.PI-90;return t>90?t-180:t})(e))}))})),i.each((function(e,t){const i=d3.select(this);$(i[0][0]).find("text").attr("transform","rotate("+a[t]+")")})))):this.setLabelsMaxWidth(),_.forEach(oe,((e,t)=>{o[e]="fontsize"===t||"fontunit"===t?this.fontsize+this.fontunit:this[t]})),pe(o,this.$id),s.triggerFn(this._resizeFn&&this._resizeFn.clear),this._resizeFn=nv.utils.windowResize((()=>{r[0].getBoundingClientRect().height&&(e.update(),Y(this),N(this.type)||this.setLabelsMaxWidth())}))}configureChart(){let e,t,i,n;if(this._processedData.length>0&&(V(this,"x")&&(e=this.binddataset?this.getXMinMaxValues(this._processedData[0]):{min:{x:1},max:{x:5}}),V(this,"y")&&(t=this.binddataset?this.getYMinMaxValues(this._processedData):{min:{y:1},max:{y:5}})),!N(this.type)||this.binddataset&&this.scopedataset||(this._processedData=s.getClonedObject(this.scopedataset||this._processedData)),i=Q(this,e,t,null,!this.binddataset),_.isArray(this._processedData)){const e=$("#wmChart"+this.$id+" svg").find("g.nv-x").find("g.tick");return e&&e.length&&e.remove(),n=this.invokeEventCallback("beforerender",{chartInstance:i}),n&&(i=n),this.chart=i,d3.select("#wmChart"+this.$id+" svg").datum(this._processedData).call(this.chart),this.postPlotProcess(i),i}}plotChart(){const e=this.$element;this.chartData=this.invokeEventCallback("transform")||this.chartData,this.isVisuallyGrouped&&!N(this.type)?this._processedData=this.chartData:this._processedData=this.processChartData(),e[0].getBoundingClientRect().height&&(this.clearCanvas&&(e.find("svg").replaceWith("<svg></svg>"),this.clearCanvas=!1),this.isValidAxis()||(this._processedData=[]),nv.addGraph((()=>this.configureChart()),(()=>{setTimeout((()=>{this.attachClickEvent()}),600)})),this.isLoadInProgress=!1)}get isLiveVariable(){const e=this.datasource;return e&&"wm.LiveVariable"===e.category}plotChartProxy(){this.showContentLoadError=!1,this.invalidConfig=!1,this.isLoadInProgress=!0;const e=this.getGroupingDetails();this.binddataset&&this.isLiveVariable&&(this.filterFields||this.isDataFilteringEnabled())?this.getAggregatedData((()=>this.plotChart())):(this.dataset&&this.isLiveVariable&&(this.chartData=this.dataset,this.isGroupByEnabled()&&e.isVisuallyGrouped&&(this.chartData=this.getVisuallyGroupedData(this.chartData,e.visualGroupingColumn))),this.plotChart())}setDefaultAxisOptions(){const e=this.getDefaultColumns();this.xaxisdatakey=e[0]||null,this.yaxisdatakey=e[1]||null}getCutomizedOptions(e,t){const i=_.split(this.groupby,","),n=_.split(this.aggregationcolumn,",");if(!this.binddataset)return t;let a;switch(this.axisoptions||(this.axisoptions=t),e){case"xaxisdatakey":this.isGroupByEnabled()&&(a=i);break;case"yaxisdatakey":this.isAggregationEnabled()?a=n:this.isLiveVariable&&(a=this.numericColumns);break;case"groupby":this.isLiveVariable&&this.nonPrimaryColumns&&this.nonPrimaryColumns.length&&(a=this.nonPrimaryColumns);break;case"aggregationcolumn":this.isLiveVariable&&this.isAggregationEnabled()&&"count"!==this.aggregation&&(a=this.numericColumns);break;case"orderby":this.isLiveVariable&&this.isAggregationEnabled()&&(a=_.uniq(_.concat(i,n)));break;case"bubblesize":this.numericColumns&&this.numericColumns.length&&(a=this.numericColumns)}return a||t||this.axisoptions}setNumericandNonPrimaryColumns(){let e,t;const i=this.datasource.execute(s.DataSource.Operation.GET_PROPERTIES_MAP);this.numericColumns=[],this.nonPrimaryColumns=[],this.dataset&&!_.isEmpty(i)&&(e=[]),e&&(_.forEach(Object.keys(e),(i=>{t=e[i].type,s.isNumberType(t)&&this.numericColumns.push(i),"true"!==e[i].isRelatedPk&&e[i].isPrimaryKey||this.nonPrimaryColumns.push(i)})),this.numericColumns=this.numericColumns.sort(),this.nonPrimaryColumns=this.nonPrimaryColumns.sort())}handleDataSet(e){this.errMsg="",e||this.binddataset||(this.isVisuallyGrouped=!1,this.axisoptions=null),this.chartData=this.isLiveVariable?e||"":e&&""===e.dataValue&&1===_.keys(e).length?"":e,!_.isArray(this.chartData)&&_.isObject(this.chartData)&&(this.chartData=[this.chartData]),e&&e.filterFields&&(this.filterFields=e.filterFields),this.chartData&&this._plotChartProxy()}setDonutCenterLabel(e){let t,i;t=d3.select("#wmChart"+this.$id+" svg"),i=t.select(".nv-wrap.nv-pie").select(".nv-pie"),i.text(""),i.append("text").attr("dy",".35em").attr("text-anchor","middle").attr("class","nv-pie-title").text(e).each((function(e){var t=d3.select(this),i=d3.select(this.parentElement),n=Number(i.node().getBoundingClientRect().width)-30,a=this.getComputedTextLength();t.attr("data-scale",n/a)})).style("font-size",(function(){var e=16*d3.select(this).attr("data-scale");return e>24?24:e+"px"}))}onPropertyChange(e,t,i){switch(super.onPropertyChange(e,t,i),e){case"dataset":this.handleDataSet(t);break;case"centerlabel":this.chart&&(this.chart.title(t),this.setDonutCenterLabel(t));break;case"type":N(this.type)?(this.offsettop=20,this.offsetright=0,this.offsetbottom=0,this.offsetleft=0):"Pie"!==i&&"Donut"!==i||(this.offsettop=25,this.offsetright=25,this.offsetbottom=55,this.offsetleft=75),i!==t&&(this.clearCanvas=!0),this._plotChartProxy();break;default:this._plotChartProxy()}_.includes(ae,e)&&this._plotChartProxy()}handleLoading(e){const t=this.datasource;t&&t.execute(s.DataSource.Operation.IS_API_AWARE)&&s.isDataSourceEqual(e.variable,t)&&(this.variableInflight=e.active,this.isLoadInProgress=e.active)}hideTooltip(){d3.selectAll(".nvtooltip").style("opacity",0)}onStyleChange(e,t,i){const n={};switch(super.onStyleChange(e,t,i),e){case"fontsize":case"fontunit":case"color":case"fontfamily":case"fontweight":case"fontstyle":case"textdecoration":n[oe[e]]="fontsize"===e||"fontunit"===e?this.fontsize+this.fontunit:t,pe(n,this.$id)}}constructor(e,t){super(e,ie),this.app=t,this.iconclass="",this.nonPrimaryColumns=[],this.xDataKeyArr=[],this.chartData=[],this._processedData=[],this._subsciptions=[],this._plotChartProxy=_.debounce(this.plotChartProxy.bind(this),100),this.redraw=this._plotChartProxy.bind(this),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER,["fontsize","fontunit","color","fontfamily","fontweight","fontstyle","textdecoration"]),this.$id=this.widgetId||Math.random(),s.removeAttr(this.nativeElement,"title"),this.chartReady=!1,this.binddataset=this.nativeElement.getAttribute("dataset.bind"),this._subsciptions.push(this.app.subscribe("toggle-variable-state",this.handleLoading.bind(this))),this._subsciptions.push(this.app.subscribe("iscroll-start",(()=>{this.hideTooltip()})))}ngAfterViewInit(){super.ngAfterViewInit(),_.includes(["outside","inside","hide"],this.showlabels)||(this.showlabels=le(this.showlabels),this.showlabelsoutside=le(this.showlabelsoutside),this.showlabels=this.showlabels?this.showlabelsoutside?"outside":"inside":"hide"),this.theme||(this.theme=N(this.type)?"Azure":"Terrestrial"),this.nativeElement.setAttribute("id","wmChart"+this.$id),this.binddataset||this.nativeElement.getAttribute("scopedataset")||this._plotChartProxy()}ngOnDestroy(){this.hideTooltip(),this._subsciptions.forEach((e=>{e()})),super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||ue)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(d.App))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:ue,selectors:[["div","wmChart",""]],hostVars:2,hostBindings:function(e,t){2&e&&r.\u0275\u0275classProp("panel",t.title)},features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(ue)]),r.\u0275\u0275InheritDefinitionFeature],attrs:K,decls:5,vars:6,consts:[["class","panel-heading",4,"ngIf"],[1,"app-chart-inner",3,"ngClass"],["class","wm-content-info readonly-wrapper",4,"ngIf"],["wmSpinner","","show.bind","isLoadInProgress","caption.bind","loadingdatamsg"],[1,"panel-heading"],[1,"panel-title"],[1,"pull-left"],[1,"heading",3,"innerHTML"],["class","description",3,"innerHTML",4,"ngIf"],[1,"description",3,"innerHTML"],[1,"wm-content-info","readonly-wrapper"],[1,"wm-message",3,"title","ngClass","innerText"]],template:function(e,t){1&e&&(r.\u0275\u0275template(0,Z,6,7,"div",0),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275namespaceSVG(),r.\u0275\u0275element(2,"svg"),r.\u0275\u0275template(3,ee,2,5,"div",2),r.\u0275\u0275namespaceHTML(),r.\u0275\u0275element(4,"div",3),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275property("ngIf",t.title),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(3,te,t.isLoadInProgress,t.title)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.showContentLoadError&&t.showNoDataMsg))},dependencies:[c.SpinnerComponent,l.NgClass,l.NgIf],styles:[".nvtooltip h3,.nvtooltip p{margin:0;text-align:center}.nv-distx,.nv-disty,.nv-noninteractive,.nvd3 .nv-axis,.nvd3 .nv-interactiveGuideLine,.nvd3.nv-pie .nv-label,.nvd3.nv-sparklineplus g.nv-hoverValue,.nvtooltip{pointer-events:none}.nvd3 .nv-axis{opacity:1}.nvd3 .nv-axis path{fill:none;stroke:#000;stroke-opacity:.75;shape-rendering:crispEdges}.nvd3 .nv-axis .zero line,.nvd3 .nv-axis line.zero,.nvd3 .nv-axis path.domain{stroke-opacity:.75}.nvd3 .nv-axis.nv-x path.domain{stroke-opacity:0}.nvd3 .nv-axis line{fill:none;stroke:#e5e5e5;shape-rendering:crispEdges}.nvd3 .nv-axis .nv-axisMaxMin text,.nvtooltip table td.key.total{font-weight:700}.nvd3 .x .nv-axis .nv-axisMaxMin text,.nvd3 .x2 .nv-axis .nv-axisMaxMin text,.nvd3 .x3 .nv-axis .nv-axisMaxMin text{text-anchor:middle}.nvd3 .nv-axis.nv-disabled,.nvd3 .nv-controlsWrap .nv-legend .nv-check-box .nv-check{opacity:0}.nvd3 .nv-bars rect{fill-opacity:.75;transition:fill-opacity .25s linear}.nvd3 .nv-bars rect.hover,.nvd3 .nv-boxplot circle:hover,.nvd3 .nv-boxplot rect:hover,.nvd3 .nv-candlestickBar .nv-ticks rect:hover,.nvd3 .nv-discretebar .nv-groups rect:hover,.nvd3 .nv-multibar .nv-groups rect:hover,.nvd3 .nv-multibarHorizontal .nv-groups rect:hover,.nvd3 .nv-scatter .nv-point.hover,.nvd3.nv-bullet .nv-measure:hover,.nvd3.nv-linePlusBar .nv-bar rect:hover,.nvd3.nv-pie .hover path{fill-opacity:1}.nvd3 .nv-bars .hover rect{fill:#add8e6}.nvd3 .nv-bars text{fill:#0000}.nvd3 .nv-bars .hover text{fill:#000}.nvd3 .nv-discretebar .nv-groups rect,.nvd3 .nv-multibar .nv-groups rect,.nvd3 .nv-multibarHorizontal .nv-groups rect{stroke-opacity:0;transition:fill-opacity .25s linear}.nvd3 .nv-discretebar .nv-groups text,.nvd3 .nv-multibarHorizontal .nv-groups text{font-weight:700;fill:#000;stroke:#0000}.nvd3 .nv-boxplot circle{fill-opacity:.5}.nvd3 line.nv-boxplot-median{stroke:#000}.nv-boxplot-tick:hover{stroke-width:2.5px}.nvd3.nv-bullet{font:10px sans-serif}.nvd3.nv-bullet .nv-measure{fill-opacity:.8}.nvd3.nv-bullet .nv-marker{stroke:#000;stroke-width:2px}.nvd3.nv-bullet .nv-markerTriangle{stroke:#000;fill:#fff;stroke-width:1.5px}.nvd3.nv-bullet .nv-markerLine{stroke:#000;stroke-width:1.5px}.nvd3.nv-bullet .nv-tick line{stroke:#666;stroke-width:.5px}.nvd3.nv-bullet .nv-range.nv-s0{fill:#eee}.nvd3.nv-bullet .nv-range.nv-s1{fill:#ddd}.nvd3.nv-bullet .nv-range.nv-s2{fill:#ccc}.nvd3.nv-bullet .nv-title{font-size:14px;font-weight:700}.nvd3.nv-bullet .nv-subtitle{fill:#999}.nvd3.nv-bullet .nv-range{fill:#bababa;fill-opacity:.4}.nvd3.nv-bullet .nv-range:hover{fill-opacity:.7}.nvd3.nv-candlestickBar .nv-ticks .nv-tick,.nvd3.nv-ohlcBar .nv-ticks .nv-tick{stroke-width:1px}.nvd3.nv-candlestickBar .nv-ticks .nv-tick.hover,.nvd3.nv-ohlcBar .nv-ticks .nv-tick.hover{stroke-width:2px}.nvd3.nv-candlestickBar .nv-ticks .nv-tick.positive rect,.nvd3.nv-sparklineplus .nv-maxValue{stroke:#2ca02c;fill:#2ca02c}.nvd3.nv-candlestickBar .nv-ticks .nv-tick.negative rect,.nvd3.nv-sparklineplus .nv-minValue{stroke:#d62728;fill:#d62728}.with-transitions .nv-candlestickBar .nv-ticks .nv-tick,.with-transitions .nvd3 .nv-groups .nv-point{transition:stroke-width .25s linear,stroke-opacity .25s linear}.nvd3.nv-candlestickBar .nv-ticks line{stroke:#333}.nv-force-node{stroke:#fff;stroke-width:1.5px}.nv-force-link{stroke:#999;stroke-opacity:.6}.nv-force-node text{stroke-width:0}.nvd3 .nv-check-box .nv-box{fill-opacity:0;stroke-width:2}.nvd3 .nv-check-box .nv-check{fill-opacity:0;stroke-width:4}.nvd3 .nv-hoverArea,.nvd3 .nv-series.nv-disabled .nv-check-box .nv-check,.nvd3.nv-line .nvd3.nv-scatter .nv-groups .nv-point,.nvd3.nv-pie .nv-label rect{fill-opacity:0;stroke-opacity:0}.nvd3.nv-linePlusBar .nv-bar rect{fill-opacity:.75}.nvd3 .nv-groups path.nv-line,.nvd3.nv-sparkline path{fill:none}.nvd3 .nv-groups path.nv-area{stroke:none}.nvd3.nv-scatter.nv-single-point .nv-groups .nv-point{fill-opacity:.5!important;stroke-opacity:.5!important}.nvd3 .nv-groups .nv-point.hover,.nvd3.nv-scatter .nv-groups .nv-point.hover{stroke-width:7px;fill-opacity:.95!important;stroke-opacity:.95!important}.nvd3 .nv-point-paths path{stroke:#aaa;stroke-opacity:0;fill:#eee;fill-opacity:0}.nvd3 .nv-indexLine{cursor:ew-resize}svg.nvd3-svg{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:block;width:100%;height:100%}.nvtooltip.with-3d-shadow,.with-3d-shadow .nvtooltip{box-shadow:0 5px 10px #0003;border-radius:5px}.nvd3 text{font:12px Arial,sans-serif}.nvtooltip h3,.nvtooltip table td.key{font-weight:400}.nvd3 .title{font:700 14px Arial,sans-serif}.nvd3 .nv-background{fill:#fff;fill-opacity:0}.nvd3.nv-noData{font-size:18px;font-weight:700}.nv-brush .selection{fill-opacity:.125;shape-rendering:crispEdges}.nv-brush .handle path{fill:#eee;stroke:#666}.nvd3 .nv-legend .nv-series{cursor:pointer}.nvd3 .nv-legend .nv-disabled circle{fill-opacity:0}.nvd3 .nv-brush .selection{fill-opacity:0!important}.nvd3 .nv-brushBackground rect{stroke:#000;stroke-width:.4;fill:#fff;fill-opacity:.7}@media print{.nvd3 text{stroke-width:0;fill-opacity:1}}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.positive{stroke:#2ca02c}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.negative{stroke:#d62728}.nvd3 .background path{fill:none;stroke:#eee;stroke-opacity:.4;shape-rendering:crispEdges}.nvd3 .foreground path{fill:none;stroke-opacity:.7}.nvd3 .nv-parallelCoordinates-brush .selection{fill:#fff;fill-opacity:.6;stroke:gray;shape-rendering:crispEdges}.nvd3 .nv-parallelCoordinates .hover{fill-opacity:1;stroke-width:3px}.nvd3 .missingValuesline line{fill:none;stroke:#000;stroke-width:1;stroke-opacity:1;stroke-dasharray:5,5}.nvd3.nv-pie path{stroke-opacity:0;transition:fill-opacity .25s linear,stroke-width .25s linear,stroke-opacity .25s linear;stroke:#fff;stroke-width:1px;stroke-opacity:1;fill-opacity:.7}.nvd3.nv-pie .nv-pie-title{font-size:24px;fill:#13c4f996}.nvd3.nv-pie .nv-slice text{stroke:#000;stroke-width:0}.nvd3 .nv-groups .nv-point.hover{stroke-width:20px;stroke-opacity:.5}.nvd3.nv-sparklineplus .nv-hoverValue line{stroke:#333;stroke-width:1.5px}.nvd3.nv-sparklineplus,.nvd3.nv-sparklineplus g{pointer-events:all}.nvd3.nv-sparklineplus .nv-xValue,.nvd3.nv-sparklineplus .nv-yValue{stroke-width:0;font-size:.9em;font-weight:400}.nvd3.nv-sparklineplus .nv-yValue{stroke:#f66}.nvd3.nv-sparklineplus .nv-currentValue{font-weight:700;font-size:1.1em}.nvd3.nv-stackedarea path.nv-area{fill-opacity:.7;stroke-opacity:0;transition:fill-opacity .25s linear,stroke-opacity .25s linear}.nvd3.nv-stackedarea path.nv-area.hover{fill-opacity:.9}.nvd3.nv-stackedarea .nv-groups .nv-point{stroke-opacity:0;fill-opacity:0}.nvtooltip{position:absolute;background-color:#fff;color:#000;padding:1px;border:1px solid rgba(0,0,0,.5);z-index:10000;display:block;font-family:Arial,sans-serif;font-size:13px;text-align:left;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none;background:#fffc;border-radius:4px}.nvtooltip.with-transitions,.with-transitions .nvtooltip{transition:opacity 50ms linear .2s}.nvtooltip.x-nvtooltip,.nvtooltip.y-nvtooltip{padding:8px}.nvtooltip h3{padding:4px 14px;line-height:18px;background-color:#f7f7f7bf;color:#000;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.nvtooltip p{padding:5px 14px}.nvtooltip span{display:inline-block;margin:2px 0}.nvtooltip table{margin:6px;border-spacing:0}.nvtooltip table td{padding:2px 9px 2px 0;vertical-align:middle}.nvtooltip table td.value{text-align:right;font-weight:700}.nvtooltip table td.percent{color:#a9a9a9}.nvtooltip table tr.highlight td{padding:1px 9px 1px 0;border-bottom-style:solid;border-bottom-width:1px;border-top-style:solid;border-top-width:1px}.nvtooltip table td.legend-color-guide div{vertical-align:middle;width:12px;height:12px;border:1px solid #999}.nvtooltip .footer{padding:3px;text-align:center}.nvtooltip-pending-removal{pointer-events:none;display:none}.nvd3 line.nv-guideline{stroke:#ccc}\n"],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(ue,[{type:t.Component,args:[{selector:"div[wmChart]",providers:[n.provideAsWidgetRef(ue)],encapsulation:t.ViewEncapsulation.None,template:'<div class="panel-heading" *ngIf="title">\n    <h3 class="panel-title">\n        <div class="pull-left"><i class="app-icon panel-icon {{iconclass}}" [class.ng-hide]="!iconclass"></i></div>\n        <div class="heading" [innerHTML]="title"></div>\n        <div class="description" *ngIf="subheading" [innerHTML]="subheading"></div>\n    </h3>\n</div>\n<div class="app-chart-inner" [ngClass]="{\'loading\':isLoadInProgress, \'panel-body\': title}">\n    <svg></svg>\n    <div class="wm-content-info readonly-wrapper" *ngIf="showContentLoadError && showNoDataMsg">\n        <p class="wm-message" [title]="hintMsg" [ngClass]="{\'error\': invalidConfig}" [innerText]="errMsg"></p>\n    </div>\n    <div wmSpinner show.bind="isLoadInProgress" caption.bind="loadingdatamsg"></div>\n</div>\n',styles:[".nvtooltip h3,.nvtooltip p{margin:0;text-align:center}.nv-distx,.nv-disty,.nv-noninteractive,.nvd3 .nv-axis,.nvd3 .nv-interactiveGuideLine,.nvd3.nv-pie .nv-label,.nvd3.nv-sparklineplus g.nv-hoverValue,.nvtooltip{pointer-events:none}.nvd3 .nv-axis{opacity:1}.nvd3 .nv-axis path{fill:none;stroke:#000;stroke-opacity:.75;shape-rendering:crispEdges}.nvd3 .nv-axis .zero line,.nvd3 .nv-axis line.zero,.nvd3 .nv-axis path.domain{stroke-opacity:.75}.nvd3 .nv-axis.nv-x path.domain{stroke-opacity:0}.nvd3 .nv-axis line{fill:none;stroke:#e5e5e5;shape-rendering:crispEdges}.nvd3 .nv-axis .nv-axisMaxMin text,.nvtooltip table td.key.total{font-weight:700}.nvd3 .x .nv-axis .nv-axisMaxMin text,.nvd3 .x2 .nv-axis .nv-axisMaxMin text,.nvd3 .x3 .nv-axis .nv-axisMaxMin text{text-anchor:middle}.nvd3 .nv-axis.nv-disabled,.nvd3 .nv-controlsWrap .nv-legend .nv-check-box .nv-check{opacity:0}.nvd3 .nv-bars rect{fill-opacity:.75;transition:fill-opacity .25s linear}.nvd3 .nv-bars rect.hover,.nvd3 .nv-boxplot circle:hover,.nvd3 .nv-boxplot rect:hover,.nvd3 .nv-candlestickBar .nv-ticks rect:hover,.nvd3 .nv-discretebar .nv-groups rect:hover,.nvd3 .nv-multibar .nv-groups rect:hover,.nvd3 .nv-multibarHorizontal .nv-groups rect:hover,.nvd3 .nv-scatter .nv-point.hover,.nvd3.nv-bullet .nv-measure:hover,.nvd3.nv-linePlusBar .nv-bar rect:hover,.nvd3.nv-pie .hover path{fill-opacity:1}.nvd3 .nv-bars .hover rect{fill:#add8e6}.nvd3 .nv-bars text{fill:#0000}.nvd3 .nv-bars .hover text{fill:#000}.nvd3 .nv-discretebar .nv-groups rect,.nvd3 .nv-multibar .nv-groups rect,.nvd3 .nv-multibarHorizontal .nv-groups rect{stroke-opacity:0;transition:fill-opacity .25s linear}.nvd3 .nv-discretebar .nv-groups text,.nvd3 .nv-multibarHorizontal .nv-groups text{font-weight:700;fill:#000;stroke:#0000}.nvd3 .nv-boxplot circle{fill-opacity:.5}.nvd3 line.nv-boxplot-median{stroke:#000}.nv-boxplot-tick:hover{stroke-width:2.5px}.nvd3.nv-bullet{font:10px sans-serif}.nvd3.nv-bullet .nv-measure{fill-opacity:.8}.nvd3.nv-bullet .nv-marker{stroke:#000;stroke-width:2px}.nvd3.nv-bullet .nv-markerTriangle{stroke:#000;fill:#fff;stroke-width:1.5px}.nvd3.nv-bullet .nv-markerLine{stroke:#000;stroke-width:1.5px}.nvd3.nv-bullet .nv-tick line{stroke:#666;stroke-width:.5px}.nvd3.nv-bullet .nv-range.nv-s0{fill:#eee}.nvd3.nv-bullet .nv-range.nv-s1{fill:#ddd}.nvd3.nv-bullet .nv-range.nv-s2{fill:#ccc}.nvd3.nv-bullet .nv-title{font-size:14px;font-weight:700}.nvd3.nv-bullet .nv-subtitle{fill:#999}.nvd3.nv-bullet .nv-range{fill:#bababa;fill-opacity:.4}.nvd3.nv-bullet .nv-range:hover{fill-opacity:.7}.nvd3.nv-candlestickBar .nv-ticks .nv-tick,.nvd3.nv-ohlcBar .nv-ticks .nv-tick{stroke-width:1px}.nvd3.nv-candlestickBar .nv-ticks .nv-tick.hover,.nvd3.nv-ohlcBar .nv-ticks .nv-tick.hover{stroke-width:2px}.nvd3.nv-candlestickBar .nv-ticks .nv-tick.positive rect,.nvd3.nv-sparklineplus .nv-maxValue{stroke:#2ca02c;fill:#2ca02c}.nvd3.nv-candlestickBar .nv-ticks .nv-tick.negative rect,.nvd3.nv-sparklineplus .nv-minValue{stroke:#d62728;fill:#d62728}.with-transitions .nv-candlestickBar .nv-ticks .nv-tick,.with-transitions .nvd3 .nv-groups .nv-point{transition:stroke-width .25s linear,stroke-opacity .25s linear}.nvd3.nv-candlestickBar .nv-ticks line{stroke:#333}.nv-force-node{stroke:#fff;stroke-width:1.5px}.nv-force-link{stroke:#999;stroke-opacity:.6}.nv-force-node text{stroke-width:0}.nvd3 .nv-check-box .nv-box{fill-opacity:0;stroke-width:2}.nvd3 .nv-check-box .nv-check{fill-opacity:0;stroke-width:4}.nvd3 .nv-hoverArea,.nvd3 .nv-series.nv-disabled .nv-check-box .nv-check,.nvd3.nv-line .nvd3.nv-scatter .nv-groups .nv-point,.nvd3.nv-pie .nv-label rect{fill-opacity:0;stroke-opacity:0}.nvd3.nv-linePlusBar .nv-bar rect{fill-opacity:.75}.nvd3 .nv-groups path.nv-line,.nvd3.nv-sparkline path{fill:none}.nvd3 .nv-groups path.nv-area{stroke:none}.nvd3.nv-scatter.nv-single-point .nv-groups .nv-point{fill-opacity:.5!important;stroke-opacity:.5!important}.nvd3 .nv-groups .nv-point.hover,.nvd3.nv-scatter .nv-groups .nv-point.hover{stroke-width:7px;fill-opacity:.95!important;stroke-opacity:.95!important}.nvd3 .nv-point-paths path{stroke:#aaa;stroke-opacity:0;fill:#eee;fill-opacity:0}.nvd3 .nv-indexLine{cursor:ew-resize}svg.nvd3-svg{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:block;width:100%;height:100%}.nvtooltip.with-3d-shadow,.with-3d-shadow .nvtooltip{box-shadow:0 5px 10px #0003;border-radius:5px}.nvd3 text{font:12px Arial,sans-serif}.nvtooltip h3,.nvtooltip table td.key{font-weight:400}.nvd3 .title{font:700 14px Arial,sans-serif}.nvd3 .nv-background{fill:#fff;fill-opacity:0}.nvd3.nv-noData{font-size:18px;font-weight:700}.nv-brush .selection{fill-opacity:.125;shape-rendering:crispEdges}.nv-brush .handle path{fill:#eee;stroke:#666}.nvd3 .nv-legend .nv-series{cursor:pointer}.nvd3 .nv-legend .nv-disabled circle{fill-opacity:0}.nvd3 .nv-brush .selection{fill-opacity:0!important}.nvd3 .nv-brushBackground rect{stroke:#000;stroke-width:.4;fill:#fff;fill-opacity:.7}@media print{.nvd3 text{stroke-width:0;fill-opacity:1}}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.positive{stroke:#2ca02c}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.negative{stroke:#d62728}.nvd3 .background path{fill:none;stroke:#eee;stroke-opacity:.4;shape-rendering:crispEdges}.nvd3 .foreground path{fill:none;stroke-opacity:.7}.nvd3 .nv-parallelCoordinates-brush .selection{fill:#fff;fill-opacity:.6;stroke:gray;shape-rendering:crispEdges}.nvd3 .nv-parallelCoordinates .hover{fill-opacity:1;stroke-width:3px}.nvd3 .missingValuesline line{fill:none;stroke:#000;stroke-width:1;stroke-opacity:1;stroke-dasharray:5,5}.nvd3.nv-pie path{stroke-opacity:0;transition:fill-opacity .25s linear,stroke-width .25s linear,stroke-opacity .25s linear;stroke:#fff;stroke-width:1px;stroke-opacity:1;fill-opacity:.7}.nvd3.nv-pie .nv-pie-title{font-size:24px;fill:#13c4f996}.nvd3.nv-pie .nv-slice text{stroke:#000;stroke-width:0}.nvd3 .nv-groups .nv-point.hover{stroke-width:20px;stroke-opacity:.5}.nvd3.nv-sparklineplus .nv-hoverValue line{stroke:#333;stroke-width:1.5px}.nvd3.nv-sparklineplus,.nvd3.nv-sparklineplus g{pointer-events:all}.nvd3.nv-sparklineplus .nv-xValue,.nvd3.nv-sparklineplus .nv-yValue{stroke-width:0;font-size:.9em;font-weight:400}.nvd3.nv-sparklineplus .nv-yValue{stroke:#f66}.nvd3.nv-sparklineplus .nv-currentValue{font-weight:700;font-size:1.1em}.nvd3.nv-stackedarea path.nv-area{fill-opacity:.7;stroke-opacity:0;transition:fill-opacity .25s linear,stroke-opacity .25s linear}.nvd3.nv-stackedarea path.nv-area.hover{fill-opacity:.9}.nvd3.nv-stackedarea .nv-groups .nv-point{stroke-opacity:0;fill-opacity:0}.nvtooltip{position:absolute;background-color:#fff;color:#000;padding:1px;border:1px solid rgba(0,0,0,.5);z-index:10000;display:block;font-family:Arial,sans-serif;font-size:13px;text-align:left;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none;background:#fffc;border-radius:4px}.nvtooltip.with-transitions,.with-transitions .nvtooltip{transition:opacity 50ms linear .2s}.nvtooltip.x-nvtooltip,.nvtooltip.y-nvtooltip{padding:8px}.nvtooltip h3{padding:4px 14px;line-height:18px;background-color:#f7f7f7bf;color:#000;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.nvtooltip p{padding:5px 14px}.nvtooltip span{display:inline-block;margin:2px 0}.nvtooltip table{margin:6px;border-spacing:0}.nvtooltip table td{padding:2px 9px 2px 0;vertical-align:middle}.nvtooltip table td.value{text-align:right;font-weight:700}.nvtooltip table td.percent{color:#a9a9a9}.nvtooltip table tr.highlight td{padding:1px 9px 1px 0;border-bottom-style:solid;border-bottom-width:1px;border-top-style:solid;border-top-width:1px}.nvtooltip table td.legend-color-guide div{vertical-align:middle;width:12px;height:12px;border:1px solid #999}.nvtooltip .footer{padding:3px;text-align:center}.nvtooltip-pending-removal{pointer-events:none;display:none}.nvd3 line.nv-guideline{stroke:#ccc}\n"]}]}],(function(){return[{type:r.Injector},{type:d.App}]}),{title:[{type:t.HostBinding,args:["class.panel"]}]});const he=[ue];class me{static{this.\u0275fac=function(e){return new(e||me)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:me})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[a.BasicModule,i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(me,[{type:t.NgModule,args:[{imports:[a.BasicModule,i.CommonModule,n.WmComponentsModule],declarations:[...he],exports:[...he]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(me,{declarations:[ue],imports:[a.BasicModule,i.CommonModule,n.WmComponentsModule],exports:[ue]}),e.ChartComponent=ue,e.ChartModule=me})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("ngx-bootstrap/dropdown"),require("@wm/components/base"),require("@wm/components/basic"),require("@wm/components/input"),require("@angular/router"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","ngx-bootstrap/dropdown","@wm/components/base","@wm/components/basic","@wm/components/input","@angular/router","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.navigation=e.wm.components.navigation||{},e.wm.components.navigation.menu={}),e.ng.core,e.ng.common,e.dropdown,e.wm.components.base,e.wm.components.basic,e.wm.components.input,e.ng.router,e.wm.core)}(this,(function(e,t,i,n,a,s,o,r,l){"use strict";function c(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var d=c(t),p=c(i),u=c(n),h=c(a),m=c(s),g=c(o),f=c(r),v=c(l);const b=["wmNav",""];function y(e,t){1&e&&d.\u0275\u0275element(0,"div",4)}function w(e,t){if(1&e&&d.\u0275\u0275element(0,"a",5),2&e){const e=t.item,i=d.\u0275\u0275nextContext();d.\u0275\u0275property("disableMenuContext",i.disableMenuContext||!!e.action)("wmNavigationControl",e.link),d.\u0275\u0275attribute("aria-current",e._selected||!i.isactive&&e.link==="#/"+i.activePageName?"page":"")}}const P=function(e,t,i){return{item:e,index:t,liRef:i}};function C(e,t){if(1&e&&d.\u0275\u0275elementContainer(0,9),2&e){const e=d.\u0275\u0275nextContext(),t=e.$implicit,i=e.index,n=d.\u0275\u0275reference(1);d.\u0275\u0275nextContext();const a=d.\u0275\u0275reference(3);d.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",d.\u0275\u0275pureFunction3(2,P,t,i,n))}}const A=function(e,t){return{item:e,index:t}};function I(e,t){if(1&e&&d.\u0275\u0275elementContainer(0,9),2&e){const e=d.\u0275\u0275nextContext(),t=e.$implicit,i=e.index;d.\u0275\u0275nextContext();const n=d.\u0275\u0275reference(1);d.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",d.\u0275\u0275pureFunction2(2,A,t,i))}}const E=function(e){return{active:e}};function O(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"li",6,7),d.\u0275\u0275template(2,C,1,6,"ng-container",8),d.\u0275\u0275template(3,I,1,5,"ng-container",8),d.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,i=d.\u0275\u0275nextContext();d.\u0275\u0275classMapInterpolate1("app-nav-item ",e.class,""),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(6,E,e._selected||!i.isactive&&e.link==="#/"+i.activePageName)),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",!e.children.length),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",e.children.length)}}function x(e,t){1&e&&d.\u0275\u0275projection(0,0,["*ngIf","!nodes.length"])}const R=[[["","wmNavItem",""]]],D=["[wmNavItem]"],S={widgetType:"wm-nav",hostClass:"nav app-nav"},T={pills:"nav-pills",tabs:"nav-tabs",navbar:"navbar-nav"};class M extends a.DatasetAwareNavComponent{static{this.initializeProps=void a.register("wm-nav",new Map([["autoclose",{value:"always",...a.PROP_STRING}],["autoopen",{value:"never",...a.PROP_STRING}],["class",a.PROP_STRING],["dataset",a.PROP_ANY],["iconposition",{value:"left",...a.PROP_STRING}],["isactive",a.PROP_STRING],["itemlabel",a.PROP_STRING],["itemlink",a.PROP_STRING],["itemicon",a.PROP_STRING],["itemclass",a.PROP_STRING],["itemchildren",a.PROP_STRING],["itemaction",a.PROP_STRING],["itembadge",a.PROP_STRING],["itemtarget",a.PROP_STRING],["layout",a.PROP_STRING],["name",a.PROP_STRING],["orderby",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}],["showonhover",{value:!1,...a.PROP_BOOLEAN}],["type",a.PROP_STRING],["userrole",a.PROP_STRING]]))}get activePageName(){return this.app.activePageName}constructor(e,t,i,n,s,o){super(e,S),this.cdRef=t,this.route=i,this.userDefinedExecutionContext=n,this.app=s,a.styler(this.nativeElement,this,a.APPLY_STYLES_TYPE.CONTAINER),this.disableMenuContext=!!o,this.pageScope=this.viewParent;const r=this.nodes$.subscribe((()=>{if(!_.isEmpty(this.nodes)){let e=!1;const t=(i,n)=>{_.forEach(i,(i=>{if(!e)return i.isactive||i.link=="#/"+this.activePageName?(e=!0,this.selecteditem=n?_.omit(i,["children","value"]):i.value,this.invokeEventCallback("select",{$event:{},$item:i.value}),l.triggerItemAction(this,i),n||(i._selected=!0),!1):void(_.isEmpty(i.children)||t(i.children,"menu"))}))};t(this.nodes)}}));this.registerDestroyListener((()=>r.unsubscribe()))}setNavType(e){l.addClass(this.nativeElement,T[e])}setNavLayout(e){l.addClass(this.nativeElement,`nav-${e}`)}onNavSelect(e,t,i){e.preventDefault();const n=_.find(this.nodes,"_selected");n&&delete n._selected,this.activeNavLINode&&l.removeClass(this.activeNavLINode,"active"),this.activeNavLINode=i,l.addClass(i,"active"),this.selecteditem=t.value,this.invokeEventCallback("select",{$event:e,$item:t.value}),l.triggerItemAction(this,t)}ngOnInit(){super.ngOnInit(),this.setNavType(this.type),this.setNavLayout(this.layout)}onMenuItemSelect(e,t,i){this.selecteditem=_.omit(i,["children","value"]),this.invokeEventCallback("select",{$event:e,$item:this.selecteditem})}static{this.\u0275fac=function(e){return new(e||M)(d.\u0275\u0275directiveInject(d.Injector),d.\u0275\u0275directiveInject(d.ChangeDetectorRef),d.\u0275\u0275directiveInject(f.Router),d.\u0275\u0275directiveInject(v.UserDefinedExecutionContext),d.\u0275\u0275directiveInject(v.App),d.\u0275\u0275injectAttribute("select.event"))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:M,selectors:[["","wmNav",""]],features:[d.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(M)]),d.\u0275\u0275InheritDefinitionFeature],attrs:b,ngContentSelectors:D,decls:6,vars:2,consts:[["menuRef",""],["anchorRef",""],[3,"class","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["wmMenu","","dropdown","","type","anchor","autoclose.bind","autoclose","iconclass.bind","item.icon","autoopen.bind","autoopen","caption.bind","item.label","dataset.bind","item.children","badgevalue.bind","item.badge","iconposition.bind","iconposition","showonhover.bind","showonhover","select.event","onMenuItemSelect($event, widget, $item)"],["wmAnchor","","caption.bind","item.label","iconclass.bind","item.icon","badgevalue.bind","item.badge","iconposition.bind","iconposition","click.event","onNavSelect($event, item, liRef)",3,"disableMenuContext","wmNavigationControl"],[3,"ngClass"],["liRef",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(d.\u0275\u0275projectionDef(R),d.\u0275\u0275template(0,y,1,0,"ng-template",null,0,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(2,w,1,3,"ng-template",null,1,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(4,O,4,8,"li",2),d.\u0275\u0275template(5,x,1,0,"ng-content",3)),2&e&&(d.\u0275\u0275advance(4),d.\u0275\u0275property("ngForOf",t.nodes),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!t.nodes.length))},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(M,[{type:t.Component,args:[{selector:"[wmNav]",providers:[a.provideAsWidgetRef(M)],template:'<ng-template #menuRef let-item="item" let-index="index">\n    <div wmMenu dropdown\n         type="anchor"\n         autoclose.bind="autoclose"\n         iconclass.bind="item.icon"\n         autoopen.bind="autoopen"\n         caption.bind="item.label"\n         dataset.bind="item.children"\n         badgevalue.bind="item.badge"\n         iconposition.bind="iconposition"\n         showonhover.bind="showonhover"\n         select.event="onMenuItemSelect($event, widget, $item)"></div>\n</ng-template>\n\n<ng-template #anchorRef let-item="item" let-index="index" let-liRef="liRef">\n    <a wmAnchor\n       [disableMenuContext]="disableMenuContext || !!item.action"\n       [wmNavigationControl]="item.link"\n       [attr.aria-current]="item._selected || (!isactive && item.link === \'#/\' + activePageName) ? \'page\' : \'\'"\n       caption.bind="item.label"\n       iconclass.bind="item.icon"\n       badgevalue.bind="item.badge"\n       iconposition.bind="iconposition"\n       click.event="onNavSelect($event, item, liRef)"></a>\n</ng-template>\n\n<li class="app-nav-item {{item.class}}" *ngFor="let item of nodes; let index = index;" #liRef [ngClass]="{active: item._selected || (!isactive && item.link === \'#/\' + activePageName)}">\n    <ng-container [ngTemplateOutlet]="anchorRef" [ngTemplateOutletContext]="{item: item, index:index, liRef: liRef}" *ngIf="!item.children.length"></ng-container>\n    <ng-container [ngTemplateOutlet]="menuRef" [ngTemplateOutletContext]="{item: item, index:index}"  *ngIf="item.children.length"></ng-container>\n</li>\n\n<ng-content *ngIf="!nodes.length" select="[wmNavItem]"></ng-content>\n'}]}],(function(){return[{type:d.Injector},{type:d.ChangeDetectorRef},{type:f.Router},{type:v.UserDefinedExecutionContext},{type:v.App},{type:void 0,decorators:[{type:t.Attribute,args:["select.event"]}]}]}),null);const N=["wmMenu",""],k=function(e){return[e]};function L(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"button",4),d.\u0275\u0275element(1,"span",5),d.\u0275\u0275elementEnd()),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275classMapInterpolate1("btn app-button dropdown-toggle ",e.menuclass,""),d.\u0275\u0275attribute("aria-label",e.hint||"Menu"),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(5,k,e.menuCaret))}}function F(e,t){if(1&e&&d.\u0275\u0275element(0,"i")(1,"span",6)(2,"span"),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275classMapInterpolate1("app-icon ",e.iconclass,""),d.\u0275\u0275advance(1),d.\u0275\u0275property("textContent",e.caption),d.\u0275\u0275advance(1),d.\u0275\u0275classMapInterpolate1("pull-right caret fa ",e.menuCaret,"")}}function B(e,t){if(1&e&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275elementStart(1,"a",7),d.\u0275\u0275element(2,"span",5),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementContainerEnd()),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275classMapInterpolate1("dropdown-toggle ",e.menuclass,""),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(4,k,e.menuCaret))}}function j(e,t){if(1&e&&d.\u0275\u0275element(0,"ul",8),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275classMapInterpolate1("icon-position-",e.iconposition,""),d.\u0275\u0275property("items",e.nodes)("ngClass",e.menulayout)}}const V={MOVE_UP:"UP-ARROW",MOVE_LEFT:"LEFT-ARROW",MOVE_RIGHT:"RIGHT-ARROW",MOVE_DOWN:"DOWN-ARROW",ON_ENTER:"ENTER",ON_MOUSE_ENTER:"MOUSE-ENTER",ON_MOUSE_LEAVE:"MOUSE-LEAVE",ON_TAB:"TAB",ON_SHIFT_TAB:"SHIFT-TAB",ON_ESCAPE:"ESC"},G={UP_LEFT:"up,left",UP_RIGHT:"up,right",DOWN_LEFT:"down,left",DOWN_RIGHT:"down,right",INLINE:"inline"},W="down,right",U="down,left",q="up,right",z="up,left",H="inline",Q="fa-caret-up",Y="fa-caret-down",K="pull-left",J="pull-right",Z="activepage",X="always",ee={widgetType:"wm-menu",hostClass:"dropdown app-menu"};class te extends a.DatasetAwareNavComponent{static{this.initializeProps=void a.register("wm-menu",new Map([["accessroles",{value:"Everyone",...a.PROP_STRING}],["animateitems",a.PROP_STRING],["autoclose",{value:"always",...a.PROP_STRING}],["autoopen",{value:"never",...a.PROP_STRING}],["caption",a.PROP_STRING],["class",a.PROP_STRING],["dataset",{value:"Menu Item 1, Menu Item 2, Menu Item 3",...a.PROP_ANY}],["hint",{value:"",...a.PROP_STRING}],["isactive",a.PROP_STRING],["iconclass",a.PROP_STRING],["iconposition",{value:"left",...a.PROP_STRING}],["itemaction",a.PROP_STRING],["itemchildren",a.PROP_STRING],["itemclass",a.PROP_STRING],["itemicon",a.PROP_STRING],["itemlabel",a.PROP_STRING],["itemlink",a.PROP_STRING],["itemtarget",a.PROP_STRING],["linktarget",{value:"_self",...a.PROP_STRING}],["menuclass",a.PROP_STRING],["menulayout",a.PROP_STRING],["menuposition",a.PROP_STRING],["name",a.PROP_STRING],["orderby",a.PROP_STRING],["shortcutkey",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}],["showonhover",{value:!1,...a.PROP_BOOLEAN}],["tabindex",{value:0,...a.PROP_NUMBER}],["type",{value:"menu",...a.PROP_STRING}],["userrole",a.PROP_STRING]]))}onShow(){this._menuposition=this.menuposition,this._selectFirstItem&&setTimeout((()=>{this.$element.find("> ul[wmmenudropdown] li.app-menu-item").first().find("> a").focus()})),l.$appDigest()}onHide(){this.$element.find("li").removeClass("open"),this._selectFirstItem=!1,this.menuposition=this._menuposition?this._menuposition:G.DOWN_RIGHT,this.setMenuPosition(),l.$appDigest()}onKeyDown(e,t){const i=_.clone(V);this.menuposition===G.UP_RIGHT?(i.MOVE_UP="DOWN-ARROW",i.MOVE_DOWN="UP-ARROW"):this.menuposition===G.UP_LEFT?(i.MOVE_UP="DOWN-ARROW",i.MOVE_DOWN="UP-ARROW",i.MOVE_LEFT="RIGHT-ARROW",i.MOVE_RIGHT="LEFT-ARROW"):this.menuposition===G.DOWN_LEFT&&(i.MOVE_LEFT="RIGHT-ARROW",i.MOVE_RIGHT="LEFT-ARROW"),_.includes([i.MOVE_DOWN,i.MOVE_RIGHT],t)?this.bsDropdown.isOpen?this.$element.find("> ul[wmmenudropdown] li.app-menu-item").first().find("> a").focus():(this._selectFirstItem=!0,this.bsDropdown.show()):t===i.ON_ENTER||t===i.ON_MOUSE_ENTER&&this.showonhover?this.bsDropdown.toggle(!0):(_.includes([i.MOVE_UP,i.MOVE_LEFT],t)||t==i.ON_MOUSE_LEAVE&&this.autoclose==a.AUTOCLOSE_TYPE.ALWAYS&&this.showonhover)&&this.bsDropdown.hide(),e.preventDefault()}constructor(e,t,i,n,s,o,r){super(e,ee),this.route=t,this.userDefinedExecutionContext=i,this.app=n,this.bsDropdown=s,this.parentNav=o,this.selectEventCB=r,this.menuCaret="fa-caret-down",this._selectFirstItem=!1,this.disableMenuContext=o?!!o.disableMenuContext:!!r;const c=this.nodes$.subscribe((()=>{if(!_.isEmpty(this.nodes)){if(a.hasLinkToCurrentPage(this.nodes,this.route.url)&&l.addClass(this.nativeElement.querySelector(".dropdown-toggle"),"active"),this.parentNav)return;let e=!1;const t=i=>{_.forEach(i,(i=>{if(!e)return i.isactive?(e=!0,this.onMenuItemSelect({$event:{},$item:i}),l.triggerItemAction(this,i),!1):void(_.isEmpty(i.children)||t(i.children))}))};t(this.nodes)}}));this.registerDestroyListener((()=>c.unsubscribe()))}resetNodes(){super.resetNodes(),(this.autoopen===Z&&a.hasLinkToCurrentPage(this.nodes,this.route.url)||this.autoopen===X)&&this.bsDropdown.show()}ngOnInit(){super.ngOnInit(),this.setMenuPosition();const e=this.app.subscribe("highlightActiveLink",(e=>{l.toggleClass(this.nativeElement.querySelector(".dropdown-toggle"),"active",a.hasLinkToCurrentPage(this.nodes,this.route.url))}));this.registerDestroyListener((()=>e()))}onPropertyChange(e,t,i){"tabindex"!==e&&("autoclose"===e?(this.bsDropdown.autoClose=t!==a.AUTOCLOSE_TYPE.DISABLED,this.autoclose=t):super.onPropertyChange(e,t,i))}setMenuPosition(){switch(this.menuposition){case W:l.removeClass(this.nativeElement,"dropup"),this.menualign=K,this.menuCaret=Y;break;case U:l.removeClass(this.nativeElement,"dropup"),this.menualign=J,this.menuCaret=Y;break;case z:l.addClass(this.nativeElement,"dropup"),this.menualign=J,this.menuCaret=Q;break;case q:l.addClass(this.nativeElement,"dropup"),this.menualign=K,this.menuCaret=Q;break;case H:this.menualign="dropinline-menu"}}onMenuItemSelect(e){const{$event:t}=e,i=e.$item.value;this.invokeEventCallback("select",{$event:t,$item:i})}ngAfterViewInit(){super.ngAfterViewInit(),a.styler(this.nativeElement.querySelector(".dropdown-toggle"),this)}static{this.\u0275fac=function(e){return new(e||te)(d.\u0275\u0275directiveInject(d.Injector),d.\u0275\u0275directiveInject(f.Router),d.\u0275\u0275directiveInject(v.UserDefinedExecutionContext),d.\u0275\u0275directiveInject(v.App),d.\u0275\u0275directiveInject(u.BsDropdownDirective,10),d.\u0275\u0275directiveInject(M,8),d.\u0275\u0275injectAttribute("select.event"))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:te,selectors:[["","wmMenu",""]],hostBindings:function(e,t){1&e&&d.\u0275\u0275listener("onShown",(function(){return t.onShow()}))("onHidden",(function(){return t.onHide()}))("keydown.arrowup",(function(e){return t.onKeyDown(e,"UP-ARROW")}))("mouseenter",(function(e){return t.onKeyDown(e,"MOUSE-ENTER")}))("mouseleave",(function(e){return t.onKeyDown(e,"MOUSE-LEAVE")}))("keydown.arrowdown",(function(e){return t.onKeyDown(e,"DOWN-ARROW")}))("keydown.arrowright",(function(e){return t.onKeyDown(e,"RIGHT-ARROW")}))("keydown.arrowleft",(function(e){return t.onKeyDown(e,"LEFT-ARROW")}))("keydown.enter",(function(e){return t.onKeyDown(e,"ENTER")}))},features:[d.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(te)]),d.\u0275\u0275InheritDefinitionFeature],attrs:N,decls:6,vars:2,consts:[["menuTemplate",""],["innerTemplate",""],[4,"ngIf","ngIfElse"],["wmMenuDropdown","","aria-labelledby","dropdownmenu","role","menubar",3,"items","ngClass","class",4,"dropdownMenu"],["wmButton","","dropdownToggle","","aria-haspopup","true","aria-expanded","false","hint.bind","hint","shortcutkey.bind","shortcutkey","tabindex.bind","tabindex","caption.bind","caption","iconclass.bind","iconclass","iconposition.bind","iconposition"],[1,"pull-right","caret","fa",3,"ngClass"],[1,"caption",3,"textContent"],["wmAnchor","","dropdownToggle","","href","javascript:void(0);","role","button","aria-haspopup","true","aria-expanded","false","hint.bind","hint","shortcutkey.bind","shortcutkey","tabindex.bind","tabindex","caption.bind","caption","iconclass.bind","iconclass","iconposition.bind","iconposition","badgevalue.bind","badgevalue"],["wmMenuDropdown","","aria-labelledby","dropdownmenu","role","menubar",3,"items","ngClass"]],template:function(e,t){if(1&e&&(d.\u0275\u0275template(0,L,2,7,"ng-template",null,0,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(2,F,3,7,"ng-template",null,1,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(4,B,3,6,"ng-container",2),d.\u0275\u0275template(5,j,1,5,"ul",3)),2&e){const e=d.\u0275\u0275reference(1);d.\u0275\u0275advance(4),d.\u0275\u0275property("ngIf","anchor"===t.type)("ngIfElse",e)}},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(te,[{type:t.Component,args:[{selector:"[wmMenu]",providers:[a.provideAsWidgetRef(te)],template:'<ng-template #menuTemplate>\n    <button wmButton\n            dropdownToggle\n            aria-haspopup="true"\n            aria-expanded="false"\n            [attr.aria-label]="hint || \'Menu\'"\n            class="btn app-button dropdown-toggle {{menuclass}}"\n            hint.bind="hint"\n            shortcutkey.bind="shortcutkey"\n            tabindex.bind="tabindex"\n            caption.bind="caption"\n            iconclass.bind="iconclass"\n            iconposition.bind="iconposition">\n        <span class="pull-right caret fa" [ngClass]="[menuCaret]"></span>\n    </button>\n</ng-template>\n\n<ng-template #innerTemplate>\n    <i class="app-icon {{iconclass}}"></i>\n    <span class="caption" [textContent]="caption"></span>\n    <span class="pull-right caret fa {{menuCaret}}"></span>\n</ng-template>\n\n<ng-container *ngIf="type === \'anchor\'; else menuTemplate">\n    <a wmAnchor\n       dropdownToggle\n\n       href="javascript:void(0);"\n       role="button"\n       aria-haspopup="true"\n       aria-expanded="false"\n\n       hint.bind="hint"\n       class="dropdown-toggle {{menuclass}}"\n       shortcutkey.bind="shortcutkey"\n       tabindex.bind="tabindex"\n       caption.bind="caption"\n       iconclass.bind="iconclass"\n       iconposition.bind="iconposition"\n       badgevalue.bind="badgevalue"\n    >\n        <span class="pull-right caret fa" [ngClass]="[menuCaret]"></span>\n    </a>\n</ng-container>\n\n<ul wmMenuDropdown [items]="nodes" [ngClass]="menulayout" class="icon-position-{{iconposition}}" *dropdownMenu aria-labelledby="dropdownmenu" role="menubar"></ul>\n'}]}],(function(){return[{type:d.Injector},{type:f.Router},{type:v.UserDefinedExecutionContext},{type:v.App},{type:u.BsDropdownDirective,decorators:[{type:t.Self},{type:t.Optional}]},{type:M,decorators:[{type:t.Optional}]},{type:void 0,decorators:[{type:t.Attribute,args:["select.event"]}]}]}),{onShow:[{type:t.HostListener,args:["onShown"]}],onHide:[{type:t.HostListener,args:["onHidden"]}],onKeyDown:[{type:t.HostListener,args:["keydown.arrowup",["$event",'"UP-ARROW"']]},{type:t.HostListener,args:["mouseenter",["$event",'"MOUSE-ENTER"']]},{type:t.HostListener,args:["mouseleave",["$event",'"MOUSE-LEAVE"']]},{type:t.HostListener,args:["keydown.arrowdown",["$event",'"DOWN-ARROW"']]},{type:t.HostListener,args:["keydown.arrowright",["$event",'"RIGHT-ARROW"']]},{type:t.HostListener,args:["keydown.arrowleft",["$event",'"LEFT-ARROW"']]},{type:t.HostListener,args:["keydown.enter",["$event",'"ENTER"']]}]});const ie=["wmMenuDropdownItem",""];function ne(e,t){if(1&e&&d.\u0275\u0275element(0,"span"),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275classMapInterpolate1("pull-right fa caret ",e.menualign,"")}}function ae(e,t){if(1&e&&d.\u0275\u0275element(0,"span",6),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275property("textContent",e.item.badge)}}const se=function(e){return{item:e}};function oe(e,t){if(1&e&&d.\u0275\u0275elementContainer(0,7),2&e){const e=d.\u0275\u0275nextContext(),t=d.\u0275\u0275reference(8);d.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",d.\u0275\u0275pureFunction1(2,se,e.item))}}function re(e,t){if(1&e&&d.\u0275\u0275element(0,"ul",8),2&e){const e=t.item;d.\u0275\u0275property("items",e.children)}}const le={"pull-right":"fa-caret-left","dropinline-menu":"fa-caret-down","pull-left":"fa-caret-right"},ce="horizontal";class de{constructor(e,t,i,n,a){this.app=e,this.menuRef=t,this.userDefinedExecutionContext=i,this.parentNav=n,this.onSelect=(e,t)=>{if(this.nativeElement!==$(e.target).closest(".app-menu-item").get(0))return;"outsideClick"===this.menuRef.autoclose&&e.stopPropagation(),e.preventDefault();const i={$event:e,$item:t};this.menuRef.onMenuItemSelect(i);const n=_.clone(t);n.target=n.target||this.menuRef.linktarget,l.triggerItemAction(this,n)},this.nativeElement=a.nativeElement,l.addClass(this.nativeElement,"app-menu-item"),this.menualign=le[this.menuRef.menualign]||le["pull-left"]}ngOnInit(){this.parentNav&&(a.hasLinkToCurrentPage([this.item],this.menuRef.route.url)&&l.addClass(this.nativeElement,"active"),this.highlightActiveLinkSubscription=this.app.subscribe("highlightActiveLink",(e=>{l.toggleClass(this.nativeElement,"active",a.hasLinkToCurrentPage([this.item],this.menuRef.route.url))})))}getInitialKeyMovements(){const e=_.clone(V);return this.menuRef.menulayout===ce?(e.MOVE_UP="LEFT-ARROW",e.MOVE_LEFT="UP-ARROW",e.MOVE_RIGHT="DOWN-ARROW",e.MOVE_DOWN="RIGHT-ARROW"):this.menuRef.menuposition===G.DOWN_LEFT||this.menuRef.menuposition===G.UP_LEFT?(e.MOVE_LEFT="RIGHT-ARROW",e.MOVE_RIGHT="LEFT-ARROW"):"inline"===this.menuRef.menuposition&&(e.MOVE_UP="LEFT-ARROW",e.MOVE_LEFT="UP-ARROW",e.MOVE_RIGHT="DOWN-ARROW",e.MOVE_DOWN="RIGHT-ARROW"),e}onKeyDown(e,t){const i=$(this.nativeElement),n=$(this.nativeElement).closest("ul.dropdown-menu"),a=this.menuRef.$element.find("> ul.dropdown-menu"),s=this.getInitialKeyMovements();if(_.includes(["LEFT-ARROW","RIGHT-ARROW","UP-ARROW","DOWN-ARROW"],t)&&e.preventDefault(),t===s.ON_TAB&&a.children().last()[0]===this.nativeElement||t===s.ON_SHIFT_TAB&&a.children().first()[0]===this.nativeElement||t===s.ON_ESCAPE)e.preventDefault(),this.menuRef.bsDropdown.hide();else if(t===s.ON_ENTER&&!this.item.link||t===s.MOVE_RIGHT)e.stopPropagation(),this.item.children.length?(i.toggleClass("open"),i.find("li").first().find("> a").focus()):i.find("> a").focus();else if(t===s.MOVE_LEFT||t===s.ON_TAB&&n.children().last()[0]===this.nativeElement||t===s.ON_SHIFT_TAB&&n.children().first()[0]===this.nativeElement){if(a[0]!==n[0]){const t=n.parent();t.toggleClass("open").find("li.open").removeClass("open"),t.find("> a").focus(),e.preventDefault(),e.stopPropagation()}}else t===s.MOVE_UP?a[0]===n[0]&&a.find("> li").first()[0]===this.nativeElement||(e.stopPropagation(),i.prev().find("> a").focus()):t===s.MOVE_DOWN?(e.stopPropagation(),a.find("> li").last()[0]===this.nativeElement&&(this.menuRef.menulayout!==ce&&this.menuRef.menuposition===G.UP_RIGHT||this.menuRef.menuposition===G.UP_LEFT)?this.menuRef.bsDropdown.hide():i.next().find("> a").focus()):t===s.ON_ENTER?this.onSelect(e,this.item):e.stopPropagation()}ngOnDestroy(){this.highlightActiveLinkSubscription&&this.highlightActiveLinkSubscription()}static{this.\u0275fac=function(e){return new(e||de)(d.\u0275\u0275directiveInject(v.App),d.\u0275\u0275directiveInject(te),d.\u0275\u0275directiveInject(v.UserDefinedExecutionContext),d.\u0275\u0275directiveInject(M,8),d.\u0275\u0275directiveInject(d.ElementRef))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:de,selectors:[["li","wmMenuDropdownItem",""]],hostBindings:function(e,t){1&e&&d.\u0275\u0275listener("keydown.tab",(function(e){return t.onKeyDown(e,"TAB")}))("keydown.shift.tab",(function(e){return t.onKeyDown(e,"SHIFT-TAB")}))("keydown.escape",(function(e){return t.onKeyDown(e,"ESC")}))("keydown.enter",(function(e){return t.onKeyDown(e,"ENTER")}))("keydown.arrowup",(function(e){return t.onKeyDown(e,"UP-ARROW")}))("keydown.arrowdown",(function(e){return t.onKeyDown(e,"DOWN-ARROW")}))("keydown.arrowright",(function(e){return t.onKeyDown(e,"RIGHT-ARROW")}))("keydown.arrowleft",(function(e){return t.onKeyDown(e,"LEFT-ARROW")}))("click",(function(e){return t.onSelect(e,t.item)}))},inputs:{item:"item"},attrs:ie,decls:9,vars:10,consts:[["href","javascript:void(0);",3,"title","wmNavigationControl","disableMenuContext"],[3,"class",4,"ngIf"],[1,"anchor-caption"],["class","badge pull-right",3,"textContent",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["nestedMenuDropdown",""],[1,"badge","pull-right",3,"textContent"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["wmMenuDropdown","",3,"items"]],template:function(e,t){1&e&&(d.\u0275\u0275elementStart(0,"a",0),d.\u0275\u0275template(1,ne,1,3,"span",1),d.\u0275\u0275element(2,"i"),d.\u0275\u0275elementStart(3,"span",2),d.\u0275\u0275text(4),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(5,ae,1,1,"span",3),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(6,oe,1,4,"ng-container",4),d.\u0275\u0275template(7,re,1,1,"ng-template",null,5,d.\u0275\u0275templateRefExtractor)),2&e&&(d.\u0275\u0275property("title",t.item.label)("wmNavigationControl",t.item.link)("disableMenuContext",t.menuRef.disableMenuContext||!!t.item.action),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.item.children.length),d.\u0275\u0275advance(1),d.\u0275\u0275classMapInterpolate1("app-icon ",t.item.icon,""),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(t.item.label),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.item.badge),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.item.children.length))},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(de,[{type:t.Component,args:[{selector:"li[wmMenuDropdownItem]",template:'<a href="javascript:void(0);" [title]="item.label" [wmNavigationControl]="item.link" [disableMenuContext]="menuRef.disableMenuContext || !!item.action">\n    <span *ngIf="item.children.length" class="pull-right fa caret {{menualign}}"></span>\n    <i class="app-icon {{item.icon}}"></i>\n    <span class="anchor-caption">{{item.label}}</span>\n    <span *ngIf="item.badge" class="badge pull-right" [textContent]="item.badge"></span>\n</a>\n<ng-container [ngTemplateOutlet]="nestedMenuDropdown" *ngIf="item.children.length" [ngTemplateOutletContext]="{item: item}"></ng-container>\n\n<ng-template #nestedMenuDropdown let-item="item">\n    <ul wmMenuDropdown [items]="item.children"></ul>\n</ng-template>\n'}]}],(function(){return[{type:v.App},{type:te},{type:v.UserDefinedExecutionContext},{type:M,decorators:[{type:t.Optional}]},{type:d.ElementRef}]}),{item:[{type:t.Input}],onKeyDown:[{type:t.HostListener,args:["keydown.tab",["$event",'"TAB"']]},{type:t.HostListener,args:["keydown.shift.tab",["$event",'"SHIFT-TAB"']]},{type:t.HostListener,args:["keydown.escape",["$event",'"ESC"']]},{type:t.HostListener,args:["keydown.enter",["$event",'"ENTER"']]},{type:t.HostListener,args:["keydown.arrowup",["$event",'"UP-ARROW"']]},{type:t.HostListener,args:["keydown.arrowdown",["$event",'"DOWN-ARROW"']]},{type:t.HostListener,args:["keydown.arrowright",["$event",'"RIGHT-ARROW"']]},{type:t.HostListener,args:["keydown.arrowleft",["$event",'"LEFT-ARROW"']]}],onSelect:[{type:t.HostListener,args:["click",["$event","item"]]}]});const pe=["wmMenuDropdown",""],ue=function(e,t){return{disabled:e,"dropdown-submenu":t}};function he(e,t){if(1&e&&d.\u0275\u0275element(0,"li",1),2&e){const e=t.$implicit;d.\u0275\u0275classMap(e.class),d.\u0275\u0275property("item",e)("ngClass",d.\u0275\u0275pureFunction2(5,ue,e.disabled,e.children.length>0))}}const me={scale:{name:"wmScaleInLeft","down,right":"wmScaleInLeft","down,left":"wmScaleInRight","up,right":"wmScaleInTopLeft","up,left":"wmScaleInTopRight"},fade:{name:"fadeIn","down,right":"fadeIn","down,left":"fadeIn","up,right":"fadeIn","up,left":"fadeIn"},slide:{name:"wmSlideInDown","down,right":"wmSlideInDown","down,left":"wmSlideInDown","up,right":"wmSlideInUp","up,left":"wmSlideInUp"}};class ge{constructor(e,t){this.menuRef=t,this.nativeElement=e.nativeElement,this.hasExecutedCallback=!1,l.addClass(this.nativeElement,"dropdown-menu")}ngAfterViewInit(){const e=this.menuRef.animateitems;let t="";e&&(t=`animated ${me[e][this.menuRef.menuposition]||me[e].name}`),l.addClass(this.nativeElement,`dropdown-menu ${this.menuRef.menualign} ${t}`,!0),this.getParentWidget()}getParentWidget(){const e=$(this.menuRef.nativeElement).closest("table, ul.list-group");e&&$(e).has(this.menuRef.nativeElement).length>0&&this.createObserver(this,this.callback)}callback(e,t){if(!this.hasExecutedCallback){const t=this,i=this.menuRef.menuposition?.split(",")||[];e.forEach((e=>{if(e.isIntersecting)i[0]="down",t.menuRef.menuposition=i.length>1?i.join():"down,right",t.nativeElement.parentElement?.classList.add("dropdown"),t.menuRef.setMenuPosition();else{i[0]="up",t.menuRef.menuposition=i.length>1?i.join():"up,right",t.nativeElement.parentElement?.classList.add("dropup"),t.menuRef.setMenuPosition();const e=t.nativeElement.parentElement?.parentElement;"BS-DROPDOWN-CONTAINER"===e.tagName.toUpperCase()&&t.nativeElement.parentElement?.parentElement?.classList.add("parent-position")}})),this.hasExecutedCallback=!0}}createObserver(e,t){new IntersectionObserver(t.bind(this),{root:null,threshold:1,once:!0}).observe(e.nativeElement)}static{this.\u0275fac=function(e){return new(e||ge)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(te))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:ge,selectors:[["ul","wmMenuDropdown",""]],inputs:{items:"items"},attrs:pe,decls:1,vars:1,consts:[["wmMenuDropdownItem","","role","menuitem",3,"item","ngClass","class",4,"ngFor","ngForOf"],["wmMenuDropdownItem","","role","menuitem",3,"item","ngClass"]],template:function(e,t){1&e&&d.\u0275\u0275template(0,he,1,8,"li",0),2&e&&d.\u0275\u0275property("ngForOf",t.items)},dependencies:[p.NgClass,p.NgForOf,de],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(ge,[{type:t.Component,args:[{selector:"ul[wmMenuDropdown]",template:'<li wmMenuDropdownItem *ngFor="let item of items"\n    [item]="item"\n    [ngClass]="{disabled: item.disabled, \'dropdown-submenu\': item.children.length > 0}"\n    class="{{item.class}}"\n    role="menuitem">\n</li>\n'}]}],(function(){return[{type:d.ElementRef},{type:te}]}),{items:[{type:t.Input}]});const fe={widgetType:"wm-nav-item",hostClass:"app-nav-item"};class ve extends a.StylableComponent{static{this.initializeProps=void a.register("wm-nav-item",new Map([["class",a.PROP_STRING],["name",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}]]))}makeActive(){const e=this.nativeElement.parentNode;$(e).find("> li.active").removeClass("active"),this.isAttached&&l.addClass(this.nativeElement,"active")}constructor(e){super(e,fe),a.styler(this.nativeElement,this,a.APPLY_STYLES_TYPE.CONTAINER)}ngAfterViewInit(){this.innerLink&&this.innerLink.onActive((()=>this.makeActive()))}ngOnDetach(){l.removeClass(this.nativeElement,"active",!0),super.ngOnDetach()}static{this.\u0275fac=function(e){return new(e||ve)(d.\u0275\u0275directiveInject(d.Injector))}}static{this.\u0275dir=d.\u0275\u0275defineDirective({type:ve,selectors:[["","wmNavItem",""]],contentQueries:function(e,t,i){if(1&e&&d.\u0275\u0275contentQuery(i,s.AnchorComponent,5),2&e){let e;d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.innerLink=e.first)}},hostBindings:function(e,t){1&e&&d.\u0275\u0275listener("click",(function(){return t.makeActive()}))("keydown.enter",(function(){return t.makeActive()}))},features:[d.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(ve)]),d.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(ve,[{type:t.Directive,args:[{selector:"[wmNavItem]",providers:[a.provideAsWidgetRef(ve)]}]}],(function(){return[{type:d.Injector}]}),{innerLink:[{type:t.ContentChild,args:[s.AnchorComponent]}],makeActive:[{type:t.HostListener,args:["click"]},{type:t.HostListener,args:["keydown.enter"]}]});const be=e=>{e.preventDefault()};class ye{set wmNavigationControl(e){this._link=e,e&&!this.disableMenuContext?(l.setAttr(this.nativeElement,"href",e),this.nativeElement.removeEventListener("contextmenu",be)):(l.setAttr(this.nativeElement,"href","javascript:void(0)"),this.nativeElement.addEventListener("contextmenu",be))}constructor(e){this.nativeElement=e.nativeElement}static{this.\u0275fac=function(e){return new(e||ye)(d.\u0275\u0275directiveInject(d.ElementRef))}}static{this.\u0275dir=d.\u0275\u0275defineDirective({type:ye,selectors:[["","wmNavigationControl",""]],inputs:{disableMenuContext:"disableMenuContext",wmNavigationControl:"wmNavigationControl"}})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(ye,[{type:t.Directive,args:[{selector:"[wmNavigationControl]"}]}],(function(){return[{type:d.ElementRef}]}),{disableMenuContext:[{type:t.Input}],wmNavigationControl:[{type:t.Input}]});const we=[te,ge,de,ye,M,ve];class Pe{static{this.\u0275fac=function(e){return new(e||Pe)}}static{this.\u0275mod=d.\u0275\u0275defineNgModule({type:Pe})}static{this.\u0275inj=d.\u0275\u0275defineInjector({imports:[s.BasicModule,n.BsDropdownModule,i.CommonModule,o.InputModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Pe,[{type:t.NgModule,args:[{imports:[s.BasicModule,n.BsDropdownModule,i.CommonModule,o.InputModule,a.WmComponentsModule],declarations:[...we],exports:[...we]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&d.\u0275\u0275setNgModuleScope(Pe,{declarations:[te,ge,de,ye,M,ve],imports:[s.BasicModule,n.BsDropdownModule,i.CommonModule,o.InputModule,a.WmComponentsModule],exports:[te,ge,de,ye,M,ve]}),d.\u0275\u0275setComponentScope(te,[m.AnchorComponent,u.BsDropdownMenuDirective,u.BsDropdownToggleDirective,p.NgClass,p.NgIf,g.ButtonComponent,h.TextContentDirective,ge],[]),d.\u0275\u0275setComponentScope(de,[p.NgIf,p.NgTemplateOutlet,h.TextContentDirective,ge,ye],[]),d.\u0275\u0275setComponentScope(M,[m.AnchorComponent,u.BsDropdownDirective,p.NgClass,p.NgForOf,p.NgIf,p.NgTemplateOutlet,te,ye],[]);const Ce=["itemlabel","itemicon","itemlink","itemaction","itemchildren","userrole"];class Ae extends a.BaseContainerComponent{constructor(e,t){super(e,t),this.pageScope=this.viewParent,this.binditemlabel=this.nativeElement.getAttribute("itemlabel.bind"),this.binditemicon=this.nativeElement.getAttribute("itemicon.bind"),this.binditemaction=this.nativeElement.getAttribute("itemaction.bind"),this.binditemlink=this.nativeElement.getAttribute("itemlink.bind"),this.binduserrole=this.nativeElement.getAttribute("userrole.bind"),this.binditemchildren=this.nativeElement.getAttribute("itemchildren.bind")}onPropertyChange(e,t,i){_.includes(Ce,e)&&this.menuRef?this.menuRef.itemlabel=t:super.onPropertyChange(e,t,i)}ngAfterViewInit(){super.ngAfterViewInit();const e=this.menuRefQL.changes.subscribe((t=>{t.first&&(this.menuRef=t.first,Ce.forEach((e=>{const t=`bind${e}`;this[t]&&(this.menuRef[t]=this[t]),this.menuRef[e]=this[e]})),e.unsubscribe())}))}static{this.\u0275fac=function(e){d.\u0275\u0275invalidFactory()}}static{this.\u0275dir=d.\u0275\u0275defineDirective({type:Ae,viewQuery:function(e,t){if(1&e&&d.\u0275\u0275viewQuery(te,5),2&e){let e;d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.menuRefQL=e)}},features:[d.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(Ae,[{type:t.Directive}],(function(){return[{type:void 0},{type:void 0}]}),{menuRefQL:[{type:t.ViewChildren,args:[te]}]}),e.KEYBOARD_MOVEMENTS=V,e.MENU_POSITION=G,e.MenuAdapterComponent=Ae,e.MenuComponent=te,e.MenuDropdownComponent=ge,e.MenuDropdownItemComponent=de,e.MenuModule=Pe,e.NavComponent=M,e.NavItemDirective=ve,e.NavigationControlDirective=ye,e.disableContextMenu=be})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.navigation=e.wm.components.navigation||{},e.wm.components.navigation.navbar={}),e.ng.core,e.ng.common,e.wm.components.base)}(this,(function(e,t,i,n){"use strict";function a(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var s=a(t),o=a(i),r=a(n);const l=["navContent"],c=["wmNavbar",""];function d(e,t){if(1&e&&(s.\u0275\u0275element(0,"img",11),s.\u0275\u0275pipe(1,"image")),2&e){const e=s.\u0275\u0275nextContext(2);s.\u0275\u0275property("alt",e.Brand)("src",s.\u0275\u0275pipeBind1(1,2,e.imgsrc),s.\u0275\u0275sanitizeUrl)}}function p(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"a",8),s.\u0275\u0275pipe(1,"trustAs"),s.\u0275\u0275template(2,d,2,4,"img",9),s.\u0275\u0275element(3,"span",10),s.\u0275\u0275elementEnd()),2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275property("href",s.\u0275\u0275pipeBind2(1,3,e.homelink,"resource")||"#/",s.\u0275\u0275sanitizeUrl),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",e.imgsrc),s.\u0275\u0275advance(1),s.\u0275\u0275property("textContent",e.title)}}const u=["*"],h={widgetType:"wm-navbar",hostClass:"navbar navbar-default app-navbar"};class m extends n.StylableComponent{static{this.initializeProps=void n.register("wm-navbar",new Map([["class",{value:"",...n.PROP_STRING}],["homelink",n.PROP_STRING],["imgsrc",n.PROP_STRING],["menuiconclass",{value:"wi wi-more-vert",...n.PROP_STRING}],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["title",n.PROP_STRING]]))}constructor(e){super(e,h),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}toggleCollapse(){const e=$(this.navContent.nativeElement);e.animate({height:"toggle"}),e.hasClass("in")?setTimeout((()=>this.toggleNavCollapse()),500):this.toggleNavCollapse()}toggleNavCollapse(){this.navContent.nativeElement.classList.toggle("in")}static{this.\u0275fac=function(e){return new(e||m)(s.\u0275\u0275directiveInject(s.Injector))}}static{this.\u0275cmp=s.\u0275\u0275defineComponent({type:m,selectors:[["","wmNavbar",""]],viewQuery:function(e,t){if(1&e&&s.\u0275\u0275viewQuery(l,7),2&e){let e;s.\u0275\u0275queryRefresh(e=s.\u0275\u0275loadQuery())&&(t.navContent=e.first)}},features:[s.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(m)]),s.\u0275\u0275InheritDefinitionFeature],attrs:c,ngContentSelectors:u,decls:10,vars:2,consts:[[1,"container-fluid"],[1,"navbar-header"],["type","button","data-toggle","collapse","aria-expanded","false",1,"btn-transparent","navbar-toggle","collapsed",3,"click"],[1,"sr-only"],[3,"ngClass"],["class","navbar-brand",3,"href",4,"ngIf"],[1,"collapse","navbar-collapse"],["navContent",""],[1,"navbar-brand",3,"href"],["data-identifier","img","class","brand-image","height","20",3,"alt","src",4,"ngIf"],[1,"title",3,"textContent"],["data-identifier","img","height","20",1,"brand-image",3,"alt","src"]],template:function(e,t){1&e&&(s.\u0275\u0275projectionDef(),s.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"button",2),s.\u0275\u0275listener("click",(function(){return t.toggleCollapse()})),s.\u0275\u0275elementStart(3,"span",3),s.\u0275\u0275text(4,"Toggle navigation"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(5,"i",4),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(6,p,4,6,"a",5),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"div",6,7),s.\u0275\u0275projection(9),s.\u0275\u0275elementEnd()()),2&e&&(s.\u0275\u0275advance(5),s.\u0275\u0275property("ngClass",t.menuiconclass),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",t.title||t.imgsrc))},dependencies:[o.NgClass,o.NgIf,r.TextContentDirective,r.TrustAsPipe,r.ImagePipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&s.\u0275setClassMetadata(m,[{type:t.Component,args:[{selector:"[wmNavbar]",providers:[n.provideAsWidgetRef(m)],template:'<div class="container-fluid">\n    <div class="navbar-header">\n        <button type="button" class="btn-transparent navbar-toggle collapsed" data-toggle="collapse" (click)="toggleCollapse()" aria-expanded="false">\n            <span class="sr-only">Toggle navigation</span>\n            <i [ngClass]="menuiconclass"></i>\n        </button>\n        <a class="navbar-brand" [href]="(homelink | trustAs: \'resource\') || \'#/\'" *ngIf="title || imgsrc">\n            <img data-identifier="img" class="brand-image" [alt]="Brand" height="20" *ngIf="imgsrc" [src]="imgsrc | image"/>\n            <span class="title" [textContent]="title"></span>\n        </a>\n    </div>\n    <div class="collapse navbar-collapse" #navContent>\n        <ng-content></ng-content>\n    </div>\n</div>'}]}],(function(){return[{type:s.Injector}]}),{navContent:[{type:t.ViewChild,args:["navContent",{static:!0}]}]});const g=[m];class f{static{this.\u0275fac=function(e){return new(e||f)}}static{this.\u0275mod=s.\u0275\u0275defineNgModule({type:f})}static{this.\u0275inj=s.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&s.\u0275setClassMetadata(f,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...g],exports:[...g]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&s.\u0275\u0275setNgModuleScope(f,{declarations:[m],imports:[i.CommonModule,n.WmComponentsModule],exports:[m]}),e.NavbarComponent=m,e.NavbarModule=f})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/navigation/menu"),require("@angular/router"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/navigation/menu","@angular/router","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.navigation=e.wm.components.navigation||{},e.wm.components.navigation.breadcrumb={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.navigation.menu,e.ng.router,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(i),d=r(n),p=r(a),u=r(s);const h=["wmBreadcrumb",""];function m(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"a",4),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext().$implicit,n=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(n.onItemClick(t,i))})),l.\u0275\u0275elementEnd()}if(2&e){const e=l.\u0275\u0275nextContext().$implicit,t=l.\u0275\u0275nextContext();l.\u0275\u0275property("title",e.label)("wmNavigationControl",e.link)("disableMenuContext",t.disableMenuContext||!!e.action)("textContent",e.label)}}function g(e,t){if(1&e&&l.\u0275\u0275element(0,"label",5),2&e){const e=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275property("textContent",e.label)}}const f=function(e){return{active:e}};function v(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"li",1),l.\u0275\u0275element(1,"i"),l.\u0275\u0275template(2,m,1,4,"a",2),l.\u0275\u0275template(3,g,1,1,"label",3),l.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,i=t.last;l.\u0275\u0275classMap(e.class),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(9,f,i)),l.\u0275\u0275advance(1),l.\u0275\u0275classMap(e.icon),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",!i),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",i)}}const b={widgetType:"wm-breadcrumb",hostClass:"breadcrumb app-breadcrumb"};class y extends n.DatasetAwareNavComponent{static{this.initializeProps=void n.register("wm-breadcrumb",new Map([["class",n.PROP_STRING],["dataset",n.PROP_ANY],["itemlabel",n.PROP_STRING],["itemid",n.PROP_STRING],["itemlink",n.PROP_STRING],["itemicon",n.PROP_STRING],["itemchildren",n.PROP_STRING],["itemclass",n.PROP_STRING],["itemtarget",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e,t,i,a){super(e,b),this.route=t,this.location=i,n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER),this.disableMenuContext=!!a}getPath(e,t,i=[]){return t.forEach((t=>e.isPathFound?i:t.id===e.key?(e.isPathFound=!0,i.push(t),i):void(t.children.length&&(i.push(t),this.getPath(e,t.children,i),e.isPathFound||i.pop())))),i}getCurrentRoute(){return this.location.path().substr(1).split("?")[0]}resetNodes(){super.resetNodes(),(this.itemid||this.binditemid)&&(this.nodes=this.getPath({key:this.getCurrentRoute(),isPathFound:!1},this.nodes))}onItemClick(e,t){e.preventDefault();const i={$item:t.value,$event:e},n=!(!1===this.invokeEventCallback("beforenavigate",i)),a=t.target;let s=t.link;if(s&&n)if(!s.startsWith("#/")||a&&"_self"!==a)o.openLink(s,a);else{const e=o.getUrlParams(s);s=o.getRouteNameFromLink(s),this.route.navigate([s],{queryParams:e})}}static{this.\u0275fac=function(e){return new(e||y)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275directiveInject(u.Router),l.\u0275\u0275directiveInject(c.Location),l.\u0275\u0275injectAttribute("beforenavigate.event"))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:y,selectors:[["","wmBreadcrumb",""]],features:[l.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(y)]),l.\u0275\u0275InheritDefinitionFeature],attrs:h,decls:1,vars:1,consts:[[3,"ngClass","class",4,"ngFor","ngForOf"],[3,"ngClass"],["href","javascript:void(0)",3,"title","wmNavigationControl","disableMenuContext","textContent","click",4,"ngIf"],[3,"textContent",4,"ngIf"],["href","javascript:void(0)",3,"title","wmNavigationControl","disableMenuContext","textContent","click"],[3,"textContent"]],template:function(e,t){1&e&&l.\u0275\u0275template(0,v,4,11,"li",0),2&e&&l.\u0275\u0275property("ngForOf",t.nodes)},dependencies:[c.NgClass,c.NgForOf,c.NgIf,p.NavigationControlDirective,d.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(y,[{type:t.Component,args:[{selector:"[wmBreadcrumb]",providers:[n.provideAsWidgetRef(y)],template:'<li *ngFor="let item of nodes; let last = last; let index = index" [ngClass]="{active: last}" class="{{item.class}}">\n    <i class="{{item.icon}}"></i>\n    <a [title]="item.label" href="javascript:void(0)" [wmNavigationControl]="item.link" [disableMenuContext]="disableMenuContext || !!item.action" (click)="onItemClick($event, item)" *ngIf="!last" [textContent]="item.label"></a>\n    <label *ngIf="last" [textContent]="item.label"></label>\n</li>\n'}]}],(function(){return[{type:l.Injector},{type:u.Router},{type:c.Location},{type:void 0,decorators:[{type:t.Attribute,args:["beforenavigate.event"]}]}]}),null);const w=[y];class P{static{this.\u0275fac=function(e){return new(e||P)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:P})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,a.MenuModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(P,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.MenuModule,n.WmComponentsModule],declarations:[...w],exports:[...w]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(P,{declarations:[y],imports:[i.CommonModule,a.MenuModule,n.WmComponentsModule],exports:[y]}),e.BreadcrumbComponent=y,e.BreadcrumbModule=P})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("ngx-bootstrap/popover"),require("@wm/components/base"),require("@wm/components/basic"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","ngx-bootstrap/popover","@wm/components/base","@wm/components/basic","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.navigation=e.wm.components.navigation||{},e.wm.components.navigation.popover={}),e.ng.core,e.ng.common,e.popover,e.wm.components.base,e.wm.components.basic,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(i),d=r(n),p=r(s),u=r(o);const h=["partial"],m=["anchor"],g=function(e){return{"disable-popover":e}},f={widgetType:"wm-popover",hostClass:"app-popover-wrapper"},v={click:"click",hover:"mouseenter:click",default:"click mouseenter"};let b;class y extends a.StylableComponent{static{this.initializeProps=void a.register("wm-popover",new Map([["autoclose",{value:"outsideClick",...a.PROP_STRING}],["badgevalue",a.PROP_STRING],["caption",{value:"Link",...a.PROP_STRING}],["class",a.PROP_STRING],["conditionalclass",a.PROP_ANY],["content",a.PROP_STRING],["contentanimation",a.PROP_STRING],["contentsource",{value:"partial",...a.PROP_STRING}],["encodeurl",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["hyperlink",{value:"javascript:void(0)",PROP_STRING:a.PROP_STRING}],["iconclass",a.PROP_STRING],["iconheight",a.PROP_STRING],["iconmargin",a.PROP_STRING],["iconposition",a.PROP_STRING],["iconurl",a.PROP_STRING],["iconwidth",a.PROP_STRING],["interaction",{value:"click",...a.PROP_STRING}],["name",a.PROP_STRING],["popoverarrow",{value:!0,...a.PROP_BOOLEAN}],["popoverheight",a.PROP_STRING],["popoverplacement",{value:"bottom",...a.PROP_STRING}],["popoverwidth",a.PROP_STRING],["shortcutkey",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}],["tabindex",{value:0,...a.PROP_NUMBER}],["title",a.PROP_STRING],["adaptiveposition",{value:!0,...a.PROP_BOOLEAN}]]))}constructor(e,t){super(e,f),this.app=t,this.isOpen=!1,this.canPopoverOpen=!0,this.popoverContainerCls=`app-popover-${this.widgetId}`}open(){this.showPopover()}close(){this.isOpen=!1}onHidden(){this.invokeEventCallback("hide",{$event:{type:"hide"}}),this.isOpen=!1}setFocusToPopoverLink(){setTimeout((()=>this.anchorRef.nativeElement.focus()),10)}adjustPopoverArrowPosition(e,t){this.bsPopoverDirective._popover._ngZone.onStable.subscribe((()=>{e.find(".popover-arrow").css("left",t+"px")}))}calculatePopoverPostion(e){const t=$(e);let i=t.offset().left;const n=t[0].offsetWidth,a=$(window).width(),s=this.anchorRef.nativeElement.getBoundingClientRect();if(i<0){o.adjustContainerPosition(t,this.nativeElement,this.bsPopoverDirective._popover);const e=4,i=s.left+s.width/2-e;this.adjustPopoverArrowPosition(t,i)}i+n>a&&(o.adjustContainerRightEdges(t,this.nativeElement,this.bsPopoverDirective._popover),setTimeout((()=>{i=t.offset().left;const e=i-(i+n-a);let o;o=i<=100?s.left+s.width/2-i:s.left+s.width/2-e,a>500&&(o+=30),this.adjustPopoverArrowPosition(t,o)})))}onShown(){const e=o.findRootContainer(this.$element);e&&$("body > popover-container").wrap("<"+e+"/>"),b&&b.isOpen&&b.autoclose!==a.AUTOCLOSE_TYPE.DISABLED&&(b.isOpen=!1),b=this,b.isOpen=!0;const t=document.querySelector(`.${this.popoverContainerCls}`);o.setCSSFromObj(t,{height:this.popoverheight,minWidth:this.popoverwidth,width:this.popoverwidth}),this.popoverarrow||o.addClass(t.querySelector(".arrow"),"hidden"),"hover"!==this.interaction&&"default"!==this.interaction||(t.onmouseenter=()=>clearTimeout(this.closePopoverTimeout),t.onmouseleave=()=>this.hidePopover(),this.anchorRef.nativeElement.onmouseenter=()=>clearTimeout(this.closePopoverTimeout),this.anchorRef.nativeElement.onmouseleave=()=>this.hidePopover()),setTimeout((()=>{this.anchorRef.nativeElement.removeAttribute("aria-describedby")}));const i=this.eventManager.addEventListener(t,"keydown.esc",(()=>{this.isOpen=!1,this.setFocusToPopoverLink(),i()})),n=t.querySelector(".popover-start"),s=t.querySelector(".popover-end");n.onkeydown=e=>{e.shiftKey&&"Tab"===e.key&&(this.bsPopoverDirective.hide(),e.preventDefault(),this.setFocusToPopoverLink(),this.isOpen=!1)},s.onkeydown=e=>{e.shiftKey||"Tab"!==e.key||(this.bsPopoverDirective.hide(),e.preventDefault(),this.setFocusToPopoverLink(),this.isOpen=!1)},this.autoclose===a.AUTOCLOSE_TYPE.ALWAYS&&(t.onclick=()=>this.close()),setTimeout((()=>n.focus()),50),setTimeout((()=>{this.adaptiveposition||this.calculatePopoverPostion(t),this.triggerPopoverEvents()}))}triggerPopoverEvents(){if("partial"===this.contentsource){const e=this.app.subscribe("partialLoaded",(t=>{const i=this.partialRef.nativeElement;let n;i&&(n=i.widget,this.Widgets=n.Widgets,this.Variables=n.Variables,this.Actions=n.Actions,this.invokeEventCallback("load"),this.invokeEventCallback("show",{$event:{type:"show"}})),e()}))}else this.Widgets=this.viewParent.Widgets,this.Variables=this.viewParent.Variables,this.Actions=this.viewParent.Actions,this.invokeEventCallback("show",{$event:{type:"show"}})}hidePopover(){this.closePopoverTimeout=setTimeout((()=>this.isOpen=!1),500)}showPopover(){this.bsPopoverDirective.show()}onPopoverAnchorKeydown(e){this.canPopoverOpen&&"Enter"===e.key&&(e.stopPropagation(),e.preventDefault(),this.showPopover())}onPropertyChange(e,t,i){"class"!==e&&"tabindex"!==e&&("contentsource"===e&&("partial"!==this.contentsource||this.content||(this.canPopoverOpen=!1)),"content"===e&&t&&(this.canPopoverOpen=!0),"autoclose"===e&&(this.outsideclick=t===a.AUTOCLOSE_TYPE.OUTSIDECLICK||t===a.AUTOCLOSE_TYPE.ALWAYS),super.onPropertyChange(e,t,i))}ngOnInit(){super.ngOnInit(),this.event=v[this.interaction]}ngAfterViewInit(){super.ngAfterViewInit(),a.styler(this.anchorRef.nativeElement,this),this.containerTarget=a.getContainerTargetClass(this.nativeElement)}ngOnDetach(){this.bsPopoverDirective.hide()}static{this.\u0275fac=function(e){return new(e||y)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275directiveInject(u.App))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:y,selectors:[["wm-popover"]],contentQueries:function(e,i,n){if(1&e&&(l.\u0275\u0275contentQuery(n,t.TemplateRef,5),l.\u0275\u0275contentQuery(n,h,5)),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.popoverTemplate=e.first),l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.partialRef=e.first)}},viewQuery:function(e,t){if(1&e&&(l.\u0275\u0275viewQuery(n.PopoverDirective,5),l.\u0275\u0275viewQuery(m,7)),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.bsPopoverDirective=e.first),l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.anchorRef=e.first)}},features:[l.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(y)]),l.\u0275\u0275InheritDefinitionFeature],decls:2,vars:20,consts:[["boundariesElement","window","role","button","name.bind","name","wmAnchor","","animation.bind","animation","badgevalue.bind","badgevalue","caption.bind","caption","encodeurl.bind","encodeurl","hint.bind","hint","hyperlink.bind","hyperlink","iconurl.bind","iconurl","iconwidth.bind","iconwidth","iconheight.bind","iconheight","iconmargin.bind","iconmargin","iconclass.bind","iconclass","iconposition.bind","iconposition","shortcutkey.bind","shortcutkey","tabindex.bind","tabindex",3,"popover","popoverContext","popoverTitle","placement","outsideClick","triggers","containerClass","container","isOpen","tabindex","name","ngClass","adaptivePosition","onShown","onHidden","keydown"],["anchor",""]],template:function(e,t){1&e&&(l.\u0275\u0275elementStart(0,"a",0,1),l.\u0275\u0275listener("onShown",(function(){return t.onShown()}))("onHidden",(function(){return t.onHidden()}))("keydown",(function(e){return t.onPopoverAnchorKeydown(e)})),l.\u0275\u0275elementEnd()),2&e&&(l.\u0275\u0275classMap(t.class),l.\u0275\u0275propertyInterpolate2("containerClass","app-popover animated ",t.contentanimation," ",t.popoverContainerCls,""),l.\u0275\u0275property("popover",t.popoverTemplate)("popoverContext",t.context)("popoverTitle",t.title)("placement",t.popoverplacement)("outsideClick",t.outsideclick)("triggers",t.event)("container",t.containerTarget||".wm-app")("isOpen",t.isOpen)("tabindex",t.tabindex)("name",t.name)("ngClass",l.\u0275\u0275pureFunction1(18,g,!t.canPopoverOpen))("adaptivePosition",t.adaptiveposition),l.\u0275\u0275attribute("aria-label",t.hint||"Popover menu")("aria-expanded",t.isOpen))},dependencies:[c.NgClass,p.AnchorComponent,d.PopoverDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(y,[{type:t.Component,args:[{selector:"wm-popover",providers:[a.provideAsWidgetRef(y)],template:'<a [popover]="popoverTemplate"\n    [popoverContext]="context"\n    [popoverTitle]="title"\n    [placement]="popoverplacement"\n    [outsideClick]="outsideclick"\n    [triggers]="event"\n    (onShown)="onShown()"\n    (onHidden)="onHidden()"\n    containerClass="app-popover animated {{contentanimation}} {{popoverContainerCls}}"\n    [container]="containerTarget || \'.wm-app\'"\n    [isOpen]="isOpen"\n    [tabindex]="tabindex"\n    [name]="name"\n    [class]="class"\n    [ngClass]="{\'disable-popover\': !canPopoverOpen}"\n    [adaptivePosition]="adaptiveposition"\n   boundariesElement="window"\n    [attr.aria-label]="hint || \'Popover menu\'"\n    [attr.aria-expanded]="isOpen"\n    role="button"\n    #anchor\n    name.bind="name"\n    wmAnchor\n    animation.bind="animation"\n    badgevalue.bind="badgevalue"\n    caption.bind="caption"\n    encodeurl.bind="encodeurl"\n    hint.bind="hint"\n    hyperlink.bind="hyperlink"\n    iconurl.bind="iconurl"\n    iconwidth.bind="iconwidth"\n    iconheight.bind="iconheight"\n    iconmargin.bind="iconmargin"\n    iconclass.bind="iconclass"\n    iconposition.bind="iconposition"\n    shortcutkey.bind="shortcutkey"\n    tabindex.bind="tabindex"\n    (keydown)="onPopoverAnchorKeydown($event)">\n</a>\n'}]}],(function(){return[{type:l.Injector},{type:u.App}]}),{bsPopoverDirective:[{type:t.ViewChild,args:[n.PopoverDirective]}],anchorRef:[{type:t.ViewChild,args:["anchor",{static:!0}]}],popoverTemplate:[{type:t.ContentChild,args:[t.TemplateRef]}],partialRef:[{type:t.ContentChild,args:["partial"]}]});const w=[y];class P{static{this.\u0275fac=function(e){return new(e||P)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:P})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,s.BasicModule,n.PopoverModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(P,[{type:t.NgModule,args:[{imports:[i.CommonModule,s.BasicModule,n.PopoverModule,a.WmComponentsModule],declarations:[...w],exports:[...w]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(P,{declarations:[y],imports:[i.CommonModule,s.BasicModule,n.PopoverModule,a.WmComponentsModule],exports:[y]}),e.PopoverComponent=y,e.PopoverModule=P})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("ngx-bootstrap/modal"),require("@wm/core"),require("@wm/components/base"),require("@angular/router"),require("@wavemaker/focus-trap/dist/focus-trap"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","ngx-bootstrap/modal","@wm/core","@wm/components/base","@angular/router","@wavemaker/focus-trap/dist/focus-trap","@angular/common"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs={}),e.ng.core,e.modal,e.wm.core,e.wm.components.base,e.ng.router,e.focusTrap,e.ng.common)}(this,(function(e,t,i,n,a,s,o,r){"use strict";function l(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var c=l(t),d=l(i),p=l(a),u=l(r);class h{constructor(e,t,i,a){this.dialogRef=t,this.renderer=a,n.addClass(e.nativeElement,"app-dialog-body modal-body");const s=i.onShown.subscribe((()=>{const t=$(e.nativeElement).closest(".app-dialog")[0];let i=$("body.wm-app")[0];if(!i){const e=$("body > .modal-backdrop")[0],t=$("body > modal-container")[0];i=$(".wm-app")[0],i&&t&&(e&&this.renderer.appendChild(i,e),this.renderer.appendChild(i,t))}const a=this.dialogRef.width,o=this.dialogRef.height;o&&setTimeout((t=>{n.setCSS($(e.nativeElement)[0],"height",o)})),t&&(a&&n.setCSS(t,"width",a),n.setAttr(t,"tabindex",this.dialogRef.tabindex),n.setAttr(t,"name",this.dialogRef.name)),s.unsubscribe()}))}static{this.\u0275fac=function(e){return new(e||h)(c.\u0275\u0275directiveInject(c.ElementRef),c.\u0275\u0275directiveInject(a.DialogRef),c.\u0275\u0275directiveInject(d.BsModalService),c.\u0275\u0275directiveInject(c.Renderer2))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:h,selectors:[["div","wmDialogBody",""]],hostVars:2,hostBindings:function(e,t){2&e&&c.\u0275\u0275styleProp("height",t.height)}})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(h,[{type:t.Directive,args:[{selector:"div[wmDialogBody]"}]}],(function(){return[{type:c.ElementRef},{type:void 0,decorators:[{type:t.Inject,args:[a.DialogRef]}]},{type:d.BsModalService},{type:c.Renderer2}]}),{height:[{type:t.HostBinding,args:["style.height"]}]});const m={widgetType:"wm-dialogfooter",hostClass:"app-dialog-footer modal-footer"};class g extends a.BaseComponent{static{this.initializeProps=void a.register("wm-dialogfooter",new Map([["class",a.PROP_STRING],["name",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}]]))}constructor(e){super(e,m)}static{this.\u0275fac=function(e){return new(e||g)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:g,selectors:[["div","wmDialogFooter",""]],features:[c.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(g)]),c.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(g,[{type:t.Directive,args:[{selector:"div[wmDialogFooter]",providers:[a.provideAsWidgetRef(g)]}]}],(function(){return[{type:c.Injector}]}),null);const f={activeElement:null};class v extends a.BaseComponent{constructor(e,t,a){super(e,t),this.modalOptions=a,this.titleId="wmdialog-"+n.generateGUId(),this.dialogService=e.get(n.AbstractDialogService),this.bsModal=e.get(i.BsModalService);const r=e.get(s.Router),l=[this.bsModal.onShown.subscribe((({id:e})=>{const t=this.dialogService.getLastOpenedDialog();t!==this||this.dialogId||((e=>{e&&setTimeout((()=>{const t=n.findRootContainer(e.$element);t&&$("body > modal-container > div").wrap("<"+t+"/>"),e.invokeEventCallback("opened",{$event:{type:"opened"}});const i=$("[aria-labelledby= "+e.titleId+"]")[0],a=[i.querySelectorAll('a, button, input, textarea, select, details, iframe, embed, object, summary dialog, audio[controls], video[controls], [contenteditable], [tabindex]:not([tabindex="-1"])')].filter((e=>!e[0].hasAttribute("disabled")&&!e[0].hasAttribute("hidden")))[0];$(a[0]).focus(),f[e.titleId]=o.createFocusTrap(i,{onActivate:()=>i.classList.add("is-active"),onDeactivate:()=>i.classList.remove("is-active"),allowOutsideClick:!0,setReturnFocus:f.activeElement}),f[e.titleId].activate()}))})(t),this.dialogId=e)})),this.bsModal.onShow.subscribe((()=>{f.activeElement=document.activeElement})),this.bsModal.onHidden.subscribe((e=>{let t=this.dialogService.getDialogRefFromClosedDialogs();this.dialogId&&e?.id===this.dialogId?t=this:"esc"!==e&&"backdrop-click"!==e||(t=this.dialogService.getLastOpenedDialog()),t===this&&(this.dialogId=null,this.dialogService.removeFromOpenedDialogs(t),this.dialogService.removeFromClosedDialogs(t),(e=>{e&&(e.invokeEventCallback("close"),e.dialogRef=void 0)})(t),t.closeCallBackFn&&t.closeCallBackFn())})),this.bsModal.onHide.subscribe((()=>{const e=this.dialogService.getDialogRefFromClosedDialogs();e&&void 0!==f[e.titleId]&&f[e.titleId].deactivate()})),r.events.subscribe((e=>{e instanceof s.NavigationEnd&&this.close()}))];this.registerDestroyListener((()=>{this.dialogService.removeFromOpenedDialogs(this),this.dialogService.removeFromClosedDialogs(this),l.forEach((e=>e.unsubscribe()))}))}open(e){if(!this.dialogService.getOpenedDialogs().some((e=>e===this))&&(this.dialogService.addToOpenedDialogs(this),Object.assign(this.context,e),this.modalOptions.ariaLabelledBy=this.titleId,this.dialogRef=this.bsModal.show(this.getTemplateRef(),this.modalOptions),1===this.dialogService.getOpenedDialogs().length&&(n.isMobile()||n.isMobileApp()))){$("body > app-root")[0].setAttribute("aria-hidden","true")}}close(){this.dialogRef&&(this.dialogService.addToClosedDialogs(this),this.dialogRef.hide())}register(e){this.dialogService.register(this.name,this,e)}deRegister(e){this.dialogService.deRegister(this.name,e)}onPropertyChange(e,t,i){"class"!==e&&"name"!==e&&"tabindex"!==e&&("animation"===e&&(this.modalOptions.class=this.modalOptions.class.replace(" animated "+i,""),t&&(this.modalOptions.class=this.modalOptions.class+" animated "+t)),super.onPropertyChange(e,t,i))}ngOnDestroy(){this.close(),this.deRegister(this.viewParent),super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||v)(c.\u0275\u0275inject(c.Injector),c.\u0275\u0275inject(a.WidgetConfig),c.\u0275\u0275inject(d.ModalOptions))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(v,[{type:t.Injectable}],(function(){return[{type:c.Injector},{type:void 0,decorators:[{type:t.Inject,args:[a.WidgetConfig]}]},{type:d.ModalOptions}]}),null);const b=["wmDialogHeader",""];function y(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"button",5),c.\u0275\u0275listener("click",(function(){c.\u0275\u0275restoreView(e);const t=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(t.closeDialog())})),c.\u0275\u0275elementStart(1,"span",6),c.\u0275\u0275text(2,"\xd7"),c.\u0275\u0275elementEnd()()}}function w(e,t){1&e&&c.\u0275\u0275elementContainer(0)}function P(e,t){if(1&e&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementStart(1,"h1",7),c.\u0275\u0275template(2,w,1,0,"ng-container",8),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementContainerEnd()),2&e){c.\u0275\u0275nextContext();const e=c.\u0275\u0275reference(10);c.\u0275\u0275advance(2),c.\u0275\u0275property("ngTemplateOutlet",e)}}function C(e,t){1&e&&c.\u0275\u0275elementContainer(0)}function A(e,t){if(1&e&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementStart(1,"h2",7),c.\u0275\u0275template(2,C,1,0,"ng-container",8),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementContainerEnd()),2&e){c.\u0275\u0275nextContext();const e=c.\u0275\u0275reference(10);c.\u0275\u0275advance(2),c.\u0275\u0275property("ngTemplateOutlet",e)}}function _(e,t){1&e&&c.\u0275\u0275elementContainer(0)}function I(e,t){if(1&e&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementStart(1,"h3",7),c.\u0275\u0275template(2,_,1,0,"ng-container",8),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementContainerEnd()),2&e){c.\u0275\u0275nextContext();const e=c.\u0275\u0275reference(10);c.\u0275\u0275advance(2),c.\u0275\u0275property("ngTemplateOutlet",e)}}function E(e,t){1&e&&c.\u0275\u0275elementContainer(0)}function O(e,t){if(1&e&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementStart(1,"h4",7),c.\u0275\u0275template(2,E,1,0,"ng-container",8),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementContainerEnd()),2&e){c.\u0275\u0275nextContext();const e=c.\u0275\u0275reference(10);c.\u0275\u0275advance(2),c.\u0275\u0275property("ngTemplateOutlet",e)}}function x(e,t){1&e&&c.\u0275\u0275elementContainer(0)}function R(e,t){if(1&e&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementStart(1,"h5",7),c.\u0275\u0275template(2,x,1,0,"ng-container",8),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementContainerEnd()),2&e){c.\u0275\u0275nextContext();const e=c.\u0275\u0275reference(10);c.\u0275\u0275advance(2),c.\u0275\u0275property("ngTemplateOutlet",e)}}function D(e,t){1&e&&c.\u0275\u0275elementContainer(0)}function S(e,t){if(1&e&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementStart(1,"h6",7),c.\u0275\u0275template(2,D,1,0,"ng-container",8),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementContainerEnd()),2&e){c.\u0275\u0275nextContext();const e=c.\u0275\u0275reference(10);c.\u0275\u0275advance(2),c.\u0275\u0275property("ngTemplateOutlet",e)}}function T(e,t){1&e&&c.\u0275\u0275elementContainer(0)}function M(e,t){if(1&e&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementStart(1,"h4",7),c.\u0275\u0275template(2,T,1,0,"ng-container",8),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementContainerEnd()),2&e){c.\u0275\u0275nextContext();const e=c.\u0275\u0275reference(10);c.\u0275\u0275advance(2),c.\u0275\u0275property("ngTemplateOutlet",e)}}const N=function(e,t,i){return{width:e,height:t,margin:i}};function k(e,t){if(1&e&&c.\u0275\u0275element(0,"i",13),2&e){const e=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("ngClass",e.iconclass)("ngStyle",c.\u0275\u0275pureFunction3(2,N,e.iconwidth,e.iconheight,e.iconmargin))}}function L(e,t){if(1&e&&(c.\u0275\u0275element(0,"img",14),c.\u0275\u0275pipe(1,"image")),2&e){const e=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("src",c.\u0275\u0275pipeBind1(1,2,e.iconurl),c.\u0275\u0275sanitizeUrl)("ngStyle",c.\u0275\u0275pureFunction3(4,N,e.iconwidth,e.iconheight,e.iconmargin))}}function F(e,t){if(1&e&&c.\u0275\u0275element(0,"span",15),2&e){const e=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("title",e.subheading)("textContent",e.subheading)}}function B(e,t){if(1&e&&(c.\u0275\u0275template(0,k,1,6,"i",9),c.\u0275\u0275template(1,L,2,8,"img",10),c.\u0275\u0275element(2,"span",11),c.\u0275\u0275template(3,F,1,2,"span",12)),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",e.iconclass&&!e.iconurl),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.iconurl),c.\u0275\u0275advance(1),c.\u0275\u0275property("textContent",e.heading)("id",e.titleid),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.subheading)}}const j="21px";class V{get isClosable(){return n.toBoolean(this.closable)}constructor(e,t){this.dialogRef=t,this.iconwidth=j,this.iconheight=j,this.closable=!0,this.headinglevel="h4",n.addClass(e.nativeElement,"app-dialog-header modal-header")}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(e){return new(e||V)(c.\u0275\u0275directiveInject(c.ElementRef),c.\u0275\u0275directiveInject(a.DialogRef))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:V,selectors:[["div","wmDialogHeader",""]],inputs:{iconwidth:"iconwidth",iconheight:"iconheight",iconmargin:"iconmargin",iconclass:"iconclass",iconurl:"iconurl",closable:"closable",heading:"heading",headinglevel:"headinglevel",subheading:"subheading",titleid:"titleid"},attrs:b,decls:11,vars:8,consts:[["aria-label","Close","class","app-dialog-close close","title","Close",3,"click",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["headerTemplate",""],["aria-label","Close","title","Close",1,"app-dialog-close","close",3,"click"],["aria-hidden","true"],[1,"app-dialog-title","modal-title"],[4,"ngTemplateOutlet"],[3,"ngClass","ngStyle",4,"ngIf"],["data-identifier","img",3,"src","ngStyle",4,"ngIf"],[1,"dialog-heading",3,"textContent","id"],["class","dialog-sub-heading",3,"title","textContent",4,"ngIf"],[3,"ngClass","ngStyle"],["data-identifier","img",3,"src","ngStyle"],[1,"dialog-sub-heading",3,"title","textContent"]],template:function(e,t){1&e&&(c.\u0275\u0275template(0,y,3,0,"button",0),c.\u0275\u0275elementContainerStart(1,1),c.\u0275\u0275template(2,P,3,1,"ng-container",2),c.\u0275\u0275template(3,A,3,1,"ng-container",2),c.\u0275\u0275template(4,I,3,1,"ng-container",2),c.\u0275\u0275template(5,O,3,1,"ng-container",2),c.\u0275\u0275template(6,R,3,1,"ng-container",2),c.\u0275\u0275template(7,S,3,1,"ng-container",2),c.\u0275\u0275template(8,M,3,1,"ng-container",3),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275template(9,B,4,5,"ng-template",null,4,c.\u0275\u0275templateRefExtractor)),2&e&&(c.\u0275\u0275property("ngIf",t.isClosable),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngSwitch",t.headinglevel),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngSwitchCase","h1"),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngSwitchCase","h2"),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngSwitchCase","h3"),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngSwitchCase","h4"),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngSwitchCase","h5"),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngSwitchCase","h6"))},dependencies:[u.NgClass,u.NgIf,u.NgTemplateOutlet,u.NgStyle,u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,p.TextContentDirective,p.ImagePipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(V,[{type:t.Component,args:[{selector:"div[wmDialogHeader]",template:'<button *ngIf="isClosable" aria-label="Close" class="app-dialog-close close" (click)="closeDialog();" title="Close">\n    <span aria-hidden="true">&times;</span>\n</button>\n\n<ng-container [ngSwitch]="headinglevel">\n    <ng-container *ngSwitchCase="\'h1\'">\n        <h1 class="app-dialog-title modal-title">\n            <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>\n        </h1>\n    </ng-container>\n    <ng-container *ngSwitchCase="\'h2\'">\n        <h2 class="app-dialog-title modal-title">\n            <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>\n        </h2>\n    </ng-container>\n    <ng-container *ngSwitchCase="\'h3\'">\n        <h3 class="app-dialog-title modal-title">\n            <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>\n        </h3>\n    </ng-container>\n    <ng-container *ngSwitchCase="\'h4\'">\n        <h4 class="app-dialog-title modal-title">\n            <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>\n        </h4>\n    </ng-container>\n    <ng-container *ngSwitchCase="\'h5\'">\n        <h5 class="app-dialog-title modal-title">\n            <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>\n        </h5>\n    </ng-container>\n    <ng-container *ngSwitchCase="\'h6\'">\n        <h6 class="app-dialog-title modal-title">\n            <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>\n        </h6>\n    </ng-container>\n    <ng-container *ngSwitchDefault>\n        <h4 class="app-dialog-title modal-title">\n            <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>\n        </h4>\n    </ng-container>\n</ng-container>\n\n<ng-template #headerTemplate>\n    <i [ngClass]="iconclass" [ngStyle]="{width: iconwidth, height: iconheight, margin: iconmargin}" *ngIf="iconclass && !iconurl"></i>\n    <img data-identifier="img" [src]="iconurl | image" *ngIf="iconurl" [ngStyle]="{width: iconwidth, height: iconheight, margin: iconmargin}"/>\n    <span class="dialog-heading" [textContent]="heading" [id]="titleid"></span>\n    <span class="dialog-sub-heading" *ngIf="subheading" [title]="subheading" [textContent]="subheading"></span>\n</ng-template>\n'}]}],(function(){return[{type:c.ElementRef},{type:v,decorators:[{type:t.Inject,args:[a.DialogRef]}]}]}),{iconwidth:[{type:t.Input}],iconheight:[{type:t.Input}],iconmargin:[{type:t.Input}],iconclass:[{type:t.Input}],iconurl:[{type:t.Input}],closable:[{type:t.Input}],heading:[{type:t.Input}],headinglevel:[{type:t.Input}],subheading:[{type:t.Input}],titleid:[{type:t.Input}]});const G=[h,g,V];class W{static{this.\u0275fac=function(e){return new(e||W)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:W})}static{this.\u0275inj=c.\u0275\u0275defineInjector({imports:[r.CommonModule,i.ModalModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(W,[{type:t.NgModule,args:[{imports:[r.CommonModule,i.ModalModule,a.WmComponentsModule],declarations:[...G],exports:[...G]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&c.\u0275\u0275setNgModuleScope(W,{declarations:[h,g,V],imports:[r.CommonModule,i.ModalModule,a.WmComponentsModule],exports:[h,g,V]}),e.BaseDialog=v,e.DialogBodyDirective=h,e.DialogFooterDirective=g,e.DialogHeaderComponent=V,e.DialogModule=W})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/dialogs"),require("@wm/components/input"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/dialogs","@wm/components/input","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.alertdialog={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.dialogs,e.wm.components.input,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(n),d=r(a),p=r(s);const u=["dialogTemplate"],h=["wmAlertDialog",""];function m(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275element(0,"div",1),l.\u0275\u0275elementStart(1,"div",2),l.\u0275\u0275element(2,"p",3),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(3,"div",4)(4,"button",5),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.onOk(t))})),l.\u0275\u0275elementEnd()()}if(2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275property("closable",e.closable)("iconclass",e.iconclass)("iconurl",e.iconurl)("iconwidth",e.iconwidth)("iconheight",e.iconheight)("iconmargin",e.iconmargin)("heading",e.title)("headinglevel",e.headinglevel)("titleid",e.titleId),l.\u0275\u0275advance(2),l.\u0275\u0275classMapInterpolate1("app-dialog-message text-",e.alerttype,""),l.\u0275\u0275property("textContent",e.message)}}const g={widgetType:"wm-alertdialog"};class f extends a.BaseDialog{static{this.initializeProps=void n.register("wm-alertdialog",new Map([["alerttype",{value:"error",...n.PROP_STRING}],["animation",n.PROP_STRING],["class",n.PROP_STRING],["closable",{value:!0,PROP_BOOLEAN:n.PROP_BOOLEAN}],["iconclass",{value:"wi wi-warning",PROP_STRING:n.PROP_STRING}],["iconheight",n.PROP_STRING],["iconmargin",n.PROP_STRING],["iconurl",n.PROP_STRING],["iconwidth",n.PROP_STRING],["message",{value:"Am an alert box!",...n.PROP_STRING}],["modal",{value:!1,...n.PROP_BOOLEAN}],["name",n.PROP_STRING],["oktext",{value:"OK",...n.PROP_STRING}],["tabindex",{value:0,...n.PROP_NUMBER}],["headinglevel",{value:"h4",...n.PROP_STRING}],["title",{value:"Alert",...n.PROP_STRING}]]))}constructor(e,t,i,n){null==i&&(i=!1);const a=!o.toBoolean(i)||"static";super(e,g,{class:`app-dialog modal-dialog app-alert-dialog ${t||""}`,backdrop:a,keyboard:!o.toBoolean(i)})}getTemplateRef(){return this.dialogTemplate}onOk(e){this.invokeEventCallback("ok",{$event:e})}ngOnInit(){super.ngOnInit(),this.register(this.viewParent)}static{this.\u0275fac=function(e){return new(e||f)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275injectAttribute("class"),l.\u0275\u0275injectAttribute("modal"),l.\u0275\u0275injectAttribute("closable"))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:f,selectors:[["div","wmAlertDialog",""]],viewQuery:function(e,t){if(1&e&&l.\u0275\u0275viewQuery(u,7),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.dialogTemplate=e.first)}},features:[l.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(f),n.provideAsDialogRef(f)]),l.\u0275\u0275InheritDefinitionFeature],attrs:h,decls:2,vars:0,consts:[["dialogTemplate",""],["wmDialogHeader","",3,"closable","iconclass","iconurl","iconwidth","iconheight","iconmargin","heading","headinglevel","titleid"],["wmDialogBody",""],[3,"textContent"],["wmDialogFooter",""],["wmButton","","caption.bind","oktext","aria-label","Submit button",1,"btn-primary","ok-action",3,"click"]],template:function(e,t){1&e&&l.\u0275\u0275template(0,m,5,13,"ng-template",null,0,l.\u0275\u0275templateRefExtractor)},dependencies:[d.DialogBodyDirective,d.DialogFooterDirective,d.DialogHeaderComponent,p.ButtonComponent,c.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(f,[{type:t.Component,args:[{selector:"div[wmAlertDialog]",providers:[n.provideAsWidgetRef(f),n.provideAsDialogRef(f)],template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"\n         [headinglevel]="headinglevel"\n         [titleid]="titleId"></div>\n    <div wmDialogBody>\n        <p class="app-dialog-message text-{{alerttype}}" [textContent]="message"></p>\n    </div>\n    <div wmDialogFooter>\n        <button wmButton class="btn-primary ok-action" caption.bind="oktext" aria-label="Submit button" (click)="onOk($event)"></button>\n    </div>\n</ng-template>\n'}]}],(function(){return[{type:l.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["closable"]}]}]}),{dialogTemplate:[{type:t.ViewChild,args:["dialogTemplate",{static:!0}]}]});const v=[f];class b{static{this.\u0275fac=function(e){return new(e||b)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:b})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(b,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule],declarations:[...v],exports:[...v]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(b,{declarations:[f],imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule],exports:[f]}),e.AlertDialogComponent=f,e.AlertDialogModule=b})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/dialogs"),require("@wm/components/input"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/dialogs","@wm/components/input","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.confirmdialog={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.dialogs,e.wm.components.input,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(a),d=r(s);const p=["dialogTemplate"],u=["wmConfirmDialog",""];function h(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275element(0,"div",1),l.\u0275\u0275elementStart(1,"div",2)(2,"p"),l.\u0275\u0275text(3),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(4,"div",3)(5,"button",4),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.onCancel(t))})),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(6,"button",5),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.onOk(t))})),l.\u0275\u0275elementEnd()()}if(2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275property("closable",e.closable)("iconclass",e.iconclass)("iconurl",e.iconurl)("iconwidth",e.iconwidth)("iconheight",e.iconheight)("iconmargin",e.iconmargin)("heading",e.title)("headinglevel",e.headinglevel)("titleid",e.titleId),l.\u0275\u0275advance(2),l.\u0275\u0275classMapInterpolate1("app-dialog-message ",e.messageclass,""),l.\u0275\u0275attribute("aria-describedby",e.message),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate(e.message)}}const m={widgetType:"wm-confirmdialog"};class g extends a.BaseDialog{static{this.initializeProps=void n.register("wm-confirmdialog",new Map([["animation",n.PROP_STRING],["canceltext",{value:"CANCEL",...n.PROP_STRING}],["class",n.PROP_STRING],["closable",{value:!0,PROP_BOOLEAN:n.PROP_BOOLEAN}],["iconclass",{value:"wm-sl-l sl-check",PROP_STRING:n.PROP_STRING}],["iconheight",n.PROP_STRING],["iconmargin",n.PROP_STRING],["iconurl",n.PROP_STRING],["iconwidth",n.PROP_STRING],["message",{value:"I am confirm box!",...n.PROP_STRING}],["modal",{value:!1,...n.PROP_BOOLEAN}],["name",n.PROP_STRING],["oktext",{value:"OK",...n.PROP_STRING}],["tabindex",{value:0,...n.PROP_NUMBER}],["headinglevel",{value:"h4",...n.PROP_STRING}],["title",{value:"Confirm",...n.PROP_STRING}]]))}constructor(e,t,i,n){null==i&&(i=!1);super(e,m,{class:`app-dialog modal-dialog app-confirm-dialog ${t||""}`,backdrop:"static",keyboard:!o.toBoolean(i)})}onEscape(e){}getTemplateRef(){return this.dialogTemplate}onOk(e){this.invokeEventCallback("ok",{$event:e})}onCancel(e){this.invokeEventCallback("cancel",{$event:e})}ngOnInit(){super.ngOnInit(),this.register(this.viewParent)}static{this.\u0275fac=function(e){return new(e||g)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275injectAttribute("class"),l.\u0275\u0275injectAttribute("modal"),l.\u0275\u0275injectAttribute("closable"))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:g,selectors:[["div","wmConfirmDialog",""]],viewQuery:function(e,t){if(1&e&&l.\u0275\u0275viewQuery(p,7),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.dialogTemplate=e.first)}},hostBindings:function(e,t){1&e&&l.\u0275\u0275listener("keydown.esc",(function(e){return t.onEscape(e)}),!1,l.\u0275\u0275resolveWindow)},features:[l.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(g),n.provideAsDialogRef(g)]),l.\u0275\u0275InheritDefinitionFeature],attrs:u,decls:2,vars:0,consts:[["dialogTemplate",""],["wmDialogHeader","",3,"closable","iconclass","iconurl","iconwidth","iconheight","iconmargin","heading","headinglevel","titleid"],["wmDialogBody",""],["wmDialogFooter",""],["wmButton","","caption.bind","canceltext","aria-label","Cancel button",1,"btn-default","cancel-action",3,"click"],["wmButton","","caption.bind","oktext","aria-label","Submit button",1,"btn-primary","ok-action",3,"click"]],template:function(e,t){1&e&&l.\u0275\u0275template(0,h,7,14,"ng-template",null,0,l.\u0275\u0275templateRefExtractor)},dependencies:[c.DialogBodyDirective,c.DialogFooterDirective,c.DialogHeaderComponent,d.ButtonComponent],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(g,[{type:t.Component,args:[{selector:"div[wmConfirmDialog]",providers:[n.provideAsWidgetRef(g),n.provideAsDialogRef(g)],template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"\n         [headinglevel]="headinglevel"\n         [titleid]="titleId"></div>\n    <div wmDialogBody>\n        <p class="app-dialog-message {{messageclass}}" [attr.aria-describedby]="message">{{message}}</p>\n    </div>\n    <div wmDialogFooter>\n        <button wmButton class="btn-default cancel-action" caption.bind="canceltext" aria-label="Cancel button" (click)="onCancel($event)"></button>\n        <button wmButton class="btn-primary ok-action" caption.bind="oktext" aria-label="Submit button" (click)="onOk($event)"></button>\n    </div>\n</ng-template>\n'}]}],(function(){return[{type:l.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["closable"]}]}]}),{dialogTemplate:[{type:t.ViewChild,args:["dialogTemplate",{static:!0}]}],onEscape:[{type:t.HostListener,args:["window:keydown.esc",["$event"]]}]});const f=[g];class v{static{this.\u0275fac=function(e){return new(e||v)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:v})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(v,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule],declarations:[...f],exports:[...f]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(v,{declarations:[g],imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule],exports:[g]}),e.ConfirmDialogComponent=g,e.ConfirmDialogModule=v})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/dialogs"),require("@wm/components/input"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/dialogs","@wm/components/input","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.designdialog={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.dialogs,e.wm.components.input,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(i),d=r(a);const p=["dialogBody"],u=["dialogFooter"],h=["dialogTemplate"],m=["wmDialog",""];function g(e,t){if(1&e&&l.\u0275\u0275element(0,"div",4),2&e){const e=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("closable",e.closable)("iconclass",e.iconclass)("iconurl",e.iconurl)("iconwidth",e.iconwidth)("iconheight",e.iconheight)("iconmargin",e.iconmargin)("heading",e.title)("headinglevel",e.headinglevel)("titleid",e.titleId)}}function f(e,t){1&e&&l.\u0275\u0275elementContainer(0)}function v(e,t){1&e&&l.\u0275\u0275elementContainer(0)}function b(e,t){if(1&e&&(l.\u0275\u0275template(0,g,1,9,"div",1),l.\u0275\u0275elementStart(1,"div",2),l.\u0275\u0275template(2,f,1,0,"ng-container",3),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(3,v,1,0,"ng-container",3)),2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275property("ngIf",e.showheader),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngTemplateOutlet",e.dialogBody),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngTemplateOutlet",e.dialogFooter)}}const y={widgetType:"wm-dialog"};class w extends a.BaseDialog{static{this.initializeProps=void n.register("wm-dialog",new Map([["animation",n.PROP_STRING],["class",n.PROP_STRING],["closable",{value:!0,...n.PROP_BOOLEAN}],["iconclass",{value:"wi wi-file-text",PROP_STRING:n.PROP_STRING}],["iconheight",n.PROP_STRING],["iconmargin",n.PROP_STRING],["iconurl",n.PROP_STRING],["iconwidth",n.PROP_STRING],["modal",{value:!0,...n.PROP_BOOLEAN}],["name",n.PROP_STRING],["showheader",{value:!0,...n.PROP_BOOLEAN}],["tabindex",{value:0,...n.PROP_NUMBER}],["title",{value:"Information",...n.PROP_STRING}],["headinglevel",{value:"h4",...n.PROP_STRING}],["eventsource",n.PROP_ANY]]))}constructor(e,t,i,n,a){null==i&&(i=!0),null==n&&(n=!0),a[0].closeDialog=()=>this.close();const s=!o.toBoolean(i)||"static";super(e,y,{class:`app-dialog modal-dialog ${t||""}`,backdrop:s,keyboard:!!o.toBoolean(n)||!o.toBoolean(i)}),this.isDialogComponent=!0}getTemplateRef(){return this.dialogTemplate}ngOnInit(){super.ngOnInit(),this.register(this.viewParent)}static{this.\u0275fac=function(e){return new(e||w)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275injectAttribute("class"),l.\u0275\u0275injectAttribute("modal"),l.\u0275\u0275injectAttribute("closable"),l.\u0275\u0275directiveInject(n.Context,2))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:w,selectors:[["div","wmDialog",""]],contentQueries:function(e,i,n){if(1&e&&(l.\u0275\u0275contentQuery(n,p,5,t.TemplateRef),l.\u0275\u0275contentQuery(n,u,5,t.TemplateRef)),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.dialogBody=e.first),l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.dialogFooter=e.first)}},viewQuery:function(e,i){if(1&e&&l.\u0275\u0275viewQuery(h,7,t.TemplateRef),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.dialogTemplate=e.first)}},features:[l.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(w),n.provideAsDialogRef(w),{provide:n.Context,useFactory:()=>({}),multi:!0}]),l.\u0275\u0275InheritDefinitionFeature],attrs:m,decls:2,vars:0,consts:[["dialogTemplate",""],["wmDialogHeader","",3,"closable","iconclass","iconurl","iconwidth","iconheight","iconmargin","heading","headinglevel","titleid",4,"ngIf"],["wmDialogBody",""],[4,"ngTemplateOutlet"],["wmDialogHeader","",3,"closable","iconclass","iconurl","iconwidth","iconheight","iconmargin","heading","headinglevel","titleid"]],template:function(e,t){1&e&&l.\u0275\u0275template(0,b,4,3,"ng-template",null,0,l.\u0275\u0275templateRefExtractor)},dependencies:[c.NgIf,c.NgTemplateOutlet,d.DialogBodyDirective,d.DialogHeaderComponent],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(w,[{type:t.Component,args:[{selector:"div[wmDialog]",providers:[n.provideAsWidgetRef(w),n.provideAsDialogRef(w),{provide:n.Context,useFactory:()=>({}),multi:!0}],template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"\n         [headinglevel]="headinglevel"\n         *ngIf="showheader"\n         [titleid]="titleId"\n    ></div>\n    <div wmDialogBody>\n        <ng-container *ngTemplateOutlet="dialogBody"></ng-container>\n    </div>\n    <ng-container *ngTemplateOutlet="dialogFooter"></ng-container>\n</ng-template>\n'}]}],(function(){return[{type:l.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["closable"]}]},{type:Array,decorators:[{type:t.Self},{type:t.Inject,args:[n.Context]}]}]}),{dialogTemplate:[{type:t.ViewChild,args:["dialogTemplate",{static:!0,read:t.TemplateRef}]}],dialogBody:[{type:t.ContentChild,args:["dialogBody",{read:t.TemplateRef}]}],dialogFooter:[{type:t.ContentChild,args:["dialogFooter",{read:t.TemplateRef}]}]});const P=[w];class C{static{this.\u0275fac=function(e){return new(e||C)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:C})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(C,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule],declarations:[...P],exports:[...P]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(C,{declarations:[w],imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule],exports:[w]}),e.DesignDialogModule=C,e.DialogComponent=w})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@angular/platform-browser"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@angular/platform-browser","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page={}),e.ng.core,e.ng.common,e.wm.components.base,e.ng.platformBrowser,e.wm.core)}(this,(function(e,t,i,n,a,s){"use strict";function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var r=o(t),l=o(a),c=o(s);const d={widgetType:"wm-page",hostClass:"app-page container"};class p extends n.StylableComponent{static{this.initializeProps=void n.register("wm-page",new Map([["cache",{value:!1,...n.PROP_BOOLEAN}],["refreshdataonattach",{value:!0,...n.PROP_BOOLEAN}],["pagetitle",n.PROP_STRING],["hint",n.PROP_STRING]]))}onPropertyChange(e,t,i){"pagetitle"===e?this.titleService.setTitle(t):super.onPropertyChange(e,t,i)}constructor(e,t,i){super(e,d),this.titleService=t,this.viewport=i,this._eventNotifier=new s.EventNotifier(!1),this.refreshdataonattach=!0}notify(e,...t){this._eventNotifier.notify.apply(this._eventNotifier,arguments)}subscribe(e,t){return this._eventNotifier.subscribe(e,t)}ngAfterViewInit(){setTimeout((()=>{this._eventNotifier.start(),n.updateDeviceView(this.nativeElement,this.getAppInstance().isTabletApplicationType)}),1),this.registerDestroyListener(this.viewport.subscribe("resize",(e=>{this.invokeEventCallback("resize",{$event:e.$event,widget:this,data:e.data})}))),this.registerDestroyListener(this.viewport.subscribe("orientationchange",(e=>{this.invokeEventCallback("orientationchange",{$event:e.$event,widget:this,data:e.data})})))}ngOnAttach(){this.titleService.setTitle(this.pagetitle),this.invokeEventCallback("attach",{widget:this}),this.notify("attach",{refreshData:this.refreshdataonattach})}ngOnDetach(){this.invokeEventCallback("detach",{widget:this}),this.notify("detach")}ngOnDestroy(){this.invokeEventCallback("destroy",{widget:this}),this._eventNotifier.destroy()}static{this.\u0275fac=function(e){return new(e||p)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(l.Title),r.\u0275\u0275directiveInject(c.Viewport))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:p,selectors:[["","wmPage",""]],exportAs:["wmPage"],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(p)]),r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(p,[{type:t.Directive,args:[{selector:"[wmPage]",providers:[n.provideAsWidgetRef(p)],exportAs:"wmPage"}]}],(function(){return[{type:r.Injector},{type:l.Title},{type:c.Viewport}]}),null);const u=["wmContent",""],h=["*"],m={widgetType:"wm-content",hostClass:"app-content clearfix"};class g extends n.StylableComponent{static{this.initializeProps=void n.register("wm-content",new Map([["name",n.PROP_STRING],["class",n.PROP_STRING]]))}constructor(e){super(e,m),n.styler(this.nativeElement,this)}static{this.\u0275fac=function(e){return new(e||g)(r.\u0275\u0275directiveInject(r.Injector))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:g,selectors:[["","wmContent",""]],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(g)]),r.\u0275\u0275InheritDefinitionFeature],attrs:u,ngContentSelectors:h,decls:2,vars:0,consts:[[1,"row","app-content-row","clearfix"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275projection(1),r.\u0275\u0275elementEnd())},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(g,[{type:t.Component,args:[{selector:"[wmContent]",providers:[n.provideAsWidgetRef(g)],template:'<div class="row app-content-row clearfix">\n    <ng-content></ng-content>\n</div>'}]}],(function(){return[{type:r.Injector}]}),null);const f=["wmPageContent",""],v=["*"],b={widgetType:"wm-page-content",hostClass:"app-page-content app-content-column"};class y extends n.StylableComponent{static{this.initializeProps=void n.register("wm-page-content",new Map([["class",n.PROP_STRING],["columnwidth",n.PROP_NUMBER],["content",n.PROP_STRING],["name",n.PROP_STRING],["pulltorefresh",{value:s.isMobileApp(),...n.PROP_BOOLEAN}]]))}constructor(e,t){super(e,b),this.app=t,n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER),this.registerDestroyListener(this.app.subscribe("pullToRefresh:enable",(()=>{this.childPullToRefresh=!0,this.initPullToRefresh()})))}onPropertyChange(e,t,i){"columnwidth"===e?s.switchClass(this.nativeElement,`col-md-${t} col-sm-${t}`,`col-md-${i} col-sm-${i}`):"pulltorefresh"===e&&t?setTimeout((()=>{this.initPullToRefresh()})):super.onPropertyChange(e,t,i)}initPullToRefresh(){const e=this.hasEventCallback("pulltorefresh");!this.pullToRefreshIns&&(this.childPullToRefresh||e)&&this.pulltorefresh&&(this.pullToRefreshIns=new n.PullToRefresh($(this.nativeElement),this.app,(()=>{e?this.invokeEventCallback("pulltorefresh"):this.app.notify("pulltorefresh")})),this.registerDestroyListener((()=>{this.pullToRefreshIns.cancelSubscription&&this.pullToRefreshIns.cancelSubscription()})))}static{this.\u0275fac=function(e){return new(e||y)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(c.App))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:y,selectors:[["","wmPageContent",""]],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(y)]),r.\u0275\u0275InheritDefinitionFeature],attrs:f,ngContentSelectors:v,decls:1,vars:0,template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275projection(0))},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(y,[{type:t.Component,args:[{selector:"[wmPageContent]",providers:[n.provideAsWidgetRef(y)],template:"<ng-content></ng-content>"}]}],(function(){return[{type:r.Injector},{type:c.App}]}),null);const w={widgetType:"wm-spa-page",hostClass:"app-spa-page"};class P extends n.StylableComponent{static{this.initializeProps=void n.register("wm-spa-page",new Map([["cache",{value:!1,...n.PROP_BOOLEAN}],["refreshdataonattach",{value:!0,...n.PROP_BOOLEAN}],["pagetitle",n.PROP_STRING],["hint",n.PROP_STRING]]))}onPropertyChange(e,t,i){"pagetitle"===e?this.titleService.setTitle(t):super.onPropertyChange(e,t,i)}constructor(e,t,i){super(e,w),this.titleService=t,this.viewport=i,this._eventNotifier=new s.EventNotifier(!1),this.refreshdataonattach=!0}notify(e,...t){this._eventNotifier.notify.apply(this._eventNotifier,arguments)}subscribe(e,t){return this._eventNotifier.subscribe(e,t)}ngAfterViewInit(){setTimeout((()=>{this._eventNotifier.start(),n.updateDeviceView(this.nativeElement,this.getAppInstance().isTabletApplicationType)}),1),this.registerDestroyListener(this.viewport.subscribe("resize",(e=>{this.invokeEventCallback("resize",{$event:e.$event,widget:this,data:e.data})}))),this.registerDestroyListener(this.viewport.subscribe("orientationchange",(e=>{this.invokeEventCallback("orientationchange",{$event:e.$event,widget:this,data:e.data})})))}ngOnAttach(){this.titleService.setTitle(this.pagetitle),this.invokeEventCallback("attach",{widget:this}),this.notify("attach",{refreshData:this.refreshdataonattach})}ngOnDetach(){this.invokeEventCallback("detach",{widget:this}),this.notify("detach")}ngOnDestroy(){this.invokeEventCallback("destroy",{widget:this}),this._eventNotifier.destroy()}static{this.\u0275fac=function(e){return new(e||P)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(l.Title),r.\u0275\u0275directiveInject(c.Viewport))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:P,selectors:[["","wmSpaPage",""]],exportAs:["wmSpaPage"],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(P)]),r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(P,[{type:t.Directive,args:[{selector:"[wmSpaPage]",providers:[n.provideAsWidgetRef(P)],exportAs:"wmSpaPage"}]}],(function(){return[{type:r.Injector},{type:l.Title},{type:c.Viewport}]}),null);const C={widgetType:"wm-layout",hostClass:"app-page container"};class A extends n.StylableComponent{static{this.initializeProps=void n.register("wm-layout",new Map([]))}constructor(e){super(e,C),this._eventNotifier=new s.EventNotifier(!1)}notify(e,...t){this._eventNotifier.notify.apply(this._eventNotifier,arguments)}ngAfterViewInit(){setTimeout((()=>{n.updateDeviceView(this.nativeElement,this.getAppInstance().isTabletApplicationType)}),1)}static{this.\u0275fac=function(e){return new(e||A)(r.\u0275\u0275directiveInject(r.Injector))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:A,selectors:[["","wmLayout",""]],exportAs:["wmLayout"],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(A)]),r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(A,[{type:t.Directive,args:[{selector:"[wmLayout]",providers:[n.provideAsWidgetRef(A)],exportAs:"wmLayout"}]}],(function(){return[{type:r.Injector}]}),null);const _={widgetType:"wm-router-outlet",hostClass:"app-content-column-wrapper"};class I extends n.StylableComponent{static{this.initializeProps=void n.register("wm-router-outlet",new Map([["columnwidth",n.PROP_NUMBER],["name",n.PROP_STRING]]))}constructor(e){super(e,_)}onPropertyChange(e,t,i){"columnwidth"===e?s.switchClass(this.nativeElement,`col-md-${t} col-sm-${t}`,`col-md-${i} col-sm-${i}`):super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||I)(r.\u0275\u0275directiveInject(r.Injector))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:I,selectors:[["","wmRouterOutlet",""]],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(I)]),r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(I,[{type:t.Directive,args:[{selector:"[wmRouterOutlet]",providers:[n.provideAsWidgetRef(I)]}]}],(function(){return[{type:r.Injector}]}),null);const E=[p,A,g,y,P,I];class O{static{this.\u0275fac=function(e){return new(e||O)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:O})}static{this.\u0275inj=r.\u0275\u0275defineInjector({providers:[p,P],imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(O,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...E],exports:[...E],providers:[p,P]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(O,{declarations:[p,A,g,y,P,I],imports:[i.CommonModule,n.WmComponentsModule],exports:[p,A,g,y,P,I]}),e.ContentComponent=g,e.LayoutDirective=A,e.PageContentComponent=y,e.PageDirective=p,e.PageModule=O,e.RouterOutletDirective=I,e.SpaPageDirective=P})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.footer={}),e.ng.core,e.ng.common,e.wm.components.base)}(this,(function(e,t,i,n){"use strict";var a,s,o=(a=t,s=Object.create(null),a&&Object.keys(a).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(s,e,t.get?t:{enumerable:!0,get:function(){return a[e]}})}})),s.default=a,Object.freeze(s));const r={widgetType:"wm-footer",hostClass:"app-footer clearfix"};class l extends n.StylableComponent{static{this.initializeProps=void n.register("wm-footer",new Map([["name",n.PROP_STRING],["class",n.PROP_STRING],["content",n.PROP_STRING],["hint",n.PROP_STRING]]))}constructor(e){super(e,r),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||l)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:l,selectors:[["","wmFooter",""]],exportAs:["wmFooter"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(l)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(l,[{type:t.Directive,args:[{selector:"[wmFooter]",providers:[n.provideAsWidgetRef(l)],exportAs:"wmFooter"}]}],(function(){return[{type:o.Injector}]}),null);const c=[l];class d{static{this.\u0275fac=function(e){return new(e||d)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:d})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(d,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...c],exports:[...c]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(d,{declarations:[l],imports:[i.CommonModule,n.WmComponentsModule],exports:[l]}),e.FooterDirective=l,e.FooterModule=d})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.header={}),e.ng.core,e.ng.common,e.wm.components.base)}(this,(function(e,t,i,n){"use strict";var a,s,o=(a=t,s=Object.create(null),a&&Object.keys(a).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(s,e,t.get?t:{enumerable:!0,get:function(){return a[e]}})}})),s.default=a,Object.freeze(s));const r=["wmHeader",""],l={widgetType:"wm-header",hostClass:"app-header clearfix"};class c extends n.StylableComponent{static{this.initializeProps=void n.register("wm-header",new Map([["name",n.PROP_STRING],["class",n.PROP_STRING],["content",n.PROP_STRING],["hint",n.PROP_STRING]]))}constructor(e){super(e,l),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||c)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:c,selectors:[["","wmHeader",""]],exportAs:["wmHeader"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(c)]),o.\u0275\u0275InheritDefinitionFeature],attrs:r,decls:4,vars:0,consts:[["data-role","page-left-panel-icon",1,"app-header-menu"],["href","javascript:void(0)","aria-expanded","false","aria-label","Expand Left navigation","role","button",1,"app-header-action"],[1,"wi","wi-menu"],["partial-container-target","",1,"app-header-container"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0)(1,"a",1),o.\u0275\u0275element(2,"i",2),o.\u0275\u0275elementEnd()(),o.\u0275\u0275element(3,"div",3))},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(c,[{type:t.Component,args:[{selector:"[wmHeader]",providers:[n.provideAsWidgetRef(c)],exportAs:"wmHeader",template:'<div class="app-header-menu" data-role="page-left-panel-icon">\n    <a class="app-header-action" href="javascript:void(0)" aria-expanded="false" aria-label="Expand Left navigation" role="button">\n        <i class="wi wi-menu"></i>\n    </a>\n</div>\n<div class="app-header-container" partial-container-target></div>\n'}]}],(function(){return[{type:o.Injector}]}),null);const d=[c];class p{static{this.\u0275fac=function(e){return new(e||p)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:p})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(p,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...d],exports:[...d]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(p,{declarations:[c],imports:[i.CommonModule,n.WmComponentsModule],exports:[c]}),e.HeaderComponent=c,e.HeaderModule=p})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@angular/router"),require("@wm/core"),require("@wm/components/page"),require("@swipey")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@angular/router","@wm/core","@wm/components/page","@swipey"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.leftpanel={}),e.ng.core,e.ng.common,e.wm.components.base,e.ng.router,e.wm.core,e.wm.components.page,e.swipey)}(this,(function(e,t,i,n,a,s,o,r){"use strict";function l(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var c=l(t),d=l(a),p=l(s),u=l(o);class h extends r.SwipeAnimation{constructor(e){super(),this.leftPanel=e,this.init(this.leftPanel.$ele,this.leftPanel.$page)}bounds(t,i){let n=0;return this.setGesturesEnabled(this.leftPanel.isGesturesEnabled()),this._width||(this._pageContainerWidth=this.leftPanel.$page.width(),this._leftPanelWidth=this.leftPanel.$ele.width(),this._maxX=this._leftPanelWidth/this._pageContainerWidth*100,this._width=this.leftPanel.animation===e.AnimationType.SLIDE_IN?this._pageContainerWidth:this._leftPanelWidth),this._expanded=this.leftPanel.expanded,this._expanded?{center:this._leftPanelWidth,lower:-(this._leftPanelWidth-n)}:(this.leftPanel.app.isTabletApplicationType&&(n=53.32),t&&(t.pageX||t.touches&&t.touches[0].pageX)>n+100?{strict:!0}:{center:0,upper:this._leftPanelWidth-n})}context(){return{w:this._width,pageW:this._pageContainerWidth,leftW:this._leftPanelWidth,maxX:this._maxX,limit:(e,t,i)=>t<e?e:t>i?i:t}}animation(){return this._$animatedElements=this.leftPanel.$ele,this.leftPanel.animation===e.AnimationType.SLIDE_IN?(this._$animatedElements=this._$animatedElements.add(this.leftPanel.$page),this.leftPanel.app.isTabletApplicationType?[{target:this.leftPanel.$ele,css:{transform:"translate3d(${{ limit(-100, -($d * 100 / leftW), 0) + '%' }}, 0, 0)"}},{target:this.leftPanel.$page,css:{transform:"translate3d(${{ (($d) * 100 / pageW) + '%' }}, 0, 0)",width:"${{ (pageW - $d) + 'px' }}","z-index":101}}]:[{target:this.leftPanel.$ele,css:{transform:"translate3d(-100%, 0, 0)",opacity:1,"z-index":101}},{target:this.leftPanel.$page,css:{transform:"translate3d(${{ limit( 0, ((($D + $d) * 100 / w)), maxX ) + '%' }}, 0, 0)",opacity:1,"z-index":101}}]):{transform:"translate3d(${{ limit( -100, ((($D + $d) * 100 / w) - 100), 0 ) + '%'}}, 0, 0)",opacity:1,"z-index":101}}onLower(){this._expanded=!1,this.leftPanel.collapse(),this.resetTransition(),s.$appDigest()}onUpper(){this._expanded=!0,this.leftPanel.expand(),this.resetTransition(),s.$appDigest()}resetTransition(){this._$animatedElements&&setTimeout((()=>{this._$animatedElements.css({transform:"",opacity:"","z-index":"",width:""})}),100)}}const m={widgetType:"wm-left-panel",hostClass:"app-left-panel left-panel-collapsed"};var g;e.AnimationType=void 0,(g=e.AnimationType||(e.AnimationType={})).SLIDE_IN="slide-in",g.SLIDE_OVER="slide-over";class f extends n.StylableComponent{static{this.initializeProps=void n.register("wm-left-panel",new Map([["animation",{value:"slide-in",...n.PROP_STRING}],["class",n.PROP_STRING],["columnwidth",{value:3,...n.PROP_NUMBER}],["content",n.PROP_STRING],["gestures",{value:"on",...n.PROP_STRING}],["name",n.PROP_STRING],["xscolumnwidth",{value:10,...n.PROP_NUMBER}],["hint",n.PROP_STRING]]))}constructor(e,t,i,o,r){super(o,m),this.app=e,this.page=t,this.layout=i,n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER),this.$ele=this.$element,this.$page=this.getAttr("spa")&&i&&i.$element||t&&t.$element,s.addClass(this.$page[0],"left-panel-collapsed-container"),this.columnwidth&&this.setLeftPanelWidth(["md","sm"],this.columnwidth),this.app.isTabletApplicationType&&s.addClass(this.nativeElement,"wm-tablet-app-left-panel");const l=r.events.subscribe((e=>{e instanceof a.NavigationStart&&this.collapse()}));this.registerDestroyListener((()=>l.unsubscribe()))}collapse(){s.addClass(this.nativeElement,"swipee-transition"),s.switchClass(this.nativeElement,"left-panel-collapsed","left-panel-expanded"),this.expanded&&setTimeout((()=>{const e=$(".app-header-action");e.attr("aria-expanded","false"),e.focus()}),50),s.isMobile()&&s.addClass(this.nativeElement,"hidden"),this.expanded=!1,s.switchClass(this.$page[0],"left-panel-collapsed-container","left-panel-expanded-container"),this.animation===e.AnimationType.SLIDE_IN&&(this.setPageWidthAndPosition(["md","sm"],null,this.columnwidth),this.setPageWidthAndPosition(["xs"],null,this.xscolumnwidth)),this._destroyCollapseActionListener&&this._destroyCollapseActionListener(),(this.getAttr("spa")&&this.layout||this.page).notify("wmLeftPanel:collapse")}expand(){s.removeClass(this.nativeElement,"hidden"),s.removeClass(this.nativeElement,"swipee-transition"),s.switchClass(this.nativeElement,"left-panel-expanded","left-panel-collapsed"),this.expanded=!0,this.app.isTabletApplicationType&&this.animation===e.AnimationType.SLIDE_IN||(this._destroyCollapseActionListener=this.listenForCollapseAction()),s.switchClass(this.$page[0],"left-panel-expanded-container","left-panel-collapsed-container"),this.animation===e.AnimationType.SLIDE_IN&&(this.setPageWidthAndPosition(["md","sm"],this.columnwidth),this.setPageWidthAndPosition(["xs"],this.xscolumnwidth)),(this.getAttr("spa")&&this.layout||this.page).notify("wmLeftPanel:expand"),$(".app-header-action").attr("aria-expanded",`${this.expanded}`);const t=n.getKeyboardFocusableElements(this.nativeElement),i=t[0],a=t[t.length-1];setTimeout((()=>{$(i).focus()}),50),$(i).on("keydown",(e=>{e.shiftKey&&"Tab"===e.key&&this.collapse()})),$(a).on("keydown",(e=>{"Tab"===e.key&&this.collapse()})),this.$element.on("keydown",(e=>{"Escape"===e.key&&this.collapse()}))}isGesturesEnabled(){return"on"===this.gestures}isVisible(){return this.expanded}onPropertyChange(t,i,n){switch(t){case"animation":i===e.AnimationType.SLIDE_IN?(s.removeClass(this.$page[0],"slide-over-left-panel-container"),s.addClass(this.$page[0],"slide-in-left-panel-container"),this.setPageWidthAndPosition(["md","sm"],this.columnwidth),this.setPageWidthAndPosition(["xs"],this.xscolumnwidth)):i===e.AnimationType.SLIDE_OVER&&(s.removeClass(this.$page[0],"slide-in-left-panel-container"),s.addClass(this.$page[0],"slide-over-left-panel-container")),this._leftPanelAnimator=new h(this),s.switchClass(this.nativeElement,i,n);break;case"columnwidth":this.setLeftPanelWidth(["md","sm"],i,n),this.animation===e.AnimationType.SLIDE_IN&&this.setPageWidthAndPosition(["md","sm"],i,n);break;case"expanded":s.toggleClass(this.nativeElement,"left-panel-expanded",i),s.toggleClass(this.nativeElement,"left-panel-collapsed",!i);break;case"xscolumnwidth":this.setLeftPanelWidth(["xs"],i,n),this.animation===e.AnimationType.SLIDE_IN&&this.setPageWidthAndPosition(["xs"],i,n);break;default:super.onPropertyChange(t,i,n)}}toggle(){this.app.isTabletApplicationType?setTimeout((()=>{this.expanded?this.collapse():this.expand()}),50):this.$ele.swipeAnimation(this.expanded?"gotoLower":"gotoUpper")}listenForCollapseAction(){const e="click.leftNavToggle";let t=!1;return this.$ele.on(e,(()=>{t=!0})),this.$page.on(e,(()=>{t||this.toggle(),t=!1})),()=>{this.$ele.off(e),this.$page.off(e)}}setLeftPanelWidth(e,t,i){e.forEach((e=>{t&&s.addClass(this.nativeElement,`col-${e}-${t}`),i&&s.removeClass(this.nativeElement,`col-${e}-${i}`)}))}setPageWidthAndPosition(e,t,i){e.forEach((e=>{t&&s.addClass(this.$page[0],`left-panel-container-${e}-${12-t}`),i&&s.removeClass(this.$page[0],`left-panel-container-${e}-${12-i}`)}))}static{this.\u0275fac=function(e){return new(e||f)(c.\u0275\u0275directiveInject(p.App),c.\u0275\u0275directiveInject(u.PageDirective,8),c.\u0275\u0275directiveInject(u.LayoutDirective,8),c.\u0275\u0275directiveInject(c.Injector),c.\u0275\u0275directiveInject(d.Router))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:f,selectors:[["","wmLeftPanel",""]],exportAs:["wmLeftPanel"],features:[c.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(f)]),c.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(f,[{type:t.Directive,args:[{selector:"[wmLeftPanel]",providers:[n.provideAsWidgetRef(f)],exportAs:"wmLeftPanel"}]}],(function(){return[{type:p.App},{type:u.PageDirective,decorators:[{type:t.Optional}]},{type:u.LayoutDirective,decorators:[{type:t.Optional}]},{type:c.Injector},{type:d.Router}]}),null);const v=[f];class b{static{this.\u0275fac=function(e){return new(e||b)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:b})}static{this.\u0275inj=c.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(b,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...v],exports:[...v]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&c.\u0275\u0275setNgModuleScope(b,{declarations:[f],imports:[i.CommonModule,n.WmComponentsModule],exports:[f]}),e.LeftPanelDirective=f,e.LeftPanelModule=b})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.rightpanel={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.core)}(this,(function(e,t,i,n,a){"use strict";var s,o,r=(s=t,o=Object.create(null),s&&Object.keys(s).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(o,e,t.get?t:{enumerable:!0,get:function(){return s[e]}})}})),o.default=s,Object.freeze(o));const l={widgetType:"wm-right-panel",hostClass:"app-right-panel"};class c extends n.StylableComponent{static{this.initializeProps=void n.register("wm-right-panel",new Map([["class",n.PROP_STRING],["columnwidth",n.PROP_NUMBER],["content",n.PROP_STRING],["name",n.PROP_STRING],["hint",n.PROP_STRING]]))}constructor(e){super(e,l),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}onPropertyChange(e,t,i){"columnwidth"===e?a.switchClass(this.nativeElement,`col-sm-${t}`,i?` col-sm-${i}`:""):super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||c)(r.\u0275\u0275directiveInject(r.Injector))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:c,selectors:[["","wmRightPanel",""]],exportAs:["wmRightPanel"],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(c)]),r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(c,[{type:t.Directive,args:[{selector:"[wmRightPanel]",providers:[n.provideAsWidgetRef(c)],exportAs:"wmRightPanel"}]}],(function(){return[{type:r.Injector}]}),null);const d=[c];class p{static{this.\u0275fac=function(e){return new(e||p)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:p})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(p,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...d],exports:[...d]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(p,{declarations:[c],imports:[i.CommonModule,n.WmComponentsModule],exports:[c]}),e.RightPanelDirective=c,e.RightPanelModule=p})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.topnav={}),e.ng.core,e.ng.common,e.wm.components.base)}(this,(function(e,t,i,n){"use strict";var a,s,o=(a=t,s=Object.create(null),a&&Object.keys(a).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(s,e,t.get?t:{enumerable:!0,get:function(){return a[e]}})}})),s.default=a,Object.freeze(s));const r={widgetType:"wm-top-nav",hostClass:"app-top-nav"};class l extends n.StylableComponent{static{this.initializeProps=void n.register("wm-top-nav",new Map([["name",n.PROP_STRING],["content",n.PROP_STRING],["hint",n.PROP_STRING]]))}constructor(e){super(e,r),n.styler(this.nativeElement,this)}static{this.\u0275fac=function(e){return new(e||l)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:l,selectors:[["","wmTopNav",""]],exportAs:["wmTopNav"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(l)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(l,[{type:t.Directive,args:[{selector:"[wmTopNav]",providers:[n.provideAsWidgetRef(l)],exportAs:"wmTopNav"}]}],(function(){return[{type:o.Injector}]}),null);const c=[l];class d{static{this.\u0275fac=function(e){return new(e||d)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:d})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(d,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...c],exports:[...c]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(d,{declarations:[l],imports:[i.CommonModule,n.WmComponentsModule],exports:[l]}),e.TopNavDirective=l,e.TopNavModule=d})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.prefab={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.core)}(this,(function(e,t,i,n,a){"use strict";function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var o=s(t),r=s(a);const l=new Map([["animation",n.PROP_STRING],["class",{value:"",...n.PROP_STRING}],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]),c=new Set;class d extends n.StylableComponent{constructor(e,t,i,s){const o=`wm-prefab-${s}`,r={widgetType:o,hostClass:"app-prefab"};let l=a.noop;super(e,r,new Promise((e=>l=e))),this.propsReady=l,this.prefabName=s,this.widgetType=o,this.name=t.nativeElement.getAttribute("name"),n.styler(this.nativeElement,this),this.registerReadyStateListener((()=>{super.onPropertyChange("name",this.name)}))}onStyleChange(e,t,i){"height"===e&&a.setCSS(this.nativeElement,"overflow","auto")}setProps(e){e&&e.properties&&(c.has(this.widgetType)||n.register(this.widgetType,this.prepareProps(e.properties)),this.propsReady())}handleEvent(){}prepareProps(e={}){const t=new Map(l);return Object.entries(e).forEach((([e,i])=>{let a=n.PROP_TYPE.STRING;"boolean"===i.type?a=n.PROP_TYPE.BOOLEAN:"number"===i.type?a=n.PROP_TYPE.NUMBER:"string"!==i.type&&(a=i.type),t.set(e,{type:a,value:_.startsWith(i.value,"bind:")?void 0:i.value})})),c.add(this.widgetType),t}ngOnDestroy(){this.invokeEventCallback("destroy",{widget:this})}static{this.\u0275fac=function(e){return new(e||d)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275injectAttribute("prefabname"))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:d,selectors:[["section","wmPrefab",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(d)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(d,[{type:t.Directive,args:[{selector:"section[wmPrefab]",providers:[n.provideAsWidgetRef(d)]}]}],(function(){return[{type:o.Injector},{type:o.ElementRef},{type:o.ChangeDetectorRef},{type:void 0,decorators:[{type:t.Attribute,args:["prefabname"]}]}]}),null);const p={widgetType:"wm-prefab-container",hostClass:"app-prefab-container full-height"};class u extends n.StylableComponent{static{this.initializeProps=void n.register("wm-prefab-container",new Map([["class",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e,t){super(e,p),this.viewport=t,n.styler(this.nativeElement,this),this.registerDestroyListener(this.viewport.subscribe("resize",(e=>this.callback("resize",e)))),this.registerDestroyListener(this.viewport.subscribe("orientationchange",(e=>this.callback("orientationchange",e))))}callback(e,t){t=_.assign({widget:this},t),this.invokeEventCallback(e,t)}ngOnAttach(){this.callback("attach")}ngOnDetach(){this.callback("detach")}ngOnDestroy(){this.callback("destroy"),super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||u)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(r.Viewport))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:u,selectors:[["","wmPrefabContainer",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(u)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(u,[{type:t.Directive,args:[{selector:"[wmPrefabContainer]",providers:[n.provideAsWidgetRef(u)]}]}],(function(){return[{type:o.Injector},{type:r.Viewport}]}),null);const h=[d,u];class m{static{this.\u0275fac=function(e){return new(e||m)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:m})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(m,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...h],exports:[...h]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(m,{declarations:[d,u],imports:[i.CommonModule,n.WmComponentsModule],exports:[d,u]}),e.PrefabContainerDirective=u,e.PrefabDirective=d,e.PrefabModule=m})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("ngx-bootstrap/pagination"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","ngx-bootstrap/pagination","@wm/components/base","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.pagination={}),e.ng.core,e.ng.common,e.ng.forms,e.pagination,e.wm.components.base,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(i),d=r(n),p=r(a);const u=["wmPagination",""];function h(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"li",23)(1,"a",24),l.\u0275\u0275text(2),l.\u0275\u0275elementEnd()()),2&e){const e=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate2("",e.appLocale.LABEL_TOTAL_RECORDS,": ",e.dataSize,"")}}const m=function(e){return{disabled:e}};function g(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"ul")(1,"li",6)(2,"a",7),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.navigatePage("first",t))})),l.\u0275\u0275elementStart(3,"span",8),l.\u0275\u0275element(4,"i",9),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"span",10),l.\u0275\u0275text(6),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(7,"li",6)(8,"a",11),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.navigatePage("prev",t))})),l.\u0275\u0275elementStart(9,"span",8),l.\u0275\u0275element(10,"i",12),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(11,"span",10),l.\u0275\u0275text(12),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(13,"li",13)(14,"a",14)(15,"input",15),l.\u0275\u0275listener("ngModelChange",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.dn.currentPage=t)}))("keydown",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.onKeyDown(t))}))("change",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.onModelChange(t))})),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(16,"li",16)(17,"a",17),l.\u0275\u0275text(18),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(19,"li",6)(20,"a",18),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.navigatePage("next",t))})),l.\u0275\u0275elementStart(21,"span",8),l.\u0275\u0275element(22,"i",19),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(23,"span",10),l.\u0275\u0275text(24),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(25,"li",6)(26,"a",20),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.navigatePage("last",t))})),l.\u0275\u0275elementStart(27,"span",8),l.\u0275\u0275element(28,"i",21),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(29,"span",10),l.\u0275\u0275text(30),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275template(31,h,3,2,"li",22),l.\u0275\u0275elementEnd()}if(2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275classMapInterpolate1("pagination advanced ",e.navigationClass,""),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(25,m,e.isDisableFirst)),l.\u0275\u0275advance(1),l.\u0275\u0275property("title",e.appLocale.LABEL_FIRST),l.\u0275\u0275attribute("aria-disabled",e.isDisableFirst),l.\u0275\u0275advance(4),l.\u0275\u0275textInterpolate1("Go to first page ",e.isDisableFirst?" , Disabled":"",""),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(27,m,e.isDisablePrevious)),l.\u0275\u0275advance(1),l.\u0275\u0275property("title",e.appLocale.LABEL_PREVIOUS),l.\u0275\u0275attribute("aria-disabled",e.isDisablePrevious),l.\u0275\u0275advance(4),l.\u0275\u0275textInterpolate1("Go to previous page ",e.isDisablePrevious?", Disabled":"",""),l.\u0275\u0275advance(3),l.\u0275\u0275property("disabled",e.isDisableCurrent)("ngModel",e.dn.currentPage),l.\u0275\u0275attribute("aria-label","Showing Page "+e.dn.currentPage+" of "+e.pageCount),l.\u0275\u0275advance(2),l.\u0275\u0275property("hidden",e.isDisableCount),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" / ",e.pageCount,""),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(29,m,e.isDisableNext)),l.\u0275\u0275advance(1),l.\u0275\u0275property("title",e.appLocale.LABEL_NEXT),l.\u0275\u0275attribute("aria-disabled",e.isDisableNext),l.\u0275\u0275advance(4),l.\u0275\u0275textInterpolate1("Go to next page ",e.isDisableNext?" , Disabled":"",""),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(31,m,e.isDisableLast)),l.\u0275\u0275advance(1),l.\u0275\u0275property("title",e.appLocale.LABEL_LAST),l.\u0275\u0275attribute("aria-disabled",e.isDisableLast),l.\u0275\u0275advance(4),l.\u0275\u0275textInterpolate1("Go to last page ",e.isDisableLast?" , Disabled":"",""),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.showrecordcount)}}function f(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"ul")(1,"li",25)(2,"a",26),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.navigatePage("prev",t))})),l.\u0275\u0275elementStart(3,"span",8),l.\u0275\u0275element(4,"i",12),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(5),l.\u0275\u0275elementStart(6,"span",10),l.\u0275\u0275text(7),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(8,"li",27)(9,"a",26),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.navigatePage("next",t))})),l.\u0275\u0275elementStart(10,"span",8),l.\u0275\u0275element(11,"i",19),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(12),l.\u0275\u0275elementStart(13,"span",10),l.\u0275\u0275text(14),l.\u0275\u0275elementEnd()()()()}if(2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275classMapInterpolate1("pager ",e.navigationClass,""),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(11,m,e.isDisablePrevious)),l.\u0275\u0275advance(1),l.\u0275\u0275attribute("aria-disabled",e.isDisablePrevious),l.\u0275\u0275advance(3),l.\u0275\u0275textInterpolate1(" ",e.appLocale.LABEL_PREVIOUS," "),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(e.isDisablePrevious?" , Disabled":""),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(13,m,e.isDisableNext)),l.\u0275\u0275advance(1),l.\u0275\u0275attribute("aria-disabled",e.isDisableNext),l.\u0275\u0275advance(3),l.\u0275\u0275textInterpolate1(" ",e.appLocale.LABEL_NEXT," "),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(e.isDisableNext?" , Disabled":"")}}function v(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"pagination",28),l.\u0275\u0275listener("pageChanged",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.pageChanged(t))})),l.\u0275\u0275elementEnd()}if(2&e){const e=l.\u0275\u0275nextContext(),t=l.\u0275\u0275reference(7),i=l.\u0275\u0275reference(9),n=l.\u0275\u0275reference(5);l.\u0275\u0275property("ngClass",e.navigationClass)("itemsPerPage",e.maxResults)("totalItems",e.dataSize)("ngModel",e.dn.currentPage)("boundaryLinks",e.boundarylinks)("maxSize",e.maxsize)("directionLinks",e.directionlinks)("customPreviousTemplate",t)("customNextTemplate",i)("customPageTemplate",n),l.\u0275\u0275attribute("aria-label","Showing Page "+e.dn.currentPage+" of "+e.pageCount+" pages")}}function b(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"ul",29)(1,"li",30)(2,"a",24),l.\u0275\u0275text(3),l.\u0275\u0275elementEnd()()()),2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275advance(3),l.\u0275\u0275textInterpolate2("",e.appLocale.LABEL_TOTAL_RECORDS,": ",e.dataSize,"")}}function y(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"span",10),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&e){const e=l.\u0275\u0275nextContext().$implicit,t=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",", Showing page "+e.number+" of "+t.pageCount,"")}}function w(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"span",10),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(2),l.\u0275\u0275template(3,y,2,1,"span",31)),2&e){const e=t.$implicit;l.\u0275\u0275attribute("data-isacitvepage",e.active),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate("Page "),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",e.number," "),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.active)}}function P(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"span",10),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&e){const e=t.disabled;l.\u0275\u0275attribute("data-isdisabled",e),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1("Go to Previous page ",e?", Disabled":"","")}}function C(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"span",10),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&e){const e=t.disabled;l.\u0275\u0275attribute("data-isdisabled",e),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1("Go to Next page ",e?", Disabled":"","")}}const A={widgetType:"wm-pagination",hostClass:"app-datanavigator clearfix"},I={Pager:{small:"pager-sm",large:"pager-lg"},Basic:{small:"pagination-sm",large:"pagination-lg"},Classic:{small:"pagination-sm",large:"pagination-lg"}};class E extends s.StylableComponent{static{this.initializeProps=void s.register("wm-pagination",new Map([["boundarylinks",{value:!1,...s.PROP_BOOLEAN}],["class",s.PROP_STRING],["dataset",s.PROP_ANY],["directionlinks",{value:!0,...s.PROP_BOOLEAN}],["forceellipses",{value:!0,...s.PROP_BOOLEAN}],["maxResults",s.PROP_NUMBER],["maxsize",{value:5,...s.PROP_NUMBER}],["name",s.PROP_STRING],["navigation",{value:"Basic",...s.PROP_STRING}],["navigationalign",{value:"left",...s.PROP_STRING}],["navigationsize",s.PROP_STRING],["show",{value:!0,...s.PROP_BOOLEAN}],["showrecordcount",s.PROP_BOOLEAN],["tabindex",{value:0,...s.PROP_NUMBER}]]))}_setAriaForBasicNavigation(){_.forEach(this.nativeElement.getElementsByTagName("a"),(e=>{e.setAttribute("href","javascript:void(0);");const t=e.querySelector("span");"true"===t?.dataset.isacitvepage&&e.setAttribute("aria-current","true"),"true"===t?.dataset.isdisabled?e.setAttribute("aria-disabled","true"):e.removeAttribute("aria-disabled")}))}constructor(e,i){super(e,A),this.parent=i,this.resultEmitter=new t.EventEmitter,this.maxResultsEmitter=new t.EventEmitter,this.dn={currentPage:1},this.pageCount=0,this.isDisableNext=!0,this.isDisablePrevious=!0,this.isDisableFirst=!0,this.isDisableLast=!0,this._debouncedApplyDataset=o.debounce((()=>this.widget.dataset=this.dataset),s.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME),this._debouncedPageChanged=o.debounce((e=>{const t=e&&e.page;if(t!==this.dn.currentPage){const e=this.parent||this;this.dn.currentPage=t,e.invokeEventCallback("paginationchange",{$event:void 0,$index:this.dn.currentPage}),this.goToPage(),"Basic"===this.navigation&&this._setAriaForBasicNavigation()}}),s.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME),s.styler(this.nativeElement,this)}setResult(e){this.result=e,this.resultEmitter.emit(this.result)}updateNavSize(){const e=I[this.navcontrols];e&&this.navigationsize?this.navigationClass=e[this.navigationsize]:this.navigationClass=""}resetPageNavigation(){this.pageCount=0,this.dn.currentPage=1,this.dataSize=0}calculatePagingValues(){this.pageCount=this.dataSize>this.maxResults?Math.ceil(this.dataSize/this.maxResults):this.dataSize<0?0:1,this.dn.currentPage=this.dn.currentPage||1}setDefaultPagingValues(e,t,i){e||t?(this.maxResults=t||this.maxResults,this.dataSize=o.isDefined(e)?e:this.dataSize,this.dn.currentPage=i||this.dn.currentPage,this.calculatePagingValues()):(this.pageCount=1,this.dn.currentPage=1,this.maxResults=e,this.dataSize=e),this.maxResultsEmitter.emit(this.maxResults)}checkDataSize(e,t,i){-1===e||e===o.AppConstants.INT_MAX_VALUE?(this.prevshowrecordcount=this.showrecordcount,this.isDisableLast=!0,this.isDisableCount=!0,this.showrecordcount=!1,t<i&&(this.isDisableNext=!0)):(this.isDisableCount=!1,this.showrecordcount=this.prevshowrecordcount||this.showrecordcount)}disableNavigation(){const e=1===this.dn.currentPage,t=this.dn.currentPage===this.pageCount;this.pagination?.next?(this.isDisableFirst=this.isDisablePrevious=!this.pagination.prev,this.isDisableNext=this.isDisableLast=!this.pagination.next):(this.isDisableFirst=this.isDisablePrevious=e,this.isDisableNext=this.isDisableLast=t),this.isDisableCurrent=e&&t,this.dataset&&this.dataset.length&&this.isDisableNext&&this.parent.onDemandLoad&&"wm-table"===this.parent.widgetType&&this.parent.callDataGridMethod("hideLoadingIndicator",this.isDisableNext,this.parent.infScroll)}isDataSourceHasPaging(){return this.datasource&&this.datasource.execute(o.DataSource.Operation.IS_PAGEABLE)}setNonPageableData(e){let t,i,n,a;t=_.isArray(e)?e.length:_.isEmpty(e)?0:1,i=this.options&&this.options.maxResults||t,n=this.datasource&&(this.datasource.execute(o.DataSource.Operation.IS_API_AWARE)||"wm-table"===this.parent.widgetType&&this.parent.gridOptions.isNavTypeScrollOrOndemand()&&(_.get(this.parent,"gridOptions.lastActionPerformed")===this.parent.gridOptions.ACTIONS.DATASET_UPDATE||!_.get(this.parent,"gridOptions.isNextPageData")))?1:this.dn.currentPage||1,this.setDefaultPagingValues(t,i,n),this.disableNavigation(),a=(this.dn.currentPage-1)*this.maxResults,this.setResult(_.isArray(e)?e.slice(a,a+this.maxResults):e)}setPagingValues(e){let t,i,n,a,r={};this.__fullData=e,this.binddataset?(a=this.datasource||{},r=a._options||{},e?this.isDataSourceHasPaging()?(this.pagination=this.datasource.execute(o.DataSource.Operation.GET_PAGING_OPTIONS)||{},this.filterFields=r.filterFields||{},this.logicalOp=r.logicalOp||"",this.sortOptions=r.orderBy||(_.isArray(this.pagination.sort)?s.getOrderByExpr(this.pagination.sort):""),t=this.pagination.totalElements,i=this.pagination.size,this.pagination.numberOfElements>0?(o.isDefined(this.pagination.number)&&(this.dn.currentPage=this.pagination.number+1),n=this.dn.currentPage||1):n=1,this.setDefaultPagingValues(t,i,n),this.disableNavigation(),this.checkDataSize(t,this.pagination.numberOfElements,this.pagination.size),this.setResult(e)):_.isString(e)||this.setNonPageableData(e):(this.setResult(e),this.resetPageNavigation()),"Basic"===this.navigation&&this._setAriaForBasicNavigation()):e&&!_.isString(e)&&this.setNonPageableData(e)}isFirstPage(){return 1===this.dn.currentPage||!this.dn.currentPage}isLastPage(){return this.dn.currentPage===this.pageCount}goToLastPage(e,t,i){this.isLastPage()?e&&this.goToPage(t,i):(this.dn.currentPage=this.pageCount,this.goToPage(t,i))}goToFirstPage(e,t,i){this.isFirstPage()?e&&this.goToPage(t,i):(this.dn.currentPage=1,this.goToPage(t,i))}goToPage(e,t){this.firstRow=(this.dn.currentPage-1)*this.maxResults;const i=this.parent.statePersistence.computeMode(this.statehandler);!i||"none"===i.toLowerCase()||"wm-table"!==this.parent.widgetType&&"wm-list"!==this.parent.widgetType||(this.parent._selectedItemsExist=!0,this.isFirstPage()?this.parent.statePersistence.removeWidgetState(this.parent,"pagination"):s.unsupportedStatePersistenceTypes.indexOf(this.parent.navigation)<0?this.parent.statePersistence.setWidgetState(this.parent,{pagination:this.dn.currentPage}):"wm-list"!==this.parent.widgetType&&"wm-table"!==this.parent.widgetType||console.warn("Retain State handling on Widget "+this.parent.name+" is not supported for current pagination type.")),this.getPageData(e,t)}onPageDataReady(e,t,i){this.disableNavigation(),this.invokeSetRecord(e,t),o.triggerFn(i)}getPageData(e,t){let i,n;if(this.isDataSourceHasPaging()){let i=this.dn.currentPage;this.isEditNotInCurrentPage()&&"delete"!==this.parent.gridOptions.lastActionPerformed&&(i=this.parent.actionRowPage),this.datasource.execute(o.DataSource.Operation.LIST_RECORDS,{page:i,filterFields:this.filterFields,orderBy:this.sortOptions,logicalOp:this.logicalOp,matchMode:"anywhereignorecase"}).then((i=>{this.onPageDataReady(e,i&&i.data,t),o.$appDigest()}),(e=>{}))}else n=this.isEditNotInCurrentPage()?(this.parent.actionRowPage-1)*this.maxResults:(this.dn.currentPage-1)*this.maxResults,i=_.isArray(this.__fullData)?this.__fullData.slice(n,n+this.maxResults):this.__fullData,this.setResult(i),this.onPageDataReady(e,i,t)}isEditNotInCurrentPage(){const e=this.dn.currentPage;return"wm-table"===this.parent.widgetType&&e===this.parent.currentPage&&this.parent.actionRowPage&&this.parent.actionRowPage<e}invokeSetRecord(e,t){const i={currentPage:this.dn.currentPage,size:this.maxResults,totalElements:this.dataSize,totalPages:this.pageCount};this.parent?this.parent.invokeEventCallback("setrecord",{$event:e,$data:t,$index:this.dn.currentPage,pageInfo:i,data:t}):this.invokeEventCallback("setrecord",{$event:e,$data:t,$index:this.dn.currentPage,pageInfo:i,data:t})}validateCurrentPage(e,t){return!e||!(isNaN(this.dn.currentPage)||this.dn.currentPage<=0||this.pageCount&&(this.dn.currentPage>this.pageCount||_.isNull(this.dn.currentPage)))||(this.dn.currentPage<=0?this.dn.currentPage=1:this.dn.currentPage>this.pageCount&&(this.dn.currentPage=this.pageCount),!1)}onModelChange(e){this.validateCurrentPage(e)&&this.goToPage(e)}onKeyDown(e){const t=$(e.target).closest("a");return"KeyE"===e.code?(t.addClass("ng-invalid"),!1):(t.removeClass("ng-invalid"),!0)}pageChanged(e){this._debouncedPageChanged(e)}navigatePage(e,t,i,n){switch(o.isDefined(this.parent.isDataLoading)&&!this.isDisableNext&&(this.parent.isDataLoading=!0,this.parent.infScroll&&(this.parent.variableInflight=!0,this.parent.callDataGridMethod("showLoadingIndicator",this.parent.loadingdatamsg,!0))),"wm-table"===this.parent.widgetType&&this.parent.gridOptions.isNavTypeScrollOrOndemand()&&(this.parent.gridOptions.setLastActionPerformed(this.parent.gridOptions.ACTIONS.DEFAULT),this.parent.gridOptions.setIsDatasetUpdated(!1)),this.invokeEventCallback("paginationchange",{$event:void 0,$index:this.dn.currentPage}),this.dn.currentPage=+this.dn.currentPage,e){case"first":return void this.goToFirstPage(i,t,n);case"prev":if(!(this.pagination?.next||!this.isFirstPage()&&this.validateCurrentPage(t,n)))return;this.pagination?.next&&(this.datasource.pagination.isNext=!1,this.datasource.pagination.isPrev=!0),this.dn.currentPage-=1;break;case"next":if(!(this.pagination?.next||!this.isLastPage()&&this.validateCurrentPage(t,n)))return;this.pagination?.next&&(this.datasource.pagination.isNext=!0,this.datasource.pagination.isPrev=!1),this.dn.currentPage+=1;break;case"last":return void this.goToLastPage(i,t,n)}this.goToPage(t,n)}setBindDataSet(e,t,i,n,a,s,r){const l=e.split(".");let c;if(this.statehandler=r,"Variables"!==l[0]&&"Widgets"!==l[0]||(c=`${l[0]}.${l[1]}.pagination`),!a&&n&&!s)return this.dataset=n,void this._debouncedApplyDataset();this.binddataset=e,setTimeout((()=>{this.registerDestroyListener(o.$watch(e,t,s?i:{},(e=>{e?(this.dataset=e,this._debouncedApplyDataset()):this.widget.dataset=e}))),c&&this.registerDestroyListener(o.$watch(c,t,{},(()=>this._debouncedApplyDataset())))})),s||(this.datasource=i)}setDataSource(e){this.datasource=e}onPropertyChange(e,t,i){if("dataset"===e){let e;e=this.parent&&this.parent.onDataNavigatorDataSetChange?this.parent.onDataNavigatorDataSetChange(t):t,"wm-table"===this.parent.widgetType&&(this.parent._triggeredByUser=!1),this.isEditNotInCurrentPage()?this.setResult(e):this.setPagingValues(e)}else"navigation"===e?("Advanced"===t&&(this.navigation="Classic"),this.updateNavSize(),this.navcontrols=t):"navigationsize"===e?this.updateNavSize():"navigationalign"===e?o.switchClass(this.nativeElement,`text-${t}`,`text-${i}`):"maxResults"===e?this.setPagingValues(this.dataset):super.onPropertyChange(e,t,i)}ngAfterViewInit(){this.nativeElement.onclick=e=>{e.stopPropagation()}}static{this.\u0275fac=function(e){return new(e||E)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275directiveInject(s.WidgetRef,4))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:E,selectors:[["","wmPagination",""]],outputs:{resultEmitter:"resultEmitter",maxResultsEmitter:"maxResultsEmitter"},features:[l.\u0275\u0275ProvidersFeature([s.provideAsWidgetRef(E)]),l.\u0275\u0275InheritDefinitionFeature],attrs:u,decls:10,vars:4,consts:[[3,"class",4,"ngIf"],["class","pagination basic","role","navigation","firstText","Firtst","lastText","Last",3,"ngClass","itemsPerPage","totalItems","ngModel","boundaryLinks","maxSize","directionLinks","customPreviousTemplate","customNextTemplate","customPageTemplate","pageChanged",4,"ngIf"],["class","pagination",4,"ngIf"],["pageTemplate",""],["prevTemplate",""],["nextTemplate",""],[3,"ngClass"],["name","first","href","javascript:void(0);",3,"title","click"],["aria-hidden","true"],[1,"wi","wi-first-page"],[1,"sr-only"],["name","prev","href","javascript:void(0);",3,"title","click"],[1,"wi","wi-chevron-left"],[1,"pagecount","disabled"],["href","javascript:void(0);"],["type","number",1,"form-control",3,"disabled","ngModel","ngModelChange","keydown","change"],[1,"disabled"],[3,"hidden"],["name","next","href","javascript:void(0);",3,"title","click"],[1,"wi","wi-chevron-right"],["name","last","href","javascript:void(0);",3,"title","click"],[1,"wi","wi-last-page"],["class","totalcount disabled",4,"ngIf"],[1,"totalcount","disabled"],["href","javascript:void(0);","tabindex","-1","aria-disabled","true"],[1,"previous",3,"ngClass"],["href","javascript:void(0);",3,"click"],[1,"next",3,"ngClass"],["role","navigation","firstText","Firtst","lastText","Last",1,"pagination","basic",3,"ngClass","itemsPerPage","totalItems","ngModel","boundaryLinks","maxSize","directionLinks","customPreviousTemplate","customNextTemplate","customPageTemplate","pageChanged"],[1,"pagination"],[1,"totalcount","disabled","basiccount"],["class","sr-only",4,"ngIf"]],template:function(e,t){1&e&&(l.\u0275\u0275template(0,g,32,33,"ul",0),l.\u0275\u0275template(1,f,15,15,"ul",0),l.\u0275\u0275template(2,v,1,11,"pagination",1),l.\u0275\u0275template(3,b,4,2,"ul",2),l.\u0275\u0275template(4,w,4,4,"ng-template",null,3,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275template(6,P,2,2,"ng-template",null,4,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275template(8,C,2,2,"ng-template",null,5,l.\u0275\u0275templateRefExtractor)),2&e&&(l.\u0275\u0275property("ngIf","Classic"===t.navcontrols),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","Pager"===t.navcontrols),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","Basic"===t.navcontrols),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","Basic"===t.navcontrols&&t.showrecordcount))},dependencies:[c.NgClass,c.NgIf,d.DefaultValueAccessor,d.NumberValueAccessor,d.NgControlStatus,d.NgModel,p.PaginationComponent],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(E,[{type:t.Component,args:[{selector:"[wmPagination]",providers:[s.provideAsWidgetRef(E)],template:'\n<ul class="pagination advanced {{navigationClass}}" *ngIf="navcontrols === \'Classic\'">\n    <li [ngClass]="{\'disabled\':isDisableFirst}">\n        <a [title]="appLocale.LABEL_FIRST" name="first" href="javascript:void(0);"\n           [attr.aria-disabled]="isDisableFirst"\n           (click)="navigatePage(\'first\', $event)">\n            <span aria-hidden="true"><i class="wi wi-first-page"></i></span>\n            <span class="sr-only">Go to first page {{ isDisableFirst ? \' , Disabled\' : \'\'}}</span>\n        </a>\n    </li>\n    <li [ngClass]="{\'disabled\':isDisablePrevious}">\n        <a [title]="appLocale.LABEL_PREVIOUS" name="prev" href="javascript:void(0);"\n            [attr.aria-disabled]="isDisablePrevious"\n            (click)="navigatePage(\'prev\', $event)">\n            <span aria-hidden="true"><i class="wi wi-chevron-left"></i></span>\n            <span class="sr-only">Go to previous page {{ isDisablePrevious ? \', Disabled\' : \'\'}}</span>\n        </a>\n    </li>\n    <li class="pagecount disabled">\n        <a href="javascript:void(0);">\n            <input type="number" [disabled]="isDisableCurrent" [(ngModel)]="dn.currentPage" [attr.aria-label]="\'Showing Page \' + dn.currentPage + \' of \' + pageCount"\n                  (keydown)="onKeyDown($event)" (change)="onModelChange($event)" class="form-control"/>\n        </a>\n    </li>\n    <li class="disabled">\n        <a [hidden]="isDisableCount"> / {{pageCount}}</a>\n    </li>\n    <li [ngClass]="{\'disabled\':isDisableNext}">\n        <a [title]="appLocale.LABEL_NEXT" name="next" href="javascript:void(0);"\n           [attr.aria-disabled]="isDisableNext"\n           (click)="navigatePage(\'next\', $event)">\n            <span aria-hidden="true"><i class="wi wi-chevron-right"></i></span>\n            <span class="sr-only">Go to next page {{ isDisableNext ? \' , Disabled\' : \'\'}}</span>\n        </a>\n    </li>\n    <li [ngClass]="{\'disabled\':isDisableLast}">\n        <a [title]="appLocale.LABEL_LAST" name="last" href="javascript:void(0);"\n           [attr.aria-disabled]="isDisableLast"\n           (click)="navigatePage(\'last\', $event)">\n            <span aria-hidden="true"><i class="wi wi-last-page"></i></span>\n            <span class="sr-only">Go to last page {{ isDisableLast ? \' , Disabled\' : \'\'}}</span>\n        </a>\n    </li>\n    <li *ngIf="showrecordcount" class="totalcount disabled">\n        <a href="javascript:void(0);" tabindex="-1" aria-disabled="true">{{appLocale.LABEL_TOTAL_RECORDS}}: {{dataSize}}</a>\n    </li>\n</ul>\n<ul class="pager {{navigationClass}}" *ngIf="navcontrols === \'Pager\'">\n    <li class="previous" [ngClass]="{\'disabled\':isDisablePrevious}">\n        <a href="javascript:void(0);" (click)="navigatePage(\'prev\', $event)"\n           [attr.aria-disabled]="isDisablePrevious">\n            <span aria-hidden="true"><i class="wi wi-chevron-left"></i></span>\n            {{appLocale.LABEL_PREVIOUS}}\n            <span class="sr-only">{{ isDisablePrevious ? \' , Disabled\' : \'\'}}</span>\n        </a>\n    </li>\n    <li class="next" [ngClass]="{\'disabled\':isDisableNext}">\n        <a href="javascript:void(0);" (click)="navigatePage(\'next\', $event)"\n           [attr.aria-disabled]="isDisableNext">\n            <span aria-hidden="true"><i class="wi wi-chevron-right"></i></span>\n            {{appLocale.LABEL_NEXT}}\n            <span class="sr-only">{{ isDisableNext ? \' , Disabled\' : \'\'}}</span>\n        </a>\n    </li>\n</ul>\n\n<pagination class="pagination basic" [ngClass]="navigationClass" *ngIf="navcontrols === \'Basic\'" role="navigation"\n            [itemsPerPage]="maxResults" [totalItems]="dataSize"\n            [ngModel]="dn.currentPage" (pageChanged)="pageChanged($event)"\n            [attr.aria-label]="\'Showing Page \' + dn.currentPage + \' of \' + pageCount + \' pages\'"\n            [boundaryLinks]="boundarylinks" [maxSize]="maxsize"\n            [directionLinks]="directionlinks"\n            firstText="Firtst" lastText="Last"\n            [customPreviousTemplate]="prevTemplate"\n            [customNextTemplate]="nextTemplate"\n            [customPageTemplate]="pageTemplate"></pagination>\n\n<ul *ngIf="navcontrols === \'Basic\' && showrecordcount" class="pagination">\n    <li class="totalcount disabled basiccount">\n        <a href="javascript:void(0);" tabindex="-1" aria-disabled="true">{{appLocale.LABEL_TOTAL_RECORDS}}: {{dataSize}}</a>\n    </li>\n</ul>\n\n<ng-template #pageTemplate let-page>\n    <span class="sr-only" [attr.data-isacitvepage]="page.active">{{\'Page \'}}</span>\n    {{page.number}}\n    <span class="sr-only" *ngIf="page.active"> {{\', Showing page \' + page.number + \' of \' + pageCount}}</span>\n</ng-template>\n<ng-template #prevTemplate let-disabled="disabled">\n    <span class="sr-only" [attr.data-isdisabled]="disabled">Go to Previous page {{disabled ? \', Disabled\' : \'\'}}</span>\n</ng-template>\n<ng-template #nextTemplate let-disabled="disabled">\n    <span class="sr-only" [attr.data-isdisabled]="disabled">Go to Next page {{disabled ? \', Disabled\' : \'\'}}</span>\n</ng-template>\n'}]}],(function(){return[{type:l.Injector},{type:void 0,decorators:[{type:t.SkipSelf},{type:t.Inject,args:[s.WidgetRef]}]}]}),{resultEmitter:[{type:t.Output}],maxResultsEmitter:[{type:t.Output}]});const O=[E];class x{static{this.\u0275fac=function(e){return new(e||x)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:x})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,n.FormsModule,a.PaginationModule,s.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(x,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.FormsModule,a.PaginationModule,s.WmComponentsModule],declarations:[...O],exports:[...O]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(x,{declarations:[E],imports:[i.CommonModule,n.FormsModule,a.PaginationModule,s.WmComponentsModule],exports:[E]}),e.PaginationComponent=E,e.PaginationModule=x})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("ngx-bootstrap/dropdown"),require("@wm/components/base"),require("@wm/components/basic"),require("@wm/components/navigation/menu"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","ngx-bootstrap/dropdown","@wm/components/base","@wm/components/basic","@wm/components/navigation/menu","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.card={}),e.ng.core,e.ng.common,e.dropdown,e.wm.components.base,e.wm.components.basic,e.wm.components.navigation.menu,e.wm.core)}(this,(function(e,t,i,n,a,s,o,r){"use strict";function l(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var c=l(t),d=l(i),p=l(n),u=l(a),h=l(s),m=l(o);const g=["cardContainerWrapper"],f=["wmCard",""];function v(e,t){if(1&e&&c.\u0275\u0275element(0,"i",12),2&e){const e=c.\u0275\u0275nextContext(3);c.\u0275\u0275property("ngClass",e.iconclass)}}function b(e,t){if(1&e&&c.\u0275\u0275element(0,"img",13),2&e){const e=c.\u0275\u0275nextContext(3);c.\u0275\u0275property("src",e.iconurl,c.\u0275\u0275sanitizeUrl)}}function y(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",9),c.\u0275\u0275template(1,v,1,1,"i",10),c.\u0275\u0275template(2,b,1,1,"img",11),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.iconclass&&!e.iconurl),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.iconurl)}}function w(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",14),c.\u0275\u0275element(1,"div",15),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(1),c.\u0275\u0275property("autoClose","disabled"!==e.autoclose)}}function P(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",3),c.\u0275\u0275template(1,y,3,2,"div",4),c.\u0275\u0275elementStart(2,"div",5),c.\u0275\u0275element(3,"h4",6)(4,"h5",7),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(5,w,2,1,"div",8),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.iconclass||e.iconurl),c.\u0275\u0275advance(2),c.\u0275\u0275property("textContent",e.title),c.\u0275\u0275advance(1),c.\u0275\u0275property("textContent",e.subheading),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.actions)}}const C=function(e){return{"max-height":e}};function A(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",16),c.\u0275\u0275element(1,"img",17),c.\u0275\u0275elementEnd()),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngStyle",c.\u0275\u0275pureFunction1(1,C,e.imageheight))}}const _=["*","*","*"],I={widgetType:"wm-card",hostClass:"app-card card app-panel"};class E extends o.MenuAdapterComponent{static{this.initializeProps=void a.register("wm-card",new Map([["actions",a.PROP_STRING],["animation",a.PROP_STRING],["class",a.PROP_STRING],["iconclass",a.PROP_STRING],["iconurl",a.PROP_STRING],["imageheight",{value:"200px",...a.PROP_STRING}],["itemaction",a.PROP_STRING],["itemchildren",a.PROP_STRING],["itemicon",a.PROP_STRING],["itemlabel",a.PROP_STRING],["itemlink",a.PROP_STRING],["name",a.PROP_STRING],["picturesource",a.PROP_STRING],["picturetitle",{value:"",...a.PROP_STRING}],["show",{value:!0,...a.PROP_BOOLEAN}],["subheading",a.PROP_STRING],["title",a.PROP_STRING],["userrole",a.PROP_STRING]]))}constructor(e,t){super(e,I),this.render2=t,a.styler(this.nativeElement,this,a.APPLY_STYLES_TYPE.SHELL)}ngAfterViewInit(){super.ngAfterViewInit(),a.styler(this.cardContainerElRef.nativeElement,this,a.APPLY_STYLES_TYPE.INNER_SHELL)}ngOnInit(){super.ngOnInit(),r.removeAttr(this.nativeElement.parentElement,"tabindex"),r.setAttr(this.nativeElement,"tabindex",0),this.render2.listen(this.nativeElement,"keydown.Enter",(e=>{e.preventDefault(),this.nativeElement.click()}))}onPropertyChange(e,t,i){"title"===e||"subheading"===e||"iconclass"===e||"iconurl"===e||"actions"===e?this.showHeader=!!(this.title||this.subheading||this.iconclass||this.iconurl||this.actions):super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||E)(c.\u0275\u0275directiveInject(c.Injector),c.\u0275\u0275directiveInject(c.Renderer2))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:E,selectors:[["","wmCard",""]],viewQuery:function(e,t){if(1&e&&c.\u0275\u0275viewQuery(g,7),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.cardContainerElRef=e.first)}},features:[c.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(E)]),c.\u0275\u0275InheritDefinitionFeature],attrs:f,ngContentSelectors:_,decls:9,vars:2,consts:[["class","app-card-header panel-heading",4,"ngIf"],["class","app-card-image",3,"ngStyle",4,"ngIf"],["cardContainerWrapper",""],[1,"app-card-header","panel-heading"],["class","app-card-avatar",4,"ngIf"],[1,"app-card-header-text"],[1,"card-heading",3,"textContent"],[1,"card-subheading","text-muted",3,"textContent"],["class","panel-actions",4,"ngIf"],[1,"app-card-avatar"],["class","app-icon",3,"ngClass",4,"ngIf"],["class","img-circle",3,"src",4,"ngIf"],[1,"app-icon",3,"ngClass"],[1,"img-circle",3,"src"],[1,"panel-actions"],["wmMenu","","dropdown","","type","anchor","iconclass","wm-sl-l sl-more-menu-vertical","menuposition","down,left","hint","Actions","caption","","dataset.bind","actions",1,"panel-action",3,"autoClose"],[1,"app-card-image",3,"ngStyle"],["wmPicture","","picturesource.bind","picturesource","hint.bind","picturetitle",1,"card-image"]],template:function(e,t){1&e&&(c.\u0275\u0275projectionDef(_),c.\u0275\u0275template(0,P,6,4,"div",0),c.\u0275\u0275template(1,A,2,3,"div",1),c.\u0275\u0275elementStart(2,"div",null,2),c.\u0275\u0275projection(4,0,["ngProjectAs","[wmCardContent]",5,["","wmCardContent",""]]),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(5,"div"),c.\u0275\u0275projection(6,1,["ngProjectAs","[wmCardActions]",5,["","wmCardActions",""]]),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(7,"div"),c.\u0275\u0275projection(8,2,["ngProjectAs","[wmCardFooter]",5,["","wmCardFooter",""]]),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275property("ngIf",t.showHeader),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.picturesource))},dependencies:[h.PictureDirective,p.BsDropdownDirective,d.NgClass,d.NgIf,d.NgStyle,m.MenuComponent,u.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(E,[{type:t.Component,args:[{selector:"[wmCard]",providers:[a.provideAsWidgetRef(E)],template:'<div class="app-card-header panel-heading" *ngIf="showHeader">\n    <div class="app-card-avatar" *ngIf="iconclass || iconurl">\n        <i class="app-icon" [ngClass]="iconclass" *ngIf="iconclass && !iconurl"></i>\n        <img class="img-circle" [src]="iconurl" *ngIf="iconurl" />\n    </div>\n    <div class="app-card-header-text">\n        <h4 class="card-heading" [textContent]="title"></h4>\n        <h5 class="card-subheading text-muted" [textContent]="subheading"></h5>\n    </div>\n    <div class="panel-actions" *ngIf="actions">\n        \x3c!-- TODO(punith) need to bind autoclose--\x3e\n        <div wmMenu dropdown\n             [autoClose]="autoclose !== \'disabled\'"\n             class="panel-action"\n             type="anchor"\n             iconclass="wm-sl-l sl-more-menu-vertical"\n             menuposition="down,left"\n             hint="Actions"\n             caption=""\n             dataset.bind="actions">\n        </div>\n    </div>\n</div>\n<div class="app-card-image" *ngIf="picturesource"  [ngStyle]="{\'max-height\':imageheight}">\n   <img wmPicture class="card-image" picturesource.bind="picturesource" hint.bind="picturetitle" />\n</div>\n<div #cardContainerWrapper>\n    <ng-content ngProjectAs="[wmCardContent]"></ng-content>\n</div>\n<div>\n    <ng-content ngProjectAs="[wmCardActions]"></ng-content>\n</div>\n<div>\n    <ng-content ngProjectAs="[wmCardFooter]"></ng-content>\n</div>\n'}]}],(function(){return[{type:c.Injector},{type:c.Renderer2}]}),{cardContainerElRef:[{type:t.ViewChild,args:["cardContainerWrapper",{static:!0}]}]});const O={widgetType:"wm-card-actions",hostClass:"app-card-actions"};class x extends a.StylableComponent{static{this.initializeProps=void a.register("wm-card-actions",new Map([["class",a.PROP_STRING],["name",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}]]))}constructor(e){super(e,O),a.styler(this.nativeElement,this,a.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||x)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:x,selectors:[["","wmCardActions",""]],features:[c.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(x,[{type:t.Directive,args:[{selector:"[wmCardActions]"}]}],(function(){return[{type:c.Injector}]}),null);const R=["cardContentContainer"],D=["wmCardContent",""],S=["*"],T={widgetType:"wm-card-content",hostClass:"app-card-content card-body card-block"};class M extends a.StylableComponent{static{this.initializeProps=void a.register("wm-card-content",new Map([["class",a.PROP_STRING],["content",a.PROP_STRING],["name",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}]]))}constructor(e){super(e,T)}ngAfterViewInit(){super.ngAfterViewInit(),a.styler(this.cardContentContainerElRef.nativeElement,this,a.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||M)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:M,selectors:[["div","wmCardContent",""]],viewQuery:function(e,t){if(1&e&&c.\u0275\u0275viewQuery(R,5),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.cardContentContainerElRef=e.first)}},features:[c.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(M)]),c.\u0275\u0275InheritDefinitionFeature],attrs:D,ngContentSelectors:S,decls:3,vars:0,consts:[["partial-container-target",""],["cardContentContainer",""]],template:function(e,t){1&e&&(c.\u0275\u0275projectionDef(),c.\u0275\u0275elementStart(0,"div",0,1),c.\u0275\u0275projection(2),c.\u0275\u0275elementEnd())},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(M,[{type:t.Component,args:[{selector:"div[wmCardContent]",providers:[a.provideAsWidgetRef(M)],template:"<div partial-container-target #cardContentContainer>\n    <ng-content></ng-content>\n</div>"}]}],(function(){return[{type:c.Injector}]}),{cardContentContainerElRef:[{type:t.ViewChild,args:["cardContentContainer"]}]});const N={widgetType:"wm-card-footer",hostClass:"app-card-footer text-muted card-footer"};class k extends a.StylableComponent{static{this.initializeProps=void a.register("wm-card-footer",new Map([["class",a.PROP_STRING],["name",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}]]))}constructor(e){super(e,N),a.styler(this.nativeElement,this,a.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||k)(c.\u0275\u0275directiveInject(c.Injector))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:k,selectors:[["","wmCardFooter",""]],features:[c.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(k,[{type:t.Directive,args:[{selector:"[wmCardFooter]"}]}],(function(){return[{type:c.Injector}]}),null);const L=[E,x,M,k];class F{static{this.\u0275fac=function(e){return new(e||F)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:F})}static{this.\u0275inj=c.\u0275\u0275defineInjector({imports:[s.BasicModule,n.BsDropdownModule,i.CommonModule,o.MenuModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(F,[{type:t.NgModule,args:[{imports:[s.BasicModule,n.BsDropdownModule,i.CommonModule,o.MenuModule,a.WmComponentsModule],declarations:[...L],exports:[...L]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&c.\u0275\u0275setNgModuleScope(F,{declarations:[E,x,M,k],imports:[s.BasicModule,n.BsDropdownModule,i.CommonModule,o.MenuModule,a.WmComponentsModule],exports:[E,x,M,k]}),e.CardActionsDirective=x,e.CardComponent=E,e.CardContentComponent=M,e.CardFooterDirective=k,e.CardModule=F})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/data/pagination"),require("@wm/core"),require("@wm/components/input"),require("rxjs"),require("@swipey")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/data/pagination","@wm/core","@wm/components/input","rxjs","@swipey"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.list={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.data.pagination,e.wm.core,e.wm.components.input,e.rxjs,e.swipey)}(this,(function(e,t,i,n,a,s,o,r,l){"use strict";function c(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var d=c(t),p=c(i),u=c(n),h=c(a),m=c(s);class g{onFocus(){this.listComponent.lastSelectedItem=this}get $index(){return this.context.index}get $even(){return this.context.even}get $odd(){return this.context.odd}get $first(){return this.context.first}get $last(){return this.context.last}get currentItemWidgets(){const e=Array.from(this.nativeElement.querySelectorAll("[widget-id]"));return Object.assign(this._currentItemWidgets,e.reduce(((e,t)=>(e[t.widget.name]=t.widget,e)),{}))}set wmListItem(e){this.item=e}constructor(e,i,n,a){this.inj=e,this.app=n,this._viewParent=a,this.destroy=new r.Subject,this.destroy$=this.destroy.asObservable(),this.itemClass="",this._currentItemWidgets={},this.isActive=!1,this.disableItem=!1,this.viewContainerRef=e.get(t.ViewContainerRef),this.nativeElement=i.nativeElement,this.listComponent=a,this.context=this.inj._lView[8],this.itemClassWatcher(this.listComponent),this.disableItemWatcher(this.listComponent),$(this.nativeElement).data("listItemContext",this)}registerWatch(e,t){this.destroy$.subscribe(s.$watch(e,this.listComponent.viewParent,this,t))}itemClassWatcher(e){e.binditemclass?this.registerWatch(e.binditemclass,(e=>this.itemClass=e||"")):this.itemClass=e.itemclass}disableItemWatcher(e){e.binddisableitem?this.registerWatch(e.binddisableitem,(e=>this.disableItem=e||!1)):this.disableItem=e.disableitem||!1}setUpCUDHandlers(){const e=this.nativeElement.querySelector(".edit-list-item"),t=this.nativeElement.querySelector(".delete-list-item");e&&e.addEventListener("click",(e=>{this.listComponent.update()})),t&&t.addEventListener("click",(e=>{this.listComponent.delete()}))}ngOnInit(){this.listComponent.mouseEnterCB&&this.nativeElement.addEventListener("mouseenter",(e=>{this.listComponent.invokeEventCallback("mouseenter",{widget:this,$event:e})})),this.listComponent.mouseLeaveCB&&this.nativeElement.addEventListener("mouseleave",(e=>{this.listComponent.invokeEventCallback("mouseleave",{widget:this,$event:e})})),$(this.nativeElement).attr("listitemindex",this.$index)}ngAfterViewInit(){this.setUpCUDHandlers()}static{this.\u0275fac=function(e){return new(e||g)(d.\u0275\u0275directiveInject(d.Injector),d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(m.App),d.\u0275\u0275directiveInject(U,8))}}static{this.\u0275dir=d.\u0275\u0275defineDirective({type:g,selectors:[["","wmListItem",""]],hostVars:4,hostBindings:function(e,t){1&e&&d.\u0275\u0275listener("focus",(function(){return t.onFocus()})),2&e&&d.\u0275\u0275classProp("active",t.isActive)("disable-item",t.disableItem)},inputs:{wmListItem:"wmListItem"},exportAs:["listItemRef"]})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(g,[{type:t.Directive,args:[{selector:"[wmListItem]",exportAs:"listItemRef"}]}],(function(){return[{type:d.Injector},{type:d.ElementRef},{type:m.App},{type:U,decorators:[{type:t.Optional}]}]}),{isActive:[{type:t.HostBinding,args:["class.active"]}],disableItem:[{type:t.HostBinding,args:["class.disable-item"]}],onFocus:[{type:t.HostListener,args:["focus"]}],wmListItem:[{type:t.Input}]});class f extends l.SwipeAnimation{constructor(e){super(),this.list=e,this.$el=$(this.list.getNativeElement()).find("ul.app-livelist-container").first(),this.leftChildrenCount=this.$el.find(">.app-list-item-left-action-panel > button:visible").length,this.rightChildrenCount=this.$el.find(">.app-list-item-right-action-panel > button:visible").length,(this.leftChildrenCount||this.rightChildrenCount)&&(this.init(this.$el),this.$btnSubscription=this.list.btnComponents.changes.subscribe((e=>this.actionItems=e)))}createActionPanel(e,t){return t.css({width:e.outerWidth()+"px",height:e.outerHeight()+"px",marginBottom:-1*e.outerHeight()+"px",float:"left",padding:0}),t.insertBefore(e)}computeTotalChildrenWidth(e){return _.reduce(e.children(),((e,t)=>e+$(t).outerWidth()),0)}computeTransitionProportions(e){const t=this.computeTotalChildrenWidth(e),i="right"===this.position;let n=0;return _.map(e.children(),(e=>{const a=(t-n)/t;return n+=$(e).outerWidth(),i?a:n/t}))}resetElement(e){e&&e.css({transform:"none",transition:"none"})}resetState(){this.resetElement(this.li),this.resetElement(this.actionPanel),this.actionPanel&&(this.actionPanel=null)}getChildActionElement(e){if(e.children().length)return"left"===this.position?e.children().first():e.children().last()}initActionPanel(e){this.actionPanel=this.createActionPanel(this.li,e),this.actionPanel.css({backgroundColor:this.getChildActionElement(this.actionPanel).css("background-color")}),this.limit=this.computeTotalChildrenWidth(this.actionPanel),this.transitionProportions=this.computeTransitionProportions(this.actionPanel)}bounds(e,t){const i=$(e.target).closest("li");let n={strictUpper:!0,strictLower:!0,lower:0,center:0,upper:0};if(!i.hasClass("app-list-item"))return n;if(this.li&&this.li[0]===i[0])"left"===this.position?n={strictUpper:!1,lower:-this.limit,center:this.limit}:"right"===this.position&&(n={center:-this.limit,upper:this.limit,strictLower:!1});else{let e=t>0?".app-list-item-left-action-panel":".app-list-item-right-action-panel",a=this.$el.find(">"+e);if(!a.length&&this.list.groupby&&(e="li > ul.list-group >"+e,a=this.$el.find(">"+e)),!a.length||!a.find("button:visible").length)return n;this.resetState(),this.li=i,this.position=a.attr("position"),this.initActionPanel(a),n=t>0?{strictUpper:!1,lower:0,center:0,upper:this.limit}:{strictLower:!1,lower:-this.limit,center:0,upper:0}}return n}context(){return{computeActionTransition:(e,t)=>{const i=t>0?1:-1;return i*t>this.limit?t-i*this.limit+this.transitionProportions[e]*i*this.limit:this.transitionProportions[e]*t}}}animation(){return[{target:()=>this.li,css:{transform:"translate3d(${{$D + $d}}px, 0, 0)"}},{target:()=>this.actionPanel&&this.actionPanel.children(),css:{transform:"translate3d(${{computeActionTransition($i, $D + $d)}}px, 0, 0)"}}]}invokeFullSwipeEvt(e){let t,i,n;"left"===this.position?(i=this.actionItems.filter((e=>"left"===e.getAttr("swipe-position")&&e.$element.is(":visible"))),n=0):(i=this.actionItems.filter((e=>"right"===e.getAttr("swipe-position")&&e.$element.is(":visible"))),n=i.length-1),t=i[n],t&&t.hasEventCallback("tap")&&t.invokeEventCallback("tap",{$event:e}),this.resetState(),this.li=null}onAnimation(e,t){if(this.list.triggerListItemSelection(this.li,e),this.actionPanel&&"true"===this.actionPanel.attr("enablefullswipe")){const i=t>0?1:-1,n=this.getChildActionElement(this.actionPanel);if(n){const a="right"===this.position?this.rightChildrenCount-1:0;this.transitionProportions[a]*i*t*100/(this.li.outerWidth()-this.limit+n.width())>50&&this.invokeFullSwipeEvt(e)}}}onLower(){"left"===this.position&&(this.resetState(),this.li=null)}onUpper(){"right"===this.position&&(this.resetState(),this.li=null)}threshold(){return 10}}const v=["listTemplate"],b=["listLeftActionTemplate"],y=["listRightActionTemplate"],w=["wmList",""];function P(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div",13)(1,"h3",14)(2,"div",15),d.\u0275\u0275element(3,"i",16),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"div",15),d.\u0275\u0275element(5,"div",17)(6,"div",18),d.\u0275\u0275elementEnd()()()),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275advance(3),d.\u0275\u0275classMapInterpolate1("app-icon panel-icon ",e.iconclass,""),d.\u0275\u0275property("hidden",!e.iconclass),d.\u0275\u0275advance(2),d.\u0275\u0275property("innerHTML",e.title,d.\u0275\u0275sanitizeHtml),d.\u0275\u0275advance(1),d.\u0275\u0275property("innerHTML",e.subheading,d.\u0275\u0275sanitizeHtml)}}const C=function(e){return{disabled:e}};function A(e,t){if(1&e){const e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",19)(1,"ul",20)(2,"li",21)(3,"a",22),d.\u0275\u0275listener("click",(function(t){d.\u0275\u0275restoreView(e);const i=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(i.dataNavigator.navigatePage("prev",t))})),d.\u0275\u0275element(4,"i",23),d.\u0275\u0275elementStart(5,"span",24),d.\u0275\u0275text(6),d.\u0275\u0275elementEnd()()()()()}if(2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275attribute("aria-disabled",e.dataNavigator.isDisablePrevious),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(4,C,!e.dataNavigator||e.dataNavigator.isDisablePrevious)),d.\u0275\u0275advance(1),d.\u0275\u0275attribute("aria-disabled",e.dataNavigator.isDisablePrevious),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1("Go to Previous page ",e.dataNavigator.isDisablePrevious?", Disabled":"","")}}function I(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div",25),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ","Page "+e.dataNavigator.dn.currentPage+" of "+e.dataNavigator.pageCount,"")}}function E(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div",26),d.\u0275\u0275text(1," Press space bar to toggle drag drop mode, use arrow keys to move selected elements. "),d.\u0275\u0275elementEnd()),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275propertyInterpolate("id",e.titleId)}}function O(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div",27),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",e.ariaText+e.currentIndex+" of "+e.listItems.length," ")}}const x=function(e,t,i,n,a,s){return{item:e,$index:t,itemRef:i,$first:n,$last:a,currentItemWidgets:s}};function R(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"li",29,30),d.\u0275\u0275elementContainer(2,31),d.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,i=t.index,n=t.first,a=t.last,s=d.\u0275\u0275reference(1),o=d.\u0275\u0275nextContext(2);d.\u0275\u0275classMapInterpolate1("app-list-item ","horizontal"===o.direction?"":o.itemsPerRowClass,""),d.\u0275\u0275property("ngClass",s.itemClass)("wmListItem",e),d.\u0275\u0275attribute("tabindex",o.tabindex),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngTemplateOutlet",o.listTemplate)("ngTemplateOutletContext",d.\u0275\u0275pureFunction6(8,x,e,i,s,n,a,s.currentItemWidgets))}}function D(e,t){if(1&e&&d.\u0275\u0275template(0,R,3,15,"li",28),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngForOf",e.fieldDefs)}}function S(e,t){if(1&e&&d.\u0275\u0275element(0,"div",32),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275property("textContent",e.nodatamessage)}}function T(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div",33)(1,"span"),d.\u0275\u0275element(2,"i",34),d.\u0275\u0275elementStart(3,"span",24),d.\u0275\u0275text(4,"Loading"),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(5,"span",35),d.\u0275\u0275elementEnd()()),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275advance(2),d.\u0275\u0275property("ngClass",e.loadingicon),d.\u0275\u0275advance(3),d.\u0275\u0275property("textContent",e.loadingdatamsg)}}function M(e,t){if(1&e){const e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",36)(1,"ul",20)(2,"li",37)(3,"a",22),d.\u0275\u0275listener("click",(function(t){d.\u0275\u0275restoreView(e);const i=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(i.dataNavigator.navigatePage("next",t))})),d.\u0275\u0275element(4,"i",38),d.\u0275\u0275elementStart(5,"span",24),d.\u0275\u0275text(6),d.\u0275\u0275elementEnd()()()()()}if(2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275attribute("aria-disabled",e.dataNavigator.isDisableNext),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(4,C,!e.dataNavigator||e.dataNavigator.isDisableNext)),d.\u0275\u0275advance(1),d.\u0275\u0275attribute("aria-disabled",e.dataNavigator.isDisableNext),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1("Go to Next page ",e.dataNavigator.isDisableNext?", Disabled":"","")}}function N(e,t){if(1&e){const e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"a",42),d.\u0275\u0275listener("click",(function(t){d.\u0275\u0275restoreView(e);const i=d.\u0275\u0275nextContext(2);return d.\u0275\u0275resetView(i.dataNavigator.navigatePage("next",t))})),d.\u0275\u0275elementEnd()}if(2&e){const e=d.\u0275\u0275nextContext(2);d.\u0275\u0275property("ngClass",e.paginationclass)("textContent",e.ondemandmessage)}}function k(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div",39),d.\u0275\u0275element(1,"nav",40),d.\u0275\u0275template(2,N,1,2,"a",41),d.\u0275\u0275elementEnd()),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275property("hidden",!e.showNavigation||e.onDemandLoad&&e.dataNavigator.isDisableNext||e.dataNavigator.dataSize<=e.pagesize||!e.dataNavigator.dataSize&&!(null!=e.dataNavigator.datasource&&(null!=e.dataNavigator.datasource.pagination&&e.dataNavigator.datasource.pagination.next))),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",e.onDemandLoad)}}function L(e,t){1&e&&d.\u0275\u0275element(0,"i",51)}function F(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"span",52),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&e){const e=d.\u0275\u0275nextContext().$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate(e.data.length)}}function B(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"li",53,30),d.\u0275\u0275elementContainer(2,31),d.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,i=t.index,n=t.first,a=t.last,s=d.\u0275\u0275reference(1),o=d.\u0275\u0275nextContext(3);d.\u0275\u0275classMapInterpolate1("app-list-item group-list-item ",o.itemsPerRowClass,""),d.\u0275\u0275property("ngClass",s.itemClass)("wmListItem",e),d.\u0275\u0275attribute("tabindex",o.tabindex),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngTemplateOutlet",o.listTemplate)("ngTemplateOutletContext",d.\u0275\u0275pureFunction6(8,x,e,i,s,n,a,s.currentItemWidgets))}}const j=function(e){return{"collapsible-content":e}};function V(e,t){if(1&e){const e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"li",44)(1,"ul",45)(2,"li",46),d.\u0275\u0275listener("click",(function(t){d.\u0275\u0275restoreView(e);const i=d.\u0275\u0275nextContext(2);return d.\u0275\u0275resetView(i.handleHeaderClick(t))})),d.\u0275\u0275elementStart(3,"h4"),d.\u0275\u0275text(4),d.\u0275\u0275elementStart(5,"div",47),d.\u0275\u0275template(6,L,1,0,"i",48),d.\u0275\u0275template(7,F,2,1,"span",49),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275elementStart(8,"ul"),d.\u0275\u0275template(9,B,3,15,"li",50),d.\u0275\u0275elementEnd()()()}if(2&e){const e=t.$implicit,i=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngClass",i.listclass),d.\u0275\u0275attribute("tabindex",i.tabindex),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(10,j,i.collapsible)),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1("",e.key," "),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",i.collapsible),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",i.showcount),d.\u0275\u0275advance(1),d.\u0275\u0275classMapInterpolate1("list-group clearfix ","horizontal"===i.direction?"app-horizontal-list":"",""),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngForOf",e.data)}}function G(e,t){if(1&e&&d.\u0275\u0275template(0,V,10,12,"li",43),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngForOf",e.groupedData)}}const W={widgetType:"wm-list",hostClass:"app-livelist app-panel"};class U extends n.StylableComponent{static{this.initializeProps=void n.register("wm-list",new Map([["boundarylinks",{value:!1,...n.PROP_BOOLEAN}],["class",n.PROP_STRING],["collapsible",n.PROP_BOOLEAN],["dateformat",n.PROP_STRING],["dataset",n.PROP_ANY],["datasource",n.PROP_ANY],["direction",{value:"vertical",...n.PROP_STRING}],["directionlinks",{value:!0,...n.PROP_BOOLEAN}],["disableitem",n.PROP_BOOLEAN],["enablereorder",n.PROP_BOOLEAN],["forceellipses",{value:!0,...n.PROP_BOOLEAN}],["groupby",n.PROP_STRING],["iconclass",n.PROP_STRING],["itemclass",{value:"",...n.PROP_STRING}],["itemsperrow",n.PROP_STRING],["listclass",{value:"list-group",...n.PROP_STRING}],["multiselect",n.PROP_BOOLEAN],["loadingdatamsg",{value:"Loading...",...n.PROP_STRING}],["loadingicon",{value:"fa fa-circle-o-notch",...n.PROP_STRING}],["match",n.PROP_STRING],["maxsize",{value:5,...n.PROP_NUMBER}],["name",n.PROP_STRING],["navigation",n.PROP_STRING],["navigationalign",{value:"left",...n.PROP_STRING}],["nodatamessage",{value:"No data found",...n.PROP_STRING}],["ondemandmessage",{value:"Load More",...n.PROP_STRING}],["orderby",n.PROP_STRING],["paginationclass",n.PROP_STRING],["pagesize",n.PROP_NUMBER],["pulltorefresh",{value:s.isMobileApp(),...n.PROP_BOOLEAN}],["selectfirstitem",n.PROP_BOOLEAN],["selectionlimit",n.PROP_NUMBER],["show",{value:!0,...n.PROP_BOOLEAN}],["showcount",n.PROP_BOOLEAN],["showrecordcount",n.PROP_BOOLEAN],["statehandler",{value:"none",...n.PROP_STRING}],["subheading",n.PROP_STRING],["tabindex",{value:0,...n.PROP_NUMBER}],["title",n.PROP_STRING]]))}get selecteditem(){return this.multiselect?s.getClonedObject(this._items):_.isEmpty(this._items)?{}:s.getClonedObject(this._items[0])}getWidgets(e,t){let i;const n=[];if(e)return s.isDefined(t)?(t=+t||0,i=_.get(this.listItems.toArray(),t),i?[_.get(i.currentItemWidgets,e)]:void 0):(_.forEach(this.listItems.toArray(),(t=>{i=_.get(t.currentItemWidgets,e),i&&n.push(i)})),n)}getItem(e){return this.getListItemByIndex(e)}getIndex(e){return e instanceof g?this.getListItemIndex(e):e?this.fieldDefs.findIndex((t=>_.isEqual(t,e))):void 0}set selecteditem(e){this._items.length=0,this.deselectListItems(),_.isArray(e)?e.forEach((e=>this.selectItem(e))):this.selectItem(e),s.$appDigest()}constructor(e,t,i,a,o,r,l,c,d,p,u,h,m,g){let f=s.noop;const v=new Promise((e=>f=e));super(e,W,v),this.propsInitPromise=v,this.promiseResolverFn=f,n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.SHELL),this.cdRef=t,this.ngZone=r,this.datePipe=i,this.statePersistence=m,this.paginationService=g,this._pageLoad=!0,this.binditemclass=l,this.binddisableitem=c,this.binddataset=d,this.mouseEnterCB=u,this.mouseLeaveCB=h,this.binddatasource=p,this.app=a,this.appDefaults=o,this.variableInflight=!1,this.noDataFound=!d,this.titleId="wmlist-"+s.generateGUId(),this._listenerDestroyers=[this.app.subscribe("check-state-persistence-options",(e=>{let t=_.get(this.datasource,"name");t||(t=n.extractDataSourceName(this.binddatasource)),_.get(e,"variable.name")===t&&this.handleStateParams(e)})),this.app.subscribe("toggle-variable-state",this.handleLoading.bind(this)),this.app.subscribe("setup-cud-listener",(e=>{this.nativeElement.getAttribute("name")===e&&(this._isDependent=!0)}))]}getConfiguredState(){const e=this.statePersistence.computeMode(this.statehandler);return e&&e.toLowerCase()}handleStateParams(e){if(this._pageLoad&&"none"!==this.getConfiguredState()){this._pageLoad=!1;const t=this.statePersistence.getWidgetState(this);_.get(t,"pagination")&&(e.options=e.options||{},e.options.page=t.pagination),_.get(t,"selectedItem")&&(this._selectedItemsExist=!0)}}triggerWMEvent(e,t){s.$invokeWatchers(!0);let i=this.multiselect?_.last(this.selecteditem):this.selecteditem;t&&(i=t),this.app.notify("wm-event",{eventName:e,widgetName:this.name,row:i})}create(){this._isDependent&&this.triggerWMEvent("insert")}editRow(e){if(this._isDependent){let t;e&&(t=this.getItemRefByIndexOrModel(e).item),this.triggerWMEvent("update",t)}}update(e){this.editRow(e)}deleteRow(e){if(this._isDependent){let t;e&&(t=this.getItemRefByIndexOrModel(e).item),this.triggerWMEvent("delete",t)}}delete(e){this.deleteRow(e)}handleLoading(e){const t=this.datasource;t&&t.execute(s.DataSource.Operation.IS_API_AWARE)&&s.isDataSourceEqual(e.variable,t)&&this.ngZone.run((()=>{this.handleStateParams(e),this.variableInflight=e.active;const t=e.data?.pagination?.totalElements;_.isUndefined(t)?this.noDataFound=_.isEmpty(e.data?.data):this.noDataFound=0===t}))}resetNavigation(){this.showNavigation=!1,this.navControls=void 0,this.infScroll=!1,this.onDemandLoad=!1}enableBasicNavigation(){this.navControls=n.NAVIGATION_TYPE.BASIC,this.showNavigation=!0}enableInlineNavigation(){this.navControls=n.NAVIGATION_TYPE.INLINE}enableClassicNavigation(){this.navControls=n.NAVIGATION_TYPE.CLASSIC,this.showNavigation=!0}enablePagerNavigation(){this.navControls=n.NAVIGATION_TYPE.PAGER,this.showNavigation=!0}setNavigationTypeNone(){this.navControls=n.NAVIGATION_TYPE.NONE,this.showNavigation=!1}enableInfiniteScroll(){this.infScroll=!0}enableOnDemandLoad(){this.onDemandLoad=!0,this.showNavigation=!0}onNavigationTypeChange(e){switch(this.resetNavigation(),e){case n.NAVIGATION_TYPE.BASIC:this.enableBasicNavigation();break;case n.NAVIGATION_TYPE.INLINE:this.enableInlineNavigation();break;case n.NAVIGATION_TYPE.ADVANCED:case n.NAVIGATION_TYPE.CLASSIC:this.enableClassicNavigation();break;case n.NAVIGATION_TYPE.PAGER:this.enablePagerNavigation();break;case n.NAVIGATION_TYPE.NONE:this.setNavigationTypeNone();break;case n.NAVIGATION_TYPE.SCROLL:this.enableInfiniteScroll();break;case n.NAVIGATION_TYPE.ONDEMAND:this.enableOnDemandLoad()}}updateFieldDefs(e){this.infScroll||this.onDemandLoad?[this.fieldDefs,this.currentPage]=this.paginationService.updateFieldsOnPagination(this,e):this.fieldDefs=e,this.orderby&&(this.fieldDefs=n.getOrderedDataset(this.fieldDefs,this.orderby)),this.groupby&&(this.groupedData=n.groupData(this,this.fieldDefs,this.groupby,this.match,this.orderby,this.dateformat,this.datePipe,void 0,this.appDefaults)),this.fieldDefs.length||(this.noDataFound=!0,this.selecteditem=void 0),s.$appDigest(),this.listItems.setDirty()}onDataChange(e){_.isEmpty(e)?this.updateFieldDefs([]):(this.noDataFound=!1,this.isDataChanged=!0,this.datasource&&this.datasource.execute(s.DataSource.Operation.IS_API_AWARE)&&(e=_.cloneDeep(e)),s.isObject(e)&&!_.isArray(e)&&(e=_.isEmpty(e)?[]:[e]),_.isString(e)&&(e=e.split(",")),this.datasource&&"App"===this.datasource.owner&&(this.infScroll||this.onDemandLoad)&&!this.currentPage&&this.datasource.execute(s.DataSource.Operation.GET_PAGING_OPTIONS).number>0&&(e=this.datasource.execute(s.DataSource.Operation.LIST_RECORDS,{page:1})),_.isArray(e)&&(e.length&&this.invokeEventCallback("beforedatarender",{$data:e}),this.updateFieldDefs(e)))}setupDataSource(){const e=this.dataNavigator;e.options={maxResults:this.pagesize||20},this.dataNavigatorWatched=!0,this.navigatorResultWatch&&this.navigatorResultWatch.unsubscribe(),this.navigatorResultWatch=e.resultEmitter.subscribe((e=>{this.onDataChange(e)}),!0),this.navigatorMaxResultWatch&&this.navigatorMaxResultWatch.unsubscribe(),this.navigatorMaxResultWatch=e.maxResultsEmitter.subscribe((e=>{this.pagesize=e})),e.maxResults=this.pagesize||20,this.removePropertyBinding("dataset");const t=this.getAttr("datasetboundexpr");this.dataNavigator.setBindDataSet(this.binddataset,this.viewParent,t?this.context:this.datasource,this.dataset,this.binddatasource,t,this.statehandler)}onDataSetChange(e){if("wm.Variable"===_.get(this.datasource,"category")&&"none"!==this.getConfiguredState()&&this._pageLoad){const e=this.statePersistence.getWidgetState(this);this._pageLoad=!1,_.get(e,"pagination")&&this.dataNavigator.pageChanged({page:e.pagination},!0),_.get(e,"selectedItem")&&(this._selectedItemsExist=!0)}this.dataNavigatorWatched?this.navigation&&this.navigation!==n.NAVIGATION_TYPE.NONE&&this.dataNavigator.setDataSource(this.datasource):this.navigation&&this.navigation!==n.NAVIGATION_TYPE.NONE?this.setupDataSource():this.onDataChange(e)}deselectListItems(){this.listItems.forEach((e=>e.isActive=!1))}clearSelectedItems(){this.deselectListItems(),this._items.length=0,s.$appDigest()}getListItemByModel(e){return this.listItems.find((t=>{let i=t.item;if(this.groupby&&!_.has(e,"_groupIndex")&&(i=_.clone(i),delete i._groupIndex),_.isEqual(i,e))return!0}))||null}updateSelectedItemsWidgets(e){let t,i={};const a=_.get(this.dataNavigator,"dn.currentPage")||1;"none"!==this.getConfiguredState()&&(t=this.statePersistence.getWidgetState(this)||{},_.get(t,"selectedItem")&&(this.multiselect&&1===this.selecteditem.length?t.selectedItem=[]:_.remove(t.selectedItem,(function(e){return e.page===a})))),this.multiselect&&(this.selectedItemWidgets.length=0),this.listItems.forEach(((e,n)=>{e.isActive&&(this.multiselect?this.selectedItemWidgets.push(e.currentItemWidgets):this.selectedItemWidgets=e.currentItemWidgets,i={page:a,index:n},_.get(t,"selectedItem")&&this.multiselect?_.some(t.selectedItem,i)||t.selectedItem.push(i):t.selectedItem=[i])})),"none"===this.getConfiguredState()||e||(n.unsupportedStatePersistenceTypes.indexOf(this.navigation)<0?(this.statePersistence.removeWidgetState(this,"selectedItem"),this.statePersistence.setWidgetState(this,{selectedItem:t.selectedItem})):console.warn("Retain State handling on Widget "+this.name+" is not supported for current pagination type."))}toggleListItemSelection(e,t){if(e&&!e.disableItem){let i=e.item;this.groupby&&_.has(i,"_groupIndex")&&(i=_.clone(i),delete i._groupIndex),e.isActive?(this._items=_.pullAllWith(this._items,[i],_.isEqual),e.isActive=!1):(this.multiselect||this.clearSelectedItems(),this._items.push(i),this.invokeEventCallback("select",{widget:e,$data:i}),e.isActive=!0),this.updateSelectedItemsWidgets(t)}}onListRender(e){if(this.isDataChanged&&(s.$invokeWatchers(!0),this.invokeEventCallback("render",{$data:this.fieldDefs})),this.isDataChanged&&"none"!==this.getConfiguredState()&&e.length&&this._selectedItemsExist){const e=this.statePersistence.getWidgetState(this);if(_.get(e,"selectedItem")){this._selectedItemsExist=!1;const t=_.isArray(this.selecteditem)?this.selecteditem.length:_.toNumber(!_.isEmpty(this.selecteditem)),i=_.get(this.dataNavigator,"dn.currentPage")||1;e.pagination=e.pagination||1,t!==e.selectedItem.length&&e.pagination===i&&e.selectedItem.forEach((e=>{e.page===i&&this.selectItem(e.index,!0)}))}}const t=_.isArray(this.selecteditem)?this.selecteditem:[this.selecteditem];if(this.firstSelectedItem=this.lastSelectedItem=null,!e.length||!this.selectfirstitem||this._items.length&&this.multiselect||!1===this._selectedItemsExist)this.deselectListItems(),t.forEach((e=>{const t=this.getListItemByModel(e);t&&(t.isActive=!0,this.lastSelectedItem=t,t.nativeElement.focus())}));else{const t=e.first;t.disableItem||!this.isDataChanged||(this.infScroll||this.onDemandLoad)&&this._items.length||(this.clearSelectedItems(),this.firstSelectedItem=this.lastSelectedItem=t,this.selectItem(0))}if(this.fieldDefs.length&&this.infScroll){const e=this.$element.closest("[wmsmoothscroll]");if(s.isMobileApp()&&e.length&&"true"===e.attr("wmsmoothscroll"))this.paginationService.bindIScrollEvt(this,n.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME);else{const e=this.$element.closest(".modal-body"),t=this.$element.find("ul").height(),i=window.innerHeight-140;s.isMobile()&&e.length&&t>i&&this.$element.css("height",i+"px"),this.paginationService.bindScrollEvt(this,"> ul",n.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME)}}this.isDataChanged=!1}triggerListItemSelection(e,t){if(e&&e[0]){const i=e.data("listItemContext");i.listComponent===this&&this.onItemClick(t,i)}}setupHandlers(){this.listItems.changes.subscribe((e=>{this.onListRender(e),this.cdRef.detectChanges()})),this.nativeElement.querySelector("ul.app-livelist-container").addEventListener("click",(e=>{let t=$(e.target).closest(".app-list-item");for(;t.get(0)&&t.closest("ul.app-livelist-container").get(0)!==e.currentTarget;)t=t.parent().closest(".app-list-item");this.triggerListItemSelection(t,e)}),!0)}onReorderStart(e,t){t.placeholder.height(t.item.height()),this.$ulEle.data("oldIndex",t.item.index())}onSort(e,t){if(this.infScroll){const e=this.$ulEle.find(`[listitemindex=${this.fieldDefs.length-1}]`).offset();e&&e.top<t.offset.top&&(this.paginationService.bindScrollEvt(this,"> ul",n.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME),this.debouncedFetchNextDatasetOnScroll())}}onUpdate(e,t,i){const n=this.fieldDefs,a=void 0===t?i:t.item.index(),s=this.$ulEle.data("oldIndex"),o=_.min([a,s]),r=_.max([a,s]),l=_.pullAt(n,s)[0];if(l){"none"!==this.getConfiguredState()&&this.statePersistence.removeWidgetState(this,"selectedItem"),this.reorderProps.minIndex=_.min([o,this.reorderProps.minIndex]),this.reorderProps.maxIndex=_.max([r,this.reorderProps.maxIndex]),n.splice(a,0,l),this.cdRef.markForCheck(),this.cdRef.detectChanges();const t={oldIndex:s,newIndex:a,item:n[a]};this.invokeEventCallback("reorder",{$event:e,$data:n,$changedItem:t}),this.$ulEle.removeData("oldIndex")}}configureDnD(){let e;const t=$(document).find(".modal");e=this.getAttr("height")?"parent":t.length?t[t.length-1]:"body";const i=s.isMobileApp()?{}:{appendTo:e},a=$(this.nativeElement);this.$ulEle=a.find(".app-livelist-container"),n.configureDnD(this.$ulEle,i,this.onReorderStart.bind(this),this.onUpdate.bind(this),this.onSort.bind(this)),this.$ulEle.droppable({accept:".app-list-item"}),s.isMobileApp()&&(this.$ulEle.sortable("disable"),this.$ulEle.on("touchstart",(function(e){let t=this;t.touching||(t.touched&&clearTimeout(t.touched),setTimeout((()=>{e.cancelable&&e.preventDefault()}),50),t.touched=setTimeout((()=>{$(e.currentTarget).addClass("no-selection"),$(e.currentTarget).sortable("enable"),t.touching=!0,$(t).trigger(e)}),350))})).on("touchend",(function(e){this.touching=!1,$(e.currentTarget).removeClass("no-selection"),$(e.currentTarget).sortable("disable"),clearTimeout(this.touched)})).on("touchmove",(function(){clearTimeout(this.touched)})))}checkSelectionLimit(e){return!this.selectionlimit||e<this.selectionlimit}getListItemByIndex(e){return this.listItems.toArray()[e]}getListItemIndex(e){return this.listItems.toArray().indexOf(e)}execute(e,t){return![s.DataSource.Operation.IS_API_AWARE,s.DataSource.Operation.IS_PAGEABLE,s.DataSource.Operation.SUPPORTS_SERVER_FILTER].includes(e)&&this.datasource.execute(e,t)}handleKeyDown(e,t){e.stopPropagation(),13===e.keyCode||9===e.keyCode||(e.target.classList.contains("form-control")||e.target.classList.contains("note-editable"))&&32===e.keyCode||e.preventDefault();const i=this.listItems;let n=this.getListItemIndex(this.lastSelectedItem);if(this.multiselect){const a=this.getListItemIndex(this.firstSelectedItem),s=_.isArray(this.selecteditem)?this.selecteditem.length:_.isObject(this.selecteditem)?1:0;"selectPrev"===t?n>0&&(n<=a&&this.checkSelectionLimit(s)?(this.lastSelectedItem=this.getListItemByIndex(n-1),this.toggleListItemSelection(this.lastSelectedItem)):n>a?(this.toggleListItemSelection(this.getListItemByIndex(n)),this.lastSelectedItem=this.getListItemByIndex(n-1)):this.invokeEventCallback("selectionlimitexceed",{$event:e})):"selectNext"===t&&n<i.length-1&&(n>=a&&this.checkSelectionLimit(s)?(this.lastSelectedItem=this.getListItemByIndex(n+1),this.toggleListItemSelection(this.lastSelectedItem)):n<a?(this.toggleListItemSelection(this.getListItemByIndex(n)),this.lastSelectedItem=this.getListItemByIndex(n+1)):this.invokeEventCallback("selectionlimitexceed",{$event:e}))}if("focusPrev"===t)if(this.isListElementMovable){if(n=n<=0?0:n,0===n)return;this.lastSelectedItem=this.getListItemByIndex(n);this.getListItemByIndex(n-1).nativeElement.before(this.lastSelectedItem.nativeElement),this.lastSelectedItem.nativeElement.focus(),this.statePersistence.removeWidgetState(this,"selectedItem");const e=this.listItems.toArray();[e[n-1],e[n]]=[e[n],e[n-1]],this.listItems.reset(e),this.currentIndex=n,this.ariaText="selected "}else n=n<=0?0:n-1,this.lastSelectedItem=this.getListItemByIndex(n),this.lastSelectedItem.nativeElement.focus(),this.currentIndex=n+1,this.ariaText="selected ";else if("focusNext"===t)if(this.isListElementMovable){if(n=n<i.length-1?n:i.length-1,n===this.listItems.length-1)return;this.lastSelectedItem=this.getListItemByIndex(n);this.getListItemByIndex(n+1).nativeElement.after(this.lastSelectedItem.nativeElement),this.lastSelectedItem.nativeElement.focus(),this.statePersistence.removeWidgetState(this,"selectedItem");const e=this.listItems.toArray();[e[n],e[n+1]]=[e[n+1],e[n]],this.listItems.reset(e),this.currentIndex=n+2,this.ariaText="selected "}else n=n<i.length-1?n+1:i.length-1,this.lastSelectedItem=this.getListItemByIndex(n),this.lastSelectedItem.nativeElement.focus(),this.currentIndex=n+1,this.ariaText="selected ";else if("select"===t){if(-1===n||!$(e.target).closest(this.lastSelectedItem.nativeElement)){const t=$(e.target).closest("li.app-list-item");n=t.closest("ul.app-livelist-container").find("li.app-list-item").index(t)}this.onItemClick(e,this.getListItemByIndex(n))}else if("space"===t){if(!this.enablereorder)return;this.isListElementMovable=!this.isListElementMovable,this.onItemClick(e,this.getListItemByIndex(n)),this.currentIndex=n+1,this.isListElementMovable?(this.ariaText=`Item ${this.currentIndex} grabbed, current position `,this.$ulEle.data("oldIndex",n)):(this.ariaText=`Item ${this.currentIndex} dropped, final position `,this.onUpdate(e,void 0,n))}}onPropertyChange(e,t,i){if("dataset"===e){if(!t&&this.binddatasource&&!this.datasource)return;this.onDataSetChange(t)}else if("datasource"===e)this.dataset&&this.onDataSetChange(this.dataset);else if("navigation"===e){if("Advanced"===t)return void(this.navigation="Classic");s.switchClass(this.nativeElement,t,i),this.onNavigationTypeChange(t),this.dataNavigator&&(this.dataNavigator.navigationClass=this.paginationclass)}else if("itemsperrow"===e)s.setListClass(this);else{if("tabindex"===e)return;"pulltorefresh"===e&&t?(this.app.notify("pullToRefresh:enable"),this.subscribeToPullToRefresh()):"paginationclass"===e?this.dataNavigator&&setTimeout((()=>this.dataNavigator.navigationClass=t)):"pagesize"===e?(this.dataNavigator.options={maxResults:t},this.dataNavigator.widget.maxResults=t,this.dataNavigator.maxResults=t):"enablereorder"===e?t&&this.$ulEle?(this.$ulEle.attr("aria-describedby",this.titleId),this.configureDnD(),this.$ulEle.sortable("enable")):this.$ulEle&&!t&&(this.$ulEle.removeAttr("aria-describedby"),this.$ulEle.sortable("disable")):super.onPropertyChange(e,t,i)}}onItemClick(e,t){let i;if(!t.disableItem){if(this.firstSelectedItem=this.firstSelectedItem||t,i=_.isArray(this.selecteditem)?this.selecteditem.length:_.isObject(this.selecteditem)?1:0,this.multiselect&&s.isMobile())this.checkSelectionLimit(i)||t.isActive?this.toggleListItemSelection(t):this.invokeEventCallback("selectionlimitexceed",{$event:e});else if((e.ctrlKey||e.metaKey)&&this.multiselect)this.checkSelectionLimit(i)||t.isActive?(this.firstSelectedItem=this.lastSelectedItem=t,this.toggleListItemSelection(t)):this.invokeEventCallback("selectionlimitexceed",{$event:e});else if(e.shiftKey&&this.multiselect){let i=t.context.index,n=this.firstSelectedItem.context.index;i>n&&(n=[i,i=n][0]),this.checkSelectionLimit(n-i)?(this.clearSelectedItems(),this.listItems.forEach((e=>{const t=e.context.index;t>=i&&t<=n&&this.toggleListItemSelection(e)})),this.lastSelectedItem=t):this.invokeEventCallback("selectionlimitexceed",{$event:e})}else(!t.isActive||i>1)&&(this.clearSelectedItems(),this.toggleListItemSelection(t),this.firstSelectedItem=this.lastSelectedItem=t);s.$appDigest()}}clear(){this.updateFieldDefs([])}getItemRefByIndexOrModel(e){let t;return t=s.isNumber(e)?this.getListItemByIndex(e):this.getListItemByModel(e),t}deselectItem(e){const t=this.getItemRefByIndexOrModel(e);t&&t.isActive&&this.toggleListItemSelection(t)}selectItem(e,t){const i=this.getItemRefByIndexOrModel(e);i&&(i.isActive||this.toggleListItemSelection(i,t),i.nativeElement.focus())}beforePaginationChange(e,t){this.invokeEventCallback("paginationchange",{$event:e,$index:t})}handleEvent(e,t,i,n){const a={tap:"click",doubletap:"dblclick"};_.includes(["click","tap","dblclick","doubletap"],t)&&this.eventManager.addEventListener(this.nativeElement,a[t]||t,(e=>{const i=$(e.target).closest(".app-list-item");if(i.length){const n=i.data("listItemContext");n.disableItem||this.invokeEventCallback(t,{widget:n,$event:e,item:n.item})}}))}subscribeToPullToRefresh(){this._listenerDestroyers.push(this.app.subscribe("pulltorefresh",(()=>{this.datasource&&this.datasource.listRecords&&this.datasource.listRecords()})))}ngOnInit(){super.ngOnInit(),this.handleHeaderClick=s.noop,setTimeout((()=>{this.debouncedFetchNextDatasetOnScroll=this.paginationService.debouncedFetchNextDatasetOnScroll(this.dataNavigator,n.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME,this)}),0),this._items=[],this.fieldDefs=[],this.reorderProps={minIndex:null,maxIndex:null}}setUpCUDHandlers(){const e=document.getElementsByClassName("add-list-item")[0];e&&e.addEventListener("click",(e=>{this.create()}))}ngAfterViewInit(){this.promiseResolverFn(),this.propsInitPromise.then((()=>{super.ngAfterViewInit(),this.setUpCUDHandlers(),this.selectedItemWidgets=this.multiselect?[]:{};var e=$(this.nativeElement).find(".app-livelist-container");this.enablereorder&&!this.groupby&&(e&&e.attr("aria-describedby",this.titleId),this.configureDnD()),this.enablereorder||e&&e.removeAttr("aria-describedby"),this.groupby&&this.collapsible&&(this.handleHeaderClick=n.handleHeaderClick,this.toggleAllHeaders=n.toggleAllHeaders.bind(void 0,this)),s.setListClass(this)})),this.setupHandlers();const e=this.nativeElement.querySelector("ul.app-livelist-container");n.styler(e,this,n.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER),this.enablereorder&&e&&e.setAttribute("aria-describedby",this.titleId),this.enablereorder||e&&e.removeAttribute("aria-describedby"),s.isMobileApp()&&e.querySelector(".app-list-item-action-panel")&&(this._listAnimator=new f(this))}ngOnDestroy(){this._listAnimator&&this._listAnimator.$btnSubscription&&this._listAnimator.$btnSubscription.unsubscribe(),this._listenerDestroyers.forEach((e=>e&&e())),super.ngOnDestroy()}ngOnDetach(){super.ngOnDetach(),this._pageLoad=!0}static{this.\u0275fac=function(e){return new(e||U)(d.\u0275\u0275directiveInject(d.Injector),d.\u0275\u0275directiveInject(d.ChangeDetectorRef),d.\u0275\u0275directiveInject(u.ToDatePipe),d.\u0275\u0275directiveInject(m.App),d.\u0275\u0275directiveInject(m.AppDefaults),d.\u0275\u0275directiveInject(d.NgZone),d.\u0275\u0275injectAttribute("itemclass.bind"),d.\u0275\u0275injectAttribute("disableitem.bind"),d.\u0275\u0275injectAttribute("dataset.bind"),d.\u0275\u0275injectAttribute("datasource.bind"),d.\u0275\u0275injectAttribute("mouseenter.event"),d.\u0275\u0275injectAttribute("mouseleave.event"),d.\u0275\u0275directiveInject(m.StatePersistence),d.\u0275\u0275directiveInject(m.PaginationService))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:U,selectors:[["div","wmList",""]],contentQueries:function(e,t,i){if(1&e&&(d.\u0275\u0275contentQuery(i,v,5),d.\u0275\u0275contentQuery(i,b,5),d.\u0275\u0275contentQuery(i,y,5),d.\u0275\u0275contentQuery(i,o.ButtonComponent,4)),2&e){let e;d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.listTemplate=e.first),d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.listLeftActionTemplate=e.first),d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.listRightActionTemplate=e.first),d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.btnComponents=e)}},viewQuery:function(e,t){if(1&e&&(d.\u0275\u0275viewQuery(a.PaginationComponent,5),d.\u0275\u0275viewQuery(g,5)),2&e){let e;d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.dataNavigator=e.first),d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.listItems=e)}},features:[d.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(U)]),d.\u0275\u0275InheritDefinitionFeature],attrs:w,decls:16,vars:19,consts:[["class","panel-heading",4,"ngIf"],["class","app-datanavigator","aria-label","Page navigation",4,"ngIf"],["aria-live","polite","aria-atomic","true","class","sr-only",4,"ngIf"],["class","sr-only",3,"id",4,"ngIf"],["aria-live","assertive","class","sr-only",4,"ngIf"],["role","list",3,"hidden","keydown.enter","keydown.space","keydown.arrowup","keydown.arrowdown","keydown.arrowleft","keydown.arrowright","keydown.shift.arrowup","keydown.shift.arrowdown","keydown.shift.arrowleft","keydown.shift.arrowright"],[3,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"],["class","no-data-msg",3,"textContent",4,"ngIf"],["class","loading-data-msg",4,"ngIf"],["class","app-datanavigator",4,"ngIf"],["class","panel-footer",3,"hidden",4,"ngIf"],["groupedListTemplate",""],[1,"panel-heading"],[1,"panel-title"],[1,"pull-left"],["aria-hidden","true",3,"hidden"],[1,"heading",3,"innerHTML"],[1,"description",3,"innerHTML"],["aria-label","Page navigation",1,"app-datanavigator"],[1,"pager"],[1,"previous",3,"ngClass"],["href","javascript:void(0);",3,"click"],["aria-hidden","true",1,"wi","wi-chevron-left"],[1,"sr-only"],["aria-live","polite","aria-atomic","true",1,"sr-only"],[1,"sr-only",3,"id"],["aria-live","assertive",1,"sr-only"],["role","listitem",3,"class","ngClass","wmListItem",4,"ngFor","ngForOf"],["role","listitem",3,"ngClass","wmListItem"],["listItemRef","listItemRef"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"no-data-msg",3,"textContent"],[1,"loading-data-msg"],["aria-hidden","true",1,"app-icon","panel-icon","fa-spin",3,"ngClass"],[1,"loading-text",3,"textContent"],[1,"app-datanavigator"],[1,"next",3,"ngClass"],["aria-hidden","true",1,"wi","wi-chevron-right"],[1,"panel-footer",3,"hidden"],["wmPagination","","navigationalign.bind","navigationalign","navigation.bind","navControls","showrecordcount.bind","showrecordcount","maxsize.bind","maxsize","boundarylinks.bind","boundarylinks","forceellipses.bind","forceellipses","directionlinks.bind","directionlinks","show.bind","!onDemandLoad","paginationchange.event","beforePaginationChange($event, $index)"],["href","javascript:void(0);","class","app-button btn btn-block",3,"ngClass","textContent","click",4,"ngIf"],["href","javascript:void(0);",1,"app-button","btn","btn-block",3,"ngClass","textContent","click"],["class","app-list-item-group clearfix",4,"ngFor","ngForOf"],[1,"app-list-item-group","clearfix"],[1,"list-group","item-group",3,"ngClass"],[1,"app-list-item-header","list-item","list-group-header",3,"ngClass","click"],[1,"header-action"],["class","app-icon wi action wi-chevron-up",4,"ngIf"],["class","label label-default",4,"ngIf"],[3,"class","ngClass","wmListItem",4,"ngFor","ngForOf"],[1,"app-icon","wi","action","wi-chevron-up"],[1,"label","label-default"],[3,"ngClass","wmListItem"]],template:function(e,t){if(1&e&&(d.\u0275\u0275template(0,P,7,6,"div",0),d.\u0275\u0275template(1,A,7,6,"div",1),d.\u0275\u0275template(2,I,2,1,"div",2),d.\u0275\u0275elementStart(3,"div"),d.\u0275\u0275template(4,E,2,1,"div",3),d.\u0275\u0275template(5,O,2,1,"div",4),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"ul",5),d.\u0275\u0275listener("keydown.enter",(function(e){return t.handleKeyDown(e,"select")}))("keydown.space",(function(e){return t.handleKeyDown(e,"space")}))("keydown.arrowup",(function(e){return t.handleKeyDown(e,"focusPrev")}))("keydown.arrowdown",(function(e){return t.handleKeyDown(e,"focusNext")}))("keydown.arrowleft",(function(e){return t.handleKeyDown(e,"focusPrev")}))("keydown.arrowright",(function(e){return t.handleKeyDown(e,"focusNext")}))("keydown.shift.arrowup",(function(e){return t.handleKeyDown(e,"selectPrev")}))("keydown.shift.arrowdown",(function(e){return t.handleKeyDown(e,"selectNext")}))("keydown.shift.arrowleft",(function(e){return t.handleKeyDown(e,"selectPrev")}))("keydown.shift.arrowright",(function(e){return t.handleKeyDown(e,"selectNext")})),d.\u0275\u0275template(7,D,1,1,"ng-template",6),d.\u0275\u0275elementContainer(8,7)(9,7),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(10,S,1,1,"div",8),d.\u0275\u0275template(11,T,6,2,"div",9),d.\u0275\u0275template(12,M,7,6,"div",10),d.\u0275\u0275template(13,k,3,2,"div",11),d.\u0275\u0275template(14,G,1,1,"ng-template",null,12,d.\u0275\u0275templateRefExtractor)),2&e){const e=d.\u0275\u0275reference(15);d.\u0275\u0275property("ngIf",t.title||t.subheading||t.iconclass),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","Inline"===t.navigation&&!t.noDataFound),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","Inline"===t.navigation&&!t.noDataFound),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",t.enablereorder),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.listItems&&t.enablereorder&&t.currentIndex),d.\u0275\u0275advance(1),d.\u0275\u0275classMapInterpolate2("app-livelist-container clearfix ","horizontal"===t.direction?"app-horizontal-list":""," ",t.listclass,""),d.\u0275\u0275property("hidden",t.noDataFound&&!t.variableInflight),d.\u0275\u0275attribute("tabindex",t.tabindex),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!t.groupby)("ngIfElse",e),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngTemplateOutlet",t.listLeftActionTemplate),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngTemplateOutlet",t.listRightActionTemplate),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.noDataFound&&!t.variableInflight),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.variableInflight&&!t.pulltorefresh),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","Inline"===t.navigation&&!t.noDataFound),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","None"!==t.navigation)}},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(U,[{type:t.Component,args:[{selector:"div[wmList]",providers:[n.provideAsWidgetRef(U)],template:'<div class="panel-heading" *ngIf="title || subheading || iconclass">\n    <h3 class="panel-title">\n        <div class="pull-left">\n            <i class="app-icon panel-icon {{iconclass}}" aria-hidden="true" [hidden]="!iconclass"></i>\n        </div>\n        <div class="pull-left">\n            <div class="heading" [innerHTML]="title"></div>\n            <div class="description" [innerHTML]="subheading"></div>\n        </div>\n    </h3>\n</div>\n\n<div class="app-datanavigator" [attr.aria-disabled]="dataNavigator.isDisablePrevious" aria-label="Page navigation" *ngIf="navigation === \'Inline\' && !noDataFound">\n    <ul class="pager">\n        <li class="previous" [ngClass]="{\'disabled\': (dataNavigator ? dataNavigator.isDisablePrevious : true)}">\n            <a href="javascript:void(0);" (click)="dataNavigator.navigatePage(\'prev\', $event)"\n               [attr.aria-disabled]="dataNavigator.isDisablePrevious">\n                <i class="wi wi-chevron-left" aria-hidden="true"></i>\n                <span class="sr-only">Go to Previous page {{dataNavigator.isDisablePrevious ? \', Disabled\' : \'\'}}</span>\n            </a>\n        </li>\n    </ul>\n</div>\n<div *ngIf="navigation === \'Inline\' && !noDataFound" aria-live="polite" aria-atomic="true" class="sr-only"> {{\'Page \' + dataNavigator.dn.currentPage + \' of \' + dataNavigator.pageCount }}</div>\n\n<div>\n    <div id={{titleId}} class="sr-only" *ngIf="enablereorder">\n        Press space bar to toggle drag drop mode, use arrow keys to move selected elements.\n    </div>\n\n    <div aria-live="assertive" *ngIf="listItems && enablereorder && currentIndex" class="sr-only" >\n        {{ariaText + currentIndex + \' of \' +  listItems.length}}\n    </div>\n</div>\n\n<ul [attr.tabindex]="tabindex"  class="app-livelist-container clearfix {{direction === \'horizontal\' ? \'app-horizontal-list\': \'\'}} {{listclass}}" role="list"\n    (keydown.enter)="handleKeyDown($event, \'select\')"\n\n    (keydown.space)="handleKeyDown($event, \'space\')"\n\n    (keydown.arrowup)="handleKeyDown($event, \'focusPrev\')"\n    (keydown.arrowdown)="handleKeyDown($event, \'focusNext\')"\n    (keydown.arrowleft)="handleKeyDown($event, \'focusPrev\')"\n    (keydown.arrowright)="handleKeyDown($event, \'focusNext\')"\n\n    (keydown.shift.arrowup)="handleKeyDown($event, \'selectPrev\')"\n    (keydown.shift.arrowdown)="handleKeyDown($event, \'selectNext\')"\n    (keydown.shift.arrowleft)="handleKeyDown($event, \'selectPrev\')"\n    (keydown.shift.arrowright)="handleKeyDown($event, \'selectNext\')"\n    [hidden]="noDataFound && !variableInflight"\n>\n    <ng-template [ngIf]="!groupby" [ngIfElse]="groupedListTemplate">\n        <li *ngFor="let item of fieldDefs; index as $index; first as $first; last as $last;" class="app-list-item {{direction === \'horizontal\' ? \'\' : itemsPerRowClass}}" [ngClass]="listItemRef.itemClass"\n            [wmListItem]="item"\n            #listItemRef="listItemRef"\n            [attr.tabindex]="tabindex"\n            role="listitem">\n            <ng-container [ngTemplateOutlet]="listTemplate" [ngTemplateOutletContext]="{item: item, $index: $index, itemRef: listItemRef, $first: $first, $last: $last, currentItemWidgets: listItemRef.currentItemWidgets}"></ng-container>\n        </li>\n    </ng-template>\n    <ng-container [ngTemplateOutlet]="listLeftActionTemplate"></ng-container>\n    <ng-container [ngTemplateOutlet]="listRightActionTemplate"></ng-container>\n</ul>\n\n<div class="no-data-msg" *ngIf="noDataFound && !variableInflight" [textContent]="nodatamessage"></div>\n\n<div class="loading-data-msg" *ngIf="variableInflight && !pulltorefresh">\n    <span>\n        <i class="app-icon panel-icon fa-spin" aria-hidden="true" [ngClass]="loadingicon"></i>\n        <span class="sr-only">Loading</span>\n        <span class="loading-text" [textContent]="loadingdatamsg"></span>\n    </span>\n</div>\n\n<div class="app-datanavigator" [attr.aria-disabled]="dataNavigator.isDisableNext" *ngIf="navigation === \'Inline\' && !noDataFound">\n    <ul class="pager">\n        <li class="next" [ngClass]="{\'disabled\': (dataNavigator ? dataNavigator.isDisableNext  : true)}">\n            <a href="javascript:void(0);" (click)="dataNavigator.navigatePage(\'next\', $event)"\n               [attr.aria-disabled]="dataNavigator.isDisableNext">\n                <i class="wi wi-chevron-right" aria-hidden="true"></i>\n                <span class="sr-only">Go to Next page {{dataNavigator.isDisableNext ? \', Disabled\' : \'\'}}</span>\n            </a>\n        </li>\n    </ul>\n</div>\n\n<div class="panel-footer" *ngIf="navigation !== \'None\'" [hidden]="!showNavigation || (onDemandLoad && dataNavigator.isDisableNext) || (dataNavigator.dataSize <= pagesize) || (!dataNavigator.dataSize && !dataNavigator.datasource?.pagination?.next)">\n    <nav wmPagination\n         navigationalign.bind="navigationalign"\n         navigation.bind="navControls"\n         showrecordcount.bind="showrecordcount"\n         maxsize.bind="maxsize"\n         boundarylinks.bind="boundarylinks"\n         forceellipses.bind="forceellipses"\n         directionlinks.bind="directionlinks"\n         show.bind="!onDemandLoad"\n         paginationchange.event="beforePaginationChange($event, $index)"\n    ></nav>\n    <a *ngIf="onDemandLoad" href="javascript:void(0);"\n       (click)="dataNavigator.navigatePage(\'next\', $event)"\n       class="app-button btn btn-block"\n       [ngClass]="paginationclass"\n       [textContent]="ondemandmessage"\n    ></a>\n</div>\n\n\x3c!--This template will be displayed when groupby is specified--\x3e\n<ng-template #groupedListTemplate>\n    <li *ngFor="let groupObj of groupedData" class="app-list-item-group clearfix">\n        <ul [attr.tabindex]="tabindex" class="list-group item-group" [ngClass]="listclass">\n            <li class="app-list-item-header list-item list-group-header" (click)="handleHeaderClick($event)" [ngClass]="{\'collapsible-content\': collapsible}">\n            <h4>{{groupObj.key}}\n                <div class="header-action">\n                    <i class="app-icon wi action wi-chevron-up" *ngIf="collapsible"></i>\n                    <span *ngIf="showcount" class="label label-default">{{groupObj.data.length}}</span>\n                    </div>\n                </h4>\n            </li>\n            <ul class="list-group clearfix {{direction === \'horizontal\' ? \'app-horizontal-list\': \'\'}}">\n                <li *ngFor="let item of groupObj.data; index as $index; first as $first; last as $last;" [attr.tabindex]="tabindex"\n                    class="app-list-item group-list-item {{itemsPerRowClass}}"\n                    [ngClass]="listItemRef.itemClass"\n                    [wmListItem]="item" #listItemRef="listItemRef">\n                    <ng-container [ngTemplateOutlet]="listTemplate" [ngTemplateOutletContext]="{item: item, $index: $index, itemRef: listItemRef, $first: $first, $last: $last, currentItemWidgets: listItemRef.currentItemWidgets}"></ng-container>\n                </li>\n            </ul>\n        </ul>\n    </li>\n</ng-template>\n'}]}],(function(){return[{type:d.Injector},{type:d.ChangeDetectorRef},{type:u.ToDatePipe},{type:m.App},{type:m.AppDefaults},{type:d.NgZone},{type:void 0,decorators:[{type:t.Attribute,args:["itemclass.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["disableitem.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["dataset.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["datasource.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["mouseenter.event"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["mouseleave.event"]}]},{type:m.StatePersistence},{type:m.PaginationService}]}),{listTemplate:[{type:t.ContentChild,args:["listTemplate"]}],listLeftActionTemplate:[{type:t.ContentChild,args:["listLeftActionTemplate"]}],listRightActionTemplate:[{type:t.ContentChild,args:["listRightActionTemplate"]}],btnComponents:[{type:t.ContentChildren,args:[o.ButtonComponent]}],dataNavigator:[{type:t.ViewChild,args:[a.PaginationComponent]}],listItems:[{type:t.ViewChildren,args:[g]}]});const q=[U,g];class z{static{this.\u0275fac=function(e){return new(e||z)}}static{this.\u0275mod=d.\u0275\u0275defineNgModule({type:z})}static{this.\u0275inj=d.\u0275\u0275defineInjector({imports:[i.CommonModule,a.PaginationModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(z,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.PaginationModule,n.WmComponentsModule],declarations:[...q],exports:[...q]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&d.\u0275\u0275setNgModuleScope(z,{declarations:[U,g],imports:[i.CommonModule,a.PaginationModule,n.WmComponentsModule],exports:[U,g]}),d.\u0275\u0275setComponentScope(U,[p.NgClass,p.NgForOf,p.NgIf,p.NgTemplateOutlet,h.PaginationComponent,u.TextContentDirective,g],[]),e.ListComponent=U,e.ListItemDirective=g,e.ListModule=z})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("ngx-bootstrap/tooltip"),require("ngx-bootstrap/dropdown"),require("@wm/components/base"),require("@wm/components/basic"),require("@wm/components/input"),require("@wm/components/navigation/menu"),require("@wm/components/data/list"),require("@wm/components/data/pagination"),require("@wm/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","ngx-bootstrap/tooltip","ngx-bootstrap/dropdown","@wm/components/base","@wm/components/basic","@wm/components/input","@wm/components/navigation/menu","@wm/components/data/list","@wm/components/data/pagination","@wm/core","rxjs","rxjs/operators"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.table={}),e.ng.core,e.ng.common,e.ng.forms,e.tooltip,e.dropdown,e.wm.components.base,e.wm.components.basic,e.wm.components.input,e.wm.components.navigation.menu,e.wm.components.data.list,e.wm.components.data.pagination,e.wm.core,e.rxjs,e.rxjs.operators)}(this,(function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,m){"use strict";function g(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var f=g(t),v=g(i),b=g(n),y=g(s),w=g(o),P=g(r),C=g(l),A=g(c),I=g(d),E=g(p),O=g(u);const x=["rowExpansionTmpl"],R=["rowActionTmpl"],D=["filterTmpl"],S=["inlineWidgetTmpl"],T=["inlineWidgetTmplNew"],M=["customExprTmpl"],N=["rowExpansionActionTmpl"],k=["datagridElement"],L=["rowActionsView"],F=["multiColumnFilterView"],B=["inlineEditView"],j=["inlineEditNewView"],V=["customExprView"],G=["rowDetailView"],W=["rowExpansionActionView"],U=["dynamicTable"],q=["wmTable",""];function z(e,t){if(1&e&&f.\u0275\u0275element(0,"i"),2&e){const e=f.\u0275\u0275nextContext(2);f.\u0275\u0275classMapInterpolate1("app-icon panel-icon ",e.iconclass,"")}}const H=function(e){return{btn:e}};function Q(e,t){if(1&e&&f.\u0275\u0275elementContainer(0,29),2&e){const e=t.$implicit;f.\u0275\u0275nextContext(3);const i=f.\u0275\u0275reference(8),n=f.\u0275\u0275reference(10);f.\u0275\u0275property("ngTemplateOutlet","button"===e.widgetType?i:n)("ngTemplateOutletContext",f.\u0275\u0275pureFunction1(2,H,e))}}function Y(e,t){if(1&e&&f.\u0275\u0275element(0,"div",30),2&e){const e=f.\u0275\u0275nextContext(3);f.\u0275\u0275attributeInterpolate1("name","",e.name,"-export")}}function K(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"div",26),f.\u0275\u0275template(1,Q,1,4,"ng-container",27),f.\u0275\u0275template(2,Y,1,1,"div",28),f.\u0275\u0275elementEnd()),2&e){const e=f.\u0275\u0275nextContext(2);f.\u0275\u0275advance(1),f.\u0275\u0275property("ngForOf",e._actions.header),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",e.exportOptions.length)}}function J(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"div",19)(1,"h3",20)(2,"div",21),f.\u0275\u0275template(3,z,1,3,"i",22),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(4,"div",21),f.\u0275\u0275element(5,"div",23)(6,"div",24),f.\u0275\u0275elementEnd(),f.\u0275\u0275template(7,K,3,2,"div",25),f.\u0275\u0275elementEnd()()),2&e){const e=f.\u0275\u0275nextContext();f.\u0275\u0275advance(3),f.\u0275\u0275property("ngIf",e.iconclass),f.\u0275\u0275advance(2),f.\u0275\u0275property("innerHTML",e.title,f.\u0275\u0275sanitizeHtml),f.\u0275\u0275advance(1),f.\u0275\u0275property("innerHTML",e.subheading,f.\u0275\u0275sanitizeHtml),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",e.exportOptions.length||e._actions.header.length)}}function Z(e,t){if(1&e&&f.\u0275\u0275elementContainer(0,29),2&e){const e=t.$implicit;f.\u0275\u0275nextContext(2);const i=f.\u0275\u0275reference(8),n=f.\u0275\u0275reference(10);f.\u0275\u0275property("ngTemplateOutlet","button"===e.widgetType?i:n)("ngTemplateOutletContext",f.\u0275\u0275pureFunction1(2,H,e))}}function X(e,t){if(1&e&&(f.\u0275\u0275elementStart(0,"div",31),f.\u0275\u0275template(1,Z,1,4,"ng-container",27),f.\u0275\u0275elementEnd()),2&e){const e=f.\u0275\u0275nextContext();f.\u0275\u0275advance(1),f.\u0275\u0275property("ngForOf",e._actions.footer)}}const ee=function(e,t){return{"btn-sm":e,"disabled-new":t}};function te(e,t){if(1&e){const e=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"button",32),f.\u0275\u0275listener("click",(function(t){const i=f.\u0275\u0275restoreView(e).btn,n=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(n.invokeActionEvent(t,i.action))})),f.\u0275\u0275elementEnd()}if(2&e){const e=t.btn,i=f.\u0275\u0275nextContext();f.\u0275\u0275property("ngClass",f.\u0275\u0275pureFunction2(2,ee,"condensed"===i.spacing,"addNewRow"===e.key&&(i.isGridEditMode||i.isLoading))),f.\u0275\u0275attribute("aria-label",e.displayName)}}function ie(e,t){if(1&e){const e=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"a",33),f.\u0275\u0275listener("click",(function(t){const i=f.\u0275\u0275restoreView(e).btn,n=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(n.invokeActionEvent(t,i.action))})),f.\u0275\u0275elementEnd()}if(2&e){const e=t.btn,i=f.\u0275\u0275nextContext();f.\u0275\u0275property("ngClass",f.\u0275\u0275pureFunction2(1,ee,"condensed"===i.spacing,"addNewRow"===e.key&&(i.isGridEditMode||i.isLoading)))}}const ne={widgetType:"wm-table",hostClass:"app-grid app-panel panel"},ae={EXCEL:"fa fa-file-excel-o",CSV:"fa fa-file-text-o"},se="rowOperations",oe=()=>{};class re extends o.StylableComponent{static{this.initializeProps=void o.register("wm-table",new Map([["boundarylinks",{value:!1,...o.PROP_BOOLEAN}],["class",o.PROP_STRING],["confirmdelete",{value:"Are you sure you want to delete this?",...o.PROP_STRING}],["datasource",o.PROP_STRING],["dataset",o.PROP_ANY],["deletecanceltext",o.PROP_STRING],["deleteoktext",o.PROP_STRING],["deletemessage",{value:"Record deleted successfully",...o.PROP_STRING}],["directionlinks",{value:!0,...o.PROP_BOOLEAN}],["editmode",o.PROP_STRING],["errorstyle",{value:"hover",...o.PROP_STRING}],["enablecolumnselection",{value:!1,...o.PROP_BOOLEAN}],["enablesort",{value:!0,...o.PROP_BOOLEAN}],["errormessage",o.PROP_STRING],["exportformat",o.PROP_STRING],["exportdatasize",{value:100,...o.PROP_NUMBER}],["filtermode",o.PROP_STRING],["filteronkeypress",{value:!1,...o.PROP_BOOLEAN}],["filternullrecords",{value:!0,...o.PROP_BOOLEAN}],["forceellipses",{value:!0,...o.PROP_BOOLEAN}],["formposition",o.PROP_STRING],["gridclass",{value:"table-hover",...o.PROP_STRING}],["gridfirstrowselect",o.PROP_BOOLEAN],["iconclass",o.PROP_STRING],["insertmessage",{value:"Record added successfully",...o.PROP_STRING}],["isdynamictable",o.PROP_BOOLEAN],["isrowexpansionenabled",o.PROP_BOOLEAN],["loadingdatamsg",{value:"Loading...",...o.PROP_STRING}],["loadingicon",{value:"fa fa-circle-o-notch fa-spin",...o.PROP_STRING}],["maxsize",{value:5,...o.PROP_NUMBER}],["multiselect",o.PROP_BOOLEAN],["name",o.PROP_STRING],["navigation",{value:"Basic",...o.PROP_STRING}],["navigationalign",{value:"left",...o.PROP_STRING}],["nodatamessage",{value:"No data found.",...o.PROP_STRING}],["ondemandmessage",{value:"Load More",...o.PROP_STRING}],["showviewlessbutton",{value:!1,...o.PROP_BOOLEAN}],["viewlessmessage",{value:"View Less",...o.PROP_STRING}],["pagesize",o.PROP_NUMBER],["radioselect",o.PROP_BOOLEAN],["rowclass",o.PROP_STRING],["rowngclass",o.PROP_STRING],["searchlabel",{value:"Search",...o.PROP_STRING}],["show",{value:!0,...o.PROP_BOOLEAN}],["showheader",{value:!0,...o.PROP_BOOLEAN}],["shownewrow",{value:!0,...o.PROP_BOOLEAN}],["showrecordcount",o.PROP_BOOLEAN],["showrowindex",o.PROP_BOOLEAN],["spacing",{value:"normal",...o.PROP_STRING}],["statehandler",{value:"none",...o.PROP_STRING}],["subheading",o.PROP_STRING],["tabindex",{value:0,...o.PROP_NUMBER}],["title",o.PROP_STRING],["updatemessage",{value:"Record updated successfully",...o.PROP_STRING}]]))}set gridData(e){if(this.isDataLoading=!1,this.variableInflight&&_.isEmpty(e))return;if(this.variableInflight=!1,e&&0===e.length?this.callDataGridMethod("setStatus","nodata",this.nodatamessage):this.callDataGridMethod("setStatus","ready"),this.gridOptions.isNavTypeScrollOrOndemand()){if([this._gridData,this.currentPage]=this.paginationService.updateFieldsOnPagination(this,e),this.gridOptions.lastActionPerformed===this.gridOptions.ACTIONS.EDIT){const t=_.floor(this.actionRowIndex%this.pagesize);this._gridData.splice(this.actionRowIndex,1,e[t])}this.setDataGridOption("isLastPage",!!this.dataNavigator.isDisableNext),this.$element.find(".on-demand-datagrid").length||this.dataNavigator.isDisableNext||!this.onDemandLoad?this._gridData&&this._gridData.length&&(this.dataNavigator.isDisableNext||!this.isDataLoading)&&this.callDataGridMethod("hideLoadingIndicator",this.dataNavigator.isDisableNext,this.infScroll):this.gridOptions.addLoadMoreBtn()}else this._gridData=e;let t,i=0;if(this._onChange(this._gridData),this._onTouched(),u.isDefined(e)){if(this.gridOptions.bindScrollEvt(),this.isNavigationEnabled()&&this.dataNavigator.dn.currentPage&&(i=(this.dataNavigator.dn.currentPage-1)*(this.dataNavigator.maxResults||1)+1,this.setDataGridOption("startRowIndex",i)),t=this.callDataGridMethod("getOptions"),!t)return;!t.colDefs.length&&this.fieldDefs.length&&this.setDataGridOption("colDefs",u.getClonedObject(this.fieldDefs)),this.isdynamictable||_.isEmpty(e)||!t.colDefs.length||this.invokeEventCallback("beforedatarender",{$data:this._gridData,$columns:this.columns,data:this._gridData,columns:this.columns}),this.setDataGridOption("data",u.getClonedObject(this._gridData))}}get gridData(){return this._gridData||[]}get selecteditem(){return this.multiselect?u.getClonedObject(this.items):_.isEmpty(this.items)?{}:u.getClonedObject(this.items[0])}set selecteditem(e){this.items.length=0,this.callDataGridMethod("selectRows",e)}onKeyPress(e){13===e.which&&this.invokeEventCallback("enterkeypress",{$event:e,$data:this.gridData})}constructor(e,t,i,n,a,s,r,l,c,d,p,g,f){super(e,ne),this.inj=e,this.fb=t,this.app=i,this.dynamicComponentProvider=n,this.statePersistence=a,this.paginationService=s,this.viewport=r,this.parentList=l,this.binddataset=c,this.binddatasource=d,this.readonlygrid=p,this.ngZone=g,this.trustAsPipe=f,this.rowActionsCompiledTl={},this.rowFilterCompliedTl={},this.inlineCompliedTl={},this.inlineNewCompliedTl={},this.customExprCompiledTl={},this.customExprCompiledSummaryTl={},this.rowDefInstances={},this.rowDefMap={},this.rowExpansionActionTl={},this.columns={},this.formfields={},this.enablesort=!0,this.showviewlessbutton=!1,this.primaryKey=[],this.selectedItems=[],this.selectedItemChange=new h.Subject,this.selectedItemChange$=this.selectedItemChange.asObservable(),this.actions=[],this._actions={header:[],footer:[]},this.exportOptions=[],this.headerConfig=[],this.items=[],this.rowActions=[],this.shownavigation=!1,this.showFirstRow=!1,this.documentClickBind=oe,this.prevFilterExpression=[],this.fieldDefs=[],this.rowDef={},this.rowInstance={},this.fullFieldDefs=[],this.variableInflight=!0,this.applyProps=new Map,this.redraw=_.debounce(this._redraw,150),this.debouncedHandleLoading=_.debounce(this.handleLoading,350),this.rowFilter={},this._searchSortHandler=oe,this.searchSortHandler=(...e)=>{this._searchSortHandler.apply(this,e)},this.onRowFilterChange=oe,this.onFilterConditionSelect=oe,this.showClearIcon=oe,this.clearRowFilter=oe,this.adjustContainer=oe,this._pageLoad=!0,this.gridOptions={data:[],colDefs:[],startRowIndex:1,mode:"",sortInfo:{field:"",direction:""},filtermode:"",filteronkeypress:!1,searchLabel:"",rowActions:[],headerConfig:[],rowClass:"",editmode:"",formPosition:"",isMobile:!1,rowExpansionEnabled:!1,rowDef:{position:"0"},name:"",messages:{selectField:"Select Field"},securityUtils:{pipeTransform:{}},navigation:"",isdynamictable:"",deletedRowIndex:-1,lastActionPerformed:"scroll",isSearchTrigerred:!1,isDatasetUpdated:!1,isDataUpdatedByUser:!1,showviewlessbutton:!1,ondemandmessage:"",viewlessmessage:"",loadingdatamsg:"",isNextPageData:void 0,ACTIONS:{DELETE:"delete",EDIT:"edit",SEARCH_OR_SORT:"search_or_sort",DEFAULT:"scroll",FILTER_CRITERIA:"filter",DATASET_UPDATE:"dataset_update"},actionRowIndex:void 0,actionRowPage:void 0,isLastPage:!1,getCurrentPage:()=>_.get(this.dataNavigator,"dn.currentPage")||1,setCurrentPage:e=>{_.set(this.dataNavigator,"dn.currentPage",e||1)},getDataSource:()=>this.datasource,getPageSize:()=>this.pagesize,getPageCount:()=>this.dataNavigator.pageCount,enableNavigation:()=>{this.dataNavigator.widget.isDisableNext=!1,this.dataNavigator.widget.isDisableLast=!1,this.gridOptions.mode="viewless"},setDeletedRowIndex:e=>{this.setDataGridOption("deletedRowIndex",e)},setLastActionPerformed:e=>{this.setDataGridOption("lastActionPerformed",e||this.gridOptions.lastActionPerformed)},isNavTypeScrollOrOndemand:()=>"Scroll"===this.gridOptions.navigation||"On-Demand"===this.gridOptions.navigation,setIsSearchTrigerred:e=>{this.setDataGridOption("isSearchTrigerred",e)},setIsDatasetUpdated:e=>{this.setDataGridOption("isDatasetUpdated",e)},setIsNextPageData:e=>{this.setDataGridOption("isNextPageData",e)},setIsDataUpdatedByUser:e=>{this.setDataGridOption("isDataUpdatedByUser",e)},onDataRender:()=>{this.ngZone.run((()=>{this.gridData.length&&this.invokeEventCallback("datarender",{$data:this.gridData,data:this.gridData}),this.multiselect||(this.items.length=0),this.callDataGridMethod("selectRows",this.items),this.selectedItems=this.callDataGridMethod("getSelectedRows"),this.selectedItems.length&&this.selectedItemChange.next(this.selectedItems),this._isPageSearch&&this.filterInfo&&this.searchSortHandler(this.filterInfo,void 0,"search")}))},onRowSelect:(e,t)=>{this.ngZone.run((()=>{this.selectedItems=this.callDataGridMethod("getSelectedRows"),this.selectedItems.length&&this.selectedItemChange.next(this.selectedItems);const i=this.addRowIndex(e);if(this.selectedItems.length&&i.$index&&"none"!==this.getConfiguredState()&&this.dataNavigator&&o.unsupportedStatePersistenceTypes.indexOf(this.navigation)<0){const e={page:this.dataNavigator.dn.currentPage,index:i.$index-1},t=this.statePersistence.getWidgetState(this);_.get(t,"selectedItem")&&this.multiselect?(_.some(t.selectedItem,e)||t.selectedItem.push(e),this.statePersistence.setWidgetState(this,{selectedItem:t.selectedItem})):this.statePersistence.setWidgetState(this,{selectedItem:[e]})}else console.warn("Retain State handling on Widget "+this.name+" is not supported for current pagination type.");this.invokeEventCallback("rowselect",{$data:i,$event:t,row:i})}))},assignSelectedItems:(e,t,i)=>{this.ngZone.run((()=>{this.multiselect?-1===_.findIndex(this.items,e)&&(void 0===i?._selected||1==i?._selected||this.gridfirstrowselect&&0==i?.rowId&&!this.showFirstRow)&&(this.items.push(e),0==i?.rowId&&(this.showFirstRow=!0)):(this.items.length=0,this.items.push(e))}))},onRowDblClick:(e,t)=>{const i=this.addRowIndex(e);this.invokeEventCallback("rowdblclick",{$data:i,$event:t,row:i})},onRowDeselect:(e,t)=>{this.multiselect&&this.ngZone.run((()=>{this.items=_.pullAllWith(this.items,[e],_.isEqual),this.selectedItems=this.callDataGridMethod("getSelectedRows"),this.invokeEventCallback("rowdeselect",{$data:e,$event:t,row:e});const i=this.addRowIndex(e);if("none"!==this.getConfiguredState()&&o.unsupportedStatePersistenceTypes.indexOf(this.navigation)<0){const e={page:this.dataNavigator.dn.currentPage,index:i.$index-1},t=this.statePersistence.getWidgetState(this);_.get(t,"selectedItem")&&(_.remove(t.selectedItem,(function(t){return _.isEqual(t,e)})),this.statePersistence.removeWidgetState(this,"selectedItem"),t.selectedItem.length>0&&this.statePersistence.setWidgetState(this,{selectedItem:t.selectedItem}))}else console.warn("Retain State handling on Widget "+this.name+" is not supported for current pagination type.")}))},callOnRowDeselectEvent:(e,t)=>{this.items=this.selectedItems=this.callDataGridMethod("getSelectedRows"),this.invokeEventCallback("rowdeselect",{$data:e,$event:t,row:e})},callOnRowClickEvent:(e,t)=>{this.ngZone.run((()=>{if(t&&t.hasOwnProperty("originalEvent")){const i=this.addRowIndex(e);this.invokeEventCallback("rowclick",{$data:i,$event:t,row:i})}}))},closePopover:u.closePopover,onColumnSelect:(e,t)=>{this.selectedColumns=this.callDataGridMethod("getSelectedColumns"),this.invokeEventCallback("columnselect",{$data:e,$event:t})},onColumnDeselect:(e,t)=>{this.selectedColumns=this.callDataGridMethod("getSelectedColumns"),this.invokeEventCallback("columndeselect",{$data:e,$event:t})},onHeaderClick:(e,t)=>{this.invokeEventCallback("headerclick",{$event:t,$data:e,column:e})},onRowDelete:(e,t,i,n,a)=>{this.ngZone.run((()=>{this.deleteRecord(_.extend({},a,{row:e,cancelRowDeleteCallback:t,evt:i,callBack:n}))}))},onRowInsert:(e,t,i,n)=>{this.insertRecord(_.extend({},n,{row:e,event:t,callBack:i}))},beforeRowUpdate:(e,t)=>{this._liveTableParent&&this._liveTableParent.updateRow(e,t),this.prevData=u.getClonedObject(e)},afterRowUpdate:(e,t,i,n)=>{this.updateRecord(_.extend({},n,{row:e,prevData:this.prevData,event:t,callBack:i}))},onBeforeRowUpdate:(e,t,i)=>this.invokeEventCallback("beforerowupdate",{$event:t,$data:e,row:e,options:i}),onBeforeRowInsert:(e,t,i)=>this.invokeEventCallback("beforerowinsert",{$event:t,$data:e,row:e,options:i}),onBeforeRowDelete:(e,t,i)=>{const n=this.addRowIndex(e);return this.invokeEventCallback("beforerowdelete",{$event:t,row:n,options:i})},onFormRender:(e,t,i,n)=>{const a=n?"inlineInstanceNew":"inlineInstance";setTimeout((()=>{this.formWidgets={},this.fieldDefs.forEach((e=>{e[a]&&(this.formWidgets[e.field]=e[a],e[a].context&&(e[a].context.formWidgets=this.formWidgets),this.setDisabledOnField(i,e,a))})),this.invokeEventCallback("formrender",{$event:t,formWidgets:this.formWidgets,$operation:i})}),250)},onBeforeFormRender:(e,t,i)=>this.invokeEventCallback("beforeformrender",{$event:t,row:e,$operation:i}),registerRowNgClassWatcher:(e,t)=>{if(!this.rowngclass)return;const i=this.getClonedRowObject(e),n=`${this.widgetId}_rowNgClass_${t}`;u.$unwatch(n),this.registerDestroyListener(u.$watch(this.rowngclass,this.viewParent,{row:i},((e,i)=>{this.callDataGridMethod("applyRowNgClass",o.getConditionalClasses(e,i),t)}),n))},registerColNgClassWatcher:(e,t,i,n)=>{if(!t["col-ng-class"])return;const a=this.getClonedRowObject(e),s=`${this.widgetId}_colNgClass_${i}_${n}`;u.$unwatch(s),this.registerDestroyListener(u.$watch(t["col-ng-class"],this.viewParent,{row:a},((e,t)=>{this.callDataGridMethod("applyColNgClass",o.getConditionalClasses(e,t),i,n)}),s))},clearCustomExpression:()=>{this.customExprViewRef.clear(),this.customExprCompiledTl={},this.customExprCompiledSummaryTl={}},clearRowDetailExpression:()=>{this.rowDetailViewRef.clear(),this.rowDefMap={},this.rowDefInstances={}},generateCustomExpressions:(e,t,i)=>{const n=this.getClonedRowObject(e),a=e=>{if(!e)return;const a={},s={row:n,colDef:a};this.addEventsToContext(s);const o=this.customExprViewRef.createEmbeddedView(e,s).rootNodes[0],r=o.getAttribute("data-col-identifier");_.extend(a,this.columns[r]),i?this.customExprCompiledSummaryTl[r+t]=o:this.customExprCompiledTl[r+t]=o};this.isdynamictable?this.fieldDefs.forEach((e=>{a(e.customExprTmpl)})):this.customExprTmpl.forEach(a.bind(this))},generateRowExpansionCell:(e,t)=>{const i=this.getClonedRowObject(e);this.rowExpansionActionTmpl.forEach((e=>{this.rowExpansionActionTl[t]=this.rowExpansionActionViewRef.createEmbeddedView(e,{row:i}).rootNodes}))},getRowExpansionAction:e=>this.rowExpansionActionTl[e],generateRowDetailView:(e,t,i,n,a,s)=>{const o=this.getClonedRowObject(t),r=u.getClonedObject(this.rowDef);if(!1===this.rowInstance.invokeEventCallback("beforerowexpand",{$event:e,$data:r,row:o}))return;if(!r.content)return;if(s(),this.rowDefMap[i]&&this.rowDefMap[i].content===r.content)return void this.rowInstance.invokeEventCallback("rowexpand",{$event:e,row:o,$data:this.rowDefInstances[i]});this.rowDefMap[i]=r,n.empty(),n.hide(),a.show();const l={row:o,rowDef:r,containerLoad:t=>{setTimeout((()=>{a.hide(),n.show(),this.rowDefInstances[i]=t,this.rowInstance.invokeEventCallback("rowexpand",{$event:e,row:o,$data:t})}),500)}},c=this.rowDetailViewRef.createEmbeddedView(this.rowExpansionTmpl,l).rootNodes[0];n[0].appendChild(c),u.$appDigest()},onBeforeRowCollapse:(e,t,i)=>this.rowInstance.invokeEventCallback("beforerowcollapse",{$event:e,row:t,$data:this.rowDefInstances[i]}),onRowCollapse:(e,t)=>{this.rowInstance.invokeEventCallback("rowcollapse",{$event:e,row:t})},getCustomExpression:(e,t,i)=>{let n;return n=i?this.customExprCompiledSummaryTl[e+t]:this.customExprCompiledTl[e+t],n||""},clearRowActions:()=>{this.rowActionsViewRef.clear(),this.rowActionsCompiledTl={},this.rowExpansionActionViewRef.clear(),this.rowExpansionActionTl={}},generateRowActions:(e,t)=>{const i=this.getClonedRowObject(e);this.rowActionsCompiledTl[t]=[],this.rowActionTmpl.forEach((e=>{this.rowActionsCompiledTl[t].push(...this.rowActionsViewRef.createEmbeddedView(e,{row:i}).rootNodes)}))},getRowAction:e=>this.rowActionsCompiledTl[e],generateInlineEditRow:(e,t)=>{const i=this.getClonedRowObject(e);if(t)return this.inlineEditNewViewRef.clear(),this.inlineNewCompliedTl={},this.inlineWidgetNewTmpl.forEach((e=>{let t;const n={row:i,getControl:()=>this.ngform.controls[t+"_new"]||{},getValidationMessage:()=>this.columns[t]&&this.columns[t].validationmessage,getPendingSpinnerStatusNew:()=>this.columns[t]&&this.columns[t].showPendingSpinnerNew},a=this.inlineEditNewViewRef.createEmbeddedView(e,n).rootNodes[0];t=a.getAttribute("data-col-identifier"),this.inlineNewCompliedTl[t]=a})),void this.clearForm(!0);this.inlineEditViewRef.clear(),this.inlineCompliedTl={},this.clearForm(),this.inlineWidgetTmpl.forEach((e=>{let t;const n={row:i,getControl:()=>this.ngform.controls[t]||{},getValidationMessage:()=>this.columns[t]&&this.columns[t].validationmessage,getPendingSpinnerStatus:()=>this.columns[t]&&this.columns[t].showPendingSpinner},a=this.inlineEditViewRef.createEmbeddedView(e,n).rootNodes[0];t=a.getAttribute("data-col-identifier"),this.inlineCompliedTl[t]=a}))},getInlineEditWidget:(e,t,i)=>i?(this.gridOptions.setFieldValue(e+"_new",t),this.inlineNewCompliedTl[e]):(this.gridOptions.setFieldValue(e,t),this.inlineCompliedTl[e]),setFieldValue:(e,t)=>{const i=this.ngform.controls&&this.ngform.controls[e];i&&i.setValue(t)},getFieldValue:e=>{const t=this.ngform.controls&&this.ngform.controls[e];return t&&t.value},addLoadMoreBtn:()=>{this.callDataGridMethod("addLoadMoreBtn",this.ondemandmessage,this.loadingdatamsg,(e=>{this.gridOptions.setIsNextPageData(!0),this.gridOptions.setIsDataUpdatedByUser(!1),"viewless"===this.gridOptions.mode?(this.dataNavigator.navigatePage("first",e,!0),this.gridOptions.mode=""):(this.dataNavigator.navigatePage("next",e),this.isDataLoading=!0)}),this.infScroll)},bindScrollEvt:()=>{this._gridData&&this._gridData.length&&this.infScroll&&setTimeout((()=>{this.paginationService.bindScrollEvt(this,"tbody",o.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME)}),0)},generateFilterRow:()=>{this.filterViewRef.clear(),this.rowFilterCompliedTl={},this.filterTmpl.forEach((e=>{const t=this.filterViewRef.createEmbeddedView(e,{changeFn:this.onRowFilterChange.bind(this),isDisabled:e=>this.emptyMatchModes.indexOf(this.rowFilter[e]&&this.rowFilter[e].matchMode)>-1}).rootNodes[0];this.rowFilterCompliedTl[t.getAttribute("data-col-identifier")]=t}))},getFilterWidget:e=>this.rowFilterCompliedTl[e],setGridEditMode:e=>{this.ngZone.run((()=>{this.isGridEditMode=e,u.$appDigest()}))},setGridState:e=>{this.isLoading="loading"===e},setActionRowIndex:e=>{this.gridOptions.isNavTypeScrollOrOndemand()&&(this.actionRowIndex=parseInt(e),this.setDataGridOption("actionRowIndex",this.actionRowIndex),_.isNaN(this.actionRowIndex)||(this.actionRowPage=Math.floor(this.actionRowIndex/this.pagesize)+1,this.setDataGridOption("actionRowPage",this.actionRowPage||this.gridOptions.actionRowPage)))},clearActionRowIndex:()=>{this.isRowDeleted||!this.infScroll&&!this.onDemandLoad||this.clearActionRowVars()},noChangesDetected:()=>{this.toggleMessage(!0,"info","No Changes Detected","")},redrawWidgets:()=>{this.fieldDefs.forEach((e=>{u.triggerFn(e.inlineInstance&&e.inlineInstance.redraw),u.triggerFn(e.inlineInstanceNew&&e.inlineInstanceNew.redraw),u.triggerFn(e.filterInstance&&e.filterInstance.redraw)}))},searchHandler:this.searchSortHandler.bind(this),sortHandler:this.searchSortHandler.bind(this),timeoutCall:(e,t)=>{setTimeout(e,t)},runInNgZone:e=>{this.ngZone.run(e)},safeApply:()=>{u.$appDigest()},setTouched:e=>{const t=this.ngform.controls[e];t&&t.markAsTouched()},clearForm:this.clearForm.bind(this),callLoadInlineWidgetData:()=>{this.fullFieldDefs.forEach((e=>{_.isUndefined(e.isDataSetBound)&&u.triggerFn(e.loadInlineWidgetData&&e.loadInlineWidgetData.bind(e))}))},applyValidations:(e,t)=>{t?u.triggerFn(e.applyNewRowValidations&&e.applyNewRowValidations.bind(e)):u.triggerFn(e.applyValidations&&e.applyValidations.bind(e))},removeValidations:e=>{this.fullFieldDefs.forEach((t=>{t.readonly||"rowOperations"===t.binding||(e?u.triggerFn(t.removeNewRowValidations&&t.removeNewRowValidations.bind(t)):u.triggerFn(t.removeValidations&&t.removeValidations.bind(t)))}))}},this._selectedItemsExist=!1,this._onChange=()=>{},this._onTouched=()=>{},o.styler(this.nativeElement,this),this.ngform=t.group({}),this.addEventsToContext(this.context);[this.app.subscribe("check-state-persistence-options",(e=>{let t=_.get(this.datasource,"name");if(t||(t=o.extractDataSourceName(this.binddatasource)),_.get(e,"variable.name")===t&&this._pageLoad&&"none"!==this.getConfiguredState()){this._pageLoad=!1;const t=this.statePersistence.getWidgetState(this);t?e=this.handleStateParams(t,e):this.setDataGridOption("selectFirstRow",this.gridfirstrowselect)}})),this.app.subscribe("toggle-variable-state",(e=>{if(this.datasource&&this.datasource.execute(u.DataSource.Operation.IS_API_AWARE)&&u.isDataSourceEqual(e.variable,this.datasource)){if(this._pageLoad&&"none"!==this.getConfiguredState()){this._pageLoad=!1;const t=this.statePersistence.getWidgetState(this);t?e=this.handleStateParams(t,e):this.setDataGridOption("selectFirstRow",this.gridfirstrowselect)}u.isDefined(this.variableInflight)?this.debouncedHandleLoading(e):this.handleLoading(e)}})),this.app.subscribe("setup-cud-listener",(e=>{this.name===e&&(this._isDependent=!0,this.selectedItemChange$.pipe(m.debounceTime(250)).subscribe(this.triggerWMEvent.bind(this)))}))].forEach((e=>this.registerDestroyListener(e))),this.deleteoktext=this.appLocale.LABEL_OK,this.deletecanceltext=this.appLocale.LABEL_CANCEL}ngAfterContentInit(){super.ngAfterContentInit(),this.headerConfig=this.headerConfig.filter(this.filterEmptyValues.bind(this)),_.remove(this.fieldDefs,(e=>void 0===e));this._liveTableParent&&(this.isPartOfLiveGrid=!0),!this.readonlygrid&&this.editmode||("true"===this.readonlygrid?this.editmode="":this.isPartOfLiveGrid?this.editmode="inline"===this.isPartOfLiveGrid.formlayout?o.EDIT_MODE.FORM:o.EDIT_MODE.DIALOG:this.editmode=this.readonlygrid?o.EDIT_MODE.INLINE:""),this.gridOptions.colDefs=this.fullFieldDefs,this.gridOptions.rowActions=this.rowActions,this.gridOptions.headerConfig=this.headerConfig,this.gridOptions.rowClass=this.rowclass,this.gridOptions.editmode=this.editmode,this.gridOptions.formPosition=this.formposition,this.gridOptions.filtermode=this.filtermode,this.gridOptions.filteronkeypress=this.filteronkeypress,this.gridOptions.searchLabel=this.searchlabel,this.gridOptions.isMobile=u.isMobile(),this.gridOptions.name=this.name,this.gridOptions.securityUtils.pipeTransform=this.trustAsPipe,this.gridOptions.navigation=this.navigation,this.gridOptions.isdynamictable=this.isdynamictable,this.gridOptions.showviewlessbutton=this.showviewlessbutton,this.gridOptions.ondemandmessage=this.ondemandmessage,this.gridOptions.viewlessmessage=this.viewlessmessage,this.gridOptions.loadingdatamsg=this.loadingdatamsg,_.isEmpty(this.gridData)||(this.gridOptions.data=u.getClonedObject(this.gridData)),this.gridOptions.messages={selectField:this.appLocale.MESSAGE_SELECT_FIELD},this.datagridElement=$(this._tableElement.nativeElement),this.gridElement=this.$element,this.$element.css({position:"relative"}),_.forEach({showrowindex:"showRowIndex",multiselect:"multiselect",radioselect:"showRadioColumn",filternullrecords:"filterNullRecords",enablesort:"enableSort",showheader:"showHeader",enablecolumnselection:"enableColumnSelection",shownewrow:"showNewRow",gridfirstrowselect:"selectFirstRow"},((e,t)=>{u.isDefined(this[t])&&(this.gridOptions[e]="true"===this[t]||!0===this[t])})),"none"!==this.statehandler&&(this.gridOptions.selectFirstRow=!1),this.renderOperationColumns(),this.gridOptions.colDefs=this.fieldDefs,this.datagridElement.datatable(this.gridOptions),this.callDataGridMethod("setStatus","loading",this.loadingdatamsg),this.applyProps.forEach((e=>this.callDataGridMethod(...e))),this.editmode===o.EDIT_MODE.QUICK_EDIT&&(this.documentClickBind=this._documentClickBind.bind(this),document.addEventListener("click",this.documentClickBind))}getConfiguredState(){const e=this.statePersistence.computeMode(this.statehandler);return e&&e.toLowerCase()}handleStateParams(e,t){return _.get(e,"selectedItem")&&(this._selectedItemsExist=!0),t.options=t.options||{},_.get(e,"pagination")?(t.options.page=e.pagination,_.get(e,"sort")&&(this.sortStateHandler(e),t.options.orderBy=_.get(e,"sort.field")+" "+_.get(e,"sort.direction")),_.get(e,"search")&&(setTimeout((()=>{this.searchStateHandler(e)}),500),t.options.filterFields=this.getFilterFields(e.search))):(t.options.page=1,_.get(e,"search")&&(setTimeout((()=>{this.searchStateHandler(e)}),500),t.options.filterFields=this.getFilterFields(e.search)),_.get(e,"sort")&&(this.sortStateHandler(e),t.options.orderBy=_.get(e,"sort.field")+" "+_.get(e,"sort.direction"))),t}triggerWMEvent(e){"dialog"!==this.editmode&&(u.$invokeWatchers(!0),this.app.notify("wm-event",{eventName:"selectedItemChange",widgetName:this.name,row:e,table:this}))}sortStateHandler(e){const t=this.datagridElement.find('th[data-col-field="'+_.get(e,"sort.field")+'"] .sort-icon');"asc"===_.get(e,"sort.direction")&&t.length?t.addClass("asc wi wi-long-arrow-up"):"desc"===_.get(e,"sort.direction")&&t.length&&t.addClass("desc wi wi-long-arrow-down")}searchStateHandler(e){if(_.isArray(e.search))_.forEach(e.search,(e=>{this.rowFilter[e.field]&&(this.rowFilter[e.field].value=e.value,this.rowFilter[e.field].matchMode=e.matchMode,this.rowFilter[e.field].type=e.type,$(this.rowFilterCompliedTl[e.field]).length&&("integer"===e.type?parseInt(e.value):e.value,$(this.rowFilterCompliedTl[e.field]).find("input").val(e.value)))}));else{const t=this.datagridElement;t.find('[data-element="dgSearchText"]').val(e.search.value),t.find('[data-element="dgFilterValue"]').val(e.search.field)}}filterEmptyValues(e){return e.columns&&(e.columns=e.columns.filter(this.filterEmptyValues.bind(this))),void 0!==e}compareFilterExpressions(e,t){return!(e.length!==t.length||!_.isEqual(e,t))}setLastActionToFilterCriteria(){this.prevFilterExpression=_.get(this.datasource,"filterExpressions.rules")?u.getClonedObject(this.datasource.filterExpressions.rules):u.getClonedObject([].concat(this.datasource.dataBinding)),this.gridOptions.setLastActionPerformed(this.gridOptions.ACTIONS.FILTER_CRITERIA),this.gridOptions.setIsSearchTrigerred(!0)}setLastActionToDatasetUpdate(){this.gridOptions.setLastActionPerformed(this.gridOptions.ACTIONS.DATASET_UPDATE),this.gridOptions.setCurrentPage(1),this.gridOptions.setIsDatasetUpdated(!0)}checkIfVarFiltersApplied(){if(!_.isEmpty(_.get(this.datasource,"filterExpressions.rules"))||!_.isEmpty(_.get(this.datasource,"dataBinding"))){const e=_.get(this.datasource,"filterExpressions.rules")?this.datasource.filterExpressions.rules:[].concat(this.datasource.dataBinding);this.compareFilterExpressions(this.prevFilterExpression,e)||this.setLastActionToFilterCriteria()}}watchVariableDataSet(e){let t;if(this.gridOptions.isNavTypeScrollOrOndemand()&&this.checkIfVarFiltersApplied(),"wm.Variable"===_.get(this.datasource,"category")&&this._pageLoad&&"none"!==this.getConfiguredState()){const e=this.statePersistence.getWidgetState(this);this._pageLoad=!1,_.get(e,"selectedItem")?this._selectedItemsExist=!0:this.setDataGridOption("selectFirstRow",this.gridfirstrowselect),_.get(e,"search")&&(this.searchStateHandler(e),this.searchSortHandler(e.search,void 0,"search",!0)),_.get(e,"sort")&&(this.searchSortHandler(e.sort,void 0,"sort",!0),this.sortStateHandler(e)),_.get(e,"pagination")&&this.dataNavigator.pageChanged({page:e.pagination},!0)}if(this.dataNavigatorWatched&&_.isUndefined(e)&&this.__fullData)return;this.variableInflight&&!this.infScroll&&this.callDataGridMethod("setStatus","loading",this.loadingdatamsg),t=u.getValidJSON(e),t&&(e=t);const i=this.getSortExpr(),n=i.split(" ");if(i&&n.length&&(this.sortInfo={direction:n[1],field:n[0]}),this.isDataValid()){if(e){if(this.shownavigation&&!this.dataNavigatorWatched)return void this.enablePageNavigation()}else this.resetPageNavigation(),""!==e&&void 0!==e&&"wm.Variable"!==_.get(this.datasource,"category")||(this.variableInflight=!1),this.variableInflight||this.callDataGridMethod("setStatus","nodata",this.nodatamessage),this.setDataGridOption("selectFirstRow",this.gridfirstrowselect);!this.isNavigationEnabled()&&e&&this.checkFiltersApplied(this.getSortExpr()),!_.isObject(e)||""===e||e&&""===e.dataValue?this.variableInflight||this.setGridData([]):e&&this.populateGridData(e)}}ngOnDestroy(){document.removeEventListener("click",this.documentClickBind),this.navigatorResultWatch&&this.navigatorResultWatch.unsubscribe(),this.navigatorMaxResultWatch&&this.navigatorMaxResultWatch.unsubscribe(),super.ngOnDestroy()}addRowIndex(e){const t=u.getClonedObject(e),i=_.indexOf(this.gridOptions.data,e);return i<0?e:(t.$index=i+1,t.$isFirst=1===t.$index,t.$isLast=this.gridData.length===t.$index,t)}addEventsToContext(e){e.addNewRow=()=>this.addNewRow(),e.deleteRow=()=>this.deleteRow(),e.editRow=()=>this.editRow()}execute(e,t){return![u.DataSource.Operation.IS_API_AWARE,u.DataSource.Operation.IS_PAGEABLE,u.DataSource.Operation.SUPPORTS_SERVER_FILTER].includes(e)&&(this.datasource?this.datasource.execute(e,t):{})}isNavigationEnabled(){return this.shownavigation&&this.dataNavigator&&this.dataNavigatorWatched}getClonedRowObject(e){const t=u.getClonedObject(e);return t.getProperty=e=>_.get(t,e),t.$isFirst=1===t.$index,t.$isLast=this.gridData.length===t.$index,delete t.$$index,delete t.$$pk,t}handleLoading(e){this.variableInflight=e.active,e.active?this.callDataGridMethod("setStatus","loading",this.loadingdatamsg):!this.isGridEditMode&&_.isEmpty(this.dataset)?this.callDataGridMethod("setStatus","nodata",this.nodatamessage):this.callDataGridMethod("setStatus","ready")}setDisabledOnField(e,t,i){"new"===e||!t["primary-key"]||"assigned"!==t.generator||t["related-entity-name"]||t.period||(t[i].disabled=!0)}resetFormControl(e){e.markAsUntouched(),e.markAsPristine()}clearForm(e){const t=this.ngform.controls;_.keys(this.ngform.controls).forEach((i=>{!i.endsWith("_filter")&&(i.endsWith("_new")&&e||!i.endsWith("_new")&&!e)&&(t[i].setValue(""),this.resetFormControl(t[i]))}))}showFieldBasedOnScreenType(e){let t;return t=u.isMobile()&&this.viewport.isMobileType?e.mobileDisplay:this.viewport.isTabletType?e.tabletDisplay:e.pcDisplay,t}isEmptyRecord(e){let t,i;return Object.keys(e).every(((n,a)=>(t=e[n],i=this.fieldDefs.length&&u.isDefined(this.fieldDefs[a])&&this.showFieldBasedOnScreenType(this.fieldDefs[a])||!0,!i||(null==t||""===t))))}removeEmptyRecords(e){const t=e;let i=[];return t&&t.length&&(i=t.filter((e=>e&&!this.isEmptyRecord(e)))),i}setGridData(e){const t=this.filternullrecords?this.removeEmptyRecords(e):e;"wm.Variable"!==_.get(this.datasource,"category")&&void 0!==_.get(this.datasource,"category")||(this.variableInflight=!1),this.variableInflight||(t&&0===t.length?this.callDataGridMethod("setStatus","nodata",this.nodatamessage):this.callDataGridMethod("setStatus","ready")),this.gridData=t}setDataGridOption(e,t,i=!1){if(!this.datagridElement||!this.datagridElement.datatable||!this.datagridElement.datatable("instance"))return;const n={};!u.isDefined||_.isEqual(t,this.gridOptions[e])&&!i||(n[e]=t,this.datagridElement.datatable("option",n),this.gridOptions[e]=t)}callDataGridMethod(...e){if(this.datagridElement&&this.datagridElement.datatable("instance"))return this.datagridElement.datatable.apply(this.datagridElement,e);this.applyProps.set(e[1],e)}renderOperationColumns(){let e,t;const i=o.getRowOperationsColumn(),n={name:i.field,field:i.field,isPredefined:!0};this.fieldDefs.length&&(e=_.find(this.fullFieldDefs,{field:se,type:"custom"}),_.remove(this.fieldDefs,{type:"custom",field:se}),_.remove(this.headerConfig,{field:i.field}),this.rowActions.length&&(e?(t=e.rowactionsposition?_.toNumber(e.rowactionsposition):this.fieldDefs.length,this.fieldDefs.splice(t,0,e),0===t?this.headerConfig.unshift(n):this.headerConfig.push(n)):(this.fieldDefs.push(i),this.headerConfig.push(n))),this.setDataGridOption("headerConfig",this.headerConfig))}enablePageNavigation(){this.dataset&&this.binddataset&&this.dataNavigator&&(this.dataNavigatorWatched=!0,this.navigatorResultWatch&&this.navigatorResultWatch.unsubscribe(),this.navigatorResultWatch=this.dataNavigator.resultEmitter.subscribe((e=>{u.isDefined(e)?_.isEqual(this.dataset,e)?this.watchVariableDataSet(e):_.isArray(e)?this.widget.dataset=[].concat(e):_.isObject(e)?this.widget.dataset=_.extend({},e):this.widget.dataset=e:this.widget.dataset=void 0}),!0),this.navigatorMaxResultWatch&&this.navigatorMaxResultWatch.unsubscribe(),this.navigatorMaxResultWatch=this.dataNavigator.maxResultsEmitter.subscribe((e=>{this.pagesize=e})),this.__fullData=this.dataset,this.dataNavigator.widget.maxResults=this.pagesize||5,this.dataNavigator.options={maxResults:this.pagesize||5},this.removePropertyBinding("dataset"),this.dataNavigator.setBindDataSet(this.binddataset,this.viewParent,this.datasource,this.dataset,this.binddatasource,void 0,this.statehandler))}resetPageNavigation(){this.dataNavigator&&this.dataNavigator.resetPageNavigation()}isDataValid(){let e;const t=this.dataset||{};return t.error&&(e=t.error),t.data&&t.data.error&&t.data.errorMessage&&(e=t.data.errorMessage),!e||(this.setGridData([]),this.callDataGridMethod("setStatus","error",e),!1)}populateGridData(e){let t;if(e=o.transformData(e,this.name),!this.isNavigationEnabled()&&this._isClientSearch?(t=u.getClonedObject(e),t=this.getSearchResult(t,this.filterInfo),t=this.getSortResult(t,this.sortInfo),this.serverData=t):this.serverData=e,this.isdynamictable?this.createGridColumns(this.serverData):this.setGridData(this.serverData),"none"!==this.getConfiguredState()&&this._selectedItemsExist&&e.length){const e=this.statePersistence.getWidgetState(this);let t;_.get(e,"selectedItem")&&(t=e.selectedItem.filter((e=>e.page===this.dataNavigator.dn.currentPage)),this._selectedItemsExist=!1,t.length&&this.selecteditem.length!==e.selectedItem.length&&(_.isArray(this.selecteditem)?t.forEach((e=>{this.selectItem(e.index,void 0)})):this.selecteditem=t.map((function(e){return e.index}))))}}async generateDynamicColumns(e){if(this.fieldDefs=[],this.filterTmpl._results=[],_.isEmpty(e))return;let t="";e.forEach((e=>{let i="",n="";_.forEach(e,((e,t)=>{_.isUndefined(e)||""===e||("customExpression"===t?n=e:i+=` ${t}="${e}"`)})),t+=`<wm-table-column ${i} tableName="${this.name}${this.$attrs.get("table_reference")}">${n}</wm-table-column>`})),this.dynamicTableRef.clear(),this._dynamicContext||(this._dynamicContext=Object.create(this.viewParent),this._dynamicContext[this.getAttr("wmTable")]=this),this.noOfColumns=e.length;const i=await this.dynamicComponentProvider.getComponentFactoryRef("app-table-dynamic-"+this.widgetId,t,{noCache:!0,transpile:!0}),n=this.dynamicTableRef.createComponent(i,0,this.inj);u.extendProto(n.instance,this._dynamicContext),this.$element.find(".dynamic-table-container")[0].appendChild(n.location.nativeElement)}prepareColDefs(e){let t,i,n=0,a=0;this.fieldDefs=[],this.headerConfig=[],this.columns={},i=e,t=o.prepareFieldDefs(i),_.forEach(t,(e=>{e.binding=e.field,e.caption=e.displayName,e.pcDisplay=!0,e.mobileDisplay=!0,e.tabletDisplay=!0,e.searchable=!0,e.showinfilter=!0,e.type="string",e.index=n,e.headerIndex=a,n++,a++})),t.forEach((e=>{this.columns[e.field]=e})),this.invokeEventCallback("beforedatarender",{$data:e,$columns:this.columns,data:e,columns:this.columns}),t=[],_.forEach(this.columns,(e=>{t.push(e)})),this.generateDynamicColumns(t)}createGridColumns(e){const t=e&&!e.error;t&&!_.isArray(e)&&(e=[e]),_.isEmpty(e)?this.setGridData(e):t&&(this.prepareColDefs(e),this.serverData=e,this.setGridData(this.serverData))}getSortExpr(){let e,t;return this.datasource&&this.datasource.execute(u.DataSource.Operation.IS_PAGEABLE)&&(t=this.datasource.execute(u.DataSource.Operation.GET_PAGING_OPTIONS),e=_.isEmpty(t)?"":o.getOrderByExpr(t.sort)),e||""}onPropertyChange(e,t,i){let n;switch(e){case"datasource":!1===t.startUpdate&&(this.variableInflight=!1,this.callDataGridMethod("setStatus","nodata",this.nodatamessage)),this.watchVariableDataSet(this.dataset),this.onDataSourceChange();break;case"dataset":if(this.gridOptions.isNavTypeScrollOrOndemand()&&1===this.gridOptions.getCurrentPage()&&this.gridOptions.setIsNextPageData(!1),this.binddatasource&&!this.datasource)return;this.parentList&&!this.datasource&&_.startsWith(this.binddataset,"item")&&(this.datasource=u.getDatasourceFromExpr(this.widget.$attrs.get("datasetboundexpr"),this)),this.gridOptions.isNavTypeScrollOrOndemand()&&(this.gridOptions.isNextPageData?this.gridOptions.setIsDataUpdatedByUser(!1):(this.gridOptions.setIsDataUpdatedByUser(!0),this.setLastActionToDatasetUpdate(),this.gridOptions.setIsNextPageData(!1))),("wm.Variable"!==_.get(this.datasource,"category")||!this._pageLoad||"none"===this.getConfiguredState()||this.parentList&&_.startsWith(this.binddataset,"item"))&&this.watchVariableDataSet(t);break;case"filtermode":this.setDataGridOption("filtermode",t);break;case"searchlabel":this.setDataGridOption("searchLabel",t);break;case"navigation":if("Advanced"===t)return void(this.navigation="Classic");"None"!==t&&(this.shownavigation=!0),this.setDataGridOption("navigation",this.navigation),this.onDemandLoad=t===o.NAVIGATION_TYPE.ONDEMAND,this.infScroll=t===o.NAVIGATION_TYPE.SCROLL,this.navControls=t;break;case"gridfirstrowselect":this.setDataGridOption("selectFirstRow",t);break;case"gridclass":this.callDataGridMethod("option","cssClassNames.grid",t);break;case"nodatamessage":this.callDataGridMethod("option","dataStates.nodata",t);break;case"loadingdatamsg":this.callDataGridMethod("option","dataStates.loading",t);break;case"loadingicon":this.callDataGridMethod("option","loadingicon",t);break;case"spacing":this.callDataGridMethod("option","spacing",t),this.navigationSize="condensed"===t?"small":"";break;case"exportformat":this.exportOptions=[],t&&_.forEach(_.split(t,","),(e=>{this.exportOptions.push({label:e,icon:ae[e]})}));break;case"shownewrow":n=t||_.some(this.actions,(e=>_.includes(e.action,"addNewRow()"))),this.callDataGridMethod("option","actionsEnabled.new",n);break;case"pagesize":this.dataNavigator.options={maxResults:t},this.dataNavigator.widget.maxResults=t,this.dataNavigator.maxResults=t;break;case"ondemandmessage":t&&this.$element.find(".on-demand-datagrid > a").text(t),this.gridOptions.ondemandmessage=t;break;case"viewlessmessage":this.gridOptions.viewlessmessage=t;break;case"show":t?this.invokeEventCallback("show"):this.invokeEventCallback("hide");default:super.onPropertyChange(e,t,i)}}onDataSourceChange(){this.fieldDefs.forEach((e=>{u.triggerFn(e.onDataSourceChange&&e.onDataSourceChange.bind(e))}))}clearActionRowVars(){this.actionRowIndex=void 0,this.actionRowPage=void 0,this.setDataGridOption("actionRowIndex",void 0),this.setDataGridOption("actionRowPage",void 0)}onStyleChange(e,t,i){switch(e){case"width":this.callDataGridMethod("setGridDimensions","width",t);break;case"height":this.callDataGridMethod("setGridDimensions","height",t)}super.onStyleChange(e,t,i)}populateActions(){this._actions.header=[],this._actions.footer=[],_.forEach(this.actions,(e=>{_.includes(e.position,"header")&&this._actions.header.push(e),_.includes(e.position,"footer")&&this._actions.footer.push(e)}))}renderDynamicFilterColumn(e){this.isdynamictable&&this.filterTmpl._results.push(e)}registerColumns(e,t){if(u.isMobile()&&this.viewport.isMobileType){if(!e.mobileDisplay)return}else if(this.viewport.isTabletType){if(!e.tabletDisplay)return}else if(!e.pcDisplay)return;e["primary-key"]&&this.primaryKey.push(e.field),this.fieldDefs[t]=e;const i=this.fieldDefs.length;this.fullFieldDefs.push(e),this.rowFilter[e.field]={value:void 0},this.fieldDefs.forEach((e=>{this.columns[e.field]=e})),this.isdynamictable&&i===this.noOfColumns&&(this.renderOperationColumns(),this.setDataGridOption("colDefs",this.fieldDefs))}registerFormField(e,t){this.formfields[e]=t}registerActions(e){this.actions.push(e),this.populateActions()}registerRow(e,t){this.rowDef=e,this.rowInstance=t,this.callDataGridMethod("option","cssClassNames.rowExpandIcon",this.rowDef.expandicon),this.callDataGridMethod("option","cssClassNames.rowCollapseIcon",this.rowDef.collapseicon),this.gridOptions.rowExpansionEnabled=!0,this.gridOptions.rowDef=this.rowDef}registerRowActions(e){this.rowActions.push(e)}selectItem(e,t){t&&(this.serverData=t),_.isObject(e)&&(e=_.omitBy(e,(e=>_.isArray(e)&&_.isEmpty(e)))),this.callDataGridMethod("selectRow",e,!0)}deselectItem(e){this.callDataGridMethod("deselectRow",e)}onDataNavigatorDataSetChange(e){let t;return this.__fullData=e,this.checkFiltersApplied(this.getSortExpr()),this._isClientSearch?(t=u.getClonedObject(this.__fullData),_.isObject(t)&&!_.isArray(t)&&(t=[t]),t=this.getSearchResult(t,this.filterInfo),t=this.getSortResult(t,this.sortInfo),t):e}toggleMessage(e,t,i,n){e&&i&&this.app.notifyApp(i,t,n)}export(e){let t;const i=_.isEmpty(this.sortInfo)?"":this.sortInfo.field+" "+this.sortInfo.direction,n={};let a,s;this.fieldDefs.forEach((e=>{if(e.field===se||!e.show)return;const t={header:e.displayName};e.exportexpression?t.expression=e.exportexpression:t.field=e.field,n[e.field]=t})),t=this.getFilterFields(this.filterInfo),s={matchMode:"anywhereignorecase",filterFields:t,orderBy:i,exportType:e.label,logicalOp:"AND",exportSize:this.exportdatasize,columns:n},a=this.invokeEventCallback("beforeexport",{$data:s}),!1!==a&&(s.fields=_.values(s.columns),this.datasource.execute(u.DataSource.Operation.DOWNLOAD,{data:s}))}expandRow(e){this.callDataGridMethod("expandRow",e)}collapseRow(e){this.callDataGridMethod("collapseRow",e)}_documentClickBind(e){const t=e.target;this.$element[0].contains(t)||e.target.doctype||(e=>{let t=!1;return[".dropdown-menu",".uib-typeahead-match",".modal-dialog",".toast"].forEach((i=>{if(e.closest(i).length)return t=!0,!1})),t||["bsdatepickerdaydecorator"].forEach((i=>{if(e[0].hasAttribute(i))return t=!0,!1})),t})($(t))||this.callDataGridMethod("saveRow")}_redraw(e){e?this.datagridElement.datatable(this.gridOptions):setTimeout((()=>{this.callDataGridMethod("setColGroupWidths"),this.callDataGridMethod("addOrRemoveScroll")}))}invokeActionEvent(e,t){u.$parseEvent(t)(this.viewParent,Object.assign(this.context,{$event:e}))}handleEvent(e,t,i,n){"select"!==t&&super.handleEvent(this.nativeElement,t,i,n)}triggerUploadEvent(e,t,i,n){const a={$event:e,row:n};this.columns[i]&&("change"===t&&(a.newVal=e.target.files,a.oldVal=this.columns[i]._oldUploadVal,this.columns[i]._oldUploadVal=a.newVal),this.columns[i].invokeEventCallback(t,a))}registerFormWidget(){}writeValue(){}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}ngOnDetach(){super.ngOnDetach(),"wm.Variable"===_.get(this.datasource,"category")&&"none"!==this.getConfiguredState()?this._pageLoad=!1:this._pageLoad=!0}static{this.\u0275fac=function(e){return new(e||re)(f.\u0275\u0275directiveInject(f.Injector),f.\u0275\u0275directiveInject(b.FormBuilder),f.\u0275\u0275directiveInject(O.App),f.\u0275\u0275directiveInject(O.DynamicComponentRefProvider),f.\u0275\u0275directiveInject(O.StatePersistence),f.\u0275\u0275directiveInject(O.PaginationService),f.\u0275\u0275directiveInject(O.Viewport),f.\u0275\u0275directiveInject(I.ListComponent,8),f.\u0275\u0275injectAttribute("dataset.bind"),f.\u0275\u0275injectAttribute("datasource.bind"),f.\u0275\u0275injectAttribute("readonlygrid"),f.\u0275\u0275directiveInject(f.NgZone),f.\u0275\u0275directiveInject(w.TrustAsPipe))}}static{this.\u0275cmp=f.\u0275\u0275defineComponent({type:re,selectors:[["","wmTable",""]],contentQueries:function(e,t,i){if(1&e&&(f.\u0275\u0275contentQuery(i,x,5),f.\u0275\u0275contentQuery(i,R,5),f.\u0275\u0275contentQuery(i,D,5),f.\u0275\u0275contentQuery(i,S,5),f.\u0275\u0275contentQuery(i,T,5),f.\u0275\u0275contentQuery(i,M,5),f.\u0275\u0275contentQuery(i,N,5)),2&e){let e;f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.rowExpansionTmpl=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.rowActionTmpl=e),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.filterTmpl=e),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.inlineWidgetTmpl=e),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.inlineWidgetNewTmpl=e),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.customExprTmpl=e),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.rowExpansionActionTmpl=e)}},viewQuery:function(e,i){if(1&e&&(f.\u0275\u0275viewQuery(p.PaginationComponent,7),f.\u0275\u0275viewQuery(k,7),f.\u0275\u0275viewQuery(L,7,t.ViewContainerRef),f.\u0275\u0275viewQuery(F,7,t.ViewContainerRef),f.\u0275\u0275viewQuery(B,7,t.ViewContainerRef),f.\u0275\u0275viewQuery(j,7,t.ViewContainerRef),f.\u0275\u0275viewQuery(V,7,t.ViewContainerRef),f.\u0275\u0275viewQuery(G,7,t.ViewContainerRef),f.\u0275\u0275viewQuery(W,7,t.ViewContainerRef),f.\u0275\u0275viewQuery(U,7,t.ViewContainerRef)),2&e){let e;f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i.dataNavigator=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i._tableElement=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i.rowActionsViewRef=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i.filterViewRef=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i.inlineEditViewRef=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i.inlineEditNewViewRef=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i.customExprViewRef=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i.rowDetailViewRef=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i.rowExpansionActionViewRef=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(i.dynamicTableRef=e.first)}},hostBindings:function(e,t){1&e&&f.\u0275\u0275listener("keypress",(function(e){return t.onKeyPress(e)}))},features:[f.\u0275\u0275ProvidersFeature([o.provideAs(re,n.NG_VALUE_ACCESSOR,!0),o.provideAsWidgetRef(re)]),f.\u0275\u0275InheritDefinitionFeature],attrs:q,decls:29,vars:4,consts:[["class","panel-heading",4,"ngIf"],[1,"app-datagrid"],["datagridElement",""],[1,"panel-footer","clearfix",3,"hidden"],[1,"app-datagrid-paginator",3,"hidden"],["wmPagination","","show.bind","shownavigation","navigationalign.bind","navigationalign","navigationsize.bind","navigationSize","navigation.bind","navControls","showrecordcount.bind","showrecordcount","maxsize.bind","maxsize","boundarylinks.bind","boundarylinks","forceellipses.bind","forceellipses","directionlinks.bind","directionlinks"],["class","app-datagrid-actions",4,"ngIf"],["buttonRef",""],["anchorRef",""],["hidden",""],["multiColumnFilterView",""],["inlineEditView",""],["inlineEditNewView",""],["rowActionsView",""],["rowExpansionActionView",""],["customExprView",""],["dynamicTable",""],["rowDetailView",""],[1,"dynamic-table-container"],[1,"panel-heading"],[1,"panel-title"],[1,"pull-left"],[3,"class",4,"ngIf"],[1,"heading",3,"innerHTML"],[1,"description",3,"innerHTML"],["class","panel-actions app-datagrid-actions",4,"ngIf"],[1,"panel-actions","app-datagrid-actions"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["wmMenu","","dropdown","","caption.bind","appLocale.LABEL_EXPORT","autoclose","always","dataset.bind","exportOptions","select.event","export($item)","menuposition","down,left",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["wmMenu","","dropdown","","caption.bind","appLocale.LABEL_EXPORT","autoclose","always","dataset.bind","exportOptions","select.event","export($item)","menuposition","down,left"],[1,"app-datagrid-actions"],["wmButton","","caption.bind","btn.displayName","show.bind","btn.show","class.bind","btn.class","iconclass.bind","btn.iconclass","type","button","shortcutkey.bind","btn.shortcutkey","tabindex.bind","btn.tabindex","hint.bind","btn.title","disabled.bind","btn.disabled","conditionalclass.bind","btn.conditionalclass","conditionalstyle.bind","btn.conditionalstyle",3,"ngClass","click"],["wmAnchor","","caption.bind","btn.displayName","show.bind","btn.show","class.bind","btn.class","iconclass.bind","btn.iconclass","shortcutkey.bind","btn.shortcutkey","tabindex.bind","btn.tabindex","hint.bind","btn.title","hyperlink.bind","btn.hyperlink","target.bind","btn.target","conditionalclass.bind","btn.conditionalclass","conditionalstyle.bind","btn.conditionalstyle",3,"ngClass","click"]],template:function(e,t){1&e&&(f.\u0275\u0275template(0,J,8,4,"div",0),f.\u0275\u0275element(1,"div",1,2),f.\u0275\u0275elementStart(3,"div",3)(4,"div",4),f.\u0275\u0275element(5,"nav",5),f.\u0275\u0275elementEnd(),f.\u0275\u0275template(6,X,2,1,"div",6),f.\u0275\u0275elementEnd(),f.\u0275\u0275template(7,te,1,5,"ng-template",null,7,f.\u0275\u0275templateRefExtractor),f.\u0275\u0275template(9,ie,1,4,"ng-template",null,8,f.\u0275\u0275templateRefExtractor),f.\u0275\u0275elementStart(11,"div",9),f.\u0275\u0275elementContainer(12,null,10)(14,null,11)(16,null,12)(18,null,13)(20,null,14)(22,null,15)(24,null,16)(26,null,17),f.\u0275\u0275element(28,"div",18),f.\u0275\u0275elementEnd()),2&e&&(f.\u0275\u0275property("ngIf",t.title||t.subheading||t.iconclass||t.exportOptions.length||t._actions.header.length),f.\u0275\u0275advance(3),f.\u0275\u0275property("hidden",!t._actions.footer.length&&(!t.shownavigation||t.onDemandLoad&&t.dataNavigator.isDisableNext||(null==t.dataNavigator?null:t.dataNavigator.dataSize)<=t.pagesize)),f.\u0275\u0275advance(1),f.\u0275\u0275property("hidden",!(null!=t.dataNavigator&&t.dataNavigator.dataSize)&&!(null!=t.dataNavigator.datasource&&(null!=t.dataNavigator.datasource.pagination&&t.dataNavigator.datasource.pagination.next))||!t.shownavigation||t.onDemandLoad&&t.dataNavigator.isDisableNext||(null==t.dataNavigator?null:t.dataNavigator.dataSize)<=t.pagesize),f.\u0275\u0275advance(2),f.\u0275\u0275property("ngIf",t._actions.footer.length))},dependencies:[P.AnchorComponent,y.BsDropdownDirective,v.NgClass,v.NgForOf,v.NgIf,v.NgTemplateOutlet,C.ButtonComponent,A.MenuComponent,E.PaginationComponent],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&f.\u0275setClassMetadata(re,[{type:t.Component,args:[{selector:"[wmTable]",providers:[o.provideAs(re,n.NG_VALUE_ACCESSOR,!0),o.provideAsWidgetRef(re)],template:'<div class="panel-heading" *ngIf="title || subheading || iconclass || exportOptions.length || _actions.header.length">\n    <h3 class="panel-title">\n        <div class="pull-left">\n            <i class="app-icon panel-icon {{iconclass}}" *ngIf="iconclass"></i>\n        </div>\n        <div class="pull-left">\n            <div class="heading" [innerHTML]="title"></div>\n            <div class="description" [innerHTML]="subheading"></div>\n        </div>\n        <div class="panel-actions app-datagrid-actions" *ngIf="exportOptions.length || _actions.header.length">\n            <ng-container *ngFor="let btn of _actions.header"\n                          [ngTemplateOutlet]="btn.widgetType === \'button\' ? buttonRef : anchorRef" [ngTemplateOutletContext]="{btn:btn}">\n            </ng-container>\n            <div wmMenu dropdown caption.bind="appLocale.LABEL_EXPORT" *ngIf="exportOptions.length"  autoclose="always" attr.name="{{name}}-export"\n                dataset.bind="exportOptions" select.event="export($item)" menuposition="down,left"></div>\n        </div>\n    </h3>\n</div>\n<div class="app-datagrid" #datagridElement></div>\n\n<div class="panel-footer clearfix" [hidden]="!_actions.footer.length && (!shownavigation || (onDemandLoad && dataNavigator.isDisableNext) || dataNavigator?.dataSize <= pagesize)">\n    <div class="app-datagrid-paginator" [hidden]="(!dataNavigator?.dataSize && !dataNavigator.datasource?.pagination?.next) || !shownavigation || (onDemandLoad && dataNavigator.isDisableNext) || dataNavigator?.dataSize <= pagesize">\n        <nav wmPagination show.bind="shownavigation" navigationalign.bind="navigationalign"\n             navigationsize.bind="navigationSize"\n             navigation.bind="navControls" showrecordcount.bind="showrecordcount" maxsize.bind="maxsize"\n             boundarylinks.bind="boundarylinks"\n             forceellipses.bind="forceellipses" directionlinks.bind="directionlinks"></nav>\n    </div>\n    <div class="app-datagrid-actions" *ngIf="_actions.footer.length">\n        <ng-container *ngFor="let btn of _actions.footer"\n                      [ngTemplateOutlet]="btn.widgetType === \'button\' ? buttonRef : anchorRef" [ngTemplateOutletContext]="{btn:btn}">\n        </ng-container>\n    </div>\n</div>\n\n<ng-template #buttonRef let-btn="btn">\n    <button wmButton caption.bind="btn.displayName" show.bind="btn.show" class.bind="btn.class"  iconclass.bind="btn.iconclass" (click)="invokeActionEvent($event, btn.action)"\n            [ngClass]="{\'btn-sm\': spacing === \'condensed\', \'disabled-new\': btn.key === \'addNewRow\' && (isGridEditMode || isLoading)}"\n            type="button" shortcutkey.bind="btn.shortcutkey" tabindex.bind="btn.tabindex" hint.bind="btn.title" [attr.aria-label]="btn.displayName" disabled.bind="btn.disabled" conditionalclass.bind="btn.conditionalclass" conditionalstyle.bind="btn.conditionalstyle"></button>\n</ng-template>\n\n<ng-template #anchorRef let-btn="btn">\n    <a wmAnchor caption.bind="btn.displayName" show.bind="btn.show" class.bind="btn.class"  iconclass.bind="btn.iconclass" (click)="invokeActionEvent($event, btn.action)"\n            [ngClass]="{\'btn-sm\': spacing === \'condensed\', \'disabled-new\': btn.key === \'addNewRow\' && (isGridEditMode || isLoading)}"\n            shortcutkey.bind="btn.shortcutkey" tabindex.bind="btn.tabindex" hint.bind="btn.title"\n            hyperlink.bind="btn.hyperlink" target.bind="btn.target" conditionalclass.bind="btn.conditionalclass" conditionalstyle.bind="btn.conditionalstyle"></a>\n</ng-template>\n\n<div hidden>\n    <ng-container #multiColumnFilterView></ng-container>\n\n    <ng-container #inlineEditView></ng-container>\n\n    <ng-container #inlineEditNewView></ng-container>\n\n    <ng-container #rowActionsView></ng-container>\n\n    <ng-container #rowExpansionActionView></ng-container>\n\n    <ng-container #customExprView></ng-container>\n\n    <ng-container #dynamicTable></ng-container>\n\n    <ng-container #rowDetailView></ng-container>\n\n    <div class="dynamic-table-container"></div>\n</div>\n'}]}],(function(){return[{type:f.Injector},{type:b.FormBuilder},{type:O.App},{type:O.DynamicComponentRefProvider},{type:O.StatePersistence},{type:O.PaginationService},{type:O.Viewport},{type:I.ListComponent,decorators:[{type:t.Optional}]},{type:void 0,decorators:[{type:t.Attribute,args:["dataset.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["datasource.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["readonlygrid"]}]},{type:f.NgZone},{type:w.TrustAsPipe}]}),{dataNavigator:[{type:t.ViewChild,args:[p.PaginationComponent,{static:!0}]}],_tableElement:[{type:t.ViewChild,args:["datagridElement",{static:!0}]}],rowActionTmpl:[{type:t.ContentChildren,args:["rowActionTmpl",{descendants:!0}]}],rowActionsViewRef:[{type:t.ViewChild,args:["rowActionsView",{static:!0,read:t.ViewContainerRef}]}],filterTmpl:[{type:t.ContentChildren,args:["filterTmpl",{descendants:!0}]}],filterViewRef:[{type:t.ViewChild,args:["multiColumnFilterView",{static:!0,read:t.ViewContainerRef}]}],inlineWidgetTmpl:[{type:t.ContentChildren,args:["inlineWidgetTmpl",{descendants:!0}]}],inlineEditViewRef:[{type:t.ViewChild,args:["inlineEditView",{static:!0,read:t.ViewContainerRef}]}],inlineWidgetNewTmpl:[{type:t.ContentChildren,args:["inlineWidgetTmplNew",{descendants:!0}]}],inlineEditNewViewRef:[{type:t.ViewChild,args:["inlineEditNewView",{static:!0,read:t.ViewContainerRef}]}],customExprTmpl:[{type:t.ContentChildren,args:["customExprTmpl",{descendants:!0}]}],customExprViewRef:[{type:t.ViewChild,args:["customExprView",{static:!0,read:t.ViewContainerRef}]}],rowExpansionActionTmpl:[{type:t.ContentChildren,args:["rowExpansionActionTmpl",{descendants:!0}]}],rowExpansionTmpl:[{type:t.ContentChild,args:["rowExpansionTmpl"]}],rowDetailViewRef:[{type:t.ViewChild,args:["rowDetailView",{static:!0,read:t.ViewContainerRef}]}],rowExpansionActionViewRef:[{type:t.ViewChild,args:["rowExpansionActionView",{static:!0,read:t.ViewContainerRef}]}],dynamicTableRef:[{type:t.ViewChild,args:["dynamicTable",{static:!0,read:t.ViewContainerRef}]}],onKeyPress:[{type:t.HostListener,args:["keypress",["$event"]]}]});const le="new",ce="edit",de="delete";class pe{constructor(e,t,i){this.table=e,this.dialogService=t,this.app=i,e.initiateSelectItem=this.initiateSelectItem.bind(this),e.updateVariable=this.updateVariable.bind(this),e.updateRecord=this.updateRecord.bind(this),e.deleteRecord=this.deleteRecord.bind(this),e.insertRecord=this.insertRecord.bind(this),e.editRow=this.editRow.bind(this),e.addNewRow=this.addNewRow.bind(this),e.addRow=this.addNewRow.bind(this),e.deleteRow=this.deleteRow.bind(this),e.onRecordDelete=this.onRecordDelete.bind(this),e.hideEditRow=this.hideEditRow.bind(this),e.saveRow=this.saveRow.bind(this),e.cancelRow=this.cancelRow.bind(this)}selectItemOnSuccess(e,t,i){setTimeout((()=>{t||this.table.selectItem(e,this.table.dataset),u.triggerFn(i)}),250)}initiateSelectItem(e,t,i,n,a){this.table.gridOptions.isNavTypeScrollOrOndemand()&&!this.table.dataNavigator.isDisableNext&&this.table.isNewRowInserted?this.table.isNewRowInserted=!1:("last"===e&&(n||(this.table.dataNavigator.dataSize+=1),this.table.isNavigationEnabled()||(e="current")),this.table.dataNavigator.calculatePagingValues(),this.table.dataNavigator.__fullData=this.table.__fullData,this.table.dataNavigator.navigatePage(e,null,!0,(()=>{(this.table.isNavigationEnabled()||n)&&this.selectItemOnSuccess(t,i,a),"quickedit"!==this.table.editmode||i||this.table.callDataGridMethod("setActiveRow",t)})))}updateVariable(e,t){const i=this.table.datasource;if(i&&(i.execute(u.DataSource.Operation.FETCH_DISTINCT_VALUES),!this.table.isNavigationEnabled())){const n=this.table.sortInfo,a=n&&n.direction?n.field+" "+n.direction:"";o.refreshDataSource(i,{page:1,filterFields:this.table.getFilterFields(this.table.filterInfo),orderBy:a,matchMode:"anywhereignorecase"}).then((()=>{u.$appDigest(),this.selectItemOnSuccess(e,!0,t)}))}}insertSuccessHandler(e,t){if(e.error)this.table.invokeEventCallback("error",{$event:t.event,$operation:le,$data:e.error}),this.table.onError||this.table.toggleMessage(!0,"error",this.table.errormessage||e.error),u.triggerFn(t.error,e);else{if(this.table.gridOptions.isNavTypeScrollOrOndemand()&&(this.table.isNewRowInserted=!0),t.event){const e=$(t.event.target).closest("tr");this.table.callDataGridMethod("hideRowEditMode",e)}this.table.onRowinsert||this.table.toggleMessage(!0,"success",this.table.insertmessage),this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_CRUD)?(this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(),e,void 0,!1,t.callBack),this.updateVariable(e,t.callBack)):this.table.datasource.execute(u.DataSource.Operation.IS_API_AWARE)||this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(),e,void 0,!1,t.callBack),u.triggerFn(t.success,e),this.table.invokeEventCallback("rowinsert",{$event:t.event,$data:e,row:e})}}generatePath(e){let t,i,n=this.table.widget.$attrs.get("datasetboundexpr");if(_.startsWith(e,"item")&&n){_.startsWith(n,"Widgets.")&&(n=u.extractCurrentItemExpr(n,this.table));const e=this.table.$element.parents(".app-list-item"),a=_.map(e,(e=>_.parseInt($(e).attr("listitemindex"))));for(let e=a.length-1;e>=0;e--)n=n.replace("$i",a[e]);i=_.last(a),t=n.replace(/^Variables\..*\.dataSet([^.])*(\.|$)/g,"")}else{/^Variables\..*\.dataSet([\[][0-9]])/g.test(e)&&(i=_.parseInt(e.replace(/^Variables\..*\.dataSet([\[])/g,""))),t=e.replace(/^Variables\..*\.dataSet([^.])*(\.|$)/g,"")}return{path:t,index:i}}insertRecord(e){const t=this.table.datasource;if(!t)return;const i=t.pagination&&t.pagination.number+1,n={row:e.row,skipNotification:!0,period:e.period};if(t.execute(u.DataSource.Operation.SUPPORTS_CRUD)||!t.execute(u.DataSource.Operation.IS_API_AWARE)||"wm.CrudVariable"===t.category){if(!t.execute(u.DataSource.Operation.IS_API_AWARE)){const i=this.generatePath(this.table.binddataset);return t.execute(u.DataSource.Operation.ADD_ITEM,{item:e.row,path:i.path,parentIndex:i.index}),void this.insertSuccessHandler(e.row,e)}t.execute(u.DataSource.Operation.INSERT_RECORD,n).then((n=>{this.insertSuccessHandler(n,e),"wm.CrudVariable"===t.category&&t.execute(u.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0,operation:"list",page:i})}),(t=>{this.table.invokeEventCallback("error",{$event:e.event,$operation:le,$data:t}),this.table.onError||this.table.toggleMessage(!0,"error",this.table.errormessage||t),u.triggerFn(e.error,t),u.triggerFn(e.callBack,void 0,!0)}))}else this.table.invokeEventCallback("rowinsert",{$event:e.event,row:e.row})}updateSuccessHandler(e,t){if(e.error)this.table.invokeEventCallback("error",{$event:t.event,$operation:ce,$data:e.error}),this.table.onError||this.table.toggleMessage(!0,"error",this.table.errormessage||e.error),u.triggerFn(t.error,e);else{if(t.event){const e=$(t.event.target).closest("tr");this.table.callDataGridMethod("hideRowEditMode",e)}this.table.onRowupdate||this.table.toggleMessage(!0,"success",this.table.updatemessage),this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_CRUD)?(this.table.initiateSelectItem("current",e,void 0,!1,t.callBack),this.updateVariable(e,t.callBack)):this.table.datasource.execute(u.DataSource.Operation.IS_API_AWARE)||this.table.initiateSelectItem("current",e,void 0,!1,t.callBack),u.triggerFn(t.success,e),this.table.invokeEventCallback("rowupdate",{$event:t.event,$data:e,row:e})}}updateRecord(e){const t=this.table.datasource;if(!t)return;const i=t.pagination&&t.pagination.number+1,n={row:e.row,prevData:e.prevData,skipNotification:!0,period:e.period};if(t.execute(u.DataSource.Operation.SUPPORTS_CRUD)||!t.execute(u.DataSource.Operation.IS_API_AWARE)||"wm.CrudVariable"===t.category){if(!t.execute(u.DataSource.Operation.IS_API_AWARE)){const i=this.generatePath(this.table.binddataset);return t.execute(u.DataSource.Operation.SET_ITEM,{prevItem:e.prevData,item:e.row,path:i.path,parentIndex:i.index}),void this.updateSuccessHandler(e.row,e)}t.execute(u.DataSource.Operation.UPDATE_RECORD,n).then((n=>{this.updateSuccessHandler(n,e),"wm.CrudVariable"===t.category&&t.execute(u.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0,operation:"list",page:i})}),(t=>{this.table.invokeEventCallback("error",{$event:e.event,$operation:ce,$data:t}),this.table.onError||this.table.toggleMessage(!0,"error",this.table.errormessage||t),u.triggerFn(e.error,t),u.triggerFn(e.callBack,void 0,!0)}))}else this.table.invokeEventCallback("rowupdate",{$event:e.event,row:e.row})}onRecordDelete(e){let t;this.table.dataNavigator&&(this.table.dataNavigator.dataSize-=1,this.table.dataNavigator.calculatePagingValues(),t=this.table.dataNavigator.pageCount<this.table.dataNavigator.dn.currentPage?"prev":void 0,this.table.dataNavigator.__fullData=this.table.__fullData,this.table.dataNavigator.navigatePage(t,null,!0,(()=>{setTimeout((()=>{u.triggerFn(e)}),void 0,!1)})))}deleteSuccessHandler(e,t,i,n){t&&t.error?this.table.onError||this.table.toggleMessage(!0,"error",this.table.errormessage||t.error):(this.onRecordDelete(n),this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_CRUD)&&this.updateVariable(e,n),this.table.onRowdelete||this.table.toggleMessage(!0,"success",this.table.deletemessage),this.table.invokeEventCallback("rowdelete",{$event:i,$data:e,row:e}),this.table.invokeEventCallback("rowdeleted",{$event:i,$data:e,row:e}))}deleteFn(e){const t=this.table.datasource;let i,n;if(t){if((this.table.onDemandLoad||this.table.infScroll)&&(this.table.isRowDeleted=!0),"wm.CrudVariable"===t.category&&(this.triggerWMEvent("resetEditMode"),t.pagination&&(i=t.pagination.last&&1===t.pagination.numberOfElements,n=i?t.pagination.number:t.pagination.number+1)),t.execute(u.DataSource.Operation.SUPPORTS_CRUD)||!t.execute(u.DataSource.Operation.IS_API_AWARE)||this.table._isDependent||"wm.CrudVariable"===t.category){if(!t.execute(u.DataSource.Operation.IS_API_AWARE)){const i=this.generatePath(this.table.binddataset);return t.execute(u.DataSource.Operation.REMOVE_ITEM,{item:e.row,path:i.path,parentIndex:i.index}),void this.deleteSuccessHandler(e.row,void 0,e.evt,e.callBack)}t.execute(u.DataSource.Operation.DELETE_RECORD,{row:e.row,skipNotification:!0,period:e.period}).then((i=>{this.deleteSuccessHandler(i,e.row,e.evt,e.callBack),"wm.CrudVariable"===t.category&&t.execute(u.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0,operation:"list",page:n})}),(t=>{this.table.isRowDeleted&&(this.table.isRowDeleted=!1),u.triggerFn(e.callBack,void 0,!0),this.table.invokeEventCallback("error",{$event:e.evt,$operation:de,$data:t}),this.table.onError||this.table.toggleMessage(!0,"error",this.table.errormessage||t)}))}else this.table.invokeEventCallback("rowdelete",{$event:e.evt,row:e.row});u.triggerFn(e.cancelRowDeleteCallback)}}deleteRecord(e){if(!this.table.confirmdelete)return this.deleteFn(e),void u.triggerFn(e.cancelRowDeleteCallback);this.dialogService.showAppConfirmDialog({title:this.app.appLocale.MESSAGE_DELETE_RECORD||"Delete Record",iconclass:"wi wi-delete fa-lg",message:this.table.confirmdelete,oktext:this.table.deleteoktext,canceltext:this.table.deletecanceltext,onOk:()=>{this.deleteFn(e),this.dialogService.closeAppConfirmDialog()},onCancel:()=>{u.triggerFn(e.cancelRowDeleteCallback),this.dialogService.closeAppConfirmDialog()},onOpen:()=>{$(".cancel-action").focus()},onEscape:()=>{u.triggerFn(e.cancelRowDeleteCallback)}})}editRow(e){let t;this.table._isDependent?this.triggerWMEvent("update"):(e&&e.target?this.table.callDataGridMethod("toggleEditRow",e,{selectRow:!0,action:"edit"}):"form"===this.table.editmode||"dialog"===this.table.editmode?(t=e||this.table.selectedItems[0],this.table.gridOptions.beforeRowUpdate(t)):setTimeout((()=>{t=this.table.datagridElement.find("tr.active"),t.length&&this.table.callDataGridMethod("toggleEditRow",void 0,{$row:t,action:"edit"})})),this.table._triggeredByUser=!0,this.table.gridOptions.setIsDataUpdatedByUser(!1))}addNewRow(){this.table.isGridEditMode||(this.table._triggeredByUser=!0,this.table.gridOptions.setIsDataUpdatedByUser(!1),this.table.callDataGridMethod("addNewRow"),this.table._liveTableParent?this.table._liveTableParent.addNewRow():this.table._isDependent&&this.triggerWMEvent("insert"))}triggerWMEvent(e,t){u.$invokeWatchers(!0),this.app.notify("wm-event",{eventName:e,widgetName:this.table.name,row:this.table.selecteditem,dataSource:t})}deleteRow(e){let t;e&&e.target?this.table.callDataGridMethod("deleteRowAndUpdateSelectAll",e):setTimeout((()=>{t=e||this.table.selectedItems[0],this.deleteRecord({row:t})})),this.table._triggeredByUser=!0,this.table.gridOptions.setIsDataUpdatedByUser(!1)}hideEditRow(){const e=this.table.datagridElement.find("tr.row-editing");e.length&&this.table.callDataGridMethod("hideRowEditMode",e)}saveRow(){this.table.callDataGridMethod("saveRow")}cancelRow(){const e=this.table.datagridElement.find("tr.row-editing");e.length&&this.table.callDataGridMethod("cancelEdit",e)}static{this.\u0275fac=function(e){return new(e||pe)(f.\u0275\u0275directiveInject(re,2),f.\u0275\u0275directiveInject(O.AbstractDialogService),f.\u0275\u0275directiveInject(O.App))}}static{this.\u0275dir=f.\u0275\u0275defineDirective({type:pe,selectors:[["","wmTableCUD",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&f.\u0275setClassMetadata(pe,[{type:t.Directive,args:[{selector:"[wmTableCUD]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[re]}]},{type:O.AbstractDialogService},{type:O.App}]}),null);const ue=["null","empty","nullorempty","isnotnull","isnotempty"],he=(e,t)=>{if(u.isDefined(e)&&""!==e)return u.isNumberType(t)?_.toNumber(e):t===u.DataType.DATETIME?moment(e).valueOf():_.toString(e).toLowerCase()},me=(e,t,i=[])=>{const n=he(t.value,t.type);let a;return!u.isDefined(n)&&!_.includes(ue,t.matchMode)||u.isNumberType(t.type)&&_.isNull(t.value)?e:e=e.filter((e=>{let s;switch(t.field?a=he(_.get(e,t.field),t.type):(a=[],_.forEach(e,((t,n)=>{if(_.includes(i,n))a.push(t);else{const t=_.filter(_.range(i.length),(e=>i[e].includes(n)));_.forEach(t,(t=>{const n=_.get(e,i[t]);a.indexOf(n)<0&&a.push(n)}))}})),a=a.join(" ").toLowerCase()),t.matchMode){case"start":s=_.startsWith(a,n);break;case"end":s=_.endsWith(a,n);break;case"exact":s=_.isEqual(a,n);break;case"notequals":s=!_.isEqual(a,n);break;case"null":s=_.isNull(a);break;case"isnotnull":s=!_.isNull(a);break;case"empty":s=_.isEmpty(a);break;case"isnotempty":s=!_.isEmpty(a);break;case"nullorempty":s=_.isNull(a)||_.isEmpty(a);break;case"lessthan":s=a<n;break;case"lessthanequal":s=a<=n;break;case"greaterthan":s=a>n;break;case"greaterthanequal":s=a>=n;break;default:s=u.isNumberType(t.type)?_.isEqual(a,n):_.includes(a,n)}return s}))},ge=(e,t,i=[])=>{const n=t&&t.field;n?(e[n]={value:t.value,logicalOp:"AND"},t.matchMode&&(e[n].matchMode=t.matchMode)):function(e,t,i){i.forEach((function(i){e[i]={value:t.value,type:t.value.type,logicalOp:"OR"},t.matchMode&&(e[i].matchMode=t.matchMode)}))}(e,t,i)},fe=(e,t)=>{t.field&&(e[t.field]={value:t.value,matchMode:t.matchMode,type:t.type})},ve=(e,t)=>{e.push({field:t.key?t.key:"",matchMode:t.matchMode,type:t.type,value:t.value})};class be{constructor(e){this.table=e,e._searchSortHandler=this.searchSortHandler.bind(this),e.getSearchResult=this.getSearchResult.bind(this),e.getSortResult=this.getSortResult.bind(this),e.checkFiltersApplied=this.checkFiltersApplied.bind(this),e.getFilterFields=this.getFilterFields.bind(this),e.onRowFilterChange=this.onRowFilterChange.bind(this),e.onFilterConditionSelect=this.onFilterConditionSelect.bind(this),e.showClearIcon=this.showClearIcon.bind(this),e.clearRowFilter=this.clearRowFilter.bind(this),e.matchModeTypesMap=o.getMatchModeTypesMap(),e.matchModeMsgs=o.getMatchModeMsgs(e.appLocale),e.emptyMatchModes=ue,e.getNavigationTargetBySortInfo=this.getNavigationTargetBySortInfo.bind(this),e.refreshData=this.refreshData.bind(this),e.clearFilter=this.clearFilter.bind(this),e.adjustContainer=this.adjustContainer.bind(this)}adjustContainer(e){setTimeout((()=>{u.adjustContainerRightEdges($("bs-dropdown-container"),this.table.rowFilterCompliedTl[e],this.table,$("bs-dropdown-container .dropdown-menu"))}))}getNavigationTargetBySortInfo(){return this.table.sortInfo&&"desc"===this.table.sortInfo.direction&&_.includes(this.table.primaryKey,this.table.sortInfo.field)?"first":"last"}getTableVisibleCols(){const e=[];return _.forEach(this.table.columns,((t,i)=>{"true"===_.toLower(_.toString(t.showinfilter))&&"rowOperations"!==i&&t.searchable&&e.push(i)})),e}invokeSetFilterfieldBasedOnFieldval(e,t){if(e.field)ge(t,e);else if(!_.isEmpty(e)){const i=this.getTableVisibleCols();ge(t,e,i)}}getFilterFields(e){e=e||{};const t={};return _.isArray(e)?_.forEach(e,(e=>{this.invokeSetFilterfieldBasedOnFieldval(e,t)})):this.invokeSetFilterfieldBasedOnFieldval(e,t),t}getLogicalOperator(e){let t="";for(const i in e){t=e[i].logicalOp||"";break}return t}resetSortStatus(e){let t;!_.isEmpty(this.table.sortInfo)&&this.table.datasource&&(t=this.table.sortInfo.field+" "+this.table.sortInfo.direction,(e=this.table.datasource.execute(u.DataSource.Operation.GET_OPTIONS).orderBy||e)&&(e=_.head(_.split(e,","))),t!==e&&(this.table.callDataGridMethod("resetSortIcons"),this.table.sortInfo={},this.table.setDataGridOption("sortInfo",{})))}clearFilter(e){let t;this.table.filterInfo={},"multicolumn"===this.table.filtermode?(this.table.fieldDefs.forEach((e=>{e.resetFilter&&e.resetFilter()})),e||this.table.onRowFilterChange()):"search"===this.table.filtermode&&(t=this.table.datagridElement,t.find('[data-element="dgSearchText"]').val(""),t.find('[data-element="dgFilterValue"]').val(""),e||t.find(".app-search-button").trigger("click"))}checkFiltersApplied(e){if(this.table.datasource)return this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_SERVER_FILTER)?(_.isEmpty(this.table.datasource.execute(u.DataSource.Operation.GET_OPTIONS).filterFields)&&this.clearFilter(!0),void this.resetSortStatus(e)):void(this.table.datasource.execute(u.DataSource.Operation.IS_PAGEABLE)&&this.resetSortStatus(e))}getSearchResult(e,t){const i=this.getTableVisibleCols();return t?(_.isArray(t)?t.forEach((t=>{e=me(e,t,i)})):e=me(e,t,i),e):e}getSortResult(e,t){return t&&t.direction&&(e=_.orderBy(e,t.field,t.direction)),e}handleClientSideSortSearch(e,t,i){let n;this.table._isClientSearch=!0,n=this.table.isNavigationEnabled()?u.getClonedObject(this.table.__fullData):u.getClonedObject(this.table.dataset),"search"===i?this.table.filterInfo=e:this.table.sortInfo=e,_.isObject(n)&&!_.isArray(n)&&(n=[n]),n=this.getSearchResult(n,this.table.filterInfo),n=this.getSortResult(n,this.table.sortInfo),this.table.serverData=n,"sort"===i&&this.table.invokeEventCallback("sort",{$event:t,$data:{data:this.table.serverData,sortDirection:this.table.sortInfo.direction,colDef:this.table.columns[this.table.sortInfo.field]}}),this.table.isNavigationEnabled()?(this.table.dataNavigator.dn.currentPage=1,this.table.dataNavigator.setPagingValues(n)):this.table.setGridData(this.table.serverData)}handleSinglePageSearch(e){this.table._isPageSearch=!0;let t=u.getClonedObject(this.table.gridData);const i=this.table.datagridElement.find("tbody tr.app-datagrid-row");this.table.filterInfo=e,t=this.getSearchResult(t,e),_.forEach(this.table.gridData,((e,n)=>{const a=$(i[n]);_.find(t,(t=>_.isEqual(t,e)))?a.show():a.hide()})),t&&t.length?(this.table.callDataGridMethod("setStatus","ready"),this.table.gridfirstrowselect&&!this.table.multiselect&&this.table.callDataGridMethod("selectFirstRow",!0,!0)):(this.table.callDataGridMethod("setStatus","nodata",this.table.nodatamessage),this.table.selecteditem=void 0),this.table.callDataGridMethod("updateSelectAllCheckboxState")}handleServerSideSearch(e){if(this.table.filterInfo=e,!this.table.datasource)return;const t=this.table.sortInfo,i=t&&t.direction?t.field+" "+t.direction:"",n=this.getFilterFields(e),a=this.getLogicalOperator(n);o.refreshDataSource(this.table.datasource,{page:1,filterFields:n,orderBy:i,condition:a}).then((()=>{u.$appDigest()}),(()=>{this.table.toggleMessage(!0,"error",this.table.nodatamessage)}))}handleSeverSideSort(e,t,i){this.table.gridOptions.sortInfo.field=e.field,this.table.gridOptions.sortInfo.direction=e.direction,this.table.sortInfo=u.getClonedObject(e);const n=e&&e.direction?e.field+" "+e.direction:"",a=this.getFilterFields(this.table.filterInfo),s=this.getLogicalOperator(a);i||"none"===this.table.getConfiguredState()||this.table.statePersistence.removeWidgetState(this.table,"pagination"),o.refreshDataSource(this.table.datasource,{page:1,filterFields:a,orderBy:n,condition:s}).then((i=>{u.$appDigest();const n=i&&i.data?i.data:i;this.table.invokeEventCallback("sort",{$event:t,$data:{data:n,sortDirection:e.direction,colDef:this.table.columns[e.field]}})}))}searchHandler(e,t,i,n){let a;a=_.isArray(e)?e.filter((function(e){return void 0!==e.matchMode&&void 0!==e.value||void 0!==e.value&&""===e.field})):{field:e.field,value:e.value,type:e.type},"none"!==this.table.getConfiguredState()&&o.unsupportedStatePersistenceTypes.indexOf(this.table.navigation)<0?(_.isArray(e)&&a.length||e.value?(this.table.statePersistence.removeWidgetState(this.table,"search"),this.table.statePersistence.setWidgetState(this.table,{search:a})):this.table.statePersistence.removeWidgetState(this.table,"search"),n||(this.table.statePersistence.removeWidgetState(this.table,"pagination"),this.table.statePersistence.removeWidgetState(this.table,"selectedItem"))):console.warn("Retain State handling on Widget "+this.table.name+" is not supported for current pagination type.");let s=u.getClonedObject(e);const r=this.table.datasource;if(!r&&!this.table.dataset)return;let l;const c={};_.isArray(s)?s.forEach((e=>{fe(c,e)})):fe(c,s),l=this.table.invokeEventCallback("beforefilter",{$event:t,$data:c,columns:c}),!1!==l&&(s=[],_.isEmpty(c)&&!_.isEmpty(a)?_.isArray(a)?_.forEach(a,(e=>{ve(s,e)})):ve(s,a):_.forEach(c,((e,t)=>{s.push({field:t,matchMode:e.matchMode,type:e.type,value:e.value})})),r&&r.execute(u.DataSource.Operation.SUPPORTS_SERVER_FILTER)?this.handleServerSideSearch(s):r&&r.execute(u.DataSource.Operation.IS_API_AWARE)&&r.execute(u.DataSource.Operation.IS_PAGEABLE)?this.handleSinglePageSearch(s):this.handleClientSideSortSearch(s,t,i))}sortHandler(e,t,i,n){const a=this.table.datasource;if(a||this.table.dataset){if(!n&&"none"!==this.table.getConfiguredState()&&o.unsupportedStatePersistenceTypes.indexOf(this.table.navigation)<0){const t={direction:e.direction,field:e.field};e.direction?this.table.statePersistence.setWidgetState(this.table,{sort:t}):this.table.statePersistence.removeWidgetState(this.table,"sort"),this.table.statePersistence.removeWidgetState(this.table,"selectedItem")}else console.warn("Retain State handling on Widget "+this.table.name+" is not supported for current pagination type.");a&&a.execute(u.DataSource.Operation.IS_SORTABLE)?this.handleSeverSideSort(e,t,n):this.handleClientSideSortSearch(e,t,i)}}setLastActionPerformedToSearchSort(){this.table.gridOptions.setLastActionPerformed(this.table.gridOptions.ACTIONS.SEARCH_OR_SORT),this.table.gridOptions.setIsSearchTrigerred(!0)}searchSortHandler(e,t,i,n){"change"===(t?t.type:"")&&"multicolumn"!==this.table.filtermode?t.stopPropagation():(this.setLastActionPerformedToSearchSort(),"search"===i?this.searchHandler(e,t,i,n):this.sortHandler(e,t,i,n))}showClearIcon(e){const t=this.table.rowFilter[e]&&this.table.rowFilter[e].value;return u.isDefined(t)&&""!==t&&null!==t}clearRowFilter(e){this.table.rowFilter&&this.table.rowFilter[e]&&(this.table.columns[e].resetFilter(),this.onRowFilterChange(e))}onFilterConditionSelect(e,t){this.table.rowFilter[e]=this.table.rowFilter[e]||{},this.table.rowFilter[e].matchMode=t,_.includes(this.table.emptyMatchModes,t)?(this.table.columns[e].resetFilter(),this.table.onRowFilterChange()):u.isDefined(this.table.rowFilter[e].value)&&""!==this.table.rowFilter[e].value?this.table.onRowFilterChange():setTimeout((()=>{this.table.columns[e].filterInstance.focus()}))}getFilterOnFieldValues(e){if(!this.table.datasource||!this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_DISTINCT_API))return;const t=e.field,i=this.table.fullFieldDefs,n=_.filter(i,{filteronfilter:t}),a=_.get(this.table.rowFilter,[t,"value"]);_.forEach(n,(e=>{const t=e.filteronfilter,i=e.field,n={},s=e.filterwidget;o.isDataSetWidget(s)&&t!==i&&!e.isFilterDataSetBound&&(n[t]=u.isDefined(a)&&""!==a&&null!==a?{value:a}:{},s===u.FormWidgetType.AUTOCOMPLETE&&e.filterInstance.dataoptions?e.filterInstance.dataoptions.filterFields=n:this.table.datasource.execute(u.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS,{fields:i,filterFields:n}).then((t=>{e.filterdataset=t.data})))}))}onRowFilterChange(e){const t=[],i=_.find(this.table.fullFieldDefs,{field:e});_.forEach(this.table.rowFilter,((e,n)=>{(u.isDefined(e.value)&&""!==e.value||_.includes(this.table.emptyMatchModes,e.matchMode))&&(i&&n===i.field&&(e.type=e.type||i.type,e.matchMode=e.matchMode||_.get(this.table.matchModeTypesMap[e.type],0)),t.push({field:n,value:e.value,matchMode:e.matchMode,type:e.type}))})),this.table.gridOptions.searchHandler(t,void 0,"search"),i&&this.getFilterOnFieldValues(i)}refreshData(e){if(!this.table.datasource)return;const t=e?this.table.dataNavigator.dn.currentPage:1,i=this.table.sortInfo,n=i&&i.direction?i.field+" "+i.direction:"",a=this.getFilterFields(this.table.filterInfo),s=this.getLogicalOperator(a);o.refreshDataSource(this.table.datasource,{page:t,filterFields:a,orderBy:n,condition:s})}static{this.\u0275fac=function(e){return new(e||be)(f.\u0275\u0275directiveInject(re,2))}}static{this.\u0275dir=f.\u0275\u0275defineDirective({type:be,selectors:[["","wmTableFilterSort",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&f.\u0275setClassMetadata(be,[{type:t.Directive,args:[{selector:"[wmTableFilterSort]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[re]}]}]}),null);const ye={widgetType:"wm-table-action",hostClass:""};class we extends o.BaseComponent{static{this.initializeProps=void o.register("wm-table-action",new Map([["accessroles",o.PROP_STRING],["action",o.PROP_STRING],["caption",o.PROP_STRING],["class",o.PROP_STRING],["conditionalclass",o.PROP_ANY],["conditionalstyle",o.PROP_ANY],["disabled",{value:!1,...o.PROP_BOOLEAN}],["display-name",o.PROP_STRING],["hyperlink",o.PROP_STRING],["icon",o.PROP_STRING],["iconclass",o.PROP_STRING],["key",o.PROP_STRING],["position",{value:"footer",...o.PROP_STRING}],["shortcutkey",o.PROP_STRING],["show",{value:!0,...o.PROP_BOOLEAN}],["tabindex",{value:0,...o.PROP_NUMBER}],["title",o.PROP_STRING],["target",o.PROP_STRING],["widget-type",{value:"button",...o.PROP_STRING}]]))}constructor(e,t){super(e,ye),this.table=t}populateAction(){this.buttonDef={key:this.key,displayName:this["display-name"]||this.caption||"",show:this.show,class:this.class||"",iconclass:this.iconclass||"",title:_.isUndefined(this.title)?this["display-name"]||"":this.title,action:this.action,accessroles:this.accessroles,shortcutkey:this.shortcutkey,disabled:this.disabled,tabindex:this.tabindex,icon:this.icon,position:this.position,widgetType:this["widget-type"],hyperlink:this.hyperlink,target:this.target||"",conditionalclass:this.conditionalclass||"",conditionalstyle:this.conditionalstyle||{}},this._propsInitialized=!0}ngOnInit(){super.ngOnInit(),this.populateAction(),this.table.registerActions(this.buttonDef)}onPropertyChange(e,t){this._propsInitialized&&("display-name"===e?this.buttonDef.displayName=t:this.buttonDef[e]=t)}static{this.\u0275fac=function(e){return new(e||we)(f.\u0275\u0275directiveInject(f.Injector),f.\u0275\u0275directiveInject(re,8))}}static{this.\u0275dir=f.\u0275\u0275defineDirective({type:we,selectors:[["","wmTableAction",""]],features:[f.\u0275\u0275ProvidersFeature([o.provideAsWidgetRef(we)]),f.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&f.\u0275setClassMetadata(we,[{type:t.Directive,args:[{selector:"[wmTableAction]",providers:[o.provideAsWidgetRef(we)]}]}],(function(){return[{type:f.Injector},{type:re,decorators:[{type:t.Optional}]}]}),null);const Pe={widgetType:"wm-table-column-group",hostClass:""};class Ce extends o.BaseComponent{static{this.initializeProps=void o.register("wm-table-column-group",new Map([["backgroundcolor",o.PROP_STRING],["caption",o.PROP_STRING],["col-class",o.PROP_STRING],["name",o.PROP_STRING],["textalignment",{value:"center",...o.PROP_STRING}]]))}constructor(e,t,i){super(e,Pe),this.group=t,this.table=i,this.config={}}populateConfig(){this.config={field:this.name,displayName:this.caption||"",columns:[],isGroup:!0,accessroles:this.accessroles,textAlignment:this.textalignment||"center",backgroundColor:this.backgroundcolor,class:this["col-class"]}}onPropertyChange(e,t,i){"caption"===e?(this.config.displayName=t||"",this.table.callDataGridMethod("setColumnProp",this.config.field,"displayName",t,!0)):super.onPropertyChange(e,t,i)}ngOnInit(){super.ngOnInit(),this.populateConfig();const e=parseInt(this.getAttr("headerIndex"),10),t=parseInt(this.getAttr("index"),10),i=this.group&&this.group.name;o.setHeaderConfigForTable(this.table.headerConfig,this.config,i,i?t:e)}static{this.\u0275fac=function(e){return new(e||Ce)(f.\u0275\u0275directiveInject(f.Injector),f.\u0275\u0275directiveInject(Ce,12),f.\u0275\u0275directiveInject(re,8))}}static{this.\u0275dir=f.\u0275\u0275defineDirective({type:Ce,selectors:[["","wmTableColumnGroup",""]],features:[f.\u0275\u0275ProvidersFeature([o.provideAsWidgetRef(Ce)]),f.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&f.\u0275setClassMetadata(Ce,[{type:t.Directive,args:[{selector:"[wmTableColumnGroup]",providers:[o.provideAsWidgetRef(Ce)]}]}],(function(){return[{type:f.Injector},{type:Ce,decorators:[{type:t.SkipSelf},{type:t.Optional}]},{type:re,decorators:[{type:t.Optional}]}]}),null);const Ae=["customExprTmpl"],_e=["inlineWidgetTmpl"],Ie=["filterTmpl"],Ee=["filterWidget"],Oe=["inlineWidget"],xe=["inlineWidgetNew"],Re={widgetType:"wm-table-column",hostClass:""};let De=["datafield","displayfield","placeholder","searchkey","matchmode","displaylabel","groupby","match","dateformat","showcount","collapsible","checkedvalue","uncheckedvalue","showdropdownon","dataentrymode","autoclose","dataset","outputformat"];De=[...De,"maxchars","regexp","minvalue","maxvalue","step","required","mindate","maxdate","excludedates","excludedays","mintime","maxtime"];class Se{constructor(e){this.widget=e}focus(){this.widget.focus()}setProperty(e,t){e="value"===e?"datavalue":e,this.widget[e]=t}getProperty(e){return e="value"===e?"datavalue":e,this.widget[e]}}class Te extends o.BaseComponent{static{this.initializeProps=void o.register("wm-table-column",new Map([["accessroles",o.PROP_STRING],["autoclose",{value:"outsideClick",...o.PROP_STRING}],["backgroundcolor",o.PROP_STRING],["binding",o.PROP_STRING],["caption",o.PROP_STRING],["checkedvalue",o.PROP_STRING],["col-class",o.PROP_STRING],["collapsible",o.PROP_BOOLEAN],["col-ng-class",o.PROP_STRING],["currencypattern",o.PROP_STRING],["customExpression",o.PROP_BOOLEAN],["dataentrymode",{value:"default",...o.PROP_STRING}],["datafield",o.PROP_STRING],["dataoptions",o.PROP_ANY],["dataset",o.PROP_ANY],["datasource",o.PROP_STRING],["dateformat",o.PROP_STRING],["datepattern",o.PROP_STRING],["debouncetime",{value:250,...o.PROP_NUMBER}],["defaultvalue",o.PROP_STRING],["disabled",o.PROP_BOOLEAN],["displayfield",o.PROP_STRING],["displaylabel",o.PROP_STRING],["editdatepattern",o.PROP_STRING],["outputformat",o.PROP_STRING],["edit-widget-type",o.PROP_STRING],["showineditmode",o.PROP_BOOLEAN],["editinputtype",o.PROP_STRING],["exportexpression",o.PROP_STRING],["filterdataset",o.PROP_STRING],["filterdatafield",o.PROP_STRING],["filterdisplayfield",o.PROP_STRING],["filterdisplaylabel",o.PROP_STRING],["filterexpressions",{value:"{}",...o.PROP_STRING}],["filtersearchkey",o.PROP_STRING],["filter-on",o.PROP_STRING],["filteronfilter",o.PROP_STRING],["filterplaceholder",o.PROP_STRING],["filterwidget",o.PROP_STRING],["filterinputtype",o.PROP_STRING],["formatpattern",o.PROP_STRING],["custompipeformat",o.PROP_STRING],["fractionsize",o.PROP_STRING],["generator",o.PROP_STRING],["groupby",o.PROP_STRING],["limit",o.PROP_NUMBER],["match",o.PROP_STRING],["matchmode",o.PROP_STRING],["maxchars",o.PROP_NUMBER],["maxvalue",o.PROP_NUMBER],["step",o.PROP_NUMBER],["mobiledisplay",{value:!0,...o.PROP_BOOLEAN}],["minvalue",o.PROP_NUMBER],["maxdate",o.PROP_STRING],["mindate",o.PROP_STRING],["excludedays",o.PROP_STRING],["excludedates",o.PROP_STRING],["maxtime",o.PROP_STRING],["mintime",o.PROP_STRING],["pcdisplay",{value:!0,...o.PROP_BOOLEAN}],["period",o.PROP_BOOLEAN],["placeholder",o.PROP_STRING],["prefix",o.PROP_STRING],["primary-key",o.PROP_BOOLEAN],["readonly",o.PROP_BOOLEAN],["regexp",o.PROP_ANY],["related-entity-name",o.PROP_STRING],["required",o.PROP_BOOLEAN],["rowactionsposition",o.PROP_STRING],["searchkey",o.PROP_STRING],["searchable",{value:!0,...o.PROP_BOOLEAN}],["showinfilter",{value:!1,...o.PROP_BOOLEAN}],["suffix",o.PROP_STRING],["show",{value:!0,...o.PROP_BOOLEAN}],["showcount",o.PROP_BOOLEAN],["showdropdownon",{value:"default",...o.PROP_STRING}],["sortable",{value:!0,...o.PROP_BOOLEAN}],["tabletdisplay",{value:!0,...o.PROP_BOOLEAN}],["textalignment",{value:"left",...o.PROP_STRING}],["textcolor",o.PROP_STRING],["type",{value:"string",...o.PROP_STRING}],["uncheckedvalue",o.PROP_STRING],["validationmessage",o.PROP_STRING],["widget-type",o.PROP_STRING],["width",o.PROP_STRING]]))}constructor(e,t,i,n,a,s){super(e,Re),this.appDefaults=t,this.table=i,this.group=n,this.bindfilterdataset=a,this.binddataset=s,this.syncValidators=[],this.asyncValidators=[],this.observeOnFields=[],this.aggregate={sum:()=>_.sum(this._getColumnData()),average:(e=2)=>_.round(_.mean(this._getColumnData()),e),count:()=>this._getColumnData().length,minimum:()=>_.min(this._getColumnData()),maximum:()=>_.max(this._getColumnData()),percent:(e,t=2)=>_.round(_.sum(this._getColumnData())/e*100,t)},this.notifyForFields=[]}get dataoptions(){return this._dataoptions}set dataoptions(e){this._dataoptions=e}get datasource(){return this._datasource}set datasource(e){this._datasource=e}ngOnInit(){super.ngOnInit(),this.populateFieldDef();const e=parseInt(this.getAttr("index"),10),t=parseInt(this.getAttr("headerIndex"),10),i=this.group&&this.group.name;if(o.setHeaderConfigForTable(this.table.headerConfig,{field:this.field,displayName:this.displayName},i,i?e:t),this.table.registerColumns(this.widget,e),this._isRowFilter="multicolumn"===this.table.filtermode&&this.searchable,this._isInlineEditable=!this.readonly&&this.table.editmode!==o.EDIT_MODE.DIALOG&&this.table.editmode!==o.EDIT_MODE.FORM,this._isNewEditableRow=this._isInlineEditable&&this.table.editmode===o.EDIT_MODE.QUICK_EDIT&&this.table.shownewrow,this.setUpControls(),this._propsInitialized=!0,this.getFormControl()){const e=this.getFormControl().statusChanges.pipe(m.debounceTime(100)).subscribe((e=>this.onStatusChange(e,"inlineInstance")));this.registerDestroyListener((()=>e.unsubscribe())),this.fieldValidations=new o.BaseFieldValidations(this,this.inlineInstance,this.editWidgetType,this.getFormControl(),this.table,"inlineInstance")}if(this._checkNewEditableRowControl()){const e=this.getFormControl("_new").statusChanges.pipe(m.debounceTime(100)).subscribe((e=>this.onStatusChange(e,"inlineInstanceNew")));this.registerDestroyListener((()=>e.unsubscribe())),this.fieldValidations_new=new o.BaseFieldValidations(this,this.inlineInstanceNew,this.editWidgetType,this.getFormControl("_new"),this.table,"inlineInstanceNew")}}ngAfterContentInit(){if(this._isRowFilter){const e=this._filterInstances.changes.subscribe((e=>{this.filterInstance=e.first&&e.first.widget,this.setUpFilterWidget()}));this.registerDestroyListener((()=>e.unsubscribe()))}if(this._isInlineEditable){const e=this._inlineInstances.changes.subscribe((e=>{this.inlineInstance=e.first&&e.first.widget,this.fieldValidations.formwidget=e.first,this.table.registerFormField(this.binding,new Se(this.inlineInstance)),this.setUpInlineWidget("inlineInstance")}));if(this.registerDestroyListener((()=>e.unsubscribe())),this._isNewEditableRow){const e=this._inlineInstancesNew.changes.subscribe((e=>{this.inlineInstanceNew=e.first&&e.first.widget,this.fieldValidations_new.formwidget=e.first,this.setUpInlineWidget("inlineInstanceNew")}));this.registerDestroyListener((()=>e.unsubscribe()))}}this.registerReadyStateListener((()=>{this.key=this.field||this.binding})),super.ngAfterContentInit(),this.table.isdynamictable&&this.table.inlineWidgetTmpl._results.push(this.inlineWidthTempRef)}ngAfterViewInit(){this.filterTemplateRef&&this.table.renderDynamicFilterColumn(this.filterTemplateRef)}applyValidations(){this.getFormControl()&&(this.syncValidators.length>0&&this.fieldValidations.setValidators(this.syncValidators),this.fieldValidations.setUpValidators(),this.asyncValidators.length>0&&this.fieldValidations.setAsyncValidators(this.asyncValidators),this.observeOnFields.length>0&&this.fieldValidations.observeOn(this.observeOnFields,"columns"))}removeValidations(){this.table.ngform.markAsUntouched();const e=this.getFormControl();e&&(e.clearValidators(),e.clearAsyncValidators(),e.updateValueAndValidity())}applyNewRowValidations(){this._checkNewEditableRowControl()&&(this.syncValidators.length>0&&this.fieldValidations_new.setValidators(this.syncValidators),this.fieldValidations_new.setUpValidators(),this.asyncValidators.length>0&&this.fieldValidations_new.setAsyncValidators(this.asyncValidators),this.observeOnFields.length>0&&this.fieldValidations_new.observeOn(this.observeOnFields,"columns"))}removeNewRowValidations(){if(this.table.ngform.markAsUntouched(),!this._checkNewEditableRowControl())return;const e=this.getFormControl("_new");e.clearValidators(),e.clearAsyncValidators(),e.updateValueAndValidity()}addFormControl(e){const t=e?this.binding+e:this.binding;this.table.ngform.addControl(t,this.table.fb.control(""))}getFormControl(e){const t=e?this.binding+e:this.binding;return this.table.ngform.controls[t]}_checkNewEditableRowControl(){return this._isNewEditableRow&&this.getFormControl("_new")}setUpControls(){if(this._isInlineEditable){if(this.editWidgetType===u.FormWidgetType.UPLOAD)return;this.addFormControl();const e=this.getFormControl();if(e){const t=e.valueChanges.pipe(m.debounceTime(200)).subscribe((e=>this.onValueChange(e,"inlineInstance")));this.registerDestroyListener((()=>t.unsubscribe()))}if(this._isNewEditableRow){this.addFormControl("_new");const e=this.getFormControl("_new");if(e){const t=e.valueChanges.pipe(m.debounceTime(200)).subscribe((e=>this.onValueChange(e,"inlineInstanceNew")));this.registerDestroyListener((()=>t.unsubscribe()))}}}if(this._isRowFilter&&(this.addFormControl("_filter"),this.filterControl=this.getFormControl("_filter"),this.filterControl)){const e=this.filterControl.valueChanges.subscribe(this.onFilterValueChange.bind(this));this.registerDestroyListener((()=>e.unsubscribe()))}}resetFilter(){this.filterControl&&this.filterControl.setValue(""),this.filterwidget===u.FormWidgetType.AUTOCOMPLETE&&(this.filterInstance.query="",this.filterInstance.queryModel="")}onFilterValueChange(e){this.table.rowFilter[this.field].value=e}get datavalue(){return this[this.activeControlType]&&this[this.activeControlType].datavalue}set datavalue(e){const t=this.getFormControl("inlineInstanceNew"===this.activeControlType?"_new":void 0);t&&t&&this.editWidgetType!==u.FormWidgetType.UPLOAD&&t.setValue(e)}get value(){return this.datavalue}set value(e){this.datavalue=e}onValueChange(e,t){null!==e&&o.applyFilterOnField(this.table.datasource,this.widget,this.table.fieldDefs,e,{widget:"edit-widget-type"}),this.table.ngform.touched&&(this.activeControlType=t,"inlineInstance"===t?(this.notifyChanges(),this.fieldValidations.setCustomValidationMessage()):this._isNewEditableRow&&(this.notifyChanges("_new"),this.fieldValidations_new.setCustomValidationMessage()))}loadFilterData(){this._isRowFilter&&o.isDataSetWidget(this.filterwidget)&&!this.bindfilterdataset&&(this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_DISTINCT_API)?(this.relatedEntityName&&(this.widget["is-related"]=!0,this.widget["lookup-type"]=this.relatedEntityName,this.widget["lookup-field"]=_.last(_.split(this.field,"."))),this.filterwidget===u.FormWidgetType.AUTOCOMPLETE?(this.filterInstance.dataoptions=o.getDistinctFieldProperties(this.table.datasource,this),this.filterInstance.datasource=this.table.datasource):o.getDistinctValues(this.table.datasource,this.widget,"filterwidget").then((e=>{this._filterDataSet=e.data,this.setFilterWidgetDataSet()}))):this.registerDestroyListener(u.$watch(this.table.binddataset,this.viewParent,{},(e=>this.widget.filterdataset=e),o.getWatchIdentifier(this.widgetId,"filterdataset"))))}loadInlineWidgetData(){if(o.isDataSetWidget(this["edit-widget-type"])&&!this.binddataset&&!this.readonly){const e=this.table.datasource;if(this["related-entity-name"]&&this["primary-key"]){this.isDataSetBound=!0;const t=_.split(this.binding,".");this.showPendingSpinner=!0,o.fetchRelatedFieldData(e,this.widget,{relatedField:_.head(t),datafield:_.last(t),widget:"edit-widget-type"})}else e.execute(u.DataSource.Operation.SUPPORTS_DISTINCT_API)&&o.getDistinctValuesForField(e,this.widget,{widget:"edit-widget-type"})}}onDataSourceChange(){this.loadFilterData(),this.table.editmode===o.EDIT_MODE.QUICK_EDIT&&this.loadInlineWidgetData()}setFilterWidgetDataSet(){this.filterInstance&&(this.filterInstance.dataset=this._filterDataSet)}setUpFilterWidget(){this.filterInstance.registerReadyStateListener((()=>{if(o.isDataSetWidget(this.filterwidget)){const e=_.last(this.binding.split("."));this.filterInstance.dataset=this._filterDataSet,this.filterInstance.datafield=this.filterdatafield||e,this.filterInstance.displayfield=this.filterdisplayfield||e,this.filterwidget===u.FormWidgetType.AUTOCOMPLETE&&(this.filterInstance.displaylabel=this.filterdisplaylabel||e,this.filterInstance.searchkey=this.filtersearchkey||e)}this.filterwidget===u.FormWidgetType.TIME&&(this.filterInstance.timepattern=this.appDefaults.timeFormat||"hh:mm:ss a"),this.filterInstance.placeholder=this.filterplaceholder||""}))}notifyChanges(e){_.forEach(this.notifyForFields,(t=>{e&&this._isNewEditableRow?t.fieldValidations_new.validate():t.fieldValidations.validate()}))}observeOn(e){this.observeOnFields=_.cloneDeep(e)}setUpValidators(){this.fieldValidations.setUpValidators(),this._checkNewEditableRowControl()&&this.fieldValidations_new.setUpValidators()}setAsyncValidators(e){this.asyncValidators=_.cloneDeep(e)}setValidators(e){this.syncValidators=_.cloneDeep(e)}boundFn(e){return e()}onStatusChange(e,t){this["showPendingSpinner"+("inlineInstance"===t?"":"New")]="PENDING"===e}setSummaryRowData(e){const t=e instanceof Array?e:[e];this._invokeSummaryRowData(t)}_invokeSummaryRowData(e){_.forEach(e,((e,t)=>{const i=e;if(i instanceof Promise)i.then((e=>{this.table.callDataGridMethod("setSummaryRowDef",this.key,e,t,!0)}));else if(i.value&&i.value instanceof Promise){const e=i;i.value.then((i=>{e.value=i,this.table.callDataGridMethod("setSummaryRowDef",this.key,e,t,!0)}))}this.table.callDataGridMethod("setSummaryRowDef",this.key,i,t)}))}_getColumnData(){return _.map(this.table.dataset,this.binding)}setInlineWidgetProp(e,t,i){"datepattern"===t&&this.editWidgetType===u.FormWidgetType.TIME&&(t="timepattern"),this[e]&&u.isDefined(i)&&(this[e][t]=i)}setUpInlineWidget(e){this[e].registerReadyStateListener((()=>{o.isDataSetWidget(this["edit-widget-type"])&&(this[e].dataset=this.dataset),De.forEach((t=>{this.setInlineWidgetProp(e,t,this[t])})),this[e].datasource=this._datasource,this[e].dataoptions=this._dataoptions,this.setInlineWidgetProp(e,"datepattern",this.editdatepattern)}))}getStyleDef(){return`width: ${this.width||""}; background-color: ${this.backgroundcolor||""}; color: ${this.textcolor||""};`}populateFieldDef(){if(this.width="px"===this.width?"":this.width||"",this.field=this.binding,this.displayName=this.caption||"",this.pcDisplay=this.pcdisplay,this.mobileDisplay=this.mobiledisplay,this.tabletDisplay=this.tabletdisplay,this.textAlignment=this.textalignment,this.backgroundColor=this.backgroundcolor,this.textColor=this.textcolor,this.primaryKey=this["primary-key"],this.relatedEntityName=this["related-entity-name"],this.style=this.getStyleDef(),this.class=this["col-class"],this.ngclass=this["col-ng-class"],this.formatpattern="toNumber"===this.formatpattern?"numberToString":this.formatpattern,this.searchable="blob"!==this.type&&"clob"!==this.type&&this.searchable,this.showinfilter=!this.nativeElement.hasAttribute("showinfilter")||this.table&&this.table.isdynamictable?this.show:this.nativeElement.getAttribute("showinfilter"),this.limit=this.limit?+this.limit:void 0,this.editWidgetType=this["edit-widget-type"]=this["edit-widget-type"]||o.getEditModeWidget(this),this.filterOn=this["filter-on"],this.readonly=u.isDefined(this.getAttr("readonly"))?"true"===this.getAttr("readonly"):this["related-entity-name"]?!this["primary-key"]:_.includes(["identity","uniqueid","sequence"],this.generator),this.filterwidget=this.filterwidget||o.getDataTableFilterWidget(this.type||"string"),this.isFilterDataSetBound=!!this.bindfilterdataset,this.defaultvalue=o.getDefaultValue(this.defaultvalue,this.type,this.editWidgetType),u.isDateTimeType(this.type)&&"toDate"===this.formatpattern&&!this.datepattern){const e=u.getDisplayDateTimeFormat(this.type);this.type===u.DataType.DATE?this.datepattern=this.appDefaults.dateFormat||e:this.type===u.DataType.TIME?this.datepattern=this.appDefaults.timeFormat||e:this.type!==u.DataType.TIMESTAMP&&this.type!==u.DataType.DATETIME||(this.datepattern=this.appDefaults.dateTimeFormat||e)}}onPropertyChange(e,t,i){if(this._propsInitialized){switch(e){case"caption":this.displayName=t||"",this.setProperty("displayName",this.displayName);break;case"defaultvalue":this.defaultvalue=o.getDefaultValue(this.defaultvalue,this.type,this.editWidgetType);break;case"show":this.table.redraw(!0),this.showinfilter=this.nativeElement.hasAttribute("showinfilter")?this.nativeElement.getAttribute("showinfilter"):t;break;case"filterdataset":this._filterDataSet=t,this.setFilterWidgetDataSet();break;case"editdatepattern":this.setInlineWidgetProp("inlineInstance","datepattern",t),this.setInlineWidgetProp("inlineInstanceNew","datepattern",t);break;case"showinfilter":this.showinfilter=t;break;default:De.includes(e)&&(this.setInlineWidgetProp("inlineInstance",e,t),this.setInlineWidgetProp("inlineInstanceNew",e,t))}super.onPropertyChange(e,t,i)}}setProperty(e,t){if(this[e]=t,"displayName"===e)this.table.callDataGridMethod("setColumnProp",this.field,e,t);else this.table.redraw(!0)}static{this.\u0275fac=function(e){return new(e||Te)(f.\u0275\u0275directiveInject(f.Injector),f.\u0275\u0275directiveInject(O.AppDefaults),f.\u0275\u0275directiveInject(re,8),f.\u0275\u0275directiveInject(Ce,8),f.\u0275\u0275injectAttribute("filterdataset.bind"),f.\u0275\u0275injectAttribute("dataset.bind"))}}static{this.\u0275dir=f.\u0275\u0275defineDirective({type:Te,selectors:[["","wmTableColumn",""]],contentQueries:function(e,t,i){if(1&e&&(f.\u0275\u0275contentQuery(i,Ae,5),f.\u0275\u0275contentQuery(i,_e,5),f.\u0275\u0275contentQuery(i,Ie,5),f.\u0275\u0275contentQuery(i,Ee,5),f.\u0275\u0275contentQuery(i,Oe,5),f.\u0275\u0275contentQuery(i,xe,5)),2&e){let e;f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.customExprTmpl=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.inlineWidthTempRef=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t.filterTemplateRef=e.first),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t._filterInstances=e),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t._inlineInstances=e),f.\u0275\u0275queryRefresh(e=f.\u0275\u0275loadQuery())&&(t._inlineInstancesNew=e)}},features:[f.\u0275\u0275ProvidersFeature([o.provideAsWidgetRef(Te)]),f.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&f.\u0275setClassMetadata(Te,[{type:t.Directive,args:[{selector:"[wmTableColumn]",providers:[o.provideAsWidgetRef(Te)]}]}],(function(){return[{type:f.Injector},{type:O.AppDefaults},{type:re,decorators:[{type:t.Optional}]},{type:Ce,decorators:[{type:t.Optional}]},{type:void 0,decorators:[{type:t.Attribute,args:["filterdataset.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["dataset.bind"]}]}]}),{_filterInstances:[{type:t.ContentChildren,args:["filterWidget",{descendants:!0}]}],_inlineInstances:[{type:t.ContentChildren,args:["inlineWidget",{descendants:!0}]}],_inlineInstancesNew:[{type:t.ContentChildren,args:["inlineWidgetNew",{descendants:!0}]}],customExprTmpl:[{type:t.ContentChild,args:["customExprTmpl"]}],inlineWidthTempRef:[{type:t.ContentChild,args:["inlineWidgetTmpl"]}],filterTemplateRef:[{type:t.ContentChild,args:["filterTmpl"]}]});const Me={widgetType:"wm-table-row",hostClass:""};class Ne extends o.BaseComponent{static{this.initializeProps=void o.register("wm-table-row",new Map([["class",o.PROP_STRING],["closeothers",{value:!0,...o.PROP_BOOLEAN}],["content",o.PROP_STRING],["columnwidth",{value:"30px",...o.PROP_STRING}],["collapseicon",o.PROP_STRING],["expandicon",o.PROP_STRING],["height",o.PROP_STRING],["position",{value:"0",...o.PROP_STRING}]]))}constructor(e,t){super(e,Me),this.table=t}populateConfig(){this.config={closeothers:this.closeothers,content:this.content,columnwidth:this.columnwidth,expandicon:this.expandicon,collapseicon:this.collapseicon,height:this.height,position:this.position}}ngOnInit(){super.ngOnInit(),this.populateConfig(),this.table.registerRow(this.config,this)}onPropertyChange(e,t){"content"===e&&this.config&&(this.config.content=this.content)}static{this.\u0275fac=function(e){return new(e||Ne)(f.\u0275\u0275directiveInject(f.Injector),f.\u0275\u0275directiveInject(re,12))}}static{this.\u0275dir=f.\u0275\u0275defineDirective({type:Ne,selectors:[["","wmTableRow",""]],features:[f.\u0275\u0275ProvidersFeature([o.provideAsWidgetRef(Ne)]),f.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&f.\u0275setClassMetadata(Ne,[{type:t.Directive,args:[{selector:"[wmTableRow]",providers:[o.provideAsWidgetRef(Ne)]}]}],(function(){return[{type:f.Injector},{type:re,decorators:[{type:t.Optional},{type:t.SkipSelf}]}]}),null);const ke={widgetType:"wm-table-row-action",hostClass:""};class Le extends o.BaseComponent{static{this.initializeProps=void o.register("wm-table-row-action",new Map([["accessroles",o.PROP_STRING],["action",o.PROP_STRING],["caption",o.PROP_STRING],["class ",{value:"btn-secondary",...o.PROP_STRING}],["disabled",{value:!1,...o.PROP_BOOLEAN}],["display-name",o.PROP_STRING],["hyperlink",o.PROP_STRING],["iconclass",o.PROP_STRING],["key",o.PROP_STRING],["show",{value:!0,...o.PROP_BOOLEAN}],["tabindex",{value:0,...o.PROP_NUMBER}],["target",o.PROP_STRING],["title",o.PROP_STRING],["widget-type",{value:"button",...o.PROP_STRING}]]))}constructor(e,t,i){super(e,ke),this.table=t,i[0].editRow=e=>this.table.editRow(e),i[0].deleteRow=e=>this.table.deleteRow(e),i[0].addNewRow=e=>this.table.addNewRow(e)}getTitle(){return _.isUndefined(this.title)?this["display-name"]||"":this.title}populateAction(){this.buttonDef={key:this.key,displayName:this["display-name"]||this.caption||"",show:this.show,class:this.class||"",iconclass:this.iconclass||"",title:this.getTitle(),action:this.action,accessroles:this.accessroles,disabled:this.disabled,tabindex:this.tabindex?+this.tabindex:void 0,widgetType:this["widget-type"]||"button",hyperlink:this.hyperlink,target:this.target||"",conditionalclass:this.conditionalclass||"",conditionalstyle:this.conditionalstyle||{}}}ngOnInit(){super.ngOnInit(),this.populateAction(),this.table.registerRowActions(this.buttonDef)}static{this.\u0275fac=function(e){return new(e||Le)(f.\u0275\u0275directiveInject(f.Injector),f.\u0275\u0275directiveInject(re,8),f.\u0275\u0275directiveInject(o.Context,2))}}static{this.\u0275dir=f.\u0275\u0275defineDirective({type:Le,selectors:[["","wmTableRowAction",""]],features:[f.\u0275\u0275ProvidersFeature([o.provideAsWidgetRef(Le),{provide:o.Context,useFactory:()=>({}),multi:!0}]),f.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&f.\u0275setClassMetadata(Le,[{type:t.Directive,args:[{selector:"[wmTableRowAction]",providers:[o.provideAsWidgetRef(Le),{provide:o.Context,useFactory:()=>({}),multi:!0}]}]}],(function(){return[{type:f.Injector},{type:re,decorators:[{type:t.Optional}]},{type:Array,decorators:[{type:t.Self},{type:t.Inject,args:[o.Context]}]}]}),null);const Fe=[re,pe,be,we,Te,Ce,Ne,Le];class $e{static{this.\u0275fac=function(e){return new(e||$e)}}static{this.\u0275mod=f.\u0275\u0275defineNgModule({type:$e})}static{this.\u0275inj=f.\u0275\u0275defineInjector({imports:[r.BasicModule,s.BsDropdownModule,i.CommonModule,n.FormsModule,n.ReactiveFormsModule,l.InputModule,d.ListModule,c.MenuModule,p.PaginationModule,a.TooltipModule,o.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&f.\u0275setClassMetadata($e,[{type:t.NgModule,args:[{imports:[r.BasicModule,s.BsDropdownModule,i.CommonModule,n.FormsModule,n.ReactiveFormsModule,l.InputModule,d.ListModule,c.MenuModule,p.PaginationModule,a.TooltipModule,o.WmComponentsModule],declarations:[...Fe],exports:[...Fe]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&f.\u0275\u0275setNgModuleScope($e,{declarations:[re,pe,be,we,Te,Ce,Ne,Le],imports:[r.BasicModule,s.BsDropdownModule,i.CommonModule,n.FormsModule,n.ReactiveFormsModule,l.InputModule,d.ListModule,c.MenuModule,p.PaginationModule,a.TooltipModule,o.WmComponentsModule],exports:[re,pe,be,we,Te,Ce,Ne,Le]}),e.TableActionDirective=we,e.TableCUDDirective=pe,e.TableColumnDirective=Te,e.TableColumnGroupDirective=Ce,e.TableComponent=re,e.TableFilterSortDirective=be,e.TableModule=$e,e.TableRowActionDirective=Le,e.TableRowDirective=Ne})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("rxjs/operators"),require("@wm/core"),require("@wm/components/data/table")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","rxjs/operators","@wm/core","@wm/components/data/table"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.livetable={}),e.ng.core,e.ng.common,e.wm.components.base,e.rxjs.operators,e.wm.core,e.wm.components.data.table)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(s);const d=["wmLiveTable",""],p=["*"],u={widgetType:"wm-livetable",hostClass:"app-livegrid"};class h extends n.StylableComponent{static{this.initializeProps=void n.register("wm-livetable",new Map([["class",n.PROP_STRING],["formlayout",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e,t,i,a,s,o,r){super(e,u),this.dialogService=a,this.app=s,this.$queue=[],this.tableOptions={multiselect:!1,setGridEditMode:""},n.styler(this.nativeElement,this),"dialog"===o&&(this.isLayoutDialog=!0,this.dialogId=r)}ngAfterContentInit(){super.ngAfterContentInit(),this.table&&(this.table._liveTableParent=this,this.table.datagridElement.datatable("option",this.tableOptions),this.table.selectedItemChange$.pipe(a.debounceTime(250)).subscribe(this.onSelectedItemChange.bind(this)),this.isLayoutDialog||this.form||this.table.datagridElement.datatable("option",{beforeRowUpdate:()=>{this.showErrorMessage()},beforeRowDelete:()=>{this.showErrorMessage()},beforeRowInsert:()=>{this.showErrorMessage()}}))}openDialog(){this.dialogService.open(this.dialogId,this.viewParent),s.$appDigest()}closeDialog(){this.dialogService.close(this.dialogId,this.viewParent)}focusFirstInput(){const e=$(this.form.$element).find('[role="textbox"]').first();e.focus(),e.select()}onDialogOpen(){this.focusFirstInput()}setFormData(e){this.form.isDestroyed||(this.form.getWidget().formdata=e)}_addNewRow(){this.form.isSelected=!0,this.setFormData(""),this.form.new(),this.isLayoutDialog&&this.onDialogOpen()}addNewRow(){if(this.isLayoutDialog)return this.openDialog(),void this.$queue.push(this._addNewRow.bind(this));this._addNewRow()}_updateRow(e,t){this.setFormData(e),this.form.isSelected=!0,this.form.edit(),this.isLayoutDialog&&(this.form.isUpdateMode="dblclick"!==t||this.form.updateMode,this.onDialogOpen())}updateRow(e,t){if(this.isLayoutDialog)return this.openDialog(),void this.$queue.push(this._updateRow.bind(this,e,t));this._updateRow(e,t)}onSelectedItemChange(e){let t;this.form&&this.table&&(e&&e.length>0&&!this.form.isSelected&&(this.form.isSelected=!0),e&&e.length>0?(t=this.table.multiselect?e[0]:e[e.length-1],this.setFormData(s.getClonedObject(t)),this.form.isUpdateMode&&this.form.edit()):(this.form.isSelected=!1,this.setFormData(""),this.form.clearData()))}onCancel(){this.form.isUpdateMode=!1,this.isLayoutDialog&&this.closeDialog()}onResult(e,t,i,n){switch(this.form.isUpdateMode=s.isDefined(n)?n:!!i,e){case"insert":this.table.gridOptions.isNavTypeScrollOrOndemand()&&(this.table.isNewRowInserted=!0),i?(this.table.gridfirstrowselect=!1,this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(),t,!0)):this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(),t);break;case"update":i?(this.table.gridfirstrowselect=!1,this.table.initiateSelectItem("current",t,!0)):this.table.initiateSelectItem("current",t);break;case"delete":this.table.onRecordDelete()}this.table.updateVariable(),this.isLayoutDialog&&(i?"insert"===e?this.form.new():"update"===e&&this.form.edit():this.closeDialog())}showErrorMessage(){this.app.notifyApp(this.appLocale.LABEL_ACCESS_DENIED,"error")}onFormReady(e){this.form=e,setTimeout((()=>{s.triggerFn(this.$queue.pop())}))}static{this.\u0275fac=function(e){return new(e||h)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275directiveInject(l.ElementRef),l.\u0275\u0275directiveInject(l.ChangeDetectorRef),l.\u0275\u0275directiveInject(c.AbstractDialogService),l.\u0275\u0275directiveInject(c.App),l.\u0275\u0275injectAttribute("formlayout"),l.\u0275\u0275injectAttribute("dialogid"))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:h,selectors:[["","wmLiveTable",""]],contentQueries:function(e,t,i){if(1&e&&l.\u0275\u0275contentQuery(i,o.TableComponent,5),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.table=e.first)}},features:[l.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(h)]),l.\u0275\u0275InheritDefinitionFeature],attrs:d,ngContentSelectors:p,decls:1,vars:0,template:function(e,t){1&e&&(l.\u0275\u0275projectionDef(),l.\u0275\u0275projection(0))},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(h,[{type:t.Component,args:[{selector:"[wmLiveTable]",providers:[n.provideAsWidgetRef(h)],template:"<ng-content></ng-content>"}]}],(function(){return[{type:l.Injector},{type:l.ElementRef},{type:l.ChangeDetectorRef},{type:c.AbstractDialogService},{type:c.App},{type:void 0,decorators:[{type:t.Attribute,args:["formlayout"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["dialogid"]}]}]}),{table:[{type:t.ContentChild,args:[o.TableComponent]}]});const m=[h];class g{static{this.\u0275fac=function(e){return new(e||g)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:g})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(g,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...m],exports:[...m]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(g,{declarations:[h],imports:[i.CommonModule,n.WmComponentsModule],exports:[h]}),e.LiveTableComponent=h,e.LiveTableModule=g})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/basic"),require("@wm/components/input"),require("@wm/components/dialogs/design-dialog"),require("@angular/forms"),require("@wm/core"),require("@wm/components/prefab"),require("@wm/components/data/list"),require("@wm/components/data/table"),require("rxjs/operators"),require("@wm/components/data/live-table")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/basic","@wm/components/input","@wm/components/dialogs/design-dialog","@angular/forms","@wm/core","@wm/components/prefab","@wm/components/data/list","@wm/components/data/table","rxjs/operators","@wm/components/data/live-table"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.form={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.basic,e.wm.components.input,e.wm.components.dialogs.designdialog,e.ng.forms,e.wm.core,e.wm.components.prefab,e.wm.components.data.list,e.wm.components.data.table,e.rxjs.operators,e.wm.components.data.livetable)}(this,(function(e,t,i,n,a,s,o,r,l,c,d,p,u,h){"use strict";function m(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var g=m(t),f=m(i),v=m(n),b=m(a),y=m(s),w=m(r),P=m(l),C=m(c),A=m(d),I=m(h);const E=new Map([["autocomplete",{value:!1,...n.PROP_BOOLEAN}],["captionalign",{value:"left",...n.PROP_STRING}],["captionposition",{value:"left",...n.PROP_STRING}],["captionsize",n.PROP_STRING],["captionwidth",{value:"xs-12 sm-3 md-3 lg-3",...n.PROP_STRING}],["class",n.PROP_STRING],["collapsible",n.PROP_BOOLEAN],["dataset",n.PROP_ANY],["datasource",n.PROP_STRING],["expanded",{value:!0,...n.PROP_BOOLEAN}],["formdatasource",n.PROP_STRING],["name",n.PROP_STRING],["numberOfFields",n.PROP_NUMBER],["show",{value:!0,...n.PROP_BOOLEAN}],["showindevice",{displayType:"inline-block",value:"all",...n.PROP_STRING}],["subheading",n.PROP_STRING],["tabindex",{value:0,...n.PROP_NUMBER}],["title",n.PROP_STRING]]),O=["dynamicForm"],x=["wmForm",""];function R(e,t){1&e&&g.\u0275\u0275projection(0)}function D(e,t){1&e&&g.\u0275\u0275elementContainer(0)}function S(e,t){if(1&e&&g.\u0275\u0275element(0,"i",22),2&e){const e=g.\u0275\u0275nextContext(3);g.\u0275\u0275property("ngClass",e.iconclass)}}const T=function(e){return{btn:e}};function M(e,t){if(1&e&&g.\u0275\u0275elementContainer(0,23),2&e){const e=t.$implicit;g.\u0275\u0275nextContext(3);const i=g.\u0275\u0275reference(8),n=g.\u0275\u0275reference(10);g.\u0275\u0275property("ngTemplateOutlet","button"===e.widgetType?i:n)("ngTemplateOutletContext",g.\u0275\u0275pureFunction1(2,T,e))}}function N(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"button",24),g.\u0275\u0275listener("click",(function(){g.\u0275\u0275restoreView(e);const t=g.\u0275\u0275nextContext(3);return g.\u0275\u0275resetView(t.expandCollapsePanel())})),g.\u0275\u0275elementEnd()}if(2&e){const e=g.\u0275\u0275nextContext(3);g.\u0275\u0275property("ngClass",e.expanded?"wi-minus":"wi-plus")}}function k(e,t){if(1&e&&(g.\u0275\u0275elementStart(0,"div",14)(1,"h3",15)(2,"div",16),g.\u0275\u0275template(3,S,1,1,"i",17),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"div",16),g.\u0275\u0275element(5,"div",18)(6,"div",19),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(7,"div",20),g.\u0275\u0275template(8,M,1,4,"ng-container",13),g.\u0275\u0275pipe(9,"filter"),g.\u0275\u0275template(10,N,1,1,"button",21),g.\u0275\u0275elementEnd()()()),2&e){const e=g.\u0275\u0275nextContext(2);g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",e.iconclass),g.\u0275\u0275advance(2),g.\u0275\u0275property("innerHTML",e.title,g.\u0275\u0275sanitizeHtml),g.\u0275\u0275advance(1),g.\u0275\u0275property("innerHTML",e.subheading,g.\u0275\u0275sanitizeHtml),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngForOf",g.\u0275\u0275pipeBind3(9,5,e.buttonArray,"position","header")),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",e.collapsible)}}function L(e,t){if(1&e&&g.\u0275\u0275element(0,"p",25),2&e){const e=g.\u0275\u0275nextContext(2);g.\u0275\u0275attribute("aria-hidden",!e.statusMessage.caption)("aria-label",e.statusMessage.caption)}}function F(e,t){1&e&&g.\u0275\u0275elementContainer(0)}function B(e,t){if(1&e&&g.\u0275\u0275elementContainer(0,23),2&e){const e=t.$implicit;g.\u0275\u0275nextContext(2);const i=g.\u0275\u0275reference(8),n=g.\u0275\u0275reference(10);g.\u0275\u0275property("ngTemplateOutlet","button"===e.widgetType?i:n)("ngTemplateOutletContext",g.\u0275\u0275pureFunction1(2,T,e))}}const j=function(e,t){return{"form-elements":e,"form-body":t}},V=function(e,t){return{"form-elements":e,"form-content":t}},G=function(e){return{"modal-footer":e}};function W(e,t){if(1&e&&(g.\u0275\u0275template(0,k,11,9,"div",7),g.\u0275\u0275elementStart(1,"div",8),g.\u0275\u0275template(2,L,1,2,"p",9),g.\u0275\u0275elementStart(3,"div",10),g.\u0275\u0275template(4,F,1,0,"ng-container",11),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(5,"div",12),g.\u0275\u0275template(6,B,1,4,"ng-container",13),g.\u0275\u0275pipe(7,"filter"),g.\u0275\u0275elementEnd()()),2&e){const e=g.\u0275\u0275nextContext(),t=g.\u0275\u0275reference(1);g.\u0275\u0275property("ngIf",!e.isLayoutDialog&&(e.title||e.subheading||e.iconclass||e.showButtons("header"))),g.\u0275\u0275advance(1),g.\u0275\u0275classProp("hidden",!e.expanded),g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction2(15,j,e.isLayoutDialog,!e.isLayoutDialog)),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",!!e.statusMessage.caption),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction2(18,V,!e.isLayoutDialog,e.isLayoutDialog)),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngTemplateOutlet",t),g.\u0275\u0275advance(1),g.\u0275\u0275classProp("hidden",!e.expanded||!e.showButtons("footer")),g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction1(21,G,e.isLayoutDialog)),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngForOf",g.\u0275\u0275pipeBind3(7,11,e.buttonArray,"position","footer"))}}function U(e,t){1&e&&g.\u0275\u0275elementContainer(0)}function q(e,t){if(1&e&&g.\u0275\u0275template(0,U,1,0,"ng-container",11),2&e){g.\u0275\u0275nextContext();const e=g.\u0275\u0275reference(1);g.\u0275\u0275property("ngTemplateOutlet",e)}}function z(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"button",26),g.\u0275\u0275listener("click",(function(t){const i=g.\u0275\u0275restoreView(e).btn,n=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(n.invokeActionEvent(t,i.action))})),g.\u0275\u0275elementEnd()}if(2&e){const e=t.btn,i=g.\u0275\u0275nextContext();g.\u0275\u0275classProp("hidden",e.updateMode?!i.isUpdateMode:i.isUpdateMode),g.\u0275\u0275propertyInterpolate("name",e.key),g.\u0275\u0275attribute("aria-label",e.displayName)}}function H(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"a",27),g.\u0275\u0275listener("click",(function(t){const i=g.\u0275\u0275restoreView(e).btn,n=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(n.invokeActionEvent(t,i.action))})),g.\u0275\u0275elementEnd()}if(2&e){const e=t.btn,i=g.\u0275\u0275nextContext();g.\u0275\u0275classProp("hidden",e.updateMode?!i.isUpdateMode:i.isUpdateMode),g.\u0275\u0275propertyInterpolate("name",e.key)}}const Q=["*"],Y={widgetType:"wm-form",hostClass:"panel app-panel app-form"},K={widgetType:"wm-form",hostClass:"app-form app-login-form"},J={widgetType:"wm-liveform",hostClass:"panel app-panel app-liveform liveform-inline"},Z={widgetType:"wm-livefilter",hostClass:"panel app-panel app-livefilter clearfix liveform-inline"},X=(e,t)=>{let i="";return _.forEach(e,((e,t)=>{i=`${i} ${t}="${e}"`})),`<wm-gridcolumn columnwidth="${t}">\n                  <wm-form-field ${i}></wm-form-field>\n            </wm-gridcolumn>`},ee=(e,t)=>{const i=e.find("form.ng-invalid:visible, [formControlName].ng-invalid:visible").first();let n=t;return i.is("form")&&(n=t&&t.controls[i.attr("formControlName")||i.attr("name")],n)?ee(i,n):{ngForm:n,$ele:i}},te=(e,t,i)=>{if(!t.valid)if(t.controls)_.forEach(t.controls,((t,i)=>{te(e,t,i)}));else{let n=e.$element.find(`[wmformfield][key="${i}"]`);n.length||(n=e.$element.find(`[wmformfield][name="${i}"]`)),n[0].setAttribute("__errormsg",n[0].getAttribute("__validationId"));let a=(e=>{switch(e.getAttribute("widgettype")){case"select":return e.querySelector("select");case"textarea":return e.querySelector("textarea");default:return e.querySelector("input")}})(n[0]);a?.setAttribute("aria-invalid",t.invalid),a?.setAttribute("aria-describedby",n[0].getAttribute("__validationId")),t.markAsTouched()}};class ie extends n.StylableComponent{static{this.initializeProps=(()=>{l.isMobileApp()&&E.set("captionwidth",{value:"xs-4 sm-4 md-4 lg-4",...n.PROP_STRING});const e=new Map(E);e.set("action",n.PROP_STRING),e.set("defaultmode",{value:"Edit",...n.PROP_STRING}),e.set("metadata",n.PROP_STRING),e.set("method",n.PROP_STRING),e.set("postmessage",{value:"Data posted successfully",...n.PROP_STRING}),e.set("target",n.PROP_STRING),e.set("enctype",n.PROP_STRING),e.set("errormessage",{value:"An error occured. Please try again!",...n.PROP_STRING}),e.set("messagelayout",{value:"Inline",...n.PROP_STRING}),e.set("formdata",n.PROP_STRING),e.set("novalidate",n.PROP_BOOLEAN),e.set("validationtype",{value:"default",...n.PROP_STRING}),e.set("iconclass",n.PROP_STRING),n.register("wm-form",e)})()}set isLayoutDialog(e){e&&l.removeClass(this.nativeElement,"panel app-panel liveform-inline"),this._isLayoutDialog=e}get isLayoutDialog(){return this._isLayoutDialog}set isUpdateMode(e){this._isUpdateMode=e,this.formFields.forEach((t=>{t.setReadOnlyState(e)}))}get isUpdateMode(){return this._isUpdateMode}submit(e){this._debouncedSubmitForm(e)}onReset(){this.reset()}onKeydownHandler(e){this._triggeredByUser=!0}get parentFormArray(){return this.parentForm&&this.isParentList&&this.parentForm.ngform.get(this.parentList.name)}get isParentList(){if(this.parentList&&this.parentForm&&!l.isDefined(this._formIsInList)){const e=this.$element.closest('.app-livelist[name="'+this.parentList.name+'"]');e.length&&(this._formIsInList=!e.find('form[widget-id="'+this.parentForm.widgetId+'"]').length)}return l.isDefined(this._formIsInList)?this._formIsInList:this.parentList}constructor(e,t,i,a,s,o,r,c,d,p,u,h,m,g,f,v,b,y,w,P){super(e,((e,t,i)=>{let n=Y;return null!==e?n=J:null!==t?n=Z:"app-login"===i&&(n=K),n})(v,b,y)),this.fb=t,this.app=i,this.dialogService=a,this.dynamicComponentProvider=s,this.ngZone=o,this.parentList=r,this.parentForm=c,this.parentPrefab=d,this.parentPartial=p,this.onBeforeSubmitEvt=u,this.onSubmitEvt=h,this.onBeforeRenderEvt=m,this.binddataset=g,this.bindformdata=f,this._widgetClass="",this._captionClass="",this.formFields=[],this.formfields={},this.formWidgets={},this.filterWidgets={},this.buttonArray=[],this.dataoutput={},this.formdata={},this.statusMessage={caption:"",type:""},this.primaryKey=[],this._debouncedUpdateFieldSource=_.debounce(this.updateFieldSource,350),this.validationMessages=[],this._debouncedSubmitForm=l.debounce((e=>{this.ngZone.run((()=>{this.submitForm(e)}))}),250),n.styler(this.nativeElement,this),l.removeAttr(this.nativeElement,"title"),this.isUpdateMode=!0,this.dialogId=this.nativeElement.getAttribute("dialogId"),this.ngform=t.group({}),this.bindingValue=w||P;const C=this.ngform.valueChanges.subscribe(this.updateDataOutput.bind(this));this.registerDestroyListener((()=>C.unsubscribe())),this.elScope=this,this.addEventsToContext(this.context)}ngAfterContentInit(){setTimeout((()=>{this.componentRefs.forEach((e=>{e.name&&(this.formWidgets[e.name]=e)}))}),250)}ngAfterViewInit(){this.parentForm&&this.parentForm.ngform&&this.isParentList&&(_.get(this.parentForm.ngform.controls,this.parentList.name)||this.parentForm.ngform.setControl(this.parentList.name,new r.FormArray([])),this.parentFormArray.push(this.ngform),this.formArrayIndex=this.parentFormArray.length-1),this.addInnerNgFormToForm(this.bindingValue)}findOperationType(){}addInnerNgFormToForm(e){if(this.parentForm&&this.parentForm.ngform){if(this.isParentList)return;const t=this.parentPrefab||this.parentPartial;if(t){let i;i=this.parentPrefab?t.$element.find("[wmprefabcontainer]"):t.$element;const n=i.find("form").first();_.get(n[0],"widget.widgetId")===this.widgetId&&(n.isParentList||n.siblings("form").length||(e=_.get(t,"name")))}let i=1,n=e;for(;this.parentForm.ngform.controls.hasOwnProperty(n);)n=`${e}_${i}`,i++;this.formGroupName=n,this.parentForm.ngform.addControl(n,this.ngform)}}addEventsToContext(e){e.cancel=()=>this.cancel(),e.reset=()=>this.reset(),e.save=e=>this.save(e),e.saveAndNew=()=>this.saveAndNew(),e.saveAndView=()=>this.saveAndView(),e.delete=()=>this.delete(),e.new=()=>this.new(),e.edit=()=>this.edit(),e.highlightInvalidFields=()=>this.highlightInvalidFields(),e.filter=()=>this.filter(),e.clearFilter=()=>this.clearFilter(),e.submit=e=>this.submit(e)}setValidationOnInnerForms(e){const t=this.getNativeElement().querySelectorAll(".app-form");_.forEach(t,(t=>{const i=t.widget;let n=_.get(i,"formGroupName")||i.name;l.isDefined(i.formArrayIndex)&&(n=n+"["+i.formArrayIndex+"]");let a=i;for(;_.get(a,"parentForm");){let e=a.parentForm.formGroupName||a.parentForm.name;a.parentForm.parentFormArray&&(e=e+"["+a.parentForm.formArrayIndex+"]"),n=e+"."+n,a=a.parentForm}this.setValidationOnFields(i,n,e)}))}setValidationOnFields(e,t,i){const n=e.ngform.controls,a=e.formFields;a&&_.forEach(n,((n,s)=>{const o=a.find((e=>e.key===s));!o||i&&!n.touched||(o.nativeElement.querySelector("input")?.setAttribute("aria-invalid",n.invalid),this.prepareValidationObj(n,s,o,t),this.prepareValidationObj.call(e,n,s,o,t))}))}prepareValidationObj(e,t,i,n){const a=this.validationMessages.findIndex((e=>e.field===t&&e.fullyQualifiedFormName===n));e.invalid?-1===a?this.validationMessages.push({field:t,value:i.value,errorType:_.keys(e.errors),message:i.validationmessage||"",getElement:()=>i.$element.find("[focus-target]"),formName:_.last(n.split(".")),fullyQualifiedFormName:n}):(this.validationMessages[a].value=i.value,this.validationMessages[a].errorType=_.keys(e.errors)):e.valid&&a>-1&&this.validationMessages.splice(a,1)}setValidationMsgs(e){!this.formFields.length&&_.isEmpty(this.ngform.controls)||(this.setValidationOnFields(this,this.name,e),this.setValidationOnInnerForms(e))}handleEvent(e,t,i,n){"submit"!==t&&super.handleEvent(this.nativeElement,t,i,n)}updateFieldSource(){this.formdatasource&&this.formdatasource.execute(l.DataSource.Operation.IS_API_AWARE)||this.formdatasource&&!this.formdatasource.twoWayBinding||this.formFields.forEach((e=>{e.setFormWidget("datavaluesource",this.formdatasource),e.setFormWidget("binddatavalue",`${this.bindformdata}.${e.key}`)}))}highlightInvalidFields(){te(this,this.ngform,"")}validateFieldsOnSubmit(){if(this.setValidationMsgs(),"delete"!==this.operationType&&("html"===this.validationtype||"default"===this.validationtype)&&this.ngform&&this.ngform.invalid){if(this.ngform.invalid){"default"===this.validationtype&&this.highlightInvalidFields();const e=ee(this.$element,this.ngform),t=e.ngForm;let i=e.$ele;if(i=i.parent().find("[focus-target]"),i.length){i.hasClass("app-search-input")||i.focus();const e=t&&t.controls[i.attr("formControlName")||i.attr("name")];return e&&e.markAsTouched&&e.markAsTouched(),l.$appDigest(),!0}return!0}return!1}return!1}onPropertyChange(e,t,i){switch(e){case"captionalign":this.captionAlignClass="align-"+t;break;case"captionposition":case"captionwidth":this.setLayoutConfig();break;case"captionsize":this.captionsize=t;break;case"novalidate":this.widget.validationtype=!0===t||"true"===t?"none":"default";break;case"formdata":if(_.isEqual(t,i))break;_.isArray(t)?this.setFormData(_.last(t)):this.setFormData(t),!this.isDataSourceUpdated&&this.datasource&&this.onDataSourceChange();break;case"defaultmode":this.isLayoutDialog||(this.updateMode=!(!t||"Edit"!==t),this.isUpdateMode=this.updateMode);break;case"datasource":this.onDataSourceChange();break;case"formdatasource":this.onFormDataSourceChange();break;case"metadata":this.generateFormFields();break;case"dataset":this.getFormFields().forEach((e=>{!e.isDataSetBound&&_.get(e.formWidget,"dataset$")&&e.formWidget.dataset$.next()}));break;default:super.onPropertyChange(e,t,i)}}onResultCb(e,t,i){const n={$event:i,$data:e,$operation:this.operationType};this.invokeEventCallback("result",n),t?this.invokeEventCallback("success",n):this.invokeEventCallback("error",n)}toggleMessage(e,t,i,n){let a;e&&t?(a="error"===i&&this.errormessage?this.errormessage:t,"Inline"===this.messagelayout?(a=this.checkAppServiceErrorMsg(i)||a,this.statusMessage={caption:a||"",type:i},this.messageRef&&this.messageRef.showMessage(this.statusMessage.caption,this.statusMessage.type),l.isElementInViewport(this.$element[0])||l.scrollToElement(this.$element[0])):this.app.notifyApp(a,i,n)):this.statusMessage.caption=""}checkAppServiceErrorMsg(e){const t=_.get(this.app,"Actions.appNotification");if(t&&"error"===e)return t.getMessage()}clearMessage(){this.toggleMessage(!1)}setLayoutConfig(){let e;e=n.getFieldLayoutConfig(this.captionwidth,this.captionposition,_.get(this.app.selectedViewPort,"os")),this._widgetClass=e.widgetCls,this._captionClass=e.captionCls,l.$appDigest()}registerFormWidget(e){const t=e.name||e.key;this.formWidgets[t]=e}registerFormFields(e){const t=this.formFields.push(e);this.formfields[e.key]=e,this.registerFormWidget(e),this._debouncedUpdateFieldSource(),this.parentForm&&(this.parentForm.formFields.push(e),this.parentForm.formfields[e.key]=e,this.parentForm.setFormData(this.parentForm.formdata,this.formFields,this.formdata||{})),t!==this.numberOfFields||_.isEmpty(this.formdata)||(this.onDataSourceChange(),_.isArray(this.formdata)?this.setFormData(_.last(this.formdata)):this.setFormData(this.formdata))}registerActions(e){this.buttonArray.push(e)}updateFormDataOutput(e){_.forEach(this.ngform.value,((t,i)=>{_.find(this.formFields,{key:i})||(e[i]=t)})),this.dataoutput=e}constructDataObject(){const e={};return this.getFormFields().forEach((t=>{let i,n;if(n=t.datavalue||t._control.value,n=null===n||""===n?void 0:n,"file"===t.type&&(n=l.getFiles(this.name,t.key+"_formWidget",t.multiple)),i=t.key||t.target||t.name,t.form.widgetId!==this.widgetId&&t.form.formGroupName){const a=_.get(e,t.form.formGroupName,{});a[i]=n,_.set(e,t.form.formGroupName,a)}else if("number"==typeof t.form.formArrayIndex&&t.form.isParentList&&!this.parentForm){const a=_.get(e,t.form.parentList.name,[]);a[t.form.formArrayIndex]=a[t.form.formArrayIndex]||{},a[t.form.formArrayIndex][i]=n,_.set(e,t.form.parentList.name,a)}else _.set(e,i,n)})),this.updateFormDataOutput(e),this.dataoutput}updateDataOutput(){this.constructDataObject(),this.ngform.touched&&this.setValidationMsgs(!0)}getFormFields(){return _.filter(this.formFields,(e=>e.form.name===this.name))}setFieldValue(e,t,i){const n=e.key||e.name,a=i||t;a&&((a.hasOwnProperty(n)||_.includes(n,".")&&a.hasOwnProperty(_.split(n,".")[0]))&&(e.value=_.get(a,n)),this.dirty&&!this._triggeredByUser&&this.markAsPristine());const s=e.form.formGroupName;s&&_.get(t,s)&&this.setFormData.call(e.form,t[s]),_.get(e.form,"parentFormArray")&&this.setFormDataFromParentFormData.call(e.form,t)}setFormData(e,t,i){(t||this.formFields).forEach((t=>{this.setFieldValue(t,e,i),t.fieldValidations&&t.fieldValidations.setCustomValidationMessage()})),this.constructDataObject()}resetFormState(){this.validationMessages.length&&(this.validationMessages=[]),this.ngform&&(this.ngform.markAsUntouched(),this.ngform.markAsPristine())}reset(){this.resetFormState(),this.formFields.forEach((e=>{e.value="","upload"!==e.widgettype&&e.type!==l.DataType.BLOB||this.resetFileUploadWidget(e,!0),e.nativeElement.querySelector("input")?.removeAttribute("aria-invalid")})),this.constructDataObject(),this.clearMessage()}savePrevformFields(){this.prevformFields=l.getClonedObject(this.formFields.map((e=>({key:e.key,type:e.type,widgettype:e.widgettype,outputformat:e.outputformat,value:e.value}))))}savePrevDataValues(){this.prevDataValues=this.formFields.map((e=>({key:e.key,value:e.value})))}setReadonlyFields(){this.formFields.forEach((e=>{e.setReadOnlyState()}))}resetFileUploadWidget(e,t){this.$element.find('[name="'+e.key+'_formWidget"]').val(""),e._control.reset(),t||(e.href="",e.value=null)}emptyDataModel(){this.formFields.forEach((e=>{l.isDefined(e)&&(e.type===l.DataType.BLOB?this.resetFileUploadWidget(e):e.datavalue="")}))}setDefaultValues(){this.formFields.forEach((e=>{this.onFieldDefaultValueChange(e,e.defaultvalue)}))}setOperationType(e){this.operationType=e||"insert"}new(){this.resetFormState(),this.operationType=n.Live_Operations.INSERT,this.clearMessage(),this.isSelected&&this.savePrevformFields(),this.emptyDataModel(),setTimeout((()=>{this.setDefaultValues(),this.savePrevDataValues(),this.constructDataObject()})),this.isUpdateMode=!0}edit(){this.resetFormState(),this.clearMessage(),this.operationType=n.Live_Operations.UPDATE,this.isSelected&&(this.savePrevformFields(),this.savePrevDataValues()),this.prevDataObject=l.getClonedObject(this.formdata||{}),this.setReadonlyFields(),this.isUpdateMode=!0,l.$appDigest()}triggerWMEvent(e){const t=this.nativeElement.getAttribute("dependsontable");t&&(l.$invokeWatchers(!0),this.app.notify("wm-event",{eventName:e,widgetName:t}))}submitForm(e){let t,i,a;const s=this.datasource;if(this.validateFieldsOnSubmit())return;i=l.getClonedObject(this.constructDataObject());const o=()=>({$event:e,$formData:i,$data:i});if(this.onBeforeSubmitEvt){if(!1===this.invokeEventCallback("beforesubmit",o()))return;this.resetFormState()}else this.resetFormState();if(this.onSubmitEvt||s)if(s){const r=s.pagination&&s.pagination.number+1,c=this.operationType?this.operationType:"insert";n.performDataOperation(s,i,{operationType:c}).then((e=>("wm.CrudVariable"===s.category&&(this.triggerWMEvent("resetEditMode"),this.datasource.execute(l.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0,operation:"list",page:r,preventMissingOpMsg:!0}),this.dialogId&&this.closeDialog()),l.isDefined(e.body)?(a=l.getValidJSON(e.body),a=l.isDefined(a)?a:e.body):a=e,{result:a,status:!0,message:this.postmessage,type:"success"})),(e=>(t=this.errormessage||e.error||e,l.$appDigest(),{result:_.get(e,"error")||e,status:!1,message:t,type:"error"}))).then((t=>{("error"===t.type&&!this.onError||"success"===t.type&&!this.onSuccess)&&this.toggleMessage(!0,t.message,t.type),this.invokeEventCallback("submit",o()),this.onResultCb(t.result,t.status,e)}))}else this.invokeEventCallback("submit",o()),this.onResultCb({},!0,e);else this.onResultCb({},!0,e)}closeDialog(){this.dialogService.close(this.dialogId)}showButtons(e){return _.some(this.buttonArray,(t=>_.includes(t.position,e)&&t.updateMode===this.isUpdateMode))}expandCollapsePanel(){this.collapsible&&(this.expanded=!this.expanded)}onDataSourceUpdate(e,t,i){t?this.new():(this.setFormData(e),this.closeDialog()),this.isUpdateMode=!l.isDefined(i)||i}getNearestParentFormData(e){return e.parentForm?e.bindformdata||!_.get(e.parentForm,"formdata")||_.isEmpty(e.parentForm.formdata)?this.getNearestParentFormData(e.parentForm):e.parentForm.formdata:{}}setFormDataFromParentFormData(e){if(_.isEmpty(this.formdata)&&this.parentForm&&e)if(this.parentFormArray){let t=_.get(e,this.parentList.name);if(t)_.isArray(t)||(t=[t]),this.parentFormArray.patchValue(t),this.bindformdata||(this.formdata=t[this.formArrayIndex]),this.setFormData(this.formdata);else if(this.isParentList&&this.parentForm.formGroupName){const t=_.get(e,this.parentForm.formGroupName);this.setFormDataFromParentFormData(t)}}else this.setFormData(e)}onDataSourceChange(){if(_.get(this.formFields,"length")&&!this.bindformdata){this.isDataSourceUpdated=!0;const e=this.getNearestParentFormData(this);this.setFormDataFromParentFormData(e)}}onFormDataSourceChange(){this.updateFieldSource()}onFieldDefaultValueChange(e,t){e.value=n.parseValueByType(t,void 0,e.widgettype,e.trailingzero),this.dirty&&!this._triggeredByUser&&this.markAsPristine()}onFieldValueChange(){}async generateFormFields(){let e,t;_.isUndefined(this._isGridLayoutPresent)&&(this._isGridLayoutPresent=this.$element.find(".panel-body [wmlayoutgrid]").length>0),this._isGridLayoutPresent?(t=this.$element.find(".form-elements [wmlayoutgrid]").first(),e=Number(t.attr("columns"))||1):(t=this.$element.find(".form-elements .dynamic-form-container"),t.length||(this.$element.find(".form-elements").prepend('<div class="dynamic-form-container"></div>'),t=this.$element.find(".form-elements .dynamic-form-container")),e=1);const i=12/e;let n,a,s="",o=0,r=this.metadata?this.metadata.data||this.metadata:[];if(this.formFields=[],_.isEmpty(r))return;if(this.onBeforeRenderEvt&&(a=this.invokeEventCallback("beforerender",{$metadata:r}),a&&(r=a)),!_.isArray(r))return;for(;r[o];){let t="";for(n=0;n<e;n++)r[o]&&(t+=X(r[o],i)),o++;s+=`<wm-gridrow>${t}</wm-gridrow>`}this._isGridLayoutPresent||(s=`<wm-layoutgrid>${s}</wm-layoutgrid>`),this.dynamicFormRef.clear(),this._dynamicContext||(this._dynamicContext=Object.create(this.viewParent),this._dynamicContext.form=this);const c=await this.dynamicComponentProvider.getComponentFactoryRef("app-form-dynamic-"+this.widgetId,s,{noCache:!0,transpile:!0}),d=this.dynamicFormRef.createComponent(c,0,this.inj);l.extendProto(d.instance,this._dynamicContext),t[0].appendChild(d.location.nativeElement),this.setFormData(this.formdata)}get mode(){return this.operationType||this.findOperationType()}get dirty(){return this.ngform&&this.ngform.dirty}markAsPristine(e=!1){this.ngform.markAsPristine({onlySelf:e})}markAsDirty(e=!1){this.ngform.markAsDirty({onlySelf:e})}get invalid(){return this.ngform&&this.ngform.invalid}get touched(){return this.ngform&&this.ngform.touched}get valid(){return this.ngform&&this.ngform.valid}get pristine(){return this.ngform&&this.ngform.pristine}markAsTouched(e=!1){this.ngform.markAsTouched({onlySelf:e})}markAsUntouched(e=!1){this.ngform.markAsUntouched({onlySelf:e})}invokeActionEvent(e,t){l.$parseEvent(t)(this.viewParent,Object.assign(this.context,{$event:e}))}ngOnDestroy(){const e=this.parentForm&&_.get(this.parentForm,"ngform.controls");if(e){if(_.get(this.parentList,"name")&&e.hasOwnProperty(this.parentList.name)){const e=_.findIndex(this.parentList.getWidgets(this.name),{widgetId:this.widgetId});this.parentForm.ngform.controls[this.parentList.name].removeAt(e)}this.formGroupName&&e.hasOwnProperty(this.formGroupName)?this.parentForm.ngform.removeControl(this.formGroupName):this.parentForm.ngform.removeControl(this.name)}super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||ie)(g.\u0275\u0275directiveInject(g.Injector),g.\u0275\u0275directiveInject(w.FormBuilder),g.\u0275\u0275directiveInject(P.App),g.\u0275\u0275directiveInject(P.AbstractDialogService),g.\u0275\u0275directiveInject(P.DynamicComponentRefProvider),g.\u0275\u0275directiveInject(g.NgZone),g.\u0275\u0275directiveInject(A.ListComponent,8),g.\u0275\u0275directiveInject(ie,12),g.\u0275\u0275directiveInject(C.PrefabDirective,12),g.\u0275\u0275directiveInject(v.PartialDirective,12),g.\u0275\u0275injectAttribute("beforesubmit.event"),g.\u0275\u0275injectAttribute("submit.event"),g.\u0275\u0275injectAttribute("beforerender.event"),g.\u0275\u0275injectAttribute("dataset.bind"),g.\u0275\u0275injectAttribute("formdata.bind"),g.\u0275\u0275injectAttribute("wmLiveForm"),g.\u0275\u0275injectAttribute("wmLiveFilter"),g.\u0275\u0275injectAttribute("data-role"),g.\u0275\u0275injectAttribute("key"),g.\u0275\u0275injectAttribute("name"))}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:ie,selectors:[["form","wmForm",""]],contentQueries:function(e,t,i){if(1&e&&g.\u0275\u0275contentQuery(i,n.WidgetRef,5),2&e){let e;g.\u0275\u0275queryRefresh(e=g.\u0275\u0275loadQuery())&&(t.componentRefs=e)}},viewQuery:function(e,i){if(1&e&&(g.\u0275\u0275viewQuery(O,7,t.ViewContainerRef),g.\u0275\u0275viewQuery(n.MessageComponent,5)),2&e){let e;g.\u0275\u0275queryRefresh(e=g.\u0275\u0275loadQuery())&&(i.dynamicFormRef=e.first),g.\u0275\u0275queryRefresh(e=g.\u0275\u0275loadQuery())&&(i.messageRef=e.first)}},hostVars:1,hostBindings:function(e,t){1&e&&g.\u0275\u0275listener("submit",(function(e){return t.submit(e)}))("reset",(function(){return t.onReset()}))("keydown",(function(e){return t.onKeydownHandler(e)})),2&e&&g.\u0275\u0275hostProperty("action",t.action,g.\u0275\u0275sanitizeUrl)},features:[g.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(ie)]),g.\u0275\u0275InheritDefinitionFeature],attrs:x,ngContentSelectors:Q,decls:13,vars:3,consts:[["content",""],[4,"ngIf","ngIfThen","ngIfElse"],["defaultTemplate",""],["pageLayoutTemplate",""],["buttonRef",""],["anchorRef",""],["dynamicForm",""],["class","panel-heading",4,"ngIf"],[1,"panel-body",3,"ngClass"],["wmMessage","","caption.bind","statusMessage.caption","type.bind","statusMessage.type",4,"ngIf"],[3,"ngClass"],[4,"ngTemplateOutlet"],[1,"basic-btn-grp","form-action","panel-footer","clearfix",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[1,"panel-heading"],[1,"panel-title"],[1,"pull-left"],["class","app-icon panel-icon","aria-hidden","true",3,"ngClass",4,"ngIf"],[1,"heading",3,"innerHTML"],[1,"description",3,"innerHTML"],[1,"form-action","panel-actions","basic-btn-grp"],["type","button","class","app-icon wi panel-action","title","Collapse/Expand",3,"ngClass","click",4,"ngIf"],["aria-hidden","true",1,"app-icon","panel-icon",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","title","Collapse/Expand",1,"app-icon","wi","panel-action",3,"ngClass","click"],["wmMessage","","caption.bind","statusMessage.caption","type.bind","statusMessage.type"],["wmButton","","caption.bind","btn.displayName","class.bind","btn.class","iconclass.bind","btn.iconclass","show.bind","btn.show","type.bind","btn.type","hint.bind","btn.title","shortcutkey.bind","btn.shortcutkey","disabled.bind","ngform.status === 'PENDING' || btn.disabled","tabindex.bind","btn.tabindex",3,"name","click"],["wmAnchor","","caption.bind","btn.displayName","class.bind","btn.class","iconclass.bind","btn.iconclass","show.bind","btn.show","hint.bind","btn.title","shortcutkey.bind","btn.shortcutkey","hyperlink.bind","btn.hyperlink","target.bind","btn.target","tabindex.bind","btn.tabindex",3,"name","click"]],template:function(e,t){if(1&e&&(g.\u0275\u0275projectionDef(),g.\u0275\u0275template(0,R,1,0,"ng-template",null,0,g.\u0275\u0275templateRefExtractor),g.\u0275\u0275template(2,D,1,0,"ng-container",1),g.\u0275\u0275template(3,W,8,23,"ng-template",null,2,g.\u0275\u0275templateRefExtractor),g.\u0275\u0275template(5,q,1,1,"ng-template",null,3,g.\u0275\u0275templateRefExtractor),g.\u0275\u0275template(7,z,1,4,"ng-template",null,4,g.\u0275\u0275templateRefExtractor),g.\u0275\u0275template(9,H,1,3,"ng-template",null,5,g.\u0275\u0275templateRefExtractor),g.\u0275\u0275elementContainer(11,null,6)),2&e){const e=g.\u0275\u0275reference(4),i=g.\u0275\u0275reference(6);g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf","page"===t.formlayout)("ngIfThen",i)("ngIfElse",e)}},dependencies:[b.AnchorComponent,f.NgClass,f.NgForOf,f.NgIf,f.NgTemplateOutlet,y.ButtonComponent,v.MessageComponent,v.FilterPipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(ie,[{type:t.Component,args:[{selector:"form[wmForm]",providers:[n.provideAsWidgetRef(ie)],template:'<ng-template #content><ng-content></ng-content></ng-template>\n\n<ng-container *ngIf="formlayout === \'page\'; then pageLayoutTemplate else defaultTemplate">\n</ng-container>\n\n<ng-template #defaultTemplate>\n    <div class="panel-heading" *ngIf="!isLayoutDialog && (title || subheading || iconclass || showButtons(\'header\'))">\n        <h3 class="panel-title">\n            <div class="pull-left">\n                <i class="app-icon panel-icon" aria-hidden="true" [ngClass]="iconclass" *ngIf="iconclass"></i>\n            </div>\n            <div class="pull-left">\n                <div class="heading" [innerHTML]="title"></div>\n                <div class="description" [innerHTML]="subheading"></div>\n            </div>\n            <div class="form-action panel-actions basic-btn-grp">\n                <ng-container *ngFor="let btn of buttonArray | filter : \'position\' : \'header\'"\n                              [ngTemplateOutlet]="btn.widgetType === \'button\' ? buttonRef : anchorRef" [ngTemplateOutletContext]="{btn:btn}">\n                </ng-container>\n                <button type="button" class="app-icon wi panel-action" *ngIf="collapsible" title="Collapse/Expand"\n                        [ngClass]="expanded ? \'wi-minus\': \'wi-plus\'" (click)="expandCollapsePanel();"></button>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body" [ngClass]="{\'form-elements\': isLayoutDialog, \'form-body\': !isLayoutDialog}" [class.hidden]="!expanded">\n        <p wmMessage *ngIf="!!statusMessage.caption" [attr.aria-hidden]="!statusMessage.caption" [attr.aria-label]="statusMessage.caption" caption.bind="statusMessage.caption" type.bind="statusMessage.type"></p>\n        <div [ngClass]="{\'form-elements\': !isLayoutDialog, \'form-content\': isLayoutDialog}">\n            <ng-container *ngTemplateOutlet="content"></ng-container>\n        </div>\n        <div class="basic-btn-grp form-action panel-footer clearfix" [ngClass]="{\'modal-footer\': isLayoutDialog}" [class.hidden]="!expanded || !showButtons(\'footer\')">\n            <ng-container *ngFor="let btn of buttonArray | filter : \'position\' : \'footer\'"\n                          [ngTemplateOutlet]="btn.widgetType === \'button\' ? buttonRef : anchorRef" [ngTemplateOutletContext]="{btn:btn}">\n            </ng-container>\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #pageLayoutTemplate>\n    <ng-container *ngTemplateOutlet="content"></ng-container>\n</ng-template>\n\n<ng-template #buttonRef let-btn="btn">\n    <button  wmButton name="{{btn.key}}" caption.bind="btn.displayName" class.bind="btn.class" iconclass.bind="btn.iconclass" show.bind="btn.show"\n             (click)="invokeActionEvent($event, btn.action)" type.bind="btn.type" hint.bind="btn.title" shortcutkey.bind="btn.shortcutkey" disabled.bind="ngform.status === \'PENDING\' || btn.disabled"\n             tabindex.bind="btn.tabindex" [attr.aria-label]="btn.displayName" [class.hidden]="btn.updateMode ? !isUpdateMode : isUpdateMode"></button>\n</ng-template>\n\n<ng-template #anchorRef let-btn="btn">\n    <a wmAnchor name="{{btn.key}}" caption.bind="btn.displayName" class.bind="btn.class" iconclass.bind="btn.iconclass" show.bind="btn.show"\n             (click)="invokeActionEvent($event, btn.action)" hint.bind="btn.title" shortcutkey.bind="btn.shortcutkey"\n             hyperlink.bind="btn.hyperlink" target.bind="btn.target"\n             tabindex.bind="btn.tabindex" [class.hidden]="btn.updateMode ? !isUpdateMode : isUpdateMode"></a>\n</ng-template>\n\n<ng-container #dynamicForm></ng-container>\n'}]}],(function(){return[{type:g.Injector},{type:w.FormBuilder},{type:P.App},{type:P.AbstractDialogService},{type:P.DynamicComponentRefProvider},{type:g.NgZone},{type:A.ListComponent,decorators:[{type:t.Optional}]},{type:ie,decorators:[{type:t.SkipSelf},{type:t.Optional}]},{type:C.PrefabDirective,decorators:[{type:t.SkipSelf},{type:t.Optional}]},{type:v.PartialDirective,decorators:[{type:t.SkipSelf},{type:t.Optional}]},{type:void 0,decorators:[{type:t.Attribute,args:["beforesubmit.event"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["submit.event"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["beforerender.event"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["dataset.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["formdata.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["wmLiveForm"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["wmLiveFilter"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["data-role"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["key"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["name"]}]}]}),{dynamicFormRef:[{type:t.ViewChild,args:["dynamicForm",{static:!0,read:t.ViewContainerRef}]}],messageRef:[{type:t.ViewChild,args:[n.MessageComponent]}],componentRefs:[{type:t.ContentChildren,args:[n.WidgetRef,{descendants:!0}]}],action:[{type:t.HostBinding,args:["action"]}],submit:[{type:t.HostListener,args:["submit",["$event"]]}],onReset:[{type:t.HostListener,args:["reset"]}],onKeydownHandler:[{type:t.HostListener,args:["keydown",["$event"]]}]});class ne{constructor(e,t,i,n,a,s){this.componentInstance=i,this.name=a,this.key=s,this.fb=n,this.parent=e||t,this.ngform=this.parent.ngform,this.componentInstance.registerPropertyChangeListener(((e,t)=>{"datavalue"===e&&this._control?this._control.setValue(t):"name"!==e||this._control||this.addControl(this.key||t)}))}get _control(){const e=this.key||this.name;if(e)return this.ngform&&this.ngform.controls[e]}addControl(e){this.ngform.addControl(e,this.createControl())}createControl(){return this.fb.control(this.componentInstance.datavalue)}ngOnInit(){const e=this.key||this.name;e&&!this._control&&(this.addControl(e),this.parent.registerFormWidget(this.componentInstance))}static{this.\u0275fac=function(e){return new(e||ne)(g.\u0275\u0275directiveInject(ie,8),g.\u0275\u0275directiveInject(p.TableComponent,8),g.\u0275\u0275directiveInject(n.WidgetRef,2),g.\u0275\u0275directiveInject(w.FormBuilder),g.\u0275\u0275injectAttribute("name"),g.\u0275\u0275injectAttribute("key"))}}static{this.\u0275dir=g.\u0275\u0275defineDirective({type:ne,selectors:[["","wmFormWidget",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(ne,[{type:t.Directive,args:[{selector:"[wmFormWidget]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[ie]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[p.TableComponent]}]},{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[n.WidgetRef]}]},{type:w.FormBuilder},{type:void 0,decorators:[{type:t.Attribute,args:["name"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["key"]}]}]}),null);const ae={widgetType:"wm-form-action",hostClass:""};class se extends n.BaseComponent{static{this.initializeProps=void n.register("wm-form-action",new Map([["accessroles",n.PROP_STRING],["action",n.PROP_STRING],["class",n.PROP_STRING],["binding",n.PROP_STRING],["disabled",n.PROP_BOOLEAN],["display-name",n.PROP_STRING],["hyperlink",n.PROP_STRING],["iconclass",n.PROP_STRING],["iconname",n.PROP_STRING],["key",n.PROP_STRING],["position",{value:"footer",...n.PROP_STRING}],["shortcutkey",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["tabindex",{value:0,...n.PROP_NUMBER}],["target",n.PROP_STRING],["title",n.PROP_STRING],["type",{value:"button",...n.PROP_STRING}],["update-mode",{value:!0,...n.PROP_BOOLEAN}],["widget-type",{value:"button",...n.PROP_STRING}]]))}constructor(e,t){super(e,ae),this.form=t}populateAction(){this.buttonDef={key:this.key||this.binding,displayName:this["display-name"],show:this.show,class:this.class?this.class:"button"===this["widget-type"]?"btn-secondary":"",iconclass:this.iconclass||"",title:_.isUndefined(this.title)?this["display-name"]||"":this.title,action:this.action,accessroles:this.accessroles,shortcutkey:this.shortcutkey,disabled:this.disabled,tabindex:this.tabindex,iconname:this.iconname,type:this.type,updateMode:this["update-mode"],position:this.position,widgetType:this["widget-type"],hyperlink:this.hyperlink,target:this.target},this._propsInitialized=!0}ngOnInit(){super.ngOnInit(),this.populateAction(),this.form.registerActions(this.buttonDef)}onPropertyChange(e,t,i){this._propsInitialized&&("display-name"===e&&(this.buttonDef.displayName=t),this.buttonDef[e]=t)}static{this.\u0275fac=function(e){return new(e||se)(g.\u0275\u0275directiveInject(g.Injector),g.\u0275\u0275directiveInject(ie,8))}}static{this.\u0275dir=g.\u0275\u0275defineDirective({type:se,selectors:[["","wmFormAction",""]],features:[g.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(se)]),g.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(se,[{type:t.Directive,args:[{selector:"[wmFormAction]",providers:[n.provideAsWidgetRef(se)]}]}],(function(){return[{type:g.Injector},{type:ie,decorators:[{type:t.Optional}]}]}),null);const oe=["formWidget"],re=["formWidgetMax"],le=()=>({custom:!0}),ce={image:"image/*",video:"video/*",audio:"audio/*"};class de extends n.StylableComponent{static{this.initializeProps=(()=>{const e=new Map([["dataentrymode",{value:"default",...n.PROP_STRING}],["debouncetime",{value:250,...n.PROP_NUMBER}],["defaultvalue",n.PROP_STRING],["displayname",n.PROP_STRING],["display-name",n.PROP_STRING],["field",n.PROP_STRING],["filterexpressions",n.PROP_STRING],["filter-on",n.PROP_STRING],["generator",n.PROP_STRING],["hint",n.PROP_STRING],["inputtype",n.PROP_STRING],["is-primary-key",n.PROP_BOOLEAN],["is-range",n.PROP_BOOLEAN],["is-related",n.PROP_BOOLEAN],["isformfield",{value:!0}],["key",n.PROP_STRING],["limit",n.PROP_NUMBER],["lookup-type",n.PROP_STRING],["lookup-field",n.PROP_STRING],["name",n.PROP_STRING],["matchmode",n.PROP_STRING],["maxdefaultvalue",n.PROP_STRING],["maxplaceholder",n.PROP_STRING],["mobile-display",{value:!0,...n.PROP_BOOLEAN}],["period",n.PROP_BOOLEAN],["pc-display",{value:!0,...n.PROP_BOOLEAN}],["placeholder",n.PROP_STRING],["primary-key",n.PROP_BOOLEAN],["related-entity-name",n.PROP_STRING],["required",n.PROP_BOOLEAN],["show",{value:!0,...n.PROP_BOOLEAN}],["tablet-display",{value:!0,...n.PROP_BOOLEAN}],["type",n.PROP_STRING],["validationmessage",n.PROP_STRING],["viewmodewidget",n.PROP_STRING],["widgettype",n.PROP_STRING]]);for(const t in l.FormWidgetType){const i="wm-form-field-"+l.FormWidgetType[t],a=n.getWidgetPropsByType(i);e.forEach(((e,t)=>{null==a.get(t)&&a.set(t,e)}))}})()}onKeydownHandler(e){this._triggeredByUser=!0}handleClick(e){this._clicktriggeredByUser=!0}constructor(e,t,i,n,a,s,o,r,c,d,p,u,h,m,g,f,v,b,y){const w={widgetType:"wm-form-field",hostClass:"",widgetSubType:"wm-form-field-"+(p||l.FormWidgetType.TEXT).trim()};let P=l.noop;super(e,w,new Promise((e=>P=e))),this._initPropsRes=P,this.app=a,this.fieldDefConfig={},this.class="",this.binddataset=r,this.binddisplayimagesrc=h,this.binddisplayexpression=c,this.bindChipclass=o,this.binddisplaylabel=d,this.form=t,this.fb=i,this.viewport=n,this._fieldName=m||u,this.isRange=g,this.excludeProps=new Set(["type","name"]),this.widgettype=p,this.parentList=s,this.notifyForFields=[],(this.binddataset||this.$element.attr("dataset"))&&(this.isDataSetBound=!0),y[0]._onFocusField=this._onFocusField.bind(this),y[0]._onBlurField=this._onBlurField.bind(this),this._debounceSetUpValidators=l.debounce((()=>this.setUpValidators()),500)}_onFocusField(e){this._activeField=!0,$(e.target).closest(".live-field").addClass("active")}getActiveElement(){switch(this.nativeElement.getAttribute("widgettype")){case"select":return this.nativeElement.querySelector("select");case"textarea":return this.nativeElement.querySelector("textarea");default:return this.nativeElement.querySelector("input")}}setAriaAttributes(){const e=this.getActiveElement();this.ngform.controls[this._fieldName].invalid&&this.ngform.controls[this._fieldName].touched&&this.form.isUpdateMode?(this.nativeElement.setAttribute("__errormsg",`${this.nativeElement.getAttribute("__validationId")}`),e?.setAttribute("aria-invalid",`${this.ngform.controls[this._fieldName].invalid}`),e?.setAttribute("aria-describedby",`${this.nativeElement.getAttribute("__validationId")}`)):(this.nativeElement.removeAttribute("__errormsg"),e?.removeAttribute("aria-invalid"),e?.removeAttribute("aria-describedby"))}_onBlurField(e){$(e.target).closest(".live-field").removeClass("active"),this.nativeElement.querySelector("p.text-danger"),this.setAriaAttributes(),this._activeField=!1,this._triggeredByUser=!1,this._clicktriggeredByUser=!1}evaluateExpr(e,t,i){if(i&&t||(t=Object.keys(e)[0]))return n.getEvaluatedData(e,{field:t,expression:i},this.viewParent)}getDisplayExpr(){const e=[],t=this.value,i=this.displayfield||this.displaylabel,n=this.displayexpression;return _.isObject(t)?(_.isArray(t)?_.forEach(t,(t=>{_.isObject(t)&&e.push(this.evaluateExpr(t,i,n))})):e.push(this.evaluateExpr(t,i,n)),_.join(e,",")):null==t?"":this.value}getCaption(){return void 0===this.value||null===this.value?_.get(this.form.dataoutput,this._fieldName)||"":this.value}notifyChanges(){_.forEach(this.notifyForFields,(e=>{e.fieldValidations.validate()}))}observeOn(e){this.fieldValidations.observeOn(e,"formfields")}setUpValidators(e){this.fieldValidations.setUpValidators(e)}setAsyncValidators(e){this.fieldValidations.setAsyncValidators(e)}setValidators(e){this.fieldValidations.setValidators(e)}setFormWidget(e,t){this.formWidget&&this.formWidget.widget&&(this.formWidget.widget[e]=t)}boundFn(e){return e()}setMaxFormWidget(e,t){this.formWidgetMax&&(this.formWidgetMax.widget[e]=t)}onPropertyChange(e,t,i){const n=this.form.dirty;if("tabindex"!==e&&super.onPropertyChange(e,t,i),!this.excludeProps.has(e)){if(this.widgettype===l.FormWidgetType.UPLOAD)return"required"===e&&this._debounceSetUpValidators(),void super.onPropertyChange(e,t,i);switch(this.setFormWidget(e,t),"placeholder"!==e&&this.setMaxFormWidget(e,t),e){case"defaultvalue":this.form.onFieldDefaultValueChange(this,t);break;case"maxdefaultvalue":this.maxValue=t,this.setMaxFormWidget("datavalue",t),this.form.onMaxDefaultValueChange();break;case"maxplaceholder":this.setMaxFormWidget("placeholder",t);break;case"required":n!==this.form.dirty&&this.form.markAsPristine();case"maxchars":case"minvalue":case"maxvalue":case"regexp":case"show":this._debounceSetUpValidators();break;case"primary-key":t&&this.form.setPrimaryKey(this._fieldName);break;case"display-name":this.displayname=t;break;case"readonly":this.setReadOnlyState()}}}onStyleChange(e,t,i){this.setFormWidget(e,t),this.setMaxFormWidget(e,t),super.onStyleChange(e,t,i)}get datavalue(){return this.formWidget&&this.formWidget.datavalue}set datavalue(e){this._control&&this.widgettype!==l.FormWidgetType.UPLOAD&&this._control.setValue(e)}get value(){return this.datavalue}set value(e){this.datavalue=e}get maxValue(){return this.formWidgetMax&&this.formWidgetMax.datavalue}set maxValue(e){this._maxControl&&this._maxControl.setValue(e)}get minValue(){return this.value}set minValue(e){this.value=e}get _control(){return this.ngform&&this.ngform.controls[this._fieldName]}get _maxControl(){return this.ngform&&this.ngform.controls[this._fieldName+"_max"]}get displayValue(){return this.formWidget&&this.formWidget.displayValue}get timestamp(){return this.formWidget&&this.formWidget.timestamp}get charlength(){return this.formWidget&&this.formWidget.charlength}createControl(){return this.fb.control(void 0,{validators:this._validators})}onValueChange(e){if(!this.isDestroyed){const t=$(this.nativeElement).find(".caption-floating");if(t.length>0){const i=l.isDefined(e)&&""!==e&&null!==e||t.find("input").val()||t.find("input:-webkit-autofill").length;this.app.notify("captionPositionAnimate",{isSelect:!0,displayVal:i,nativeEl:t,isSelectMultiple:this.formWidget&&this.formWidget.multiple,isFocused:this._activeField})}this.setAriaAttributes(),this.form.onFieldValueChange(this,e),this.notifyChanges(),(this.$element.find(".active").length>0||this.form.touched)&&((this._triggeredByUser||l.isMobile()&&this._clicktriggeredByUser&&l.isDateTimeType(this.widgettype))&&this.ngform.controls[this._fieldName].markAsTouched(),this.fieldValidations.setCustomValidationMessage())}}onStatusChange(e){this.isDestroyed||(this.showPendingSpinner="PENDING"===e,"PENDING"===e?this.formWidget.disabled=!0:this.formWidget.disabled!==this.disabled&&(this.formWidget.disabled=this.disabled))}setValidationMessage(e){setTimeout((()=>{this.validationmessage=e,this.setUpValidators(le)}))}setReadOnlyState(){let e;e=!this.form.isUpdateMode||(!this["primary-key"]||this["is-related"]||this.period?this.readonly:!("assigned"===this.generator&&"update"!==this.form.operationType)),this.setFormWidget("readonly",e)}resetDisplayInput(){l.isDefined(this.value)&&""!==this.value||this.formWidget&&this.formWidget.resetDisplayInput&&this.formWidget.resetDisplayInput()}triggerUploadEvent(e,t){const i={$event:e};"change"===t&&(i.newVal=e.target.files,i.oldVal=this._oldUploadVal,this._oldUploadVal=i.newVal),this.invokeEventCallback(t,i)}registerFormField(){const e=this._fieldName;if(this.parentList&&this.form.parentList!==this.parentList){let t=1,i=e;for(;this.ngform.controls.hasOwnProperty(i);)i=`${e}_${t}`,t++;this.ngform.addControl(i,this.createControl()),this._fieldName=i}else this.ngform.addControl(e,this.createControl());const t=this._control.valueChanges.pipe(u.debounceTime(200)).subscribe(this.onValueChange.bind(this));this.registerDestroyListener((()=>t.unsubscribe()));const i=this._control.statusChanges.pipe(u.debounceTime(100)).subscribe(this.onStatusChange.bind(this));if(this.registerDestroyListener((()=>i.unsubscribe())),"true"===this.isRange){this.ngform.addControl(e+"_max",this.createControl());const t=this._maxControl.valueChanges.pipe(u.debounceTime(200)).subscribe(this.onValueChange.bind(this));this.registerDestroyListener((()=>t.unsubscribe()))}this.value=_.get(this.form.formdata,this._fieldName)}ngOnInit(){this.ngform=this.form.ngform,this.registerFormField(),this.fieldValidations=new n.BaseFieldValidations(this,this.formWidget,this.widgettype,this._control,this.form),super.ngOnInit()}ngAfterContentInit(){super.ngAfterContentInit(),this.formWidget&&(this._initPropsRes(),this.setFormWidget("binddisplaylabel",this.binddisplaylabel),this.setFormWidget("binddisplayexpression",this.binddisplayexpression),this.setFormWidget("binddisplayimagesrc",this.binddisplayimagesrc),this.setFormWidget("bindChipclass",this.bindChipclass),this.setFormWidget("binddataset",this.binddataset)),this.registerReadyStateListener((()=>{if(this.key=this._fieldName||this.target||this.binding,this.viewmodewidget=this.viewmodewidget||n.getDefaultViewModeWidget(this.widgettype),this.widgettype===l.FormWidgetType.UPLOAD){let e;e=this.filetype?ce[this.filetype]:"",this.permitted=e+(this.extensions?(e?",":"")+this.extensions:"")}l.isMobile()&&this.viewport.isMobileType?this["mobile-display"]||(this.widget.show=!1):this.viewport.isTabletType?this["tablet-display"]||(this.widget.show=!1):this["pc-display"]||(this.widget.show=!1),this.fieldDefConfig.displaname=this.displayname,this.fieldDefConfig.show=this.show,this.fieldDefConfig.isRelated=this["is-related"],this.fieldDefConfig.inputtype=this.inputtype,this.fieldDefConfig.generator=this.generator,this.fieldDefConfig.placeholder=this.placeholder,this.fieldDefConfig.primaryKey=this["primary-key"],this.fieldDefConfig.required=this.required,this.fieldDefConfig._readonly=this.readonly,this.fieldDefConfig.regexp=this.regexp,this.fieldDefConfig.type=this.type,this.fieldDefConfig.key=this.key,this.fieldDefConfig.mobileDisplay=this["mobile-display"],this.fieldDefConfig.name=this.name,this.fieldDefConfig.pcDisplay=this["pc-display"],this.fieldDefConfig.tabletDisplay=this["tablet-display"],this.fieldDefConfig.validationmessage=this.validationmessage,this.fieldDefConfig.viewmodewidget=this.viewmodewidget,this.fieldDefConfig.widget=this.widgettype,this.form.registerFormFields(this.widget),l.addForIdAttributes(this.nativeElement),this.setReadOnlyState()}))}static{this.\u0275fac=function(e){return new(e||de)(g.\u0275\u0275directiveInject(g.Injector),g.\u0275\u0275directiveInject(ie),g.\u0275\u0275directiveInject(w.FormBuilder),g.\u0275\u0275directiveInject(P.Viewport),g.\u0275\u0275directiveInject(P.App),g.\u0275\u0275directiveInject(A.ListComponent,8),g.\u0275\u0275injectAttribute("chipclass.bind"),g.\u0275\u0275injectAttribute("dataset.bind"),g.\u0275\u0275injectAttribute("displayexpression.bind"),g.\u0275\u0275injectAttribute("displaylabel.bind"),g.\u0275\u0275injectAttribute("widgettype"),g.\u0275\u0275injectAttribute("name"),g.\u0275\u0275injectAttribute("displayimagesrc.bind"),g.\u0275\u0275injectAttribute("key"),g.\u0275\u0275injectAttribute("is-range"),g.\u0275\u0275injectAttribute("pc-display"),g.\u0275\u0275injectAttribute("mobile-display"),g.\u0275\u0275injectAttribute("tablet-display"),g.\u0275\u0275directiveInject(n.Context,2))}}static{this.\u0275dir=g.\u0275\u0275defineDirective({type:de,selectors:[["","wmFormField",""]],contentQueries:function(e,t,i){if(1&e&&(g.\u0275\u0275contentQuery(i,oe,7),g.\u0275\u0275contentQuery(i,re,5)),2&e){let e;g.\u0275\u0275queryRefresh(e=g.\u0275\u0275loadQuery())&&(t.formWidget=e.first),g.\u0275\u0275queryRefresh(e=g.\u0275\u0275loadQuery())&&(t.formWidgetMax=e.first)}},hostBindings:function(e,t){1&e&&g.\u0275\u0275listener("keydown",(function(e){return t.onKeydownHandler(e)}))("click",(function(e){return t.handleClick(e)}))},exportAs:["wmFormField"],features:[g.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(de),n.provideAs(de,r.NG_VALUE_ACCESSOR,!0),{provide:n.Context,useFactory:()=>({}),multi:!0}]),g.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(de,[{type:t.Directive,args:[{selector:"[wmFormField]",exportAs:"wmFormField",providers:[n.provideAsWidgetRef(de),n.provideAs(de,r.NG_VALUE_ACCESSOR,!0),{provide:n.Context,useFactory:()=>({}),multi:!0}]}]}],(function(){return[{type:g.Injector},{type:ie},{type:w.FormBuilder},{type:P.Viewport},{type:P.App},{type:A.ListComponent,decorators:[{type:t.Optional}]},{type:void 0,decorators:[{type:t.Attribute,args:["chipclass.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["dataset.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["displayexpression.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["displaylabel.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["widgettype"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["name"]}]},{type:String,decorators:[{type:t.Attribute,args:["displayimagesrc.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["key"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["is-range"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["pc-display"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["mobile-display"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["tablet-display"]}]},{type:Array,decorators:[{type:t.Self},{type:t.Inject,args:[n.Context]}]}]}),{formWidget:[{type:t.ContentChild,args:["formWidget",{static:!0}]}],formWidgetMax:[{type:t.ContentChild,args:["formWidgetMax"]}],onKeydownHandler:[{type:t.HostListener,args:["keydown",["$event"]]}],handleClick:[{type:t.HostListener,args:["click",["$event"]]}]});class pe{constructor(e,t,i){this.subscribedWidget=e,this.app=t,this.dialogService=i,e.addRow=this.addRow.bind(this),e.updateRow=this.updateRow.bind(this),e.deleteRow=this.deleteRow.bind(this),e.call=this.call.bind(this)}addRow(){this.app.notify("wm-event",{eventName:n.Live_Operations.INSERT,widgetName:this.subscribedWidget.name,row:this.subscribedWidget.selecteditem})}updateRow(){this.app.notify("wm-event",{eventName:n.Live_Operations.UPDATE,widgetName:this.subscribedWidget.name,row:this.subscribedWidget.selecteditem})}deleteRow(){this.app.notify("wm-event",{eventName:n.Live_Operations.DELETE,widgetName:this.subscribedWidget.name,row:this.subscribedWidget.selecteditem})}successHandler(e,t){l.triggerFn(e.success,t)}errorHandler(e,t){this.app.notifyApp(t,"error","ERROR"),l.triggerFn(e.error,t)}getRecords(e,t){let i,a;"None"!==this.subscribedWidget.navigation&&this.subscribedWidget.dataNavigator?(a=this.subscribedWidget.dataNavigator,t===n.Live_Operations.DELETE?(a.dataSize-=1,a.calculatePagingValues(),i=a.pageCount<a.dn.currentPage?"prev":void 0):(i=t===n.Live_Operations.INSERT?"last":"current","last"===i&&(a.dataSize+=1),a.calculatePagingValues()),a.navigatePage(i,null,!0,(t=>{this.successHandler(e,t)}))):this.subscribedWidget.datasource.execute(l.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0}).then((t=>{this.successHandler(e,t)}),(t=>{this.errorHandler(e,t)}))}performCUDOperation(e,t,i){n.performDataOperation(this.subscribedWidget.datasource,e,{operationType:t}).then((e=>{e.error?this.errorHandler(i,e.error):("wm.CrudVariable"===this.subscribedWidget.datasource.category&&"delete"===t?this.subscribedWidget.datasource.execute(l.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0}).then((e=>{this.successHandler(i,e)}),(e=>{this.errorHandler(i,e)})):this.getRecords(i,t),"delete"===t&&this.app.notifyApp(this.app.appLocale.MESSAGE_DELETE_RECORD_SUCCESS,"success"))}),(e=>{this.errorHandler(i,e)}))}insertRecord(e,t,i){this.performCUDOperation(e,t,i)}updateRecord(e,t,i){this.performCUDOperation(e,t,i)}deleteRecord(e,t,i){this.dialogService.showAppConfirmDialog({title:this.app.appLocale.MESSAGE_DELETE_RECORD||"Delete Record",iconclass:"wi wi-delete fa-lg",message:this.subscribedWidget.confirmdelete||"Are you sure you want to delete this?",oktext:this.subscribedWidget.deleteoktext||"Ok",canceltext:this.subscribedWidget.deletecanceltext||"Cancel",onOk:()=>{this.performCUDOperation(e,t,i),this.dialogService.closeAppConfirmDialog()},onCancel:()=>{l.triggerFn(i.cancelDeleteCallback),this.dialogService.closeAppConfirmDialog()}})}performOperation(e,t){const i={row:t.row,prevData:{},rowData:{},transform:!0,skipNotification:!0};switch(e===n.Live_Operations.UPDATE&&(i.rowData=t.rowData,i.prevData=t.prevData),e){case n.Live_Operations.INSERT:this.insertRecord(i,e,t);break;case n.Live_Operations.UPDATE:this.updateRecord(i,e,t);break;case n.Live_Operations.DELETE:this.deleteRecord(i,e,t);break;case n.Live_Operations.READ:this.getRecords(t,e)}}call(e,t,i,n){t.success=i,t.error=n,this.performOperation(e,t)}static{this.\u0275fac=function(e){return new(e||pe)(g.\u0275\u0275directiveInject(d.ListComponent,2),g.\u0275\u0275directiveInject(P.App),g.\u0275\u0275directiveInject(P.AbstractDialogService))}}static{this.\u0275dir=g.\u0275\u0275defineDirective({type:pe,selectors:[["","wmLiveActions",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(pe,[{type:t.Directive,args:[{selector:"[wmLiveActions]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[d.ListComponent]}]},{type:P.App},{type:P.AbstractDialogService}]}),null);class ue{constructor(e,t,i,n){this.dialogService=i,this.app=n,e&&(this.isLayoutDialog=!0,this.dialogId=e),this.dependson=t,this.eventSubscription=this.app.subscribe("wm-event",this.handleEvent.bind(this))}openFormDialog(){this.dialogService.open(this.dialogId)}onUpdate(e,t,i){this.editMode=i||this.editMode,this.form.operationType=n.Live_Operations.UPDATE,this.form.isSelected=!0;let a=this.currentFormData;e&&t&&(a=t.multiselect?e[0]:e[e.length-1]),this.form.setFormData(a),this.form.edit(),this.editMode||(this.form.isUpdateMode=!1)}onInsert(){this.form.operationType=n.Live_Operations.INSERT,this.form.isSelected=!0,this.form.setFormData({}),this.form.new()}handleEvent(e){if(this.dependson===e.widgetName)switch(this.currentOp=e.eventName,e.eventName){case n.Live_Operations.UPDATE:this.currentFormData=e.row,this.isLayoutDialog?this.openFormDialog():this.onUpdate(void 0,void 0,!0);break;case n.Live_Operations.INSERT:this.isLayoutDialog?this.openFormDialog():this.onInsert();break;case n.Live_Operations.DELETE:this.app.Widgets[this.dependson].call("delete",{row:e.row});break;case n.Live_Operations.READ:this.isLayoutDialog||(this.form.isUpdateMode=!1);break;case"rerender":e.dataSource&&e.dataSource.execute(l.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0,operation:"list"});break;case"selectedItemChange":e.table&&this.onUpdate(e.row,e.table);break;case"resetEditMode":this.editMode=!1}}onFormRender(){this.form&&this.isLayoutDialog&&(this.form.isLayoutDialog=!0,setTimeout((()=>{this.currentOp===n.Live_Operations.UPDATE?this.onUpdate(void 0,void 0,!0):this.currentOp===n.Live_Operations.INSERT&&this.onInsert()}),250))}ngAfterContentInit(){this.formChildren.first?this.form=this.formChildren.first:this.formSubscription=this.formChildren.changes.subscribe((e=>{this.form=e.first,this.onFormRender()})),this.app.notify("setup-cud-listener",this.dependson)}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe(),this.eventSubscription&&this.eventSubscription()}static{this.\u0275fac=function(e){return new(e||ue)(g.\u0275\u0275injectAttribute("dialogid"),g.\u0275\u0275injectAttribute("dependson"),g.\u0275\u0275directiveInject(P.AbstractDialogService),g.\u0275\u0275directiveInject(P.App))}}static{this.\u0275dir=g.\u0275\u0275defineDirective({type:ue,selectors:[["","dependson",""]],contentQueries:function(e,t,i){if(1&e&&g.\u0275\u0275contentQuery(i,ie,5),2&e){let e;g.\u0275\u0275queryRefresh(e=g.\u0275\u0275loadQuery())&&(t.formChildren=e)}}})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(ue,[{type:t.Directive,args:[{selector:"[dependson]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Attribute,args:["dialogid"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["dependson"]}]},{type:P.AbstractDialogService},{type:P.App}]}),{formChildren:[{type:t.ContentChildren,args:[ie,{descendants:!0}]}]});const he="EMPTY_NULL_FILTER";class me{static{this.initializeProps=(()=>{l.isMobileApp()&&E.set("captionwidth",{value:"xs-4 sm-4 md-4 lg-4",...n.PROP_STRING});const e=new Map(E);e.set("autoupdate",n.PROP_BOOLEAN),e.set("enableemptyfilter",{value:" ",...n.PROP_STRING}),e.set("pagesize",{value:20,...n.PROP_NUMBER}),e.set("iconclass",{value:"wi wi-filter-list",...n.PROP_STRING}),n.register("wm-livefilter",e)})()}constructor(e){this.form=e,this._filter=l.debounce((e=>{this.filter(e)}),250),e.clearFilter=this.clearFilter.bind(this),e.applyFilter=this.applyFilter.bind(this),e.filter=this.filter.bind(this),e.filterOnDefault=this.filterOnDefault.bind(this),e.execute=this.execute.bind(this),e.onFieldDefaultValueChange=this.onFieldDefaultValueChange.bind(this),e.onMaxDefaultValueChange=this.onMaxDefaultValueChange.bind(this),e.onDataSourceChange=this.onDataSourceChange.bind(this),e.onFieldValueChange=this.onFieldValueChange.bind(this),e.submitForm=this.submitForm.bind(this),e.registerFormWidget=this.registerFormWidget.bind(this)}execute(e,t){return e===l.DataSource.Operation.LIST_RECORDS||e===l.DataSource.Operation.DOWNLOAD?this.applyFilter(t):e===l.DataSource.Operation.GET_OPTIONS?this._options||{}:e===l.DataSource.Operation.GET_PAGING_OPTIONS?this.form.pagination:this.form.datasource?e===l.DataSource.Operation.FETCH_DISTINCT_VALUES?n.fetchDistinctValues(this.form.datasource,this.form.formFields,{widget:"widgettype",enableemptyfilter:this.form.enableemptyfilter,EMPTY_VALUE:this.form.appLocale.LABEL_NO_VALUE}):this.form.datasource.execute(e,t):{}}onFieldDefaultValueChange(e,t){e.minValue=t,e.value=t,this.filterOnDefault()}onFieldValueChange(e,t){n.applyFilterOnField(this.form.datasource,e.widget,this.form.formFields,t,{EMPTY_VALUE:this.form.appLocale.LABEL_NO_VALUE}),this.form.autoupdate&&l.isDefined(t)&&this._filter()}onMaxDefaultValueChange(){setTimeout((()=>{this.filterOnDefault()}))}onDataSourceChange(){const e=this.form.datasource;e&&(this.form.formFields.forEach((t=>{n.isDataSetWidget(t.widgettype)&&(n.getDistinctValuesForField(e,t.widget,{widget:"widgettype",enableemptyfilter:this.form.enableemptyfilter,EMPTY_VALUE:this.form.appLocale.LABEL_NO_VALUE}),n.applyFilterOnField(e,t.widget,this.form.formFields,t.value,{isFirst:!0,EMPTY_VALUE:this.form.appLocale.LABEL_NO_VALUE}))})),this._filter(this._options))}clearFilter(){this.form.resetFormState(),this.form.formFields.forEach((e=>{!e.readonly&&e.show&&(e.widgettype!==l.FormWidgetType.AUTOCOMPLETE&&e.widgettype!==l.FormWidgetType.TYPEAHEAD||this.form.$element.find("div[name="+e.name+"] input").val(""),e["is-range"]?(e.minValue="",e.maxValue=""):(e.value="",e.resetDisplayInput()))})),setTimeout((()=>{this._filter()}))}submitForm(){this.filter()}applyFilter(e){return(e=e?e.data||e:{}).page=e.page||1,e.orderBy=l.isDefined(e.orderBy)?e.orderBy:this.orderBy,this.filter(e)}filter(e){if(!this.form.datasource)return;const t={},i={};let a,s,o=1;o=(e=e||{}).page||o,a=l.isDefined(e.orderBy)?e.orderBy:this.orderBy||"",this.orderBy=a,this.form.formFields.forEach((e=>{const t="div[name="+e.name+"] input",n=this.form.$element;let a;if((e.widgettype===l.FormWidgetType.AUTOCOMPLETE||e.widgettype===l.FormWidgetType.TYPEAHEAD)&&n)return a=n.find(t),void(e["is-range"]?i[e.field]={minValue:l.isDefined(e.minValue)?e.minValue:a.first().val(),maxValue:l.isDefined(e.maxValue)?e.maxValue:a.last().val()}:i[e.field]={value:l.isDefined(e.value)?e.value:a.val()});e["is-range"]?i[e.field]={minValue:e.minValue,maxValue:e.maxValue}:i[e.field]={value:e.value}}));try{if(s=this.form.invokeEventCallback("beforeservicecall",{$data:i}),!1===s)return;if(s&&s.error)return void this.form.toggleMessage(!0,s.error,"error","ERROR");this.form.formFields.forEach((e=>{e["is-range"]?(e._minValue=i[e.field].minValue,e._maxValue=i[e.field].maxValue):e._value=i[e.field].value}))}catch(e){if("Abort"===e.message)return}return this.form.formFields.forEach((e=>{let i,a,s=e.field;const o=e._minValue,r=e._maxValue;if(e["is-related"]&&(s+="."+e["lookup-field"]),e["is-range"])i=n.getRangeFieldValue(o,r),a=n.getRangeMatchMode(o,r),l.isDefined(i)&&(t[s]={value:i,matchMode:a,logicalOp:"AND"});else{switch(e.widgettype){case l.FormWidgetType.SELECT:case l.FormWidgetType.RADIOSET:n.getEnableEmptyFilter(this.form.enableemptyfilter)&&e._value===he?(a=n.getEmptyMatchMode(this.form.enableemptyfilter),i=e._value):e.type===l.DataType.BOOLEAN?l.isDefined(e._value)&&""!==e._value&&(i=JSON.parse(e._value)):i=e._value;break;case l.FormWidgetType.CHECKBOXSET:case l.FormWidgetType.CHIPS:e._value&&e._value.length&&(i=e._value);break;case l.FormWidgetType.CHECKBOX:case l.FormWidgetType.TOGGLE:l.isDefined(e._value)&&""!==e._value&&(i=e.type===l.DataType.BOOLEAN?JSON.parse(e._value):e._value);break;default:i=e._value}l.isDefined(i)&&""!==i&&null!==i&&(t[s]={},a?(t[s].matchMode=a,i=void 0):(e.type===l.DataType.STRING||e.isRelated)&&(t[s].matchMode=a||e.matchmode||this.form.datasource.execute(l.DataSource.Operation.GET_MATCH_MODE)),t[s].value=i,t[s].logicalOp="AND",t[s].type=e.type)}})),e.exportType?this.form.datasource.execute(l.DataSource.Operation.DOWNLOAD,{data:{matchMode:"anywhereignorecase",filterFields:t,orderBy:a,exportType:e.exportType,logicalOp:"AND",exportSize:e.exportSize,fields:e.fields,fileName:e.fileName}}):this.form.datasource.execute(l.DataSource.Operation.LIST_RECORDS,{filterFields:t,orderBy:a,page:o,pagesize:this.form.pagesize||20,skipDataSetUpdate:!0,inFlightBehavior:"executeAll"}).then((e=>{const t=e.data;return this.form.pagination=e.pagination,t.error?(this.form.toggleMessage(!0,t.error,"error","ERROR"),this.form.onResultCb(t,!1)):(this._options={page:o,orderBy:a},this.form.result=l.getClonedObject(t),this.form.onResultCb(t,!0)),l.$appDigest(),this.form.result}),(e=>(this.form.toggleMessage(!0,e,"error","ERROR"),this.form.onResultCb(e,!1),e)))}filterOnDefault(){_.find(this.form.formFields,(e=>l.isDefined(e.value)||l.isDefined(e.minValue)||l.isDefined(e.maxValue)))&&this._filter(this._options)}registerFormWidget(e){const t=e.key||e.name;this.form.filterWidgets[t]=e}static{this.\u0275fac=function(e){return new(e||me)(g.\u0275\u0275directiveInject(ie,2))}}static{this.\u0275dir=g.\u0275\u0275defineDirective({type:me,selectors:[["","wmLiveFilter",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(me,[{type:t.Directive,args:[{selector:"[wmLiveFilter]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[ie]}]}]}),null);class ge{static{this.initializeProps=(()=>{l.isMobileApp()&&E.set("captionwidth",{value:"xs-4 sm-4 md-4 lg-4",...n.PROP_STRING});const e=new Map(E);e.set("defaultmode",{value:"View",...n.PROP_STRING}),e.set("formlayout",{value:"inline",...n.PROP_STRING}),e.set("insertmessage",{value:"Record added successfully",...n.PROP_STRING}),e.set("updatemessage",{value:"Record updated successfully",...n.PROP_STRING}),e.set("deletemessage",{value:"Record deleted successfully",...n.PROP_STRING}),e.set("errormessage",{value:"An error occured. Please try again!",...n.PROP_STRING}),e.set("messagelayout",{value:"Toaster",...n.PROP_STRING}),e.set("formdata",n.PROP_STRING),e.set("novalidate",n.PROP_BOOLEAN),e.set("validationtype",{value:"default",...n.PROP_STRING}),e.set("iconclass",n.PROP_STRING),n.register("wm-liveform",e)})()}onKeydownHandler(e){this._triggeredByUser=!0}constructor(e,t,i,n,a){this.form=e,this.datePipe=i,this.dialogService=n,this._debouncedSavePrevDataValues=l.debounce((()=>{this.savePrevDataValues()}),250),t&&!this.form.parentForm?(this.form._liveTableParent=t,this.form.isLayoutDialog=t.isLayoutDialog,t.onFormReady(this.form)):this.form.isLayoutDialog="dialog"===a,e.cancel=this.cancel.bind(this),e.reset=this.reset.bind(this),e.delete=this.delete.bind(this),e.save=this.save.bind(this),e.saveAndNew=this.saveAndNew.bind(this),e.saveAndView=this.saveAndView.bind(this),e.setPrimaryKey=this.setPrimaryKey.bind(this),e.constructDataObject=this.constructDataObject.bind(this),e.changeDataObject=this.setFormData.bind(this),e.setFormData=this.setFormData.bind(this),e.findOperationType=this.findOperationType.bind(this),e.clearData=this.clearData.bind(this),e.onFieldDefaultValueChange=this.onFieldDefaultValueChange.bind(this),e.onDataSourceChange=this.onDataSourceChange.bind(this),e.onFieldValueChange=this.onFieldValueChange.bind(this),e.submitForm=this.submitForm.bind(this),e.form_registerFormFields=e.registerFormFields,e.registerFormFields=this.registerFormFields.bind(this)}registerFormFields(e){const t=this.form.getFormFields();this.form.form_registerFormFields(e),this.form.isDataSourceUpdated&&this._updateFieldOnDataSourceChange(e,t)}_updateFieldOnDataSourceChange(e,t){!e.isDataSetBound&&n.isDataSetWidget(e.widgettype)&&(e["is-related"]?(e.isDataSetBound=!0,n.fetchRelatedFieldData(this.form.datasource,e.widget,{relatedField:e.key,datafield:n.ALLFIELDS,widget:"widgettype"})):(n.getDistinctValuesForField(this.form.datasource,e.widget,{widget:"widgettype",enableemptyfilter:this.form.enableemptyfilter}),n.applyFilterOnField(this.form.datasource,e.widget,t,e.value,{isFirst:!0})))}onDataSourceChange(){_.get(this.form.formFields,"length")&&(this.form.isDataSourceUpdated=!0);const e=this.form.getFormFields();e.forEach((t=>{this._updateFieldOnDataSourceChange(t,e)}))}onFieldDefaultValueChange(e,t){"update"!==this.form.operationType&&(l.isDefined(t)&&null!==t&&""!==t&&"null"!==t?e.value=n.parseValueByType(t,e.type,e.widgettype,e.trailingzero):e.value=void 0,this.form.dirty&&!this._triggeredByUser&&this.form.markAsPristine(),this._debouncedSavePrevDataValues())}onFieldValueChange(e,t){n.applyFilterOnField(this.form.datasource,e.widget,this.form.formFields,t)}getBlobURL(e,t,i){let n,a,s="";return null!=i&&this.form.datasource?(n=this.form.datasource.execute(l.DataSource.Operation.GET_PRIMARY_KEY)||[],a=e[n[0]],s+=this.form.datasource.execute(l.DataSource.Operation.GET_BLOB_URL,{primaryValue:a,columnName:t}),s+="?"+Math.random(),s):s}setFormData(e,t){e&&((t=t||this.form.formFields).forEach((t=>{const i=_.get(e,t.key||t.name);(e=>e.widgettype===l.DataType.TIME||e.type===l.DataType.TIME&&!e.widgettype)(t)?t.value=(e=>{if(e){const t=(new Date).toDateString();return new Date(`${t} ${e}`).getTime()}})(i):t.type===l.DataType.BLOB?(this.form.resetFileUploadWidget(t,!0),t.href=this.getBlobURL(e,t.key,i),t.value=_.isString(i)?"":i):this.form.setFieldValue(t,e)})),this.savePrevDataValues(),this.form.constructDataObject())}onDataSourceUpdate(e,t,i){t?this.form.new():(this.form.setFormData(e),this.closeDialog()),this.form.isUpdateMode=!l.isDefined(i)||i}savePrevformFields(){this.form.prevformFields=l.getClonedObject(this.form.formFields.map((e=>({key:e.key,type:e.type,widgettype:e.widgettype,outputformat:e.outputformat,value:e.value}))))}getPrevformFields(){this.form.formFields.map((e=>{const t=this.form.prevformFields.find((t=>t.key===e.key));e.value=t.value}))}getDataObject(){return this.form.operationType===n.Live_Operations.INSERT?{}:l.isDefined(this.form.prevDataObject)&&!l.isEmptyObject(this.form.prevDataObject)?l.getClonedObject(this.form.prevDataObject):l.getClonedObject(this.form.formdata||{})}constructDataObject(e){const t=this.getDataObject(),i=this.form.name;let n;return n=e?this.form.prevformFields:this.form.getFormFields(),n.forEach((e=>{let n,a;const s=_.split(e.key,"."),o=s[0]||e.key;e.widgettype&&l.isDateTimeType(e.widgettype)||l.isDateTimeType(e.type)?e.value?(n=l.getValidDateObject(e.value),a=e.outputformat===l.DataType.TIMESTAMP||e.type===l.DataType.TIMESTAMP?e.value?n:null:e.outputformat?this.datePipe.transform(n,e.outputformat):e.value):a=void 0:a=e.type===l.DataType.BLOB?l.getFiles(i,o+"_formWidget",e.multiple):e.type===l.DataType.LIST?e.value||void 0:null===e.value||""===e.value?void 0:e.value,1===s.length?t[o]=a:(t[o]=t[o]||{},t[o][s[1]]=a)})),e?t:(this.form.updateFormDataOutput(t),this.form.dataoutput)}setPrimaryKey(e){this.form.primaryKey=this.form.primaryKey||[],-1===this.form.primaryKey.indexOf(e)&&this.form.primaryKey.push(e)}findOperationType(){let e,t=!1;const i=this.form.datasource&&this.form.datasource.execute(l.DataSource.Operation.GET_OPERATION_TYPE);return i&&"read"!==i?i:(this.form.primaryKey&&!_.isEmpty(this.form.formdata)&&(1===this.form.primaryKey.length?this.form.formdata[this.form.primaryKey[0]]&&(e=n.Live_Operations.UPDATE):0===this.form.primaryKey.length?(_.forEach(this.form.formdata,(e=>{e&&(t=!0)})),t&&(e=n.Live_Operations.UPDATE)):(t=_.some(this.form.primaryKey,(e=>{if(this.form.formdata[e])return!0})),t&&(e=n.Live_Operations.UPDATE))),e||n.Live_Operations.INSERT)}getPrevDataValues(){const e=_.fromPairs(_.map(this.form.prevDataValues,(e=>[e.key,e.value])));return this.form.formFields.forEach((t=>{t.value=e[t.key]||"",t.resetDisplayInput()})),e}savePrevDataValues(){this.form.prevDataValues=this.form.formFields.map((e=>({key:e.key,value:e.value})))}clearData(){this.form.toggleMessage(!1),this.form.emptyDataModel()}setReadonlyFields(){this.form.formFields.forEach((e=>{e.setReadOnlyState()}))}reset(){let e;this.form.resetFormState(),e=this.getPrevDataValues(),this.form.formFields.forEach((t=>{t.type!==l.DataType.BLOB&&"upload"!==t.widgettype||(this.form.resetFileUploadWidget(t,!0),t.href=this.getBlobURL(e,t.key,t.value)),t.nativeElement.querySelector("input")?.removeAttribute("aria-invalid")})),this.form.constructDataObject()}closeDialog(){this.form.isLayoutDialog&&this.dialogService.close(this.form.dialogId)}cancel(){this.form.clearMessage(),this.form.isUpdateMode=!1,this.form.reset(),this.form.isSelected&&this.getPrevformFields(),this.form.isUpdateMode=!1,this.form._liveTableParent?this.form._liveTableParent.onCancel():this.closeDialog(),l.$appDigest()}delete(e){this.form.resetFormState(),this.form.operationType=n.Live_Operations.DELETE,this.form.prevDataObject=l.getClonedObject(this.form.formdata||{}),this.form.save(void 0,void 0,void 0,e)}saveAndNew(){this.save(void 0,!0,!0)}saveAndView(){this.save(void 0,!1)}submitForm(e){this.save(e)}save(e,t,i){if(!this.form.datasource)return;let a,s,o,r;const c={};if(o=this.form.operationType=this.form.operationType||this.findOperationType(),!this.form.validateFieldsOnSubmit()){a=l.getClonedObject(this.form.constructDataObject()),s=this.form.prevformFields?this.form.constructDataObject(!0):a;try{if(r=this.form.invokeEventCallback("beforeservicecall",{$event:e,$operation:this.form.operationType,$data:a,options:c}),!1===r)return;if(r&&r.error)return void this.form.toggleMessage(!0,r.error,"error")}catch(e){if("Abort"===e.message)return}if(this.form.operationType===n.Live_Operations.UPDATE&&this.form.ngform&&this.form.ngform.pristine&&this.form.isSelected&&_.isEqual(a,s))return this.form.toggleMessage(!0,this.form.appLocale.MESSAGE_NO_CHANGES,"info",""),void l.$appDigest();c.row=a,c.transform=!0,c.skipNotification=!0,o===n.Live_Operations.UPDATE&&(c.rowData=this.form.formdata,c.prevData=s),n.performDataOperation(this.form.datasource,c,{operationType:o}).then((e=>{const a=o===n.Live_Operations.INSERT?this.form.insertmessage:o===n.Live_Operations.UPDATE?this.form.updatemessage:this.form.deletemessage;let s;return o===n.Live_Operations.DELETE?(s=c.row,this.form.emptyDataModel(),this.form.prevDataValues=[],this.form.isSelected=!1):s=e,this.form.onSuccess||this.form.toggleMessage(!0,a,"success"),this.form._liveTableParent?this.form._liveTableParent.onResult(o,e,i,t):(this.form.datasource.execute(l.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0}),this.onDataSourceUpdate(e,i,t)),{result:s,status:!0}}),(e=>(this.form.onError||this.form.toggleMessage(!0,e,"error"),l.$appDigest(),{result:e,status:!1}))).then((t=>{this.form.resetFormState(),this.form.onResultCb(t.result,t.status,e)}))}}static{this.\u0275fac=function(e){return new(e||ge)(g.\u0275\u0275directiveInject(ie,2),g.\u0275\u0275directiveInject(I.LiveTableComponent,8),g.\u0275\u0275directiveInject(v.ToDatePipe),g.\u0275\u0275directiveInject(P.AbstractDialogService),g.\u0275\u0275injectAttribute("formlayout"))}}static{this.\u0275dir=g.\u0275\u0275defineDirective({type:ge,selectors:[["","wmLiveForm",""]],hostBindings:function(e,t){1&e&&g.\u0275\u0275listener("keydown",(function(e){return t.onKeydownHandler(e)}))}})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(ge,[{type:t.Directive,args:[{selector:"[wmLiveForm]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[ie]}]},{type:I.LiveTableComponent,decorators:[{type:t.Optional}]},{type:v.ToDatePipe},{type:P.AbstractDialogService},{type:void 0,decorators:[{type:t.Attribute,args:["formlayout"]}]}]}),{onKeydownHandler:[{type:t.HostListener,args:["keydown",["$event"]]}]});const fe=[ie,ne,se,de,pe,ue,me,ge];class ve{static{this.\u0275fac=function(e){return new(e||ve)}}static{this.\u0275mod=g.\u0275\u0275defineNgModule({type:ve})}static{this.\u0275inj=g.\u0275\u0275defineInjector({imports:[a.BasicModule,i.CommonModule,o.DesignDialogModule,s.InputModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(ve,[{type:t.NgModule,args:[{imports:[a.BasicModule,i.CommonModule,o.DesignDialogModule,s.InputModule,n.WmComponentsModule],declarations:[...fe],exports:[...fe]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&g.\u0275\u0275setNgModuleScope(ve,{declarations:[ie,ne,se,de,pe,ue,me,ge],imports:[a.BasicModule,i.CommonModule,o.DesignDialogModule,s.InputModule,n.WmComponentsModule],exports:[ie,ne,se,de,pe,ue,me,ge]}),e.DependsonDirective=ue,e.FormActionDirective=se,e.FormComponent=ie,e.FormFieldDirective=de,e.FormModule=ve,e.FormWidgetDirective=ne,e.LiveActionsDirective=pe,e.LiveFilterDirective=me,e.LiveFormDirective=ge})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/basic"),require("@wm/components/dialogs"),require("@wm/components/input"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/basic","@wm/components/dialogs","@wm/components/input","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.iframedialog={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.basic,e.wm.components.dialogs,e.wm.components.input,e.wm.core)}(this,(function(e,t,i,n,a,s,o,r){"use strict";function l(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var c=l(t),d=l(i),p=l(a),u=l(s),h=l(o);const m=["dialogTemplate"],g=["wmIframeDialog",""];function f(e,t){if(1&e&&c.\u0275\u0275element(0,"div",5),2&e){const e=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("closable",e.closable)("iconclass",e.iconclass)("iconurl",e.iconurl)("iconwidth",e.iconwidth)("iconheight",e.iconheight)("iconmargin",e.iconmargin)("heading",e.title)("headinglevel",e.headinglevel)("titleid",e.titleId)}}function v(e,t){if(1&e){const e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",6)(1,"button",7),c.\u0275\u0275listener("click",(function(t){c.\u0275\u0275restoreView(e);const i=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(i.onOk(t))})),c.\u0275\u0275elementEnd()()}}function b(e,t){if(1&e&&(c.\u0275\u0275template(0,f,1,9,"div",1),c.\u0275\u0275elementStart(1,"div",2),c.\u0275\u0275element(2,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(3,v,2,0,"div",4)),2&e){const e=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",e.showheader),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",e.showactions)}}const y={widgetType:"wm-iframedialog"};class w extends s.BaseDialog{static{this.initializeProps=void n.register("wm-iframedialog",new Map([["animation",n.PROP_STRING],["class",n.PROP_STRING],["closable",{value:!0,PROP_BOOLEAN:n.PROP_BOOLEAN}],["encodeurl",{value:!1,...n.PROP_BOOLEAN}],["height",{value:"400px",...n.PROP_STRING}],["iconclass",{value:"wi wi-globe",PROP_STRING:n.PROP_STRING}],["iconheight",n.PROP_STRING],["iconmargin",n.PROP_STRING],["iconurl",n.PROP_STRING],["iconwidth",n.PROP_STRING],["modal",{value:!1,...n.PROP_BOOLEAN}],["name",n.PROP_STRING],["oktext",{value:"OK",...n.PROP_STRING}],["showactions",{value:!0,...n.PROP_BOOLEAN}],["showheader",{value:!0,...n.PROP_BOOLEAN}],["tabindex",{value:0,...n.PROP_NUMBER}],["headinglevel",{value:"h4",...n.PROP_STRING}],["title",{value:"External Content",...n.PROP_STRING}],["url",{value:"//www.wavemaker.com",...n.PROP_STRING}]]))}constructor(e,t,i,n){null==i&&(i=!1);const a=!r.toBoolean(i)||"static";super(e,y,{class:`app-dialog modal-dialog app-iframe-dialog ${t||""}`,backdrop:a,keyboard:!r.toBoolean(i)})}getTemplateRef(){return this.dialogTemplate}onOk(e){this.invokeEventCallback("ok",{$event:e})}ngOnInit(){super.ngOnInit(),this.register(this.viewParent)}static{this.\u0275fac=function(e){return new(e||w)(c.\u0275\u0275directiveInject(c.Injector),c.\u0275\u0275injectAttribute("class"),c.\u0275\u0275injectAttribute("modal"),c.\u0275\u0275injectAttribute("closable"))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:w,selectors:[["div","wmIframeDialog",""]],viewQuery:function(e,t){if(1&e&&c.\u0275\u0275viewQuery(m,7),2&e){let e;c.\u0275\u0275queryRefresh(e=c.\u0275\u0275loadQuery())&&(t.dialogTemplate=e.first)}},features:[c.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(w),n.provideAsDialogRef(w)]),c.\u0275\u0275InheritDefinitionFeature],attrs:g,decls:2,vars:0,consts:[["dialogTemplate",""],["wmDialogHeader","",3,"closable","iconclass","iconurl","iconwidth","iconheight","iconmargin","heading","headinglevel","titleid",4,"ngIf"],["wmDialogBody",""],["wmIframe","","encodeurl.bind","encodeurl","iframesrc.bind","url","height.bind","height","width.bind","width","hint.bind","hint"],["wmDialogFooter","",4,"ngIf"],["wmDialogHeader","",3,"closable","iconclass","iconurl","iconwidth","iconheight","iconmargin","heading","headinglevel","titleid"],["wmDialogFooter",""],["wmButton","","caption.bind","oktext","aria-label","Submit button",1,"btn-primary","ok-action",3,"click"]],template:function(e,t){1&e&&c.\u0275\u0275template(0,b,4,2,"ng-template",null,0,c.\u0275\u0275templateRefExtractor)},dependencies:[p.IframeComponent,d.NgIf,u.DialogBodyDirective,u.DialogFooterDirective,u.DialogHeaderComponent,h.ButtonComponent],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(w,[{type:t.Component,args:[{selector:"div[wmIframeDialog]",providers:[n.provideAsWidgetRef(w),n.provideAsDialogRef(w)],template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"\n         [headinglevel]="headinglevel"\n         *ngIf="showheader"\n         [titleid]="titleId"\n    ></div>\n    <div wmDialogBody>\n        <div wmIframe encodeurl.bind="encodeurl" iframesrc.bind="url" height.bind="height" width.bind="width" hint.bind="hint"></div>\n    </div>\n    <div wmDialogFooter *ngIf="showactions">\n        <button wmButton class="btn-primary ok-action" caption.bind="oktext" aria-label="Submit button" (click)="onOk($event)"></button>\n    </div>\n</ng-template>\n'}]}],(function(){return[{type:c.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["closable"]}]}]}),{dialogTemplate:[{type:t.ViewChild,args:["dialogTemplate",{static:!0}]}]});const P=[w];class C{static{this.\u0275fac=function(e){return new(e||C)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:C})}static{this.\u0275inj=c.\u0275\u0275defineInjector({imports:[a.BasicModule,i.CommonModule,s.DialogModule,o.InputModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&c.\u0275setClassMetadata(C,[{type:t.NgModule,args:[{imports:[a.BasicModule,i.CommonModule,s.DialogModule,o.InputModule,n.WmComponentsModule],declarations:[...P],exports:[...P]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&c.\u0275\u0275setNgModuleScope(C,{declarations:[w],imports:[a.BasicModule,i.CommonModule,s.DialogModule,o.InputModule,n.WmComponentsModule],exports:[w]}),e.IframeDialogComponent=w,e.IframeDialogModule=C})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/dialogs"),require("@wm/components/dialogs/design-dialog"),require("@wm/components/input"),require("@wm/core"),require("@wm/components/data/form")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/dialogs","@wm/components/dialogs/design-dialog","@wm/components/input","@wm/core","@wm/components/data/form"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.logindialog={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.dialogs,e.wm.components.dialogs.designdialog,e.wm.components.input,e.wm.core,e.wm.components.data.form)}(this,(function(e,t,i,n,a,s,o,r,l){"use strict";function c(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var d=c(t),p=c(n);class u{constructor(e,t){this.contexts=e,this.dialogRef=t,this.contexts[0].doLogin=()=>this.doLogin()}hideMsg(){this.msgCmp&&this.msgCmp.hideMessage()}showError(e){this.msgCmp&&this.msgCmp.showMessage(e,"error")}showLoading(){this.msgCmp&&this.msgCmp.showMessage("Loading...","loading")}onSuccess(){this.hideMsg()}onError(e){this.showError(e)}getLoginDetails(){return this.formCmp.first.dataoutput}doLogin(){const e=this.getLoginDetails(),t=this.dialogRef.eventsource;t&&e.j_username&&e.j_password&&(this.showLoading(),t.invoke({loginInfo:e},this.onSuccess.bind(this),this.onError.bind(this)))}ngAfterViewInit(){this.dialogOpenSubscription=this.dialogRef.bsModal.onShown.subscribe((()=>{setTimeout((()=>{this.dialogRef.$element.find(".app-textbox").keypress((e=>{13===e.which&&(e.stopPropagation(),r.$appDigest(),this.doLogin())}))}))}))}ngOnDestroy(){this.dialogOpenSubscription.unsubscribe()}static{this.\u0275fac=function(e){return new(e||u)(d.\u0275\u0275directiveInject(n.Context,2),d.\u0275\u0275directiveInject(p.DialogRef,2))}}static{this.\u0275dir=d.\u0275\u0275defineDirective({type:u,selectors:[["","wmDialog","","wmLoginDialog",""]],contentQueries:function(e,t,i){if(1&e&&(d.\u0275\u0275contentQuery(i,n.MessageComponent,5),d.\u0275\u0275contentQuery(i,l.FormComponent,4)),2&e){let e;d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.msgCmp=e.first),d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.formCmp=e)}}})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(u,[{type:t.Directive,args:[{selector:"[wmDialog][wmLoginDialog]"}]}],(function(){return[{type:Array,decorators:[{type:t.Self},{type:t.Inject,args:[n.Context]}]},{type:p.DialogRef,decorators:[{type:t.Self}]}]}),{formCmp:[{type:t.ContentChildren,args:[l.FormComponent]}],msgCmp:[{type:t.ContentChild,args:[n.MessageComponent]}]});const h=[u];class m{static{this.\u0275fac=function(e){return new(e||m)}}static{this.\u0275mod=d.\u0275\u0275defineNgModule({type:m})}static{this.\u0275inj=d.\u0275\u0275defineInjector({imports:[i.CommonModule,s.DesignDialogModule,a.DialogModule,o.InputModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&d.\u0275setClassMetadata(m,[{type:t.NgModule,args:[{imports:[i.CommonModule,s.DesignDialogModule,a.DialogModule,o.InputModule,n.WmComponentsModule],declarations:[...h],exports:[...h]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&d.\u0275\u0275setNgModuleScope(m,{declarations:[u],imports:[i.CommonModule,s.DesignDialogModule,a.DialogModule,o.InputModule,n.WmComponentsModule],exports:[u]}),e.LoginDialogDirective=u,e.LoginDialogModule=m})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/dialogs"),require("@wm/components/input"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/dialogs","@wm/components/input","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.partialdialog={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.dialogs,e.wm.components.input,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(i),d=r(a),p=r(s),u=r(o);const h=["partial"],m=["dialogTemplate"],g=["wmPartialDialog",""];function f(e,t){1&e&&l.\u0275\u0275elementContainer(0)}function v(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",5)(1,"button",6),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(i.onOk(t))})),l.\u0275\u0275elementEnd()()}}function b(e,t){if(1&e&&(l.\u0275\u0275element(0,"div",1),l.\u0275\u0275elementStart(1,"div",2),l.\u0275\u0275template(2,f,1,0,"ng-container",3),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(3,v,2,0,"div",4)),2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275property("closable",e.closable)("iconclass",e.iconclass)("iconurl",e.iconurl)("iconwidth",e.iconwidth)("iconheight",e.iconheight)("iconmargin",e.iconmargin)("heading",e.title)("headinglevel",e.headinglevel)("titleid",e.titleId),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngTemplateOutlet",e.dialogContent),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.showactions)}}const y={widgetType:"wm-partialdialog"};class w extends a.BaseDialog{static{this.initializeProps=void n.register("wm-partialdialog",new Map([["animation",n.PROP_STRING],["class",n.PROP_STRING],["closable",{value:!0,PROP_BOOLEAN:n.PROP_BOOLEAN}],["content",n.PROP_STRING],["iconclass",{value:"wi wi-file",PROP_STRING:n.PROP_STRING}],["iconheight",n.PROP_STRING],["iconmargin",n.PROP_STRING],["iconurl",n.PROP_STRING],["iconwidth",n.PROP_STRING],["modal",{value:!1,...n.PROP_BOOLEAN}],["name",n.PROP_STRING],["oktext",{value:"OK",...n.PROP_STRING}],["showactions",{value:!0,...n.PROP_BOOLEAN}],["tabindex",{value:0,...n.PROP_NUMBER}],["headinglevel",{value:"h4",...n.PROP_STRING}],["title",{value:"Page Content",...n.PROP_STRING}]]))}constructor(e,t,i,n,a){null==n&&(n=!1);const s=!o.toBoolean(n)||"static";super(e,y,{class:`app-dialog modal-dialog app-page-dialog ${i||""}`,backdrop:s,keyboard:!o.toBoolean(n)}),this.app=t}getTemplateRef(){return this.dialogTemplate}onOk(e){this.invokeEventCallback("ok",{$event:e})}ngOnInit(){super.ngOnInit(),this.register(this.viewParent)}setPartialLoadListener(){const e=this.app.subscribe("partialLoaded",(()=>{const t=this.partialRef.nativeElement;let i;t&&(i=t.widget,this.Widgets=i.Widgets,this.Variables=i.Variables,this.Actions=i.Actions),e()}))}open(e){super.open(e),this.setPartialLoadListener()}static{this.\u0275fac=function(e){return new(e||w)(l.\u0275\u0275directiveInject(l.Injector),l.\u0275\u0275directiveInject(u.App),l.\u0275\u0275injectAttribute("class"),l.\u0275\u0275injectAttribute("modal"),l.\u0275\u0275injectAttribute("closable"))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:w,selectors:[["div","wmPartialDialog",""]],contentQueries:function(e,i,n){if(1&e&&(l.\u0275\u0275contentQuery(n,t.TemplateRef,5),l.\u0275\u0275contentQuery(n,h,5)),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.dialogContent=e.first),l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(i.partialRef=e.first)}},viewQuery:function(e,t){if(1&e&&l.\u0275\u0275viewQuery(m,7),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.dialogTemplate=e.first)}},features:[l.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(w),n.provideAsDialogRef(w)]),l.\u0275\u0275InheritDefinitionFeature],attrs:g,decls:2,vars:0,consts:[["dialogTemplate",""],["wmDialogHeader","",3,"closable","iconclass","iconurl","iconwidth","iconheight","iconmargin","heading","headinglevel","titleid"],["wmDialogBody",""],[4,"ngTemplateOutlet"],["wmDialogFooter","",4,"ngIf"],["wmDialogFooter",""],["wmButton","","caption.bind","oktext","aria-label","Submit button",1,"btn-primary","ok-action",3,"click"]],template:function(e,t){1&e&&l.\u0275\u0275template(0,b,4,11,"ng-template",null,0,l.\u0275\u0275templateRefExtractor)},dependencies:[c.NgIf,c.NgTemplateOutlet,d.DialogBodyDirective,d.DialogFooterDirective,d.DialogHeaderComponent,p.ButtonComponent],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(w,[{type:t.Component,args:[{selector:"div[wmPartialDialog]",providers:[n.provideAsWidgetRef(w),n.provideAsDialogRef(w)],template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"\n         [headinglevel]="headinglevel"\n         [titleid]="titleId"\n    ></div>\n    <div wmDialogBody>\n        <ng-container *ngTemplateOutlet="dialogContent"></ng-container>\n    </div>\n    <div wmDialogFooter *ngIf="showactions">\n        <button wmButton class="btn-primary ok-action" caption.bind="oktext" aria-label="Submit button" (click)="onOk($event)"></button>\n    </div>\n</ng-template>\n'}]}],(function(){return[{type:l.Injector},{type:u.App},{type:void 0,decorators:[{type:t.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["closable"]}]}]}),{dialogTemplate:[{type:t.ViewChild,args:["dialogTemplate",{static:!0}]}],dialogContent:[{type:t.ContentChild,args:[t.TemplateRef]}],partialRef:[{type:t.ContentChild,args:["partial"]}]});const P=[w];class C{static{this.\u0275fac=function(e){return new(e||C)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:C})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(C,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule],declarations:[...P],exports:[...P]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(C,{declarations:[w],imports:[i.CommonModule,a.DialogModule,s.InputModule,n.WmComponentsModule],exports:[w]}),e.PartialDialogComponent=w,e.PartialDialogModule=C})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.accordion={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.core)}(this,(function(e,t,i,n,a){"use strict";function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var o=s(t),r=s(i),l=s(n),c=s(a);const d=["wmAccordionPane",""],p=function(e){return{active:e}},u=["*"],h={widgetType:"wm-accordionpane",hostClass:"app-accordion-panel panel"};class m extends n.StylableComponent{static{this.initializeProps=void n.register("wm-accordionpane",new Map([["active",n.PROP_BOOLEAN],["badgetype",{value:"default",...n.PROP_STRING}],["badgevalue",n.PROP_STRING],["class",n.PROP_STRING],["content",n.PROP_STRING],["dynamicPaneIndex",n.PROP_NUMBER],["iconclass",n.PROP_STRING],["isdefaultpane",n.PROP_BOOLEAN],["isdynamic",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["smoothscroll",{value:!1,...n.PROP_BOOLEAN}],["subheading",n.PROP_STRING],["tabindex",{value:0,...n.PROP_NUMBER}],["title",{value:"Title",...n.PROP_STRING}]]))}constructor(e,t){super(e,h),this.accordionRef=t,this.isActive=!1,this.$lazyLoad=a.noop,n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.SHELL),a.removeAttr(this.nativeElement,"title")}expand(e){this.isActive||(this.isActive=!0,this.$lazyLoad(),this.redrawChildren(),this.invokeEventCallback("expand",{$event:e}),this.notifyParent(!0,e))}collapse(e){this.isActive&&(this.isActive=!1,this.invokeEventCallback("collapse",{$event:e}),this.notifyParent(!1,e))}remove(){const e=this.accordionRef.getPaneIndexByRef(this);this.isActive&&this.accordionRef.panes.length>1&&(this===this.accordionRef.panes.last?this.accordionRef.panes.toArray()[e-1].expand():this.accordionRef.panes.toArray()[e+1].expand());const t=this.accordionRef.panes.toArray();t.splice(this.accordionRef.getPaneIndexByRef(this),1),this.accordionRef.panes.reset([...t]),this.nativeElement.remove()}toggle(e){this.isActive?this.collapse(e):this.expand(e)}redrawChildren(){setTimeout((()=>{this.reDrawableComponents&&this.reDrawableComponents.forEach((e=>e.redraw()))}),100)}notifyParent(e,t){this.accordionRef.notifyChange(this,e,t)}onPropertyChange(e,t,i){"content"===e?this.isActive&&setTimeout((()=>this.$lazyLoad()),100):super.onPropertyChange(e,t,i)}ngAfterViewInit(){super.ngAfterViewInit(),n.styler(this.nativeElement.querySelector(".panel-body"),this,n.APPLY_STYLES_TYPE.INNER_SHELL),this.isdynamic&&this.accordionRef.registerDynamicPane(this)}static{this.\u0275fac=function(e){return new(e||m)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(f))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:m,selectors:[["div","wmAccordionPane",""]],contentQueries:function(e,t,i){if(1&e&&o.\u0275\u0275contentQuery(i,n.RedrawableDirective,5),2&e){let e;o.\u0275\u0275queryRefresh(e=o.\u0275\u0275loadQuery())&&(t.reDrawableComponents=e)}},exportAs:["wmAccordionPane"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(m)]),o.\u0275\u0275InheritDefinitionFeature],attrs:d,ngContentSelectors:u,decls:16,vars:21,consts:[[1,"panel-heading","clearfix",3,"ngClass","click"],[1,"panel-title"],["href","javascript:void(0);","role","button",1,"accordion-toggle"],[1,"pull-left"],[3,"hidden"],[1,"heading",3,"innerHTML"],[1,"description",3,"innerHTML"],[1,"panel-actions"],["type","button","aria-label","Collapse/Expand",1,"app-icon","panel-action","wi",3,"title"],[3,"ngClass"],["role","tabpanel","aria-labelledby","panel description",1,"panel-collapse","collapse",3,"ngClass"],["partial-container-target","",1,"panel-body",3,"wmSmoothscroll"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275listener("click",(function(e){return t.toggle(e)})),o.\u0275\u0275elementStart(1,"h3",1)(2,"a",2)(3,"div",3),o.\u0275\u0275element(4,"i",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",3),o.\u0275\u0275element(6,"div",5)(7,"div",6),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(8,"div",7)(9,"span"),o.\u0275\u0275text(10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"button",8),o.\u0275\u0275element(12,"i",9),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(13,"div",10)(14,"div",11),o.\u0275\u0275projection(15),o.\u0275\u0275elementEnd()()),2&e&&(o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(19,p,t.isActive)),o.\u0275\u0275advance(2),o.\u0275\u0275attribute("aria-label",t.title)("aria-expanded",t.isActive),o.\u0275\u0275advance(2),o.\u0275\u0275classMapInterpolate1("app-icon panel-icon ",t.iconclass,""),o.\u0275\u0275property("hidden",!t.iconclass),o.\u0275\u0275advance(2),o.\u0275\u0275property("innerHTML",t.title,o.\u0275\u0275sanitizeHtml),o.\u0275\u0275advance(1),o.\u0275\u0275property("innerHTML",t.subheading,o.\u0275\u0275sanitizeHtml),o.\u0275\u0275advance(2),o.\u0275\u0275classMapInterpolate1("label label-",t.badgetype,""),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.badgevalue),o.\u0275\u0275advance(1),o.\u0275\u0275propertyInterpolate2("title","",t.appLocale.LABEL_COLLAPSE,"/",t.appLocale.LABEL_EXPAND,""),o.\u0275\u0275attribute("aria-expanded",t.isActive),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",t.isActive?"wi-minus":"wi-plus"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",t.isActive?"collapse in":"collapse"),o.\u0275\u0275advance(1),o.\u0275\u0275property("wmSmoothscroll",t.smoothscroll))},dependencies:[r.NgClass,l.SmoothScrollDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(m,[{type:t.Component,args:[{selector:"div[wmAccordionPane]",providers:[n.provideAsWidgetRef(m)],exportAs:"wmAccordionPane",template:'<div class="panel-heading clearfix" (click)="toggle($event)" [ngClass]="{active: isActive}">\n    <h3 class="panel-title">\n        <a href="javascript:void(0);" role="button" class="accordion-toggle" [attr.aria-label]="title" [attr.aria-expanded]="isActive">\n            <div class="pull-left">\n                <i class="app-icon panel-icon {{iconclass}}" [hidden]="!iconclass"></i>\n            </div>\n            <div class="pull-left">\n                <div class="heading" [innerHTML]="title"></div>\n                <div class="description" [innerHTML]="subheading"></div>\n            </div>\n        </a>\n    </h3>\n    <div class="panel-actions">\n        <span class="label label-{{badgetype}}">{{badgevalue}}</span>\n        <button type="button" aria-label="Collapse/Expand" [attr.aria-expanded]="isActive"\n                class="app-icon panel-action wi"\n                title="{{appLocale.LABEL_COLLAPSE}}/{{appLocale.LABEL_EXPAND}}">\n            <i [ngClass]="isActive ? \'wi-minus\' : \'wi-plus\'"></i>\n        </button>\n    </div>\n</div>\n<div class="panel-collapse collapse" role="tabpanel" aria-labelledby="panel description" [ngClass]="isActive ? \'collapse in\' : \'collapse\'">\n    <div class="panel-body" [wmSmoothscroll]="smoothscroll" partial-container-target>\n        <ng-content></ng-content>\n    </div>\n</div>\n'}]}],(function(){return[{type:o.Injector},{type:f}]}),{reDrawableComponents:[{type:t.ContentChildren,args:[n.RedrawableDirective,{descendants:!0}]}]});const g={widgetType:"wm-accordion",hostClass:"app-accordion panel-group"};class f extends n.StylableComponent{static{this.initializeProps=void n.register("wm-accordion",new Map([["class",n.PROP_STRING],["closeothers",{value:!0,...n.PROP_BOOLEAN}],["dataset",n.PROP_ANY],["defaultpaneindex",{value:0,...n.PROP_NUMBER}],["name",n.PROP_STRING],["nodatamessage",{value:"No Data Found",...n.PROP_STRING}],["show",{value:!0,...n.PROP_BOOLEAN}],["statehandler",{value:"none",...n.PROP_STRING}],["tabindex",{value:0,...n.PROP_NUMBER}],["type",n.PROP_STRING]]))}constructor(e,t,i){let s=a.noop;super(e,g,new Promise((e=>s=e))),this.promiseResolverFn=s,this.statePersistence=t,this.dynamicComponentProvider=i,this.dynamicPanes=[],this.dynamicPaneIndex=0,n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER)}notifyChange(e,t,i){if(t){this.closePanesExcept(e);const t=this.getPaneIndexByRef(e);this.activePane=e.getWidget(),i&&this.invokeEventCallback("change",{$event:i,newPaneIndex:t,oldPaneIndex:this.activePaneIndex}),this.activePaneIndex=t}const n=this.statePersistence.computeMode(this.statehandler);if(i&&n&&"none"!==n.toLowerCase()){const e=[];this.panes.forEach((function(t){t.isActive&&e.push(t.name)})),e.length?this.statePersistence.setWidgetState(this,e):this.statePersistence.removeWidgetState(this)}}registerDynamicPane(e){this.dynamicPanes.push(e);if(this.dynamicPanes.length===this.dynamicPaneIndex)for(let e=0;e<this.dynamicPanes.length;e++){const t=_.find(this.dynamicPanes,(t=>t.dynamicPaneIndex===e));_.find(this.panes.toArray(),t)||(this.panes.reset([...this.panes.toArray(),t]),t.active&&t.expand())}}addPane(e){_.isArray(e)||(e=[e]);const t=[];return _.forEach(e,((e,i)=>{const n=_.find(this.panes.toArray(),{name:e.name}),a=_.indexOf(t,e.name);if(n||a>0)return void console.warn(`The tab pane with name ${e.name} already exists`);let s="",o="";this.dynamicPaneIndex++;const r=e.name?e.name:`accordionpane${this.panes.toArray().length+(i+1)}`;t.push(r);const l=_.get(e,"params");_.forEach(e,((e,t)=>{"params"!==t&&(o=`${o} ${t}="${e}"`)})),_.forEach(l,((e,t)=>{s=`${s} <wm-param name="${t}" value="${e}"></wm-param>`}));const c=`<wm-accordionpane dynamicPaneIndex="${this.dynamicPaneIndex-1}" isdynamic="true" name="${r}" ${o}>\n                            ${s}\n                        </wm-accordionpane>`;this._dynamicContext||(this._dynamicContext=Object.create(this.viewParent),this._dynamicContext[this.getAttr("wmAccordian")]=this),this.dynamicComponentProvider.addComponent(this.getNativeElement(),c,this._dynamicContext,{inj:this.inj})})),t}removePane(e){const t=this.getPaneRefByName(e);t&&t.remove()}isValidPaneIndex(e){return e>=0&&e<this.panes.length}getPaneRefByName(e){return _.find(this.panes.toArray(),{name:e})}getPaneIndexByRef(e){return this.panes.toArray().indexOf(e)}getPaneRefByIndex(e){return this.panes.toArray()[e]}closePanesExcept(e){a.isNumber(e)&&(e=this.getPaneRefByIndex(e)),this.closeothers&&this.panes.forEach((t=>{t!==e&&t.collapse()}))}expandPane(e){this.closePanesExcept(e),this.panes.toArray()[e].expand()}onDataChange(e){this.fieldDefs=n.createArrayFrom(e)}onPropertyChange(e,t,i){if("defaultpaneindex"===e)this.defaultpaneindex=t;else if("dataset"===e)this.onDataChange(t);else if("statehandler"===e){const e=this.statePersistence.getWidgetState(this);let i=[];"none"!==t&&_.isArray(e)?e.forEach((e=>{i=this.panes.filter((function(t){return e===t.name})),i.length?this.expandPane(this.getPaneIndexByRef(i[0])):console.warn("Accordion pane name "+e+" in State is incorrect.")})):this.isValidPaneIndex(this.defaultpaneindex)&&this.expandPane(this.defaultpaneindex)}else super.onPropertyChange(e,t,i)}ngAfterContentInit(){super.ngAfterContentInit(),this.promiseResolverFn(),this.panes.changes.subscribe((e=>{this.panes.length&&this.expandPane(this.defaultpaneindex)}))}static{this.\u0275fac=function(e){return new(e||f)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(c.StatePersistence),o.\u0275\u0275directiveInject(c.DynamicComponentRefProvider))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:f,selectors:[["div","wmAccordion",""]],contentQueries:function(e,t,i){if(1&e&&o.\u0275\u0275contentQuery(i,m,4),2&e){let e;o.\u0275\u0275queryRefresh(e=o.\u0275\u0275loadQuery())&&(t.panes=e)}},exportAs:["wmAccordion"],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(f)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(f,[{type:t.Directive,args:[{selector:"div[wmAccordion]",exportAs:"wmAccordion",providers:[n.provideAsWidgetRef(f)]}]}],(function(){return[{type:o.Injector},{type:c.StatePersistence},{type:c.DynamicComponentRefProvider}]}),{panes:[{type:t.ContentChildren,args:[m]}]});const v=[m,f];class b{static{this.\u0275fac=function(e){return new(e||b)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:b})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(b,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...v],exports:[...v]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(b,{declarations:[m,f],imports:[i.CommonModule,n.WmComponentsModule],exports:[m,f]}),e.AccordionDirective=f,e.AccordionModule=b,e.AccordionPaneComponent=m})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.layoutgrid={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.core)}(this,(function(e,t,i,n,a){"use strict";function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var o=s(t),r=s(a);const l={widgetType:"wm-layoutgrid",hostClass:"app-grid-layout clearfix"};class c extends n.BaseContainerComponent{static{this.initializeProps=void n.register("wm-layoutgrid",new Map([["class",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e){super(e,l),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||c)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:c,selectors:[["","wmLayoutGrid",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(c)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(c,[{type:t.Directive,args:[{selector:"[wmLayoutGrid]",providers:[n.provideAsWidgetRef(c)]}]}],(function(){return[{type:o.Injector}]}),null);const d={widgetType:"wm-layout-grid-row",hostClass:"app-grid-row clearfix"};class p extends n.StylableComponent{static{this.initializeProps=void n.register("wm-layout-grid-row",new Map([["class",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e){super(e,d),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||p)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:p,selectors:[["","wmLayoutGridRow",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(p)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(p,[{type:t.Directive,args:[{selector:"[wmLayoutGridRow]",providers:[n.provideAsWidgetRef(p)]}]}],(function(){return[{type:o.Injector}]}),null);const u={widgetType:"wm-gridcolumn",hostClass:"app-grid-column"};class h extends n.StylableComponent{static{this.initializeProps=void n.register("wm-gridcolumn",new Map([["class",n.PROP_STRING],["name",n.PROP_STRING],["columnwidth",n.PROP_NUMBER],["show",{value:!0,...n.PROP_BOOLEAN}],["xscolumnwidth",n.PROP_NUMBER]]))}constructor(e,t,i){super(e,u),this.viewport=i,t&&a.setCSS(this.nativeElement,"overflow","auto"),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}onPropertyChange(e,t,i){const n=a.isMobileApp()?"xs":"sm";"xscolumnwidth"===e&&this.viewport.isMobileType&&a.isMobileApp()?a.switchClass(this.nativeElement,`col-${n}-${t}`,i?`col-${n}-${i}`:""):"columnwidth"===e?a.isMobileApp()&&(!this.viewport.isMobileType||this.getAttr("xscolumnwidth"))&&this.viewport.isMobileType||a.switchClass(this.nativeElement,`col-${n}-${t}`,i?`col-${n}-${i}`:""):super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||h)(o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275injectAttribute("height"),o.\u0275\u0275directiveInject(r.Viewport))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:h,selectors:[["","wmLayoutGridColumn",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(h)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(h,[{type:t.Directive,args:[{selector:"[wmLayoutGridColumn]",providers:[n.provideAsWidgetRef(h)]}]}],(function(){return[{type:o.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["height"]}]},{type:r.Viewport}]}),null);const m=[c,p,h];class g{static{this.\u0275fac=function(e){return new(e||g)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:g})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(g,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...m],exports:[...m]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(g,{declarations:[c,p,h],imports:[i.CommonModule,n.WmComponentsModule],exports:[c,p,h]}),e.LayoutGridColumnDirective=h,e.LayoutGridModule=g,e.LayoutGridRowDirective=p,e.LayoutgridDirective=c})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.linearlayout={}),e.ng.core,e.ng.common,e.wm.components.base)}(this,(function(e,t,i,n){"use strict";var a,s,o=(a=t,s=Object.create(null),a&&Object.keys(a).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(s,e,t.get?t:{enumerable:!0,get:function(){return a[e]}})}})),s.default=a,Object.freeze(s));const r={widgetType:"wm-linearlayout",hostClass:"app-linear-layout clearfix"},l={left:"flex-start",right:"flex-end",center:"center"},c={top:"flex-start",bottom:"flex-end",center:"center"};class d extends n.BaseContainerComponent{static{this.initializeProps=void n.register("wm-linearlayout",new Map([["class",n.PROP_STRING],["direction",n.PROP_STRING],["horizontalalign",n.PROP_STRING],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["spacing",n.PROP_STRING],["verticalalign",n.PROP_STRING]]))}constructor(e){super(e,r),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}removeClass(e,t){e.removeClass(((e,i)=>i.split(" ").filter((e=>e.startsWith(t))).join(" ")))}changeDirection(e,t){this.removeClass(e,"app-linear-layout-direction"),e.addClass("app-linear-layout-direction-"+t),"row"===t||"row-reverse"===t?e.css("justify-content",l[this.horizontalalign]):"column"!==t&&"column-reverse"!==t||e.css("justify-content",c[this.verticalalign]),e.css("flex-direction",t)}onStyleChange(e,t,i){"horizontalalign"===e?"row"===this.direction||"row-reverse"===this.direction?this.$element.css("justify-content",l[t]):this.$element.css("align-items",l[t]):"verticalalign"===e&&("column"===this.direction||"column-reverse"===this.direction?this.$element.css("justify-content",c[t]):this.$element.css("align-items",c[t])),super.onStyleChange(e,t,i)}onPropertyChange(e,t,i){switch(e){case"direction":this.changeDirection(this.$element,t);break;case"horizontalalign":this.$element.css("justify-content",l[t]);break;case"verticalalign":this.$element.css("justify-content",c[t]);break;case"spacing":this.removeClass(this.$element,"app-linear-layout-spacing"),this.$element.addClass("app-linear-layout-spacing-"+t)}super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||d)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:d,selectors:[["","wmLinearLayout",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(d)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(d,[{type:t.Directive,args:[{selector:"[wmLinearLayout]",providers:[n.provideAsWidgetRef(d)]}]}],(function(){return[{type:o.Injector}]}),null);const p={widgetType:"wm-linearlayoutitem",hostClass:"app-linear-layout-item clearfix"};class u extends n.StylableComponent{static{this.initializeProps=void n.register("wm-linearlayoutitem",new Map([["class",n.PROP_STRING],["flexgrow",n.PROP_NUMBER],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e){super(e,p),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}onPropertyChange(e,t,i){if("flexgrow"===e)this.$element.css("flex-grow",t);super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||u)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:u,selectors:[["","wmLinearLayoutItem",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(u)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(u,[{type:t.Directive,args:[{selector:"[wmLinearLayoutItem]",providers:[n.provideAsWidgetRef(u)]}]}],(function(){return[{type:o.Injector}]}),null);const h=[d,u];class m{static{this.\u0275fac=function(e){return new(e||m)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:m})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(m,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...h],exports:[...h]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(m,{declarations:[d,u],imports:[i.CommonModule,n.WmComponentsModule],exports:[d,u]}),e.LinearLayoutDirective=d,e.LinearLayoutItemDirective=u,e.LinearLayoutModule=m})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("ngx-bootstrap/dropdown"),require("@wm/components/base"),require("@wm/components/navigation/menu"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","ngx-bootstrap/dropdown","@wm/components/base","@wm/components/navigation/menu","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.panel={}),e.ng.core,e.ng.common,e.dropdown,e.wm.components.base,e.wm.components.navigation.menu,e.wm.core)}(this,(function(e,t,i,n,a,s,o){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=r(t),c=r(i),d=r(n),p=r(a),u=r(s);const h=["panelHeading"],m=["panelContent"],g=["panelBody"],f=["wmPanel",""];function v(e,t){if(1&e&&l.\u0275\u0275element(0,"i"),2&e){const e=l.\u0275\u0275nextContext(2);l.\u0275\u0275classMapInterpolate1("app-icon panel-icon ",e.iconclass,"")}}const b=function(e,t,i){return{width:e,height:t,margin:i}};function y(e,t){if(1&e&&(l.\u0275\u0275element(0,"img",23),l.\u0275\u0275pipe(1,"image")),2&e){const e=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("src",l.\u0275\u0275pipeBind1(1,2,e.iconurl),l.\u0275\u0275sanitizeUrl)("ngStyle",l.\u0275\u0275pureFunction3(4,b,e.iconwidth,e.iconheight,e.iconmargin))}}function w(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"span",24),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&e){const e=l.\u0275\u0275nextContext(2);l.\u0275\u0275classMapInterpolate1("app-badge label label-",e.badgetype,""),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate(e.badgevalue)}}function P(e,t){1&e&&l.\u0275\u0275element(0,"div",25)}function C(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"button",26),l.\u0275\u0275listener("click",(function(){l.\u0275\u0275restoreView(e);const t=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(t.toggleHelp())})),l.\u0275\u0275element(1,"i",27),l.\u0275\u0275elementEnd()}if(2&e){const e=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("title",e.appLocale.LABEL_HELP)}}function A(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"button",28),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(i.toggle(t))})),l.\u0275\u0275element(1,"i",29),l.\u0275\u0275elementEnd()}if(2&e){const e=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("title",e.expandCollapseTitle),l.\u0275\u0275attribute("aria-expanded",!!e.expanded),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngClass",e.expanded?"wi-minus":"wi-plus")}}function I(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"button",30),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(i.toggleFullScreen(t))})),l.\u0275\u0275element(1,"i",29),l.\u0275\u0275elementEnd()}if(2&e){const e=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("title",e.fullScreenTitle),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngClass",e.fullscreen?"wi-fullscreen-exit":"wi-fullscreen")}}function E(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"button",31),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(i.close(t))})),l.\u0275\u0275element(1,"i",32),l.\u0275\u0275elementEnd()}if(2&e){const e=l.\u0275\u0275nextContext(2);l.\u0275\u0275propertyInterpolate("title",e.appLocale.LABEL_CLOSE)}}function O(e,t){if(1&e){const e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",null,9)(2,"div",10)(3,"a",11),l.\u0275\u0275listener("click",(function(t){l.\u0275\u0275restoreView(e);const i=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(i.toggle(t))})),l.\u0275\u0275elementStart(4,"div",12),l.\u0275\u0275template(5,v,1,3,"i",0),l.\u0275\u0275template(6,y,2,8,"img",13),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(7,"div",12),l.\u0275\u0275element(8,"div",14)(9,"div",15),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(10,"div",16),l.\u0275\u0275template(11,w,2,4,"span",17),l.\u0275\u0275template(12,P,1,0,"div",18),l.\u0275\u0275template(13,C,2,1,"button",19),l.\u0275\u0275template(14,A,2,3,"button",20),l.\u0275\u0275template(15,I,2,2,"button",21),l.\u0275\u0275template(16,E,2,1,"button",22),l.\u0275\u0275elementEnd()()()}if(2&e){const e=l.\u0275\u0275nextContext();l.\u0275\u0275classMapInterpolate1("panel-heading ",e.helpClass,""),l.\u0275\u0275advance(3),l.\u0275\u0275attribute("aria-expanded",!!e.expanded),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",e.iconclass&&!e.iconurl),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.iconurl),l.\u0275\u0275advance(2),l.\u0275\u0275property("innerHTML",e.title,l.\u0275\u0275sanitizeHtml)("title",e.title),l.\u0275\u0275advance(1),l.\u0275\u0275property("innerHTML",e.subheading,l.\u0275\u0275sanitizeHtml),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",e.badgevalue),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.actions),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.helptext),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.collapsible),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.enablefullscreen),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.closable)}}const x=["*",[["","wmPanelFooter",""]]],R=function(e){return["panel-body",e]},D=["*","[wmPanelFooter]"],S={widgetType:"wm-panel",hostClass:"app-panel panel"};class T extends s.MenuAdapterComponent{static{this.initializeProps=void a.register("wm-panel",new Map([["actions",{}],["animation",a.PROP_STRING],["autoclose",a.PROP_STRING],["badgetype",{value:"default",...a.PROP_STRING}],["badgevalue",a.PROP_STRING],["class",a.PROP_STRING],["closable",a.PROP_BOOLEAN],["collapsible",a.PROP_BOOLEAN],["conditionalclass",a.PROP_ANY],["conditionalstyle",a.PROP_ANY],["content",a.PROP_STRING],["datafield",a.PROP_STRING],["enablefullscreen",a.PROP_BOOLEAN],["expanded",{value:!0,...a.PROP_BOOLEAN}],["fullscreen",a.PROP_BOOLEAN],["helptext",a.PROP_STRING],["iconclass",a.PROP_STRING],["iconheight",a.PROP_STRING],["iconmargin",a.PROP_STRING],["iconurl",a.PROP_STRING],["iconwidth",a.PROP_STRING],["itemaction",a.PROP_STRING],["itemchildren",a.PROP_STRING],["itemicon",a.PROP_STRING],["itemlabel",a.PROP_STRING],["itemlink",a.PROP_STRING],["name",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}],["subheading",a.PROP_STRING],["title",a.PROP_STRING],["userrole",a.PROP_STRING],["hint",a.PROP_STRING]]))}get hideFooter(){return!this.hasFooter||!this.expanded}get showHeader(){return this.iconurl||this.iconclass||this.collapsible||this.actions||this.title||this.subheading||this.enablefullscreen}constructor(e){super(e,S),this.$lazyLoad=o.noop,this.expanded=!0,this.helpClass="",this.helptext="",a.styler(this.nativeElement,this,a.APPLY_STYLES_TYPE.SHELL),this.fullScreenTitle=`${this.appLocale.LABEL_FULLSCREEN}/${this.appLocale.LABEL_EXITFULLSCREEN}`,this.expandCollapseTitle=`${this.appLocale.LABEL_COLLAPSE}/${this.appLocale.LABEL_EXPAND}`,o.removeAttr(this.nativeElement,"title")}toggle(e){this.collapsible&&(this.invokeEventCallback(this.expanded?"collapse":"expand",{$event:e}),this.expanded=!this.expanded,this.expanded&&(this.$lazyLoad(),this.reDrawChildren()))}expand(e){this.expanded||this.toggle(e)}collapse(e){this.expanded&&this.toggle(e)}toggleFullScreen(e){this.enablefullscreen&&(this.invokeEventCallback(this.fullscreen?"exitfullscreen":"fullscreen",{$event:e}),this.fullscreen=!this.fullscreen,o.toggleClass(this.nativeElement,"fullscreen",this.fullscreen),this.reDrawChildren()),this.computeDimensions()}toggleHelp(){this.helpClass=this.helpClass?"":"show-help",o.toggleClass(this.nativeElement,"show-help",!!this.helpClass),o.$appDigest()}menuActionItemClick(e,t){this.selectedAction=_.omit(t,["children","value"]),this.invokeEventCallback("actionsclick",{$event:e,$item:this.selectedAction})}close(e){this.getWidget().show=!1,this.invokeEventCallback("close",{$event:e})}computeDimensions(){const e=this.panelHeader.nativeElement.offsetHeight,t=this.nativeElement.querySelector(".panel-footer"),i=this.panelContent.nativeElement,n=window.innerHeight;let a;a=this.fullscreen?this.hideFooter?n-e:n-(t.offsetHeight+e):this.height||"",o.setCSS(i,"height",a)}reDrawChildren(){setTimeout((()=>{this.reDrawableComponents&&this.reDrawableComponents.forEach((e=>e.redraw()))}),100)}onPropertyChange(e,t,i){"expanded"===e?this.expanded=t:"content"===e?setTimeout((()=>{!this.expanded&&this.collapsible||this.$lazyLoad()}),20):super.onPropertyChange(e,t,i)}ngAfterContentInit(){super.ngAfterContentInit(),this.hasFooter=!!this.nativeElement.querySelector("[wmPanelFooter]"),a.styler(this.panelBody.nativeElement,this,a.APPLY_STYLES_TYPE.INNER_SHELL)}static{this.\u0275fac=function(e){return new(e||T)(l.\u0275\u0275directiveInject(l.Injector))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:T,selectors:[["","wmPanel",""]],contentQueries:function(e,t,i){if(1&e&&l.\u0275\u0275contentQuery(i,a.RedrawableDirective,5),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.reDrawableComponents=e)}},viewQuery:function(e,t){if(1&e&&(l.\u0275\u0275viewQuery(h,5),l.\u0275\u0275viewQuery(m,7),l.\u0275\u0275viewQuery(g,7)),2&e){let e;l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.panelHeader=e.first),l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.panelContent=e.first),l.\u0275\u0275queryRefresh(e=l.\u0275\u0275loadQuery())&&(t.panelBody=e.first)}},exportAs:["wmPanel"],features:[l.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(T)]),l.\u0275\u0275InheritDefinitionFeature],attrs:f,ngContentSelectors:D,decls:12,vars:12,consts:[[3,"class",4,"ngIf"],[1,"panel-content",3,"hidden"],["panelContent",""],["partial-container-target","",3,"ngClass"],["panelBody",""],[1,"panel-help-message",3,"ngClass"],[1,"panel-help-header",3,"textContent"],[1,"panel-help-content",3,"innerHTML"],[1,"app-panel-footer","panel-footer","clearfix",3,"hidden"],["panelHeading",""],[1,"panel-title"],["href","javascript:void(0)",1,"panel-toggle",3,"click"],[1,"pull-left"],["data-identifier","img","title","iconurl","alt","Panel icon","class","panel-image-icon",3,"src","ngStyle",4,"ngIf"],[1,"heading",3,"innerHTML","title"],[1,"description",3,"innerHTML"],[1,"panel-actions"],["aria-label","badge",3,"class",4,"ngIf"],["wmMenu","","aria-label","dropdown","dropdown","","type","anchor","class","panel-action","dataset.bind","actions","caption","","menuposition","down,left","iconclass","wi wi-more-vert","autoclose.bind","autoclose","datafield.bind","datafield","select.event","menuActionItemClick($event,$item)",4,"ngIf"],["type","button","aria-label","Help","class","app-icon panel-action wi",3,"title","click",4,"ngIf"],["type","button","aria-label","Collapse/Expand","class","app-icon wi panel-action",3,"title","click",4,"ngIf"],["type","button","aria-label","Fullscreen/Exit","class","app-icon panel-action wi",3,"title","click",4,"ngIf"],["type","button","aria-label","Close button","class","app-icon panel-action",3,"title","click",4,"ngIf"],["data-identifier","img","title","iconurl","alt","Panel icon",1,"panel-image-icon",3,"src","ngStyle"],["aria-label","badge"],["wmMenu","","aria-label","dropdown","dropdown","","type","anchor","dataset.bind","actions","caption","","menuposition","down,left","iconclass","wi wi-more-vert","autoclose.bind","autoclose","datafield.bind","datafield","select.event","menuActionItemClick($event,$item)",1,"panel-action"],["type","button","aria-label","Help",1,"app-icon","panel-action","wi",3,"title","click"],[1,"wi-question"],["type","button","aria-label","Collapse/Expand",1,"app-icon","wi","panel-action",3,"title","click"],[3,"ngClass"],["type","button","aria-label","Fullscreen/Exit",1,"app-icon","panel-action","wi",3,"title","click"],["type","button","aria-label","Close button",1,"app-icon","panel-action",3,"title","click"],[1,"wi","wi-close"]],template:function(e,t){1&e&&(l.\u0275\u0275projectionDef(x),l.\u0275\u0275template(0,O,17,15,"div",0),l.\u0275\u0275elementStart(1,"div",1,2)(3,"div",3,4),l.\u0275\u0275projection(5),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(6,"aside",5),l.\u0275\u0275element(7,"h5",6)(8,"div",7),l.\u0275\u0275pipe(9,"trustAs"),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(10,"div",8),l.\u0275\u0275projection(11,1),l.\u0275\u0275elementEnd()),2&e&&(l.\u0275\u0275property("ngIf",t.showHeader),l.\u0275\u0275advance(1),l.\u0275\u0275property("hidden",!t.expanded),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(10,R,t.helpClass)),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngClass",t.helpClass),l.\u0275\u0275advance(1),l.\u0275\u0275property("textContent",t.appLocale.LABEL_HELP),l.\u0275\u0275advance(1),l.\u0275\u0275property("innerHTML",l.\u0275\u0275pipeBind2(9,7,t.helptext,"html"),l.\u0275\u0275sanitizeHtml),l.\u0275\u0275advance(2),l.\u0275\u0275property("hidden",t.hideFooter))},dependencies:[d.BsDropdownDirective,c.NgClass,c.NgIf,c.NgStyle,u.MenuComponent,p.TextContentDirective,p.TrustAsPipe,p.ImagePipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(T,[{type:t.Component,args:[{selector:"[wmPanel]",providers:[a.provideAsWidgetRef(T)],exportAs:"wmPanel",template:'<div class="panel-heading {{helpClass}}"  *ngIf="showHeader" #panelHeading>\n    <div class="panel-title">\n        <a href="javascript:void(0)" class="panel-toggle" (click)="toggle($event)" [attr.aria-expanded]="!!expanded">\n            <div class="pull-left">\n                <i class="app-icon panel-icon {{iconclass}}" *ngIf="iconclass && !iconurl"></i>\n                <img data-identifier="img" title="iconurl" alt="Panel icon" class="panel-image-icon"\n                     [src]="iconurl | image" *ngIf="iconurl"\n                     [ngStyle]="{width: iconwidth ,height: iconheight, margin: iconmargin}" />\n            </div>\n            <div class="pull-left">\n                <div class="heading" [innerHTML]="title" [title]="title"></div>\n                <div class="description" [innerHTML]="subheading"></div>\n            </div>\n        </a>\n        <div class="panel-actions">\n            <span *ngIf="badgevalue" aria-label="badge"\n                  class="app-badge label label-{{badgetype}}">{{badgevalue}}</span>\n            <div wmMenu aria-label="dropdown" dropdown type="anchor" class="panel-action" dataset.bind="actions"\n                 *ngIf="actions" caption="" menuposition="down,left" iconclass="wi wi-more-vert"\n                 autoclose.bind="autoclose" datafield.bind="datafield" select.event="menuActionItemClick($event,$item)">\n            </div>\n            <button type="button" aria-label="Help" class="app-icon panel-action wi" [title]="appLocale.LABEL_HELP"\n                    *ngIf="helptext" (click)="toggleHelp()"><i class="wi-question"></i></button>\n            <button type="button" aria-label="Collapse/Expand" class="app-icon wi panel-action" *ngIf="collapsible"\n                    [title]="expandCollapseTitle" (click)="toggle($event);" [attr.aria-expanded]="!!expanded"><i\n                   [ngClass]="expanded ? \'wi-minus\' : \'wi-plus\'"></i></button>\n            <button type="button" aria-label="Fullscreen/Exit" class="app-icon panel-action wi" *ngIf="enablefullscreen"\n                    [title]="fullScreenTitle" (click)="toggleFullScreen($event);"><i\n                   [ngClass]="fullscreen ? \'wi-fullscreen-exit\' : \'wi-fullscreen\'"></i></button>\n            <button type="button" aria-label="Close button" class="app-icon panel-action"\n                    title="{{appLocale.LABEL_CLOSE}}" *ngIf="closable" (click)="close($event)"><i\n                   class="wi wi-close"></i></button>\n        </div>\n    </div>\n</div>\n<div class="panel-content"  [hidden]="!expanded" #panelContent>\n    \x3c!-- Todo Bandhavya - implement smooth scroll --\x3e\n    <div partial-container-target #panelBody [ngClass]="[\'panel-body\', helpClass]">\n        <ng-content></ng-content>\n    </div>\n    <aside class="panel-help-message" [ngClass]="helpClass">\n        <h5 class="panel-help-header" [textContent]="appLocale.LABEL_HELP"></h5>\n        <div class="panel-help-content" [innerHTML]="helptext | trustAs : \'html\'"></div>\n    </aside>\n</div>\n<div class="app-panel-footer panel-footer clearfix"  [hidden]="hideFooter">\n    <ng-content select="[wmPanelFooter]"></ng-content>\n</div>\n'}]}],(function(){return[{type:l.Injector}]}),{panelHeader:[{type:t.ViewChild,args:["panelHeading",{static:!1}]}],panelContent:[{type:t.ViewChild,args:["panelContent",{static:!0}]}],panelBody:[{type:t.ViewChild,args:["panelBody",{static:!0}]}],reDrawableComponents:[{type:t.ContentChildren,args:[a.RedrawableDirective,{descendants:!0}]}]});const M=[T];class N{static{this.\u0275fac=function(e){return new(e||N)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:N})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[n.BsDropdownModule,i.CommonModule,s.MenuModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&l.\u0275setClassMetadata(N,[{type:t.NgModule,args:[{imports:[n.BsDropdownModule,i.CommonModule,s.MenuModule,a.WmComponentsModule],declarations:[...M],exports:[...M]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&l.\u0275\u0275setNgModuleScope(N,{declarations:[T],imports:[n.BsDropdownModule,i.CommonModule,s.MenuModule,a.WmComponentsModule],exports:[T]}),e.PanelComponent=T,e.PanelModule=N})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/core"),require("@swipey")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/core","@swipey"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.tabs={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.core,e.swipey)}(this,(function(e,t,i,n,a,s){"use strict";function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var r=o(t),l=o(i),c=o(n),d=o(a);class p extends s.SwipeAnimation{constructor(e){super(),this.tabs=e,this._$el=$(this.tabs.getNativeElement()).find(">.tab-content"),this.init(this._$el)}calibrate(){const e=this.tabs.getActiveTabIndex(),t=this._$el.find(">.tab-pane");let i=0,n=0,a=[];return t.each(((t,s)=>($(s).prop("hidden")||(n++,t===e&&(i=n-1),a.push(s)),!0))),{activeTabIndex:i,noOfTabs:n,panes:a}}bounds(){const{activeTabIndex:e,noOfTabs:t,panes:i}=this.calibrate(),n=$(i[0]).width(),a=-1*e*n;return this.clearContentFocus(),{strict:!1,lower:e===t-1?0:-n,center:a,upper:0===e?a:n}}context(){return{w:this._$el.width()}}animation(){return{transform:"translate3d(${{ ($D + $d)/w * 100 + '%'}}, 0, 0)","-webkit-transform":"translate3d(${{ ($D + $d)/w * 100 + '%'}}, 0, 0)"}}clearContentFocus(){let e=this._$el.find(">.tab-pane.active");e.length&&e.find(document.activeElement).length&&document.activeElement.blur()}transitionTabIntoView(){const{activeTabIndex:e,noOfTabs:t,panes:i}=this.calibrate(),n=100*t+"%";a.setCSSFromObj(this._$el[0],{maxWidth:n,width:n}),a.addClass(this.tabs.getNativeElement(),"has-transition");const s=100/t+"%";i.forEach((e=>{a.setCSS(e,"width",s)})),a.setCSS(this._$el[0],"transform",`translate3d(${-1*e/t*100}%, 0, 0)`)}onUpper(e){this.tabs.prev(e),a.$appDigest()}onLower(e){this.tabs.next(e),a.$appDigest()}threshold(){return 5}}const u=["wmTabPane",""],h=["*"],m={widgetType:"wm-tabpane",hostClass:"tab-pane"};class g extends n.StylableComponent{static{this.initializeProps=void n.register("wm-tabpane",new Map([["active",n.PROP_BOOLEAN],["badgevalue",n.PROP_STRING],["badgetype",{value:"default",...n.PROP_STRING}],["class",n.PROP_STRING],["content",n.PROP_STRING],["disabled",n.PROP_BOOLEAN],["dynamicPaneIndex",n.PROP_NUMBER],["heading",n.PROP_STRING],["isdefaulttab",n.PROP_STRING],["isdynamic",n.PROP_BOOLEAN],["name",n.PROP_STRING],["paneicon",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}],["smoothscroll",{value:!1,...n.PROP_BOOLEAN}],["title",{value:"Tab Title",...n.PROP_STRING}]]))}constructor(e,t,i,n){super(e,m),this.tabsRef=t,this.heading=i,this.title=n,this._isFirstLoad=!0,this._isOnLoadTriggered=!1,this.$lazyLoad=a.noop,this.isActive=!1,this.disabled=!1,a.removeAttr(this.nativeElement,"title")}invokeOnSelectCallback(e){this.invokeEventCallback("select",{$event:e})}select(e,t){this.isActive||this.disabled||(this.isActive=!0,this.$lazyLoad(),this.redrawChildren(),this.notifyParent(e,t))}tabpaneHeaderClick(e,t){this.invokeEventCallback("headerclick",{$event:e,paneIndex:t})}deselect(){this.isActive&&(this.isActive=!1,this.invokeEventCallback("deselect"))}remove(){this.isActive&&(this===this.tabsRef.panes.last?this.tabsRef.prev():this.tabsRef.next());const e=this.tabsRef.panes.toArray();e.splice(this.tabsRef.getPaneIndexByRef(this),1),this.tabsRef.panes.reset([...e]),this.nativeElement.remove(),this.tabsRef.$element.find(`.tab-header[data-paneid='${this.$element.attr("widget-id")}'] a`).remove()}redrawChildren(){setTimeout((()=>{this.reDrawableComponents&&this.reDrawableComponents.forEach((e=>e.redraw())),this._isOnLoadTriggered||this.content||(this.invokeEventCallback("load"),this._isOnLoadTriggered=!0)}),100)}notifyParent(e,t){this.tabsRef.notifyChange(this,e,t)}handleSwipeLeft(){this.tabsRef.next()}handleSwipeRight(){this.tabsRef.prev()}handleEvent(e,t,i,n){"select"!==t&&super.handleEvent(this.nativeElement,t,i,n)}onPropertyChange(e,t,i){"content"===e?this.isActive&&setTimeout((()=>this.$lazyLoad()),100):"show"===e?(this.nativeElement.hidden=!t,this._isFirstLoad?this.tabsRef.selectDefaultPaneByIndex(this.tabsRef.defaultpaneindex):!t&&this.isActive?this.tabsRef.next():!t&&this.isActive||this.tabsRef.tabsAnimator?.transitionTabIntoView(),this._isFirstLoad=!1):super.onPropertyChange(e,t,i)}ngOnInit(){super.ngOnInit(),this.title=this.title||this.heading}ngAfterViewInit(){n.styler(this.nativeElement.querySelector(".tab-body"),this,n.APPLY_STYLES_TYPE.CONTAINER),super.ngAfterViewInit(),this.isdynamic&&this.tabsRef.registerDynamicTab(this)}static{this.\u0275fac=function(e){return new(e||g)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(S),r.\u0275\u0275injectAttribute("heading"),r.\u0275\u0275injectAttribute("title"))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:g,selectors:[["div","wmTabPane",""]],contentQueries:function(e,t,i){if(1&e&&r.\u0275\u0275contentQuery(i,n.RedrawableDirective,5),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.reDrawableComponents=e)}},hostVars:4,hostBindings:function(e,t){2&e&&r.\u0275\u0275classProp("active",t.isActive)("disabled",t.disabled)},features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(g)]),r.\u0275\u0275InheritDefinitionFeature],attrs:u,ngContentSelectors:h,decls:2,vars:1,consts:[["partial-container-target","",1,"tab-body",3,"wmSmoothscroll"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275projection(1),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("wmSmoothscroll",t.smoothscroll)},dependencies:[c.SmoothScrollDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(g,[{type:t.Component,args:[{selector:"div[wmTabPane]",providers:[n.provideAsWidgetRef(g)],template:'<div class="tab-body" partial-container-target [wmSmoothscroll]="smoothscroll">\n    <ng-content></ng-content>\n</div>'}]}],(function(){return[{type:r.Injector},{type:S},{type:void 0,decorators:[{type:t.Attribute,args:["heading"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["title"]}]}]}),{isActive:[{type:t.HostBinding,args:["class.active"]}],disabled:[{type:t.HostBinding,args:["class.disabled"]}],reDrawableComponents:[{type:t.ContentChildren,args:[n.RedrawableDirective,{descendants:!0}]}]});const f=["wmTabs",""],v=function(e){return["app-icon",e]};function b(e,t){if(1&e&&r.\u0275\u0275element(0,"i",8),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(1,v,e.paneicon))}}function y(e,t){if(1&e&&r.\u0275\u0275element(0,"span",6),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275classMapInterpolate1("label label-",e.badgetype,""),r.\u0275\u0275property("textContent",e.badgevalue)}}const w=function(e,t){return{active:e,disabled:t}};function P(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li",3)(1,"a",4),r.\u0275\u0275listener("click",(function(t){const i=r.\u0275\u0275restoreView(e),n=i.$implicit,a=i.index;return n.select(t),r.\u0275\u0275resetView(n.tabpaneHeaderClick(t,a))}))("keydown",(function(t){r.\u0275\u0275restoreView(e);const i=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(i.onkeydown(t))})),r.\u0275\u0275template(2,b,1,3,"i",5),r.\u0275\u0275element(3,"span",6),r.\u0275\u0275template(4,y,1,4,"span",7),r.\u0275\u0275elementEnd()()}if(2&e){const e=t.$implicit;r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(10,w,e.isActive,e.disabled))("hidden",!e.show),r.\u0275\u0275attribute("data-paneid",e.widgetId),r.\u0275\u0275advance(1),r.\u0275\u0275property("tabindex",e.isActive?"0":"-1"),r.\u0275\u0275attribute("aria-label",e.title)("title",e.title)("aria-selected",e.isActive),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.paneicon),r.\u0275\u0275advance(1),r.\u0275\u0275property("textContent",e.title),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.badgevalue)}}const C=function(e,t){return{"tab-stacked":e,"tab-justified":t}};function A(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",9),r.\u0275\u0275projection(1,0,["ngProjectAs","div[wmTabPane]",5,["div","wmTabPane",""]]),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(1,C,e.vertical,e.justified))}}function I(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.nodatamessage)}}function E(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",9),r.\u0275\u0275template(1,I,2,1,"div",10),r.\u0275\u0275projection(2,1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(2,C,e.vertical,e.justified)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.fieldDefs&&!e.fieldDefs.length)}}const O=["*",[["div","wmRepeatTemplate",""]]],x=function(e,t){return{"nav-stacked":e,"nav-justified":t}},R=["*","div[wmRepeatTemplate]"],D={widgetType:"wm-tabs",hostClass:"app-tabs clearfix"};class S extends n.StylableComponent{static{this.initializeProps=(()=>{const e=new Map([["class",n.PROP_STRING],["dataset",n.PROP_ANY],["defaultpaneindex",{value:0,...n.PROP_NUMBER}],["justified",n.PROP_BOOLEAN],["tabsposition",{value:"top",...n.PROP_STRING}],["name",n.PROP_STRING],["nodatamessage",{value:"No Data Found",...n.PROP_STRING}],["show",{value:!0,...n.PROP_BOOLEAN}],["statehandler",{value:"none",...n.PROP_STRING}],["transition",n.PROP_STRING],["type",n.PROP_STRING]]);a.isMobileApp()&&e.set("transition",{value:"slide",...n.PROP_STRING}),n.register("wm-tabs",e)})()}constructor(e,t,i,s,o){let r=a.noop;super(e,D,new Promise((e=>r=e))),this.transition=i,this.tabsposition=s,this.statePersistence=o,this.dynamicComponentProvider=t,this.dynamicTabs=[],this.dynamicPaneIndex=0,this.promiseResolverFn=r,n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}animateIn(e){const t=$(e);t.siblings(".active").removeClass("active"),t.addClass("active");const i=this.nativeElement.querySelector("ul.nav.nav-tabs"),n=t.prev();n.length?i.scrollLeft=n[0].offsetLeft:i.scrollLeft=0}registerDynamicTab(e){this.dynamicTabs.push(e);if(this.dynamicTabs.length===this.dynamicPaneIndex)for(let e=0;e<this.dynamicTabs.length;e++){const t=_.find(this.dynamicTabs,(t=>t.dynamicPaneIndex===e));_.find(this.panes.toArray(),t)||(this.panes.reset([...this.panes.toArray(),t]),t.active&&setTimeout((()=>{t.select()}),20))}}addPane(e){_.isArray(e)||(e=[e]);const t=[];return _.forEach(e,((e,i)=>{const n=_.find(this.panes.toArray(),{name:e.name}),a=_.indexOf(t,e.name);if(n||a>0)return void console.warn(`The tab pane with name ${e.name} already exists`);let s="",o="";this.dynamicPaneIndex++;const r=e.name?e.name:`tabpane${this.panes.toArray().length+(i+1)}`;t.push(r);const l=_.get(e,"params");_.forEach(e,((e,t)=>{"params"!==t&&(o=`${o} ${t}="${e}"`)})),_.forEach(l,((e,t)=>{s=`${s} <wm-param name="${t}" value="${e}"></wm-param>`}));const c=`<wm-tabpane dynamicPaneIndex="${this.dynamicPaneIndex-1}" isdynamic="true" name="${r}" ${o}>\n                            ${s}\n                        </wm-tabpane>`;this._dynamicContext||(this._dynamicContext=Object.create(this.viewParent),this._dynamicContext[this.getAttr("wmTab")]=this),this.dynamicComponentProvider.addComponent(this.getNativeElement().querySelector(".tab-content"),c,this._dynamicContext,{inj:this.inj})})),t}removePane(e){const t=this.getPaneRefByName(e);t&&t.remove()}notifyChange(e,t,i){if(!this.isSelectableTab(e))return;let n;_.isEmpty(this.activeTab)||this.activeTab.deselect(),this.activeTab=e.getWidget();const a=this.getPaneIndexByRef(e),s=this.statePersistence.computeMode(this.statehandler);if(!this.isPageLoadCall&&s&&"none"!==s.toLowerCase()?this.statePersistence.setWidgetState(this,this.activeTab.name):(this.defaultpaneindex=this.getPaneIndexByRef(e),this.isPageLoadCall=!1),e.invokeOnSelectCallback(t),t&&this.invokeEventCallback("change",{$event:t,newPaneIndex:a,oldPaneIndex:this._oldPaneIndex||0}),this._oldPaneIndex=a,t&&(n=$(t.target).closest("li.tab-header")),!t||!n||!n.length){n=this.nativeElement.querySelector(`li[data-paneid=${e.widgetId}]`);!!!$(n).closest(".app-tabs").parent().closest(".app-tabs").length&&i&&$(n).children().focus()}this.animateIn(n),this.canSlide()&&(this.tabsAnimator||(this.tabsAnimator=new p(this),this.tabsAnimator.setGesturesEnabled(this.canSlide())),this.tabsAnimator.transitionTabIntoView())}goToTab(e){if(this.isValidPaneIndex(e-1)){this.getPaneRefByIndex(e-1).select()}}getPaneIndexByRef(e){return this.panes.toArray().indexOf(e)}getActiveTabIndex(){return _.findIndex(this.panes.toArray(),{isActive:!0})}isValidPaneIndex(e){return e>=0&&e<this.panes.length}getPaneRefByIndex(e){return this.panes.toArray()[e]}getPaneRefByName(e){return _.find(this.panes.toArray(),{name:e})}isSelectableTab(e){return e.show&&!e.disabled}canSlide(){return"slide"===this.transition&&!this.vertical}getSelectableTabAfterIndex(e){for(let t=e+1;t<this.panes.length;t++){const e=this.getPaneRefByIndex(t);if(this.isSelectableTab(e))return e}if(e===this.panes.length-1){const e=this.getPaneRefByIndex(0);if(this.isSelectableTab(e))return e}}getSelectableTabBeforeIndex(e){for(let t=e-1;t>=0;t--){const e=this.getPaneRefByIndex(t);if(this.isSelectableTab(e))return e}if(0===e){const e=this.getPaneRefByIndex(this.panes.length-1);if(this.isSelectableTab(e))return e}}next(e,t){const i=this.getSelectableTabAfterIndex(this.getActiveTabIndex());i&&i.select(e,t)}prev(e,t){const i=this.getSelectableTabBeforeIndex(this.getActiveTabIndex());i&&i.select(e,t)}selectDefaultPaneByIndex(e){if(!this.isValidPaneIndex(e))return;let t=this.getPaneRefByIndex(e);this.isSelectableTab(t)||(t=this.getSelectableTabAfterIndex(0)),t&&t.select()}setTabsPosition(){const e=this.nativeElement.children[0];this.vertical="left"===this.tabsposition||"right"===this.tabsposition,a.removeClass(this.nativeElement,"inverted"),"bottom"!==this.tabsposition&&"right"!==this.tabsposition||(a.appendNode(e,this.nativeElement),a.addClass(this.nativeElement,"inverted"))}onDataChange(e){this.fieldDefs=n.createArrayFrom(e),setTimeout((()=>this.selectDefaultPaneByIndex(this.defaultpaneindex||0)))}onPropertyChange(e,t,i){if("defaultpaneindex"===e)this.defaultpaneindex=t;else if("dataset"===e)this.onDataChange(t);else if("statehandler"===e){this.isPageLoadCall=!0;const e=this.statePersistence.getWidgetState(this);if("none"!==t&&e){const t=this.panes.filter((function(t){return e===t.name}));if(t.length){const e=this.getPaneIndexByRef(t[0]);setTimeout((()=>this.selectDefaultPaneByIndex(e)),20)}else console.warn("Tab pane name "+e+" in State is incorrect. Falling back to the default pane"),setTimeout((()=>this.selectDefaultPaneByIndex(this.defaultpaneindex||0)),20)}else setTimeout((()=>this.selectDefaultPaneByIndex(this.defaultpaneindex||0)),20)}else super.onPropertyChange(e,t,i)}registerTabsScroll(){setTimeout((()=>{const e=this.$element.find("> ul");let t;t=e.children().last().position(),t&&t.left>e.width()&&e.on("mousewheel",(t=>{const i=e[0].scrollLeft,n=-1*t.originalEvent.wheelDelta;t.stopPropagation(),t.preventDefault(),e.animate({scrollLeft:i+n},{duration:10})}))}))}onkeydown(e){switch(e.key){case"ArrowLeft":case"ArrowUp":this.prev(null,!0),e.preventDefault();break;case"ArrowRight":case"ArrowDown":this.next(null,!0),e.preventDefault()}}ngAfterContentInit(){this.promiseResolverFn(),super.ngAfterContentInit(),this.setTabsPosition(),this.panes.changes.subscribe((e=>{this.panes.length&&this.selectDefaultPaneByIndex(this.defaultpaneindex||0)}))}ngAfterViewInit(){super.ngAfterViewInit(),this.registerTabsScroll()}static{this.\u0275fac=function(e){return new(e||S)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(d.DynamicComponentRefProvider),r.\u0275\u0275injectAttribute("transition"),r.\u0275\u0275injectAttribute("tabsposition"),r.\u0275\u0275directiveInject(d.StatePersistence))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:S,selectors:[["div","wmTabs",""]],contentQueries:function(e,t,i){if(1&e&&r.\u0275\u0275contentQuery(i,g,4),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.panes=e)}},exportAs:["wmTabs"],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(S)]),r.\u0275\u0275InheritDefinitionFeature],attrs:f,ngContentSelectors:R,decls:4,vars:7,consts:[["role","tablist",1,"nav","nav-tabs",3,"ngClass"],["class","tab-header","role","presentation",3,"ngClass","hidden",4,"ngFor","ngForOf"],["class","tab-content",3,"ngClass",4,"ngIf"],["role","presentation",1,"tab-header",3,"ngClass","hidden"],["href","javascript:void(0);","role","tab",1,"tab-heading",3,"tabindex","click","keydown"],[3,"ngClass",4,"ngIf"],[3,"textContent"],[3,"class","textContent",4,"ngIf"],[3,"ngClass"],[1,"tab-content",3,"ngClass"],[4,"ngIf"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(O),r.\u0275\u0275elementStart(0,"ul",0),r.\u0275\u0275template(1,P,5,13,"li",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(2,A,2,4,"div",2),r.\u0275\u0275template(3,E,3,5,"div",2)),2&e&&(r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(4,x,t.vertical,t.justified)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.panes),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","dynamic"!==t.type),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","dynamic"===t.type))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,c.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(S,[{type:t.Component,args:[{selector:"div[wmTabs]",exportAs:"wmTabs",providers:[n.provideAsWidgetRef(S)],template:'<ul class="nav nav-tabs" [ngClass]="{\'nav-stacked\': vertical, \'nav-justified\': justified}" role="tablist">\n    <li class="tab-header" *ngFor="let pane of panes; let i=index;" [attr.data-paneid]="pane.widgetId" [ngClass]="{\'active\': pane.isActive, \'disabled\': pane.disabled}"\n        [hidden]="!pane.show" role="presentation">\n        <a class="tab-heading" href="javascript:void(0);" [attr.aria-label]="pane.title" [attr.title]="pane.title" [tabindex]="pane.isActive ? \'0\' : \'-1\'"\n           [attr.aria-selected]="pane.isActive" role="tab" (click)="pane.select($event); pane.tabpaneHeaderClick($event, i);" (keydown)="onkeydown($event)">\n                <i [ngClass]="[\'app-icon\', pane.paneicon]" *ngIf="pane.paneicon"></i>\n                <span [textContent]="pane.title"></span>\n                <span *ngIf="pane.badgevalue" class="label label-{{pane.badgetype}}" [textContent]="pane.badgevalue"></span>\n        </a>\n    </li>\n</ul>\n<div class="tab-content" *ngIf="type !== \'dynamic\'" [ngClass]="{\'tab-stacked\': vertical, \'tab-justified\': justified}">\n    <ng-content ngProjectAs="div[wmTabPane]"></ng-content>\n</div>\n<div class="tab-content" *ngIf="type === \'dynamic\'" [ngClass]="{\'tab-stacked\': vertical, \'tab-justified\': justified}">\n    <div *ngIf="fieldDefs && !fieldDefs.length">{{nodatamessage}}</div>\n    <ng-content select="div[wmRepeatTemplate]"></ng-content>\n</div>\n'}]}],(function(){return[{type:r.Injector},{type:d.DynamicComponentRefProvider},{type:void 0,decorators:[{type:t.Attribute,args:["transition"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["tabsposition"]}]},{type:d.StatePersistence}]}),{panes:[{type:t.ContentChildren,args:[g]}]});const T=[g,S];class M{static{this.\u0275fac=function(e){return new(e||M)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:M})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(M,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...T],exports:[...T]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(M,{declarations:[g,S],imports:[i.CommonModule,n.WmComponentsModule],exports:[g,S]}),e.TabPaneComponent=g,e.TabsComponent=S,e.TabsModule=M})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.tile={}),e.ng.core,e.ng.common,e.wm.components.base)}(this,(function(e,t,i,n){"use strict";var a,s,o=(a=t,s=Object.create(null),a&&Object.keys(a).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(s,e,t.get?t:{enumerable:!0,get:function(){return a[e]}})}})),s.default=a,Object.freeze(s));const r={widgetType:"wm-tile",hostClass:"app-tile"};class l extends n.StylableComponent{static{this.initializeProps=void n.register("wm-tile",new Map([["animation",n.PROP_STRING],["class",n.PROP_STRING],["conditionalclass",n.PROP_ANY],["conditionalstyle",n.PROP_ANY],["name",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e){super(e,r),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}static{this.\u0275fac=function(e){return new(e||l)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:l,selectors:[["","wmTile",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(l)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(l,[{type:t.Directive,args:[{selector:"[wmTile]",providers:[n.provideAsWidgetRef(l)]}]}],(function(){return[{type:o.Injector}]}),null);const c=[l];class d{static{this.\u0275fac=function(e){return new(e||d)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:d})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(d,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...c],exports:[...c]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(d,{declarations:[l],imports:[i.CommonModule,n.WmComponentsModule],exports:[l]}),e.TileDirective=l,e.TileModule=d})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","@wm/components/base","@wm/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.wizard={}),e.ng.core,e.ng.common,e.ng.forms,e.wm.components.base,e.wm.core)}(this,(function(e,t,i,n,a,s){"use strict";function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var r=o(t),l=o(i),c=o(n),d=o(a);const p={widgetType:"wm-wizardstep",hostClass:"app-wizard-step-content"};class u extends a.BaseComponent{static{this.initializeProps=void a.register("wm-wizardstep",new Map([["class",a.PROP_STRING],["enableskip",{value:!1,...a.PROP_BOOLEAN}],["iconclass",{value:"wi wi-person",...a.PROP_STRING}],["doneiconclass",{value:"wi wi-done",...a.PROP_STRING}],["name",a.PROP_STRING],["show",{value:!0,...a.PROP_BOOLEAN}],["title",{value:"Step Title",...a.PROP_STRING}],["subtitle",a.PROP_STRING]]))}get isCurrent(){return this.active}get isValid(){return(this.ngForm.valid||this.ngForm.disabled)&&this.areEmbeddedFormsValid()}areEmbeddedFormsValid(){let e=this.getAllEmbeddedForms();for(let t of e)if(t.widget&&!t.widget.ngform.valid)return!1;return!0}getAllEmbeddedForms(){return this.$element.find("form")}get enableNext(){return!this.disablenext}get enableDone(){return!this.disabledone}get enablePrev(){return!this.disableprevious}set active(e){const t=this.active;this.status=1,e&&!t&&this.redrawChildren()}get active(){return 1===this.status}set done(e){e&&(this.status=3)}get done(){return 3===this.status}set disabled(e){e&&(this.status=2)}get disabled(){return 2===this.status}constructor(e,t){super(e,p),this.ngForm=t,this.isDone=!1,this.status=2,this.wizardComponent=this.inj.get(M)}invokeNextCB(e){return this.invokeEventCallback("next",{currentStep:this,stepIndex:e})}invokePrevCB(e){return this.invokeEventCallback("prev",{currentStep:this,stepIndex:e})}invokeSkipCB(e){return this.invokeEventCallback("skip",{currentStep:this,stepIndex:e})}redrawChildren(){setTimeout((()=>{this.reDrawableComponents&&this.reDrawableComponents.forEach((e=>e.redraw()));const e=this.wizardComponent.getCurrentStepIndex();this.invokeEventCallback("load",{stepIndex:e})}),100)}static{this.\u0275fac=function(e){return new(e||u)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(c.NgForm,2))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:u,selectors:[["form","wmWizardStep",""]],contentQueries:function(e,t,i){if(1&e&&r.\u0275\u0275contentQuery(i,a.RedrawableDirective,5),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.reDrawableComponents=e)}},hostVars:2,hostBindings:function(e,t){2&e&&r.\u0275\u0275classProp("current",t.isCurrent)},exportAs:["wmWizardStep"],features:[r.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(u),n.NgForm]),r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(u,[{type:t.Directive,args:[{selector:"form[wmWizardStep]",providers:[a.provideAsWidgetRef(u),n.NgForm],exportAs:"wmWizardStep"}]}],(function(){return[{type:r.Injector},{type:c.NgForm,decorators:[{type:t.Self}]}]}),{reDrawableComponents:[{type:t.ContentChildren,args:[a.RedrawableDirective,{descendants:!0}]}],isCurrent:[{type:t.HostBinding,args:["class.current"]}]});const h=["wmWizard",""];function m(e,t){1&e&&r.\u0275\u0275element(0,"span",22)}function g(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"span",23),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().index;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e+1)}}function f(e,t){1&e&&r.\u0275\u0275element(0,"i",24)}function v(e,t){1&e&&r.\u0275\u0275element(0,"i",25)}function b(e,t){if(1&e&&r.\u0275\u0275element(0,"i"),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275classMapInterpolate1("app-icon ",e.iconclass,"")}}function y(e,t){if(1&e&&r.\u0275\u0275element(0,"i"),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275classMapInterpolate1("app-icon ",e.doneiconclass,"")}}function w(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"span"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().index;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate("0"+(e+1))}}function P(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"span",26),r.\u0275\u0275element(1,"span",20),r.\u0275\u0275elementStart(2,"a",27),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(t.readMoreSubtitle())})),r.\u0275\u0275text(3,"more"),r.\u0275\u0275elementEnd()()}if(2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275attribute("title",e.subtitle),r.\u0275\u0275advance(1),r.\u0275\u0275property("textContent",e.subtitle)}}const C=function(e,t,i){return{active:e,current:t,disabled:i}},A=function(e){return{"title-center-align":e}};function _(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li",10),r.\u0275\u0275listener("click",(function(t){const i=r.\u0275\u0275restoreView(e).$implicit,n=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(n.onWizardHeaderClick(t,i))})),r.\u0275\u0275elementStart(1,"a",11),r.\u0275\u0275template(2,m,1,0,"span",12),r.\u0275\u0275elementStart(3,"span",13),r.\u0275\u0275template(4,g,2,1,"span",14),r.\u0275\u0275template(5,f,1,0,"i",15),r.\u0275\u0275template(6,v,1,0,"i",16),r.\u0275\u0275template(7,b,1,3,"i",17),r.\u0275\u0275template(8,y,1,3,"i",17),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"span",18),r.\u0275\u0275template(10,w,2,1,"span",19),r.\u0275\u0275element(11,"span",20),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(12,P,4,2,"span",21),r.\u0275\u0275elementEnd()()}if(2&e){const e=t.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("hidden",!e.show)("ngClass",r.\u0275\u0275pureFunction3(14,C,e.done,e.active,e.disabled)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(18,A,i.class&&i.class.includes("classic")&&!e.subtitle)),r.\u0275\u0275attribute("aria-label",e.title)("title",e.title),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.class&&i.class.includes("classic")),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.class&&i.class.includes("number")&&!e.isDone),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.class&&(i.class.includes("dottedstepper")||i.class.includes("text-inline")&&!i.class.includes("iconstepper"))&&!e.isDone),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.class&&(i.class.includes("dottedstepper")||i.class.includes("number"))&&e.isDone),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.class&&i.class.includes("iconstepper")&&(e.iconclass&&!e.isDone||e.iconclass&&e.isDone&&""===e.doneiconclass)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.doneiconclass&&e.isDone&&i.class&&i.class.includes("iconstepper")),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.class&&i.class.includes("text-inline")),r.\u0275\u0275advance(1),r.\u0275\u0275property("textContent",e.title),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.subtitle)}}function I(e,t){1&e&&r.\u0275\u0275element(0,"p",28)}function E(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",29),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(t.skip())})),r.\u0275\u0275text(1,"Skip \xbb"),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275propertyInterpolate1("name","skipStep_",e.name,"")}}function O(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",30),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(t.cancel())})),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275propertyInterpolate1("name","cancelBtn_",e.name,""),r.\u0275\u0275property("title",e.cancelbtnlabel)("textContent",e.cancelbtnlabel)}}function x(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",31),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(t.prev())})),r.\u0275\u0275element(1,"i",32)(2,"span",33),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275propertyInterpolate1("name","previousBtn_",e.name,""),r.\u0275\u0275property("disabled",!e.enablePrev),r.\u0275\u0275advance(2),r.\u0275\u0275property("textContent",e.previousbtnlabel)}}function R(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",34),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(t.next())})),r.\u0275\u0275element(1,"span",33)(2,"i",35),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275propertyInterpolate1("name","nextBtn_",e.name,""),r.\u0275\u0275property("disabled",!e.enableNext),r.\u0275\u0275advance(1),r.\u0275\u0275property("textContent",e.nextbtnlabel)}}function D(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",36),r.\u0275\u0275listener("click",(function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(t.done())})),r.\u0275\u0275element(1,"i",37)(2,"span",33),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275propertyInterpolate1("name","doneBtn_",e.name,""),r.\u0275\u0275property("disabled",!e.enableDone),r.\u0275\u0275advance(2),r.\u0275\u0275property("textContent",e.donebtnlabel)}}const S=["*"],T={widgetType:"wm-wizard",hostClass:"app-wizard panel clearfix"};class M extends a.StylableComponent{static{this.initializeProps=void a.register("wm-wizard",new Map([["actionsalignment",{value:"right",...a.PROP_STRING}],["cancelable",{value:!0,...a.PROP_BOOLEAN}],["enablenext",{value:!1,...a.PROP_BOOLEAN}],["cancelbtnlabel",{value:"Cancel",...a.PROP_STRING}],["class",{value:"classic",...a.PROP_STRING}],["defaultstep",{value:"none",...a.PROP_STRING}],["donebtnlabel",{value:"Done",...a.PROP_STRING}],["name",a.PROP_STRING],["nextbtnlabel",{value:"Next",...a.PROP_STRING}],["previousbtnlabel",{value:"Previous",...a.PROP_STRING}],["show",{value:!0,...a.PROP_BOOLEAN}],["stepstyle",{value:"auto",...a.PROP_STRING}]]))}get hasPrevStep(){return!this.isFirstStep(this.currentStep)}get hasNextStep(){return!this.isLastStep(this.currentStep)}get showDoneBtn(){if(this.currentStep)return!this.hasNextStep&&this.currentStep.enableDone}get enablePrev(){if(this.currentStep)return this.currentStep.enablePrev}get enableNext(){if(this.currentStep)return!!this.enablenext||this.currentStep.enableNext&&this.currentStep.isValid}get enableDone(){if(this.currentStep)return this.currentStep.enableDone&&this.currentStep.isValid}constructor(e){let t=s.noop;super(e,T,new Promise((e=>t=e))),a.styler(this.nativeElement,this,a.APPLY_STYLES_TYPE.SHELL),this.promiseResolverFn=t,this.message={caption:"",type:""}}getNextValidStepFormIndex(e){for(let t=e;t<this.steps.length;t++){const e=this.getStepRefByIndex(t);if(e.show)return e}}getPreviousValidStepFormIndex(e){for(let t=e;t>=0;t--){const e=this.getStepRefByIndex(t);if(e.show)return e}}getCurrentStepIndex(){return this.getStepIndexByRef(this.currentStep)}getStepRefByIndex(e){return this.steps.toArray()[e]}getStepIndexByRef(e){return this.steps.toArray().indexOf(e)}getStepRefByName(e){return this.steps.find((t=>t.name===e))}setDefaultStep(e){if(e&&e.show){this.currentStep=e,e.active=!0,e.isInitialized=!0;let t=this.getStepIndexByRef(e)-1;for(;t>=0;){const e=this.getStepRefByIndex(t);e.done=!0,e.isInitialized=!0,t--}}else(e=this.getNextValidStepFormIndex(0))&&this.setDefaultStep(e);this.addMoreText()}onWizardHeaderClick(e,t){t.done&&(this.steps.forEach(((e,i)=>{i<this.getStepIndexByRef(t)?(e.done=!0,e.isDone=!0):(e.disabled=!0,e.isDone=!1)})),this.currentStep=t,this.currentStep.active=!0,this.addMoreText())}next(e="next"){const t=this.currentStep,i=this.getCurrentStepIndex();if("skip"===e){if(!1===t.invokeSkipCB(i))return;this.extendNextFn(t,i)}else if(this.currentStep.isValid&&"next"===e){if(!1===t.invokeNextCB(i))return;this.extendNextFn(t,i)}else this.enablenext&&!this.currentStep.isValid&&Array.from(this.currentStep.getAllEmbeddedForms())?.forEach((e=>{e.widget.highlightInvalidFields()}))}extendNextFn(e,t){let i;i=this.getNextValidStepFormIndex(t+1),i.isInitialized=!0,i&&(e.isDone=!0,e.done=!0,i.active=!0,this.currentStep=i),this.addMoreText()}prev(){const e=this.currentStep,t=this.getCurrentStepIndex();let i;!1!==e.invokePrevCB(t)&&(i=this.getPreviousValidStepFormIndex(t-1),i&&(e.isDone=!1,e.disabled=!0,i.active=!0,this.currentStep=i),this.addMoreText())}skip(){this.next("skip")}done(){this.currentStep.isDone=!0,this.invokeEventCallback("done",{steps:this.steps.toArray()})}cancel(){this.invokeEventCallback("cancel",{steps:this.steps.toArray()})}addMoreText(){setTimeout((()=>{if($(window).width()<768){$(".app-wizard-step.current .subtitle-wrapper .step-title").css({height:"auto",display:"block"});var e=$(".app-wizard-step.current .subtitle-wrapper .step-title").height();$(".read_more").css("display","none"),$(".current .subtitle-wrapper").removeClass("readmore_subtitle"),e>44&&($(".app-wizard-step.current .subtitle-wrapper .step-title").css({height:"44px",display:"-webkit-box"}),$(".current .read_more").css("display","block"),$(".active .read_more").css("display","none"),$(".disable .read_more").css("display","none"),$(".app-wizard-step>a").css("height","100px"))}}))}readMoreSubtitle(){$(".current .subtitle-wrapper").addClass("readmore_subtitle"),$(".current .read_more").css("display","none"),$(document).on("mouseup",(function(e){var t=$(".subtitle-wrapper");t.is(e.target)||0!==t.has(e.target).length||($(".current .subtitle-wrapper").removeClass("readmore_subtitle"),$(".current .read_more").css("display","block"),$(document).off("mouseup"))}))}isFirstStep(e){return this.steps.first===e}isLastStep(e){return this.steps.last===e}onPropertyChange(e,t,i){"stepstyle"===e?this.stepClass="justified"===t?"nav-justified":"":"defaultstep"===e?this.setDefaultStep(this.getStepRefByName(t)):super.onPropertyChange(e,t,i)}ngAfterContentInit(){super.ngAfterContentInit(),this.promiseResolverFn()}ngAfterViewInit(){super.ngAfterViewInit(),a.styler(this.nativeElement.querySelector(".panel-body"),this,a.APPLY_STYLES_TYPE.INNER_SHELL),setTimeout((()=>{$(window).width()<768&&$(".app-wizard").removeClass("vertical")}))}static{this.\u0275fac=function(e){return new(e||M)(r.\u0275\u0275directiveInject(r.Injector))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:M,selectors:[["div","wmWizard",""]],contentQueries:function(e,t,i){if(1&e&&r.\u0275\u0275contentQuery(i,u,4),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.steps=e)}},features:[r.\u0275\u0275ProvidersFeature([a.provideAsWidgetRef(M)]),r.\u0275\u0275InheritDefinitionFeature],attrs:h,ngContentSelectors:S,decls:13,vars:13,consts:[["role","tab",1,"app-wizard-heading"],["class","app-wizard-step",3,"hidden","ngClass","click",4,"ngFor","ngForOf"],["role","tabpanel",1,"app-wizard-body","panel-body"],["wmMessage","","caption.bind","message.caption","type.bind","message.type",4,"ngIf"],["class","app-wizard-skip","title","Skip step",3,"name","click",4,"ngIf"],[1,"app-wizard-actions-right"],["type","button","class","btn app-button btn-default",3,"name","title","textContent","click",4,"ngIf"],["type","button","class","btn app-button btn-default",3,"name","disabled","click",4,"ngIf"],["type","button","class","btn app-button btn-primary",3,"name","disabled","click",4,"ngIf"],["type","button","class","btn app-button btn-success",3,"name","disabled","click",4,"ngIf"],[1,"app-wizard-step",3,"hidden","ngClass","click"],["href","javascript:void(0)",3,"ngClass"],["class","arrow",4,"ngIf"],[1,"wizard-step-number"],["class","count",4,"ngIf"],["class","dottedstepper",4,"ngIf"],["class","app-icon wi wi-done",4,"ngIf"],[3,"class",4,"ngIf"],[1,"title-wrapper"],[4,"ngIf"],[1,"step-title",3,"textContent"],["class","subtitle-wrapper",4,"ngIf"],[1,"arrow"],[1,"count"],[1,"dottedstepper"],[1,"app-icon","wi","wi-done"],[1,"subtitle-wrapper"],[1,"read_more",2,"display","none",3,"click"],["wmMessage","","caption.bind","message.caption","type.bind","message.type"],["title","Skip step",1,"app-wizard-skip",3,"name","click"],["type","button",1,"btn","app-button","btn-default",3,"name","title","textContent","click"],["type","button",1,"btn","app-button","btn-default",3,"name","disabled","click"],[1,"app-icon","wi","wi-chevron-left"],[1,"btn-caption",3,"textContent"],["type","button",1,"btn","app-button","btn-primary",3,"name","disabled","click"],[1,"app-icon","wi","wi-chevron-right"],["type","button",1,"btn","app-button","btn-success",3,"name","disabled","click"],[1,"app-icon","wm-sl-l","sl-check"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0)(1,"ul"),r.\u0275\u0275template(2,_,13,20,"li",1),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(3,"div",2),r.\u0275\u0275template(4,I,1,0,"p",3),r.\u0275\u0275projection(5,0,["ngProjectAs","form[wmWizardStep]",5,["form","wmWizardStep",""]]),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div"),r.\u0275\u0275template(7,E,2,1,"a",4),r.\u0275\u0275elementStart(8,"div",5),r.\u0275\u0275template(9,O,1,3,"button",6),r.\u0275\u0275template(10,x,3,3,"button",7),r.\u0275\u0275template(11,R,3,3,"button",8),r.\u0275\u0275template(12,D,3,3,"button",9),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275classMapInterpolate1("app-wizard-steps nav nav-pills ",t.stepClass,""),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.steps),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.message.caption),r.\u0275\u0275advance(2),r.\u0275\u0275classMapInterpolate1("app-wizard-actions panel-footer ",t.actionsalignment,""),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",null==t.currentStep?null:t.currentStep.enableskip),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.cancelable),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.hasPrevStep),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.hasNextStep),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.showDoneBtn))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,d.MessageComponent,d.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(M,[{type:t.Component,args:[{selector:"div[wmWizard]",providers:[a.provideAsWidgetRef(M)],template:'<div class="app-wizard-heading" role="tab">\n    <ul class="app-wizard-steps nav nav-pills {{stepClass}}">\n        <li class="app-wizard-step" *ngFor="let step of steps; let i = index" [hidden]="!step.show"\n            [ngClass]="{active: step.done, current: step.active, disabled: step.disabled}"\n            (click)="onWizardHeaderClick($event, step)">\n            <a href="javascript:void(0)" [attr.aria-label]="step.title" [attr.title]="step.title" [ngClass]="{\'title-center-align\':class && class.includes(\'classic\') && !step.subtitle}">\n                <span class="arrow" *ngIf="class && class.includes(\'classic\')"></span>\n                <span class="wizard-step-number">\n                    <span class="count" *ngIf="class && class.includes(\'number\') && !step.isDone">{{i+1}}</span>\n                    <i class="dottedstepper" *ngIf="class && (class.includes(\'dottedstepper\') || class.includes(\'text-inline\') && !class.includes(\'iconstepper\')) && !step.isDone"></i>\n                    <i class="app-icon wi wi-done" *ngIf="class && (class.includes(\'dottedstepper\') || class.includes(\'number\')) && step.isDone"></i>\n                    <i class="app-icon {{step.iconclass}}" *ngIf="(class && class.includes(\'iconstepper\')) && ((step.iconclass && !step.isDone) || (step.iconclass && step.isDone && step.doneiconclass ===\'\'))"></i>\n                    <i class="app-icon {{step.doneiconclass}}" *ngIf="step.doneiconclass && step.isDone && (class && class.includes(\'iconstepper\'))"></i>\n                </span>\n                <span class="title-wrapper">\n                    <span *ngIf="class && class.includes(\'text-inline\')">{{\'0\' + (i+1)}}</span>\n                    <span class="step-title" [textContent]="step.title"></span>\n                </span>\n                <span class="subtitle-wrapper" [attr.title]="step.subtitle" *ngIf="step.subtitle">\n                    <span class="step-title" [textContent]="step.subtitle"></span>\n                    <a class="read_more" (click)="readMoreSubtitle()" style="display:none">more</a>\n                </span>\n            </a>    \n        </li>\n    </ul>\n</div>\n<div class="app-wizard-body panel-body" role="tabpanel">\n    <p wmMessage *ngIf="message.caption" caption.bind="message.caption" type.bind="message.type"></p>\n    <ng-content ngProjectAs="form[wmWizardStep]"></ng-content>\n</div>\n<div class="app-wizard-actions panel-footer {{actionsalignment}}">\n    <a class="app-wizard-skip" name="skipStep_{{name}}" *ngIf="currentStep?.enableskip" title="Skip step" (click)="skip()">Skip &raquo;</a>\n    <div class="app-wizard-actions-right">\n        <button type="button" name="cancelBtn_{{name}}" class="btn app-button btn-default" *ngIf="cancelable"\n                (click)="cancel()" [title]="cancelbtnlabel" [textContent]="cancelbtnlabel"></button>\n        <button type="button" name="previousBtn_{{name}}" class="btn app-button btn-default"\n                *ngIf="hasPrevStep" (click)="prev()" [disabled]="!enablePrev">\n            <i class="app-icon wi wi-chevron-left"></i>\n            <span class="btn-caption" [textContent]="previousbtnlabel"></span>\n        </button>\n        <button type="button" name="nextBtn_{{name}}" class="btn app-button btn-primary"\n                *ngIf="hasNextStep" (click)="next()" [disabled]="!enableNext">\n            <span class="btn-caption" [textContent]="nextbtnlabel"></span>\n            <i class="app-icon wi wi-chevron-right"></i>\n        </button>\n        <button type="button" name="doneBtn_{{name}}" class="btn app-button btn-success"\n                *ngIf="showDoneBtn" (click)="done()"\n                [disabled]="!enableDone">\n            <i class="app-icon wm-sl-l sl-check"></i>\n            <span class="btn-caption" [textContent]="donebtnlabel"></span>\n        </button>\n    </div>\n</div>\n'}]}],(function(){return[{type:r.Injector}]}),{steps:[{type:t.ContentChildren,args:[u]}]});const N=[u,M];class k{static{this.\u0275fac=function(e){return new(e||k)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:k})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[i.CommonModule,a.WmComponentsModule,n.FormsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(k,[{type:t.NgModule,args:[{imports:[i.CommonModule,a.WmComponentsModule,n.FormsModule],declarations:[...N],exports:[...N]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(k,{declarations:[u,M],imports:[i.CommonModule,a.WmComponentsModule,n.FormsModule],exports:[u,M]}),e.WizardComponent=M,e.WizardModule=k,e.WizardStepDirective=u})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("ngx-bootstrap/carousel"),require("@wm/components/base"),require("@swipey")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","ngx-bootstrap/carousel","@wm/components/base","@swipey"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.advanced=e.wm.components.advanced||{},e.wm.components.advanced.carousel={}),e.ng.core,e.ng.common,e.carousel,e.wm.components.base,e.swipey)}(this,(function(e,t,i,n,a,s){"use strict";function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var r=o(t),l=o(n);class c extends s.SwipeAnimation{constructor(e,t,i){super(),this.carousel=e,this.interval=t,this.ngZone=i,this._activeIndex=0,this._animationPaused=!1,this._pauseCaroselTill=0,this._oldIndex=0;const n=this;this._$el=$(this.carousel.getNativeElement()).find(">.carousel"),this.init(this._$el.find(">.carousel-inner")),this._items=this._$el.find(">.carousel-inner >.carousel-item"),this._indicators=this._$el.find(">.carousel-indicators"),this._indicators.find("li").each((function(e){$(this).on("click",(()=>{n._activeIndex=e,n.setActiveItem(),n.carousel.onChangeCB(n._activeIndex,n._oldIndex),n._oldIndex=n._activeIndex}))})),this._$el.find(">.left.carousel-control").on("click",(()=>{this._swiping||(this._pauseCaroselTill=Date.now()+this.interval,this.goToUpper())})),this._$el.find(">.right.carousel-control").on("click",(()=>{this._swiping||(this._pauseCaroselTill=Date.now()+this.interval,this.goToLower())})),this.setActiveItem(),this.interval&&this.start(),this._$el.find(">.left.carousel-control").append('<span class="sr-only">Previous</span>')}bounds(){return this._width=this._items.width(),this._swiping=!0,{lower:-this._width,center:0,upper:this._width}}context(){return{w:this._width}}animation(){return[{target:this.getTarget.bind(this),css:{transform:"translate3d(${{ (($D + $d) / w) * 100 + '%'}}, 0, 0)","-webkit-transform":"translate3d(${{ (($D + $d) / w) * 100 + '%'}}, 0, 0)"}}]}onUpper(){this.resetTransition(),this._activeIndex-=1,this.setActiveItem(),this._swiping=!1}onLower(){this.resetTransition(),this._activeIndex+=1,this.setActiveItem(),this._swiping=!1}onAnimation(){const e=(this._items.length+this._activeIndex)%this._items.length;this.carousel.onChangeCB(e,this._oldIndex),this._oldIndex=e;const t=_.findIndex(this._items,this._$el.find(">.carousel-inner >.carousel-item.active")[0]);this._$el.find(">.left.carousel-control").attr("aria-label",(0===t?this._items.length:t)+" of "+this._items.length),this._$el.find(">.right.carousel-control").attr("aria-label",(t===this._items.length-1?1:t+2)+" of "+this._items.length)}start(){this.ngZone.runOutsideAngular((()=>{this._intervalId=setInterval((()=>{!this._swiping&&this._pauseCaroselTill<Date.now()&&this.goToLower(600)}),this.interval)}))}pause(){this._animationPaused=!0,this._intervalId||this.start()}resume(){this._animationPaused=!1}stop(){this._intervalId&&(clearInterval(this._intervalId),this._intervalId=0)}threshold(){return 5}getTarget(){const e=this._items.length,t=this._items.eq((e+this._activeIndex)%e),i=this._items.eq((e+this._activeIndex-1)%e),n=this._items.eq((e+this._activeIndex+1)%e);return t.add(n).add(i)}resetTransition(){this.getTarget().css({"-webkit-transition":"none","-webkit-transform":"",transition:"none",transform:""})}setActiveItem(){const e=this._items,t=this._activeIndex-1,i=this._activeIndex+1;1!==e.length?(this._indicators.find(">.active").removeClass("active"),this._indicators.find("> li").eq((e.length+this._activeIndex)%e.length).addClass("active"),e.filter(".active").removeClass("active"),e.addClass("left-item"),e.eq((e.length+t)%e.length).addClass("left-item").removeClass("right-item"),e.eq((e.length+this._activeIndex)%e.length).removeClass("left-item right-item").addClass("active"),e.eq((e.length+i)%e.length).addClass("right-item").removeClass("left-item")):e.eq(0).removeClass("left-item right-item")}}const d={widgetType:"wm-carousel"},p={indicators:"hide-navs",navs:"hide-indicators",none:"hide-both"};class u extends a.StylableComponent{static{this.initializeProps=void a.register("wm-carousel",new Map([["animation",{value:"auto",...a.PROP_STRING}],["animationinterval",{value:3,...a.PROP_NUMBER}],["controls",{value:"both",...a.PROP_STRING}],["dataset",a.PROP_ANY],["name",a.PROP_STRING],["nodatamessage",{value:"No Data Found",...a.PROP_STRING}],["show",a.PROP_BOOLEAN]]))}constructor(e,t,i){super(t,d),this.component=e,this.ngZone=i,a.styler(this.nativeElement,this)}onDataChange(e){this.fieldDefs=a.createArrayFrom(e)}stopAnimation(){this.animator&&this.animator.stop()}startAnimation(){this.animator&&(this.animator.interval=1e3*this.animationinterval,this.animator.start())}onSlidesRender(e){this.fieldDefs&&this.fieldDefs.length&&(this.currentslide=this.fieldDefs[0]),e.length&&setTimeout((()=>{this.animator=new c(this,this.interval,this.ngZone)}),50)}setupHandlers(){this.slides.changes.subscribe((e=>{this.triggerAnimation(e)})),this.slides.setDirty()}onChangeCB(e,t){this.currentslide=this.fieldDefs&&this.fieldDefs[e],this.previousslide=this.fieldDefs&&this.fieldDefs[t],this.invokeEventCallback("change",{newIndex:e,oldIndex:t})}ngAfterContentInit(){this.triggerAnimation(this.slides),this.setupHandlers()}ngOnDestroy(){this.stopAnimation(),super.ngOnDestroy()}setanimationinterval(){this.interval="auto"===this.animation?1e3*this.animationinterval:0}triggerAnimation(e){this.stopAnimation(),this.onSlidesRender(e)}ngOnInit(){super.ngOnInit(),this.setanimationinterval()}onPropertyChange(e,t,i){"dataset"===e?this.onDataChange(t):"controls"===e?this.navigationClass=p[this.controls]:"animation"===e||"animationinterval"===e?("animationinterval"===e&&(this.stopAnimation(),this.setanimationinterval()),"none"===this.animation?this.stopAnimation():this.startAnimation()):super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||u)(r.\u0275\u0275directiveInject(l.CarouselComponent),r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(r.NgZone))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:u,selectors:[["","wmCarousel",""]],contentQueries:function(e,t,i){if(1&e&&r.\u0275\u0275contentQuery(i,n.SlideComponent,4),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.slides=e)}},exportAs:["wmCarousel"],features:[r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(u,[{type:t.Directive,args:[{selector:"[wmCarousel]",exportAs:"wmCarousel"}]}],(function(){return[{type:l.CarouselComponent},{type:r.Injector},{type:r.NgZone}]}),{slides:[{type:t.ContentChildren,args:[n.SlideComponent]}]});const h={widgetType:"wm-carousel-template",hostClass:"app-carousel-item"};class m extends a.StylableComponent{static{this.initializeProps=void a.register("wm-carousel-template",new Map([["show",a.PROP_BOOLEAN]]))}constructor(e){super(e,h),a.styler(this.nativeElement,this)}static{this.\u0275fac=function(e){return new(e||m)(r.\u0275\u0275directiveInject(r.Injector))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:m,selectors:[["","wmCarouselTemplate",""]],features:[r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(m,[{type:t.Directive,args:[{selector:"[wmCarouselTemplate]"}]}],(function(){return[{type:r.Injector}]}),null);const g=[u,m];class f{static{this.\u0275fac=function(e){return new(e||f)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:f})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[i.CommonModule,n.CarouselModule,a.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(f,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.CarouselModule,a.WmComponentsModule],declarations:[...g],exports:[...g]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(f,{declarations:[u,m],imports:[i.CommonModule,n.CarouselModule,a.WmComponentsModule],exports:[u,m]}),e.CarouselAnimator=c,e.CarouselDirective=u,e.CarouselModule=f,e.CarouselTemplateDirective=m})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.advanced=e.wm.components.advanced||{},e.wm.components.advanced.marquee={}),e.ng.core,e.ng.common,e.wm.components.base)}(this,(function(e,t,i,n){"use strict";var a,s,o=(a=t,s=Object.create(null),a&&Object.keys(a).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(s,e,t.get?t:{enumerable:!0,get:function(){return a[e]}})}})),s.default=a,Object.freeze(s));const r={widgetType:"wm-marquee",hostClass:"app-marquee app-container"};class l extends n.StylableComponent{static{this.initializeProps=void n.register("wm-marquee",new Map([["class",n.PROP_STRING],["direction",n.PROP_STRING],["name",n.PROP_STRING],["scrollamount",n.PROP_NUMBER],["scrolldelay",n.PROP_NUMBER],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e){super(e,r),n.styler(this.nativeElement,this)}static{this.\u0275fac=function(e){return new(e||l)(o.\u0275\u0275directiveInject(o.Injector))}}static{this.\u0275dir=o.\u0275\u0275defineDirective({type:l,selectors:[["","wmMarquee",""]],features:[o.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(l)]),o.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(l,[{type:t.Directive,args:[{selector:"[wmMarquee]",providers:[n.provideAsWidgetRef(l)]}]}],(function(){return[{type:o.Injector}]}),null);const c=[l];class d{static{this.\u0275fac=function(e){return new(e||d)}}static{this.\u0275mod=o.\u0275\u0275defineNgModule({type:d})}static{this.\u0275inj=o.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&o.\u0275setClassMetadata(d,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...c],exports:[...c]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&o.\u0275\u0275setNgModuleScope(d,{declarations:[l],imports:[i.CommonModule,n.WmComponentsModule],exports:[l]}),e.MarqueeDirective=l,e.MarqueeModule=d})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/components/data/form"),require("@wm/components/input")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/components/data/form","@wm/components/input"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.advanced=e.wm.components.advanced||{},e.wm.components.advanced.login={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.components.data.form,e.wm.components.input)}(this,(function(e,t,i,n,a,s){"use strict";function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var r=o(t),l=o(n);const c=["wmLogin",""],d=["*"],p={widgetType:"wm-login",hostClass:"app-login"};class u extends n.StylableComponent{static{this.initializeProps=void n.register("wm-login",new Map([["errormessage",n.PROP_STRING],["eventsource",n.PROP_ANY]]))}constructor(e){super(e,p),n.styler(this.nativeElement,this,n.APPLY_STYLES_TYPE.CONTAINER)}onSuccessCB(){this.invokeEventCallback("success")}onErrorCB(e){this.loginMessage={type:"error",caption:this.errormessage||e||this.appLocale.LABEL_INVALID_USERNAME_OR_PASSWORD,show:!0},this.messageCmp.showMessage(this.loginMessage.caption,this.loginMessage.type),this.invokeEventCallback("error")}getLoginDetails(){return this.formCmp.dataoutput}doLogin(){this.eventsource?this.formCmp.ngform.valid&&this.eventsource.invoke({loginInfo:this.getLoginDetails()},this.onSuccessCB.bind(this),this.onErrorCB.bind(this)):console.warn('Default action "loginAction" does not exist. Either create the Action or assign an event to onSubmit of the login widget')}initLoginButtonActions(){this.loginBtnCmp.getNativeElement().addEventListener("click",(e=>{this.nativeElement.hasAttribute("submit.event")||this.loginBtnCmp.getNativeElement().hasAttribute("click.event")||this.loginBtnCmp.getNativeElement().hasAttribute("tap.event")||this.doLogin()}))}ngAfterViewInit(){super.ngAfterViewInit(),this.formCmp.getNativeElement().addEventListener("submit",(e=>e.preventDefault())),this.buttonComponents.forEach((e=>{if("loginButton"===e.getNativeElement().getAttribute("name")||_.includes(e.getNativeElement().classList,"app-login-button")){if(this.loginBtnCmp)return;this.loginBtnCmp=e,this.initLoginButtonActions()}}))}static{this.\u0275fac=function(e){return new(e||u)(r.\u0275\u0275directiveInject(r.Injector))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:u,selectors:[["div","wmLogin",""]],contentQueries:function(e,t,i){if(1&e&&(r.\u0275\u0275contentQuery(i,a.FormComponent,5),r.\u0275\u0275contentQuery(i,s.ButtonComponent,5)),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.formCmp=e.first),r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.buttonComponents=e)}},viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(n.MessageComponent,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.messageCmp=e.first)}},features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(u)]),r.\u0275\u0275InheritDefinitionFeature],attrs:c,ngContentSelectors:d,decls:3,vars:0,consts:[["wmMessage","","show.bind","loginMessage.show","caption.bind","loginMessage.caption","type.bind","loginMessage.type",1,"app-login-message"],["message",""]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275element(0,"p",0,1),r.\u0275\u0275projection(2))},dependencies:[l.MessageComponent],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(u,[{type:t.Component,args:[{selector:"div[wmLogin]",providers:[n.provideAsWidgetRef(u)],template:'<p wmMessage class="app-login-message" #message show.bind="loginMessage.show" caption.bind="loginMessage.caption" type.bind="loginMessage.type"></p>\n<ng-content></ng-content>\n'}]}],(function(){return[{type:r.Injector}]}),{formCmp:[{type:t.ContentChild,args:[a.FormComponent]}],buttonComponents:[{type:t.ContentChildren,args:[s.ButtonComponent,{descendants:!0}]}],messageCmp:[{type:t.ViewChild,args:[n.MessageComponent,{static:!0}]}]});const h=[u];class m{static{this.\u0275fac=function(e){return new(e||m)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:m})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(m,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...h],exports:[...h]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(m,{declarations:[u],imports:[i.CommonModule,n.WmComponentsModule],exports:[u]}),e.LoginComponent=u,e.LoginModule=m})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@wm/components/base"),require("@wm/core"),require("rxjs")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@wm/components/base","@wm/core","rxjs"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.advanced=e.wm.components.advanced||{},e.wm.components.advanced.custom={}),e.ng.core,e.ng.common,e.wm.components.base,e.wm.core,e.rxjs)}(this,(function(e,t,i,n,a,s){"use strict";function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var r=o(t),l=o(a);const c={widgetType:"wm-custom-widget",hostClass:"app-html-container"};class d extends n.StylableComponent{static{this.initializeProps=void n.register("wm-custom-widget",new Map([["class",n.PROP_STRING],["hint",n.PROP_STRING],["name",n.PROP_STRING],["widgetname",n.PROP_STRING],["show",{value:!0,...n.PROP_BOOLEAN}]]))}constructor(e,t){super(e,c),this.prop={},t&&a.setCSS(this.nativeElement,"overflow","auto"),n.styler(this.nativeElement,this)}ngOnInit(){super.ngOnInit();const e=this.nativeElement.attributes;for(let t,i,n=0;n<e.length;n++)t=e[n].nodeName,i=e[n].nodeValue,t.startsWith("prop-")&&(t=t.replace("prop-",""),this.prop[t]=i)}onPropertyChange(e,t,i){super.onPropertyChange(e,t,i)}static{this.\u0275fac=function(e){return new(e||d)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275injectAttribute("height"))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:d,selectors:[["","wmWidgetContainer",""]],exportAs:["wmWidgetContainer"],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(d)]),r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(d,[{type:t.Directive,args:[{selector:"[wmWidgetContainer]",providers:[n.provideAsWidgetRef(d)],exportAs:"wmWidgetContainer"}]}],(function(){return[{type:r.Injector},{type:void 0,decorators:[{type:t.Attribute,args:["height"]}]}]}),null);class p{constructor(e){this.widgetRef=e,this.widgetRef.props={},this.widgetRef.pageParams=this.widgetRef.props,this.widgetRef.params$=new s.Subject}registerParams(e,t,i,n){this.widgetRef.props[e]=t,!t&&i?this.widgetRef.registerDestroyListener(a.$watch(i,this.widgetRef.getViewParent(),_.get(this.widgetRef,"context"),(t=>{this.widgetRef.props[e]=t,this.widgetRef.params$.next()}))):this.widgetRef.params$.next()}static{this.\u0275fac=function(e){return new(e||p)(r.\u0275\u0275directiveInject(n.WidgetRef,2))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:p,selectors:[["","customWidgetContainer",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(p,[{type:t.Directive,args:[{selector:"[customWidgetContainer]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[n.WidgetRef]}]}]}),null);class u{constructor(e,t,i){this.bindValue=e,this.type=t,this.customWidgetPropsProvider=i}ngOnInit(){this.customWidgetPropsProvider.registerParams(this.name,this.value,this.bindValue,this.type)}static{this.\u0275fac=function(e){return new(e||u)(r.\u0275\u0275injectAttribute("value.bind"),r.\u0275\u0275injectAttribute("type"),r.\u0275\u0275directiveInject(p))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:u,selectors:[["","wmProp",""]],inputs:{name:"name",value:"value"}})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(u,[{type:t.Directive,args:[{selector:"[wmProp]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Attribute,args:["value.bind"]}]},{type:void 0,decorators:[{type:t.Attribute,args:["type"]}]},{type:p}]}),{name:[{type:t.Input}],value:[{type:t.Input}]});const h={widgetType:"wm-custom-widget-container",hostClass:"app-custom-widget-container clearfix"};class m extends n.StylableComponent{static{this.initializeProps=void n.register("wm-custom-widget-container",new Map([["name",n.PROP_STRING]]))}constructor(e,t){super(e,h),this.viewport=t,this.registerDestroyListener(this.viewport.subscribe("resize",(e=>this.callback("resize",e)))),this.registerDestroyListener(this.viewport.subscribe("orientationchange",(e=>this.callback("orientationchange",e))))}callback(e,t){t=_.assign({widget:this},t),this.invokeEventCallback(e,t)}ngOnAttach(){this.callback("attach")}ngOnDetach(){this.callback("detach")}ngOnDestroy(){this.callback("destroy"),super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||m)(r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(l.Viewport))}}static{this.\u0275dir=r.\u0275\u0275defineDirective({type:m,selectors:[["","wmCustomWidget",""]],features:[r.\u0275\u0275ProvidersFeature([n.provideAsWidgetRef(m)]),r.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(m,[{type:t.Directive,args:[{selector:"[wmCustomWidget]",providers:[n.provideAsWidgetRef(m)]}]}],(function(){return[{type:r.Injector},{type:l.Viewport}]}),null);const g=[d,u,p,m];class f{static{this.\u0275fac=function(e){return new(e||f)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:f})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[i.CommonModule,n.WmComponentsModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&r.\u0275setClassMetadata(f,[{type:t.NgModule,args:[{imports:[i.CommonModule,n.WmComponentsModule],declarations:[...g],exports:[...g]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&r.\u0275\u0275setNgModuleScope(f,{declarations:[d,u,p,m],imports:[i.CommonModule,n.WmComponentsModule],exports:[d,u,p,m]}),e.CustomModule=f,e.CustomWidgetContainerDirective=d,e.CustomWidgetDirective=m,e.CustomWidgetPropDirective=u,e.CustomWidgetPropHandlerDirective=p})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@wavemaker/variables"),require("@wm/core"),require("angular2-websocket/angular2-websocket"),require("@metrichor/jmespath"),require("@angular/core"),require("@angular/router"),require("@wm/oAuth"),require("@wm/security"),require("@angular/common"),require("@angular/common/http"),require("ngx-toastr"),require("@wm/http")):"function"==typeof define&&define.amd?define(["exports","@wavemaker/variables","@wm/core","angular2-websocket/angular2-websocket","@metrichor/jmespath","@angular/core","@angular/router","@wm/oAuth","@wm/security","@angular/common","@angular/common/http","ngx-toastr","@wm/http"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.variables={}),e.wm_common_variables,e.wm.core,e.angularWebSocket,e.jmespath,e.ng.core,e.ng.router,e.wm.oAuth,e.wm.security,e.ng.common,e.ng.common.http,e.ngxToastr,e.wm.http)}(this,(function(e,t,i,n,a,s,o,r,l,c,d,p,u){"use strict";function h(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var m=h(i),g=h(s),f=h(o),v=h(r),b=h(l),y=h(p);const w={hasCordova:void 0!==window.cordova,isStudioMode:!1,isRunMode:!0,XSRF_COOKIE_NAME:"wm_xsrf_token",DEFAULT_TIMER_DELAY:500,WIDGET_DOESNT_EXIST:"The widget you're trying to navigate to doesn't exist on this page"},P={CATEGORY:{MODEL:"wm.Variable",LIVE:"wm.LiveVariable",CRUD:"wm.CrudVariable",SERVICE:"wm.ServiceVariable",WEBSOCKET:"wm.WebSocketVariable",NAVIGATION:"wm.NavigationVariable",NOTIFICATION:"wm.NotificationVariable",TIMER:"wm.TimerVariable",LOGIN:"wm.LoginVariable",LOGOUT:"wm.LogoutVariable",DEVICE:"wm.DeviceVariable"},EVENTS:["onBefore","onBeforeUpdate","onResult","onBeforeOpen","onOpen","onBeforeMessageSend","onMessageReceive","onProgress","onError","onBeforeDatasetReady","onCanUpdate","onClick","onHide","onOk","onCancel","onBeforeClose","onClose","onTimerFire","onSuccess","onOnline","onOffline"],EVENT:{CAN_UPDATE:"onCanUpdate",BEFORE:"onBefore",BEFORE_UPDATE:"onBeforeUpdate",PREPARE_SETDATA:"onBeforeDatasetReady",RESULT:"onResult",ERROR:"onError",ABORT:"onAbort",PROGRESS:"onProgress",CLICK:"onClick",HIDE:"onHide",OK:"onOk",CANCEL:"onCancel",CLOSE:"onClose",TIMER_FIRE:"onTimerFire",SUCCESS:"onSuccess",BEFORE_OPEN:"onBeforeOpen",OPEN:"onOpen",BEFORE_SEND:"onBeforeMessageSend",MESSAGE_RECEIVE:"onMessageReceive",BEFORE_CLOSE:"onBeforeClose"},OWNER:{APP:"App",PAGE:"Page"},REST_SUPPORTED_SERVICES:["JavaService","SoapService","FeedService","RestService","SecurityServiceType","DataService","WebSocketService","OpenAPIService"],PAGINATION_PARAMS:["page","size","sort"],REST_SERVICE:{BASE_PATH_KEY:"x-WM-BASE_PATH",RELATIVE_PATH_KEY:"x-WM-RELATIVE_PATH",OAUTH_PROVIDER_KEY:"x-WM-PROVIDER_ID",AUTH_HDR_KEY:"Authorization",SECURITY_DEFN:{BASIC:"basic",OAUTH2:"oauth2"},AUTH_TYPE:{BASIC:"BASIC",OAUTH:"OAUTH2",NONE:"NONE"},CONTENT_TYPE_KEY:"x-WM-CONTENT_TYPE",ACCESSTOKEN_PLACEHOLDER:{LEFT:"",RIGHT:".access_token"},ERR_TYPE:{NO_ACCESSTOKEN:"missing_accesstoken",NO_CREDENTIALS:"no_credentials",METADATA_MISSING:"metadata_missing",CRUD_OPERATION_MISSING:"crud_operation_missing",USER_UNAUTHORISED:"user_unauthorised",REQUIRED_FIELD_MISSING:"required_field_missing"},ERR_MSG:{NO_ACCESSTOKEN:"Access token missing",NO_CREDENTIALS:"No credentials present",METADATA_MISSING:'Metadata missing for "$variable"',USER_UNAUTHORISED:"Unauthorized User",CRUD_OPERATION_MISSING:'Operation "$operation" not allowed for "$variable"',REQUIRED_FIELD_MISSING:'Required field(s) missing: "${0}"'},UNCLOAKED_HEADERS:["CONTENT-TYPE","ACCEPT","CONTENT-LENGTH","ACCEPT-ENCODING","ACCEPT-LANGUAGE"],PREFIX:{AUTH_HDR_VAL:{BASIC:"Basic",OAUTH:"Bearer"},CLOAK_HEADER_KEY:"X-WM-"}},SERVICE_TYPE:{JAVA:"JavaService",REST:"RestService",SOAP:"SoapService",FEED:"FeedService",DATA:"DataService",SECURITY:"SecurityServiceType",WEBSOCKET:"WebSocketService",OPENAPI:"OpenAPIService"},CONTROLLER_TYPE:{QUERY:"QueryExecution",PROCEDURE:"ProcedureExecution"},HTTP_STATUS_CODE:{CORS_FAILURE:-1,UNAUTHORIZED:401,FORBIDDEN:403},EXPORT_TYPES_MAP:{EXCEL:".xlsx",CSV:".csv"},DEFAULT_VAR:{NOTIFICATION:"appNotification"}},C={NON_BODY_HTTP_METHODS:["GET","HEAD"],CONTENT_TYPES:{FORM_URL_ENCODED:"application/x-www-form-urlencoded",MULTIPART_FORMDATA:"multipart/form-data",OCTET_STREAM:"application/octet-stream"}},A={WM_DATA_JSON:"wm_data_json",WM_HTTP_JSON:"wm_httpRequestDetails"},I=t.$rootScope,E={EXCEL:".xlsx",CSV:".csv"};e.appManager=void 0,e.httpService=void 0,e.metadataService=void 0,e.navigationService=void 0,e.routerService=void 0,e.toasterService=void 0,e.oauthService=void 0,e.securityService=void 0,e.dialogService=void 0;const O=/^\[("|')[\w\W]*(\1)\]$/,x=new Map,R=new Map,D=(e,t)=>{let i,n,a=_.noop;R.has(e)&&(a=R.get(e).cancel),a(),i=_.debounce((function(){n=e[t](),n instanceof Promise&&n.catch(_.noop)}),100),R.set(e,i),i()},S=(t,i)=>{switch(t){case"appManager":e.appManager=i;break;case"http":e.httpService=i;break;case"metadata":e.metadataService=i;break;case"navigationService":e.navigationService=i;break;case"router":e.routerService=i;break;case"toaster":e.toasterService=i;break;case"oAuth":e.oauthService=i;break;case"security":e.securityService=i;break;case"dialog":e.dialogService=i}},T=(e,t,n,a,s)=>{const o=t[e],r=t._context;let l;e!==P.EVENT.ERROR||s||o||(l=r.Actions[P.DEFAULT_VAR.NOTIFICATION],l&&(n=l.getMessage()||n,n=_.isString(n)?n:"An error has occured. Please check the app logs.",l.invoke({message:n},void 0,void 0)));const c=i.$parseEvent(t[e]);return e===P.EVENT.BEFORE_UPDATE?"wm.LiveVariable"===t.category&&"read"===t.operation?c(t._context,{variable:t,dataFilter:n,options:a}):c(t._context,{variable:t,inputData:n,options:a}):c(t._context,{variable:t,data:n,options:a})},M=e=>{setTimeout((()=>{i.triggerFn(e)}),500)},N=(e,t)=>{e=_.split(e,"&"),_.forEach(e,(function(e){e=_.split(e,"="),t[e[0]]=decodeURIComponent(_.join(_.slice(e,1),"="))}))},k=(t,n,a)=>{const s=t.url,o=t.method,r=t.dataParams||t.data,l=t.headers;l["Content-Type"]=l["Content-Type"]||"application/x-www-form-urlencoded",e.httpService.send({target:"WebService",action:"invokeRuntimeRestCall",method:o,url:s,headers:l,data:r,responseType:"arraybuffer"}).then((function(e){setTimeout((()=>{((e,t,n,a)=>{let s,o,r,l,c,d,p,u="";const h=t.get("Content-Disposition");if(h&&-1!==h.indexOf("attachment")&&(s=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,o=s.exec(h),null!==o&&o[1]&&(u=o[1].replace(/['"]/g,""))),r=t.get("Content-Type"),l=new Blob([e],{type:r}),void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(l,u)?M(n):i.triggerFn(a);else{if(c=window.URL||window.webkitURL,d=c.createObjectURL(l),u){const e=document.createElement("a");let t;void 0===e.download?(t=new FileReader,t.onloadend=function(){const e=t.result.replace(/^data:[^;]*;/,"data:attachment/file;");p=window.open(e,"_blank"),p||(window.location.href=e)},t.onload=M.bind(void 0,n),t.onerror=a,t.readAsDataURL(l)):(e.href=d,e.download=u,document.body.appendChild(e),e.click(),M(n))}else p=window.open(d,"_blank"),p||(window.location.href=d),M(n);setTimeout((()=>{c.revokeObjectURL(d)}),100)}})(e.body,e.headers,n,a)}),900)}),(function(e){i.triggerFn(a,e)}))},L=(e,t,n)=>{let a,s=e.target;const o=n[t];return O.test(s)?a=o:(s=s.substr(0,s.lastIndexOf(".")),a=e.target===t?n:s?i.findValueOf(o,s,!0):o),a},F=e=>{let t;return t=O.test(e)?e.replace(/^(\[["'])|(["']\])$/g,""):e.split(".").pop(),t},B=(e,t,i,n,a,s)=>{const o=F(e),r=L(t,i,n);a=_.isUndefined(a)?t.value:a,r&&(r[o]=a),((e,t,i,n,a)=>{switch(n.category){case P.CATEGORY.LIVE:"read"===n.operation?("dataBinding"===e?_.forEach(t,(function(e,t){n.filterFields[t]={value:e}})):n.filterFields[e]={value:t,type:i},n.autoUpdate&&!_.isUndefined(t)&&_.isFunction(n.listRecords)&&!a&&D(n,"listRecords")):("dataBinding"===e?n.inputFields=t:n.inputFields[e]=t,n.autoUpdate&&!_.isUndefined(t)&&_.isFunction(n[n.operation+"Record"])&&!a&&D(n,n.operation+"Record"));break;case P.CATEGORY.CRUD:"list"===n.operationType&&n.autoUpdate&&!_.isUndefined(t)&&_.isFunction(n.invoke)&&!a&&D(n,"invoke");break;case P.CATEGORY.SERVICE:case P.CATEGORY.LOGIN:n.autoUpdate&&!_.isUndefined(t)&&_.isFunction(n.invoke)&&!a&&D(n,"invoke");break;case P.CATEGORY.DEVICE:n[e]=t,n.autoUpdate&&!_.isUndefined(t)&&_.isFunction(n.invoke)&&!a&&D(n,"invoke")}})(o,a,t.type,n,s)},j=(e,t,n,a)=>{const s=e.target,o=L(e,n,a),r=F(s),l=t.registerDestroyListener?t.registerDestroyListener.bind(t):_.noop;if(i.stringStartsWith(e.value,"bind:")){const c=(t,l)=>{t===l&&_.isUndefined(t)||!(!_.isUndefined(t)||_.isUndefined(l)&&_.isUndefined(o[r]))||(_.includes(["blob","file"],e.type)||(t=i.getClonedObject(t)),B(s,e,n,a,t),x.has(a)||x.set(a,{}),_.set(x.get(a),[a.name,n,s],t),_.isObject(t)&&((e,t,i)=>{const n=_.keys(_.get(x.get(i),[i.name,t])),a=F(e);let s;s=_.filter(n,(function(e){return e!==a&&_.includes(e,a)||(a===t||"dataBinding"===a)&&e!==a})),s.length&&_.forEach(s,(function(e){B(e,{target:e},t,i,_.get(x.get(i),[i.name,t,e]))}))})(s,n,a))};l(i.$watch(e.value.replace("bind:",""),t,{},c,void 0,void 0,void 0,(()=>a.isMuted)))}else _.isUndefined(e.value)||(B(s,e,n,a,e.value,!0),n!==r&&(x.has(a)||x.set(a,{}),_.set(x.get(a),[a.name,n,s],e.value)))},V=(e,t,i,n)=>{n=n||"dataBinding";const a=e[i=i||"dataBinding"];e[i]={},e["_bind"+i]=a,a&&_.isArray(a)&&a.forEach((function(i){"wm.Variable"===e.category&&"dataBinding"===i.target&&(i.target="dataSet"),j(i,t,n,e)}))},G=(t,n,a,s,o,r)=>{if(w.hasCordova){let i;a&&(i=E[a]),e.appManager.notify("device-file-download",{url:t.url,name:n,extension:i,headers:t.headers,successCb:s,errorCb:o})}else!_.isEmpty(t.headers)||w.hasCordova&&localStorage.getItem(w.XSRF_COOKIE_NAME)?k(t,s,o):((e,t,n)=>{"/"===e.url[1]&&"/"===e.url[2]&&(e.url=e.url.slice(0,1)+e.url.slice(2));let a,s,o,r,l="";const c="fileDownloadIFrame",d="fileDownloadForm",p="Content-Type",u=e.url,h=_.get(e.headers,p),m=_.pickBy(e.headers,(function(e,t){return t!==p}));a=$("#"+c),a.length&&a.first().remove(),a=$('<iframe id="'+c+'" name="'+c+'" class="ng-hide"></iframe>'),s=$('<form id="'+d+'" name="'+d+'"></form>'),l+=-1!==u.indexOf("?")?u.substring(u.indexOf("?")+1):"",l+=h===C.CONTENT_TYPES.FORM_URL_ENCODED?(l?"&":"")+e.dataParams:"",s.attr({target:a.attr("name"),action:u,method:e.method,enctype:_.isEmpty(e.data)&&_.isEmpty(l)?C.CONTENT_TYPES.MULTIPART_FORMDATA:h}),_.includes(C.NON_BODY_HTTP_METHODS,_.toUpper(e.method))&&N(l,m),_.isEmpty(e.data)?r=_.isEmpty(n)?m:n:(N(e.data,m),r=m),_.forEach(r,(function(e,t){o=$('<input type="hidden">'),o.attr({name:t,value:e}),s.append(o)})),$("body").append(a),setTimeout((function(){a.contents().find("body").append(s),s.submit(),i.triggerFn(t)}),100)})(t,s,r)},W=()=>window.File&&window.FileReader&&window.FileList&&window.Blob,U=D,q=(t,n)=>{let a;return _.isDate(t)?a=t.getTime():(isNaN(t)||(t=parseInt(t,10)),a=t&&moment(t).valueOf()),isNaN(a)&&n!==i.DataType.TIME||n===i.DataType.TIMESTAMP?a:(n!==i.DataType.TIME||a||(a=moment((new Date).toDateString()+" "+t).valueOf()),t&&e.appManager.getPipe("date").transform(a,(e=>i.DEFAULT_FORMATS[_.toUpper(e)])(n)))},z=(e,t)=>(_.includes(t,".")&&(t=_.toLower(i.extractType(t))),_.isArray(e)?_.map(e,(function(e){return q(e,t)})):q(e,t));class H{initBinding(e,t,i){V(e,e._context,t,i)}notifyInflight(t,i,n){e.appManager.notify("toggle-variable-state",{variable:t,active:i,data:n})}}class Q{initBinding(e,t,i){V(e,e._context,t,i)}notifyInflight(t,i,n,a){e.appManager.notify("toggle-variable-state",{variable:t,active:i,data:n,options:a})}setRequestTrackId(e,t){const i=e?.headers?.get("x-wm-request-track-id");i&&(t._requestTrackId=i)}httpCall(t,i,n){return new Promise(((a,s)=>{i._observable=e.httpService.sendCallAsObservable(t,n).subscribe((e=>{e&&e.type&&(this.setRequestTrackId(e,i),a(e))}),(t=>{this.setRequestTrackId(t,i),e.httpService.isPlatformSessionTimeout(t)?(this.notifyInflight(i,!1,t),t._401Subscriber.asObservable().subscribe((e=>a(e)),(e=>s(e)))):s(t)}))}))}prepareCallbackOptions(e,t){let i={};return i.xhrObj=e,t&&_.extend(i,t),i}}class Y extends Q{constructor(){super(...arguments),this.serviceRegistry=new Map}invoke(e,t){const i=this.serviceRegistry.get(e.service);return null==i?(T("onError",e,null),Promise.reject(`Could not find service '${i}'`)):(this.notifyInflight(e,!0),i.invoke(e,t).then((t=>(this.notifyInflight(e,!1,t),t)),(t=>(this.notifyInflight(e,!1,t),Promise.reject(t)))))}registerService(e){this.serviceRegistry.set(e.name,e)}}class K{static setPaginationQueryParams(e,t,i){t.parameters.forEach((t=>{let n;n="offset"===i.type||i.input.offset?"offset":"page",t.name===i.input[n].split(".")[0]?t.sampleValue=e.pagination.page:t.name===i.input.size.split(".")[0]&&(t.sampleValue=e.pagination.size)}))}static setVariablePagination(e,t,i){e.pagination||(e.pagination={empty:!1}),e.pagination.size=t.size,e.pagination.page=t.page||0,e.pagination.totalElements=t.totalElements,e.pagination.numberOfElements=e.pagination.size,e.pagination.number=i.page?i.page-1:0,e.pagination.totalPages=e.pagination.totalElements/e.pagination.size,e.pagination.totalElements%e.pagination.size==0?e.pagination.totalPages=parseInt(e.pagination.totalPages):e.pagination.totalPages=parseInt(e.pagination.totalPages)+1,t.next?(e.pagination.next=t.next,e.pagination.prev=t.prev,e.pagination.last=!t.next,e.pagination.first=!t.prev):(e.pagination.first=e.pagination.page<=1,e.pagination.last=""===t.hasMoreItems?!(e.pagination.page<e.pagination.totalPages):!t.hasMoreItems)}static setPaginationItems(e,t,i,n,s){if(_.startsWith(e,"$body")){const s=e.replace("$body.","");try{i[n]=a.jmespath.search(t,s)}catch{console.warn(`${e} expression needs to be corrected as per JMES guidelines`)}}else if(_.startsWith(e,"$header")){const t=e.replace("$header.",""),o=Object.fromEntries(s.headers),r=t.split(".");try{i[n]=a.jmespath.search(o,r[0].toLowerCase())}catch{console.warn(`${e} expression needs to be corrected as per JMES guidelines`)}if(i[n]?.length){let t=i[n].join();if(1===r.length)i[n]=t;else{let s=r.slice(1).join(".");const o=JSON.parse(t);/[!@#$%^&*()+\=\[\]{};':"\\|,<>\/?]+/.test(s)&&(s="headerResp."+s);try{i[n]=a.jmespath.search(o,s)}catch{console.warn(`${e} expression needs to be corrected as per JMES guidelines`)}}}}}static getPaginationInfo(e,t){return e?.paginationInfo?e.paginationInfo:t._paginationConfig}static checkPaginationAtQuery(e,t,i){const n=this.getPaginationInfo(e,t);if(!(i&&i.page&&n?.input.size&&t.pagination))return;let a;a="offset"===n.type||n.input.offset?"offset":"page";const s=n.input[a].split(".")[0],o=_.find(e.parameters,(function(e){return e.name===s}));!_.isEmpty(t.dataBinding)&&o&&"query"===o.parameterType&&(n.output?.page||"offset"===n.type?t.pagination.page=this.getOffsetInfo(t,i):t.pagination.page=i.page,this.setPaginationQueryParams(t,e,n))}static getOffsetInfo(e,t){return e.pagination.size*(t.page?t.page-1:1)}static setPaginationAtReq(e,t,i,n,a,s,o){let r,l={},c={};r="offset"===e.type||e.input.offset?"offset":"page";const d=e.input[r].split(".")[0],p=_.find(t.parameters,(function(e){return e.name===d}));if("header"===p?.parameterType)_.set(l,e.input[r],i.pagination.page),_.set(l,e.input.size,i.pagination.size),n[d]=JSON.stringify(l[d]),c.headers=n;else if("body"===p?.parameterType){const t=JSON.parse(p.sampleValue),n=e.input[r].split(".")[1];if(t&&t[n]){const s=e.input[r].split(".").splice(1).join(".");"offset"!==r?_.set(l,s,i.pagination.page):_.set(l,s,this.getOffsetInfo(i,o)),_.set(l,e.input.size.split(".").splice(1).join("."),i.pagination.size),t[n]=l[n],a=JSON.stringify(t),c.requestBody=a}}else if(i.pagination.next&&p)if("path"===p.parameterType){const e=t.relativePath.split("/"),n="{"+p.name+"}",a=e.indexOf(n);let o,r,l;o=i.pagination.isNext?i.pagination.next.split("/"):i.pagination.prev.split("/"),t.directPath?(l=new URL(s),r=l.pathname.split("/"),r[a]=o[a],l.pathname=r.join("/"),s=l.href,c.url=s):(r=s.split("/"),r[a+1]=o[a],s=r.join("/"),c.url=s)}else if("query"===p.parameterType){const e=s.split("?");let t;t=i.pagination.isNext?i.pagination.next.split("?"):i.pagination.prev.split("?"),e[1]=t[1],s=e.join("?"),c.url=s}return c}static setParameterVal(e,t,i,n){const a=this.getPaginationInfo(i,n).input[e].split(".")[0],s=_.find(i.parameters,(function(e){return e.name===a}));t[e]=_.result(s,"sampleValue")}static generatePaginationRes(e,t,i,n,a,s){let o={};const r=t.output;if(r?.next)r&&(this.setPaginationItems(r.next,i,o,"next",n),this.setPaginationItems(r.prev,i,o,"prev",n));else{if(r?.size?this.setPaginationItems(r.size,i,o,"size",n):this.setParameterVal("size",o,e,s),r?.page?this.setPaginationItems(r.page,i,o,"page",n):"offset"!==t.type&&this.setParameterVal("page",o,e,s),_.startsWith(r?.totalElements,"$minValue")){const e=r.totalElements.replace("$minValue=",""),t=o.page?o.page:a.page,i=o.size*t;!s.pagination||s.pagination.totalElements>i?o.totalElements=parseInt(e):o.totalElements=i+1}else r?.totalElements?this.setPaginationItems(r.totalElements,i,o,"totalElements",n):"offset"===t.type||t.input.offset?o.totalElements=o.size*(a.page?a.page:1)+1:o.totalElements=o.size*o.page+1;r?.hasMoreItems?this.setPaginationItems(r.hasMoreItems,i,o,"hasMoreItems",n):o.hasMoreItems=""}return o}}const J=(e,t,n)=>{const a=_.toLower(i.extractType(_.get(t,"items.type")||t.type)),s=w.isStudioMode?t["x-WM-CONTENT_TYPE"]:t.contentType;if(W())return"file"===a||"string"!==s&&s?_.isArray(n)&&"file"===a?_.forEach(n,(function(n){e.append(t.name,n&&n.content||i.getBlob(n),n.name)})):e.append(t.name,i.getBlob(n,s),n&&n.name):(_.isObject(n)&&(n=JSON.stringify(n)),e.append(t.name,n)),e},Z=(e,t)=>{const n={},a=[];let s;return _.forEach(t,(function(t){s=_.get(e,t.name),_.isUndefined(s)||""===s||null===s||t.readOnly?t.required&&a.push(t.name||t.id):(s=i.isDateTimeType(t.type)?z(s,t.type):s,_.isArray(s)&&"string"===_.toLower(i.extractType(t.type))&&(s=_.join(s,",")),n[t.name]=s)})),{requestBody:n,missingParams:a}};class X{static constructRequestParams(t,n,a,s){if(t=t||{},null===n)return{error:{type:P.REST_SERVICE.ERR_TYPE.USER_UNAUTHORISED,message:P.REST_SERVICE.ERR_MSG.USER_UNAUTHORISED,field:"_wmServiceOperationInfo"}};if(_.isEmpty(n))return{error:{type:P.REST_SERVICE.ERR_TYPE.METADATA_MISSING,message:P.REST_SERVICE.ERR_MSG.METADATA_MISSING,field:"_wmServiceOperationInfo"}};if(n&&n.invalid)return{error:{type:P.REST_SERVICE.ERR_TYPE.CRUD_OPERATION_MISSING,message:P.REST_SERVICE.ERR_MSG.CRUD_OPERATION_MISSING,field:"_wmServiceOperationInfo"}};const o=n.directPath||"",r=n.basePath?n.basePath+n.relativePath:n.relativePath,l=(e=>_.includes(["QueryExecution","ProcedureExecution"],e.controller)&&_.includes(["put","post"],e.operationType))(t);let c,d,p,u,h,m,g,f,v,b,y,E,O,x,R,D,S="",T={},M=[],N=null;function k(){return b||(b=new FormData,b)}if(x=_.get(n.securityDefinitions,"0"),x)switch(x.type){case P.REST_SERVICE.SECURITY_DEFN.OAUTH2:if(L=x[P.REST_SERVICE.OAUTH_PROVIDER_KEY],F=null,R=e.oauthService.getAccessToken(L,F),!R)return{error:{type:P.REST_SERVICE.ERR_TYPE.NO_ACCESSTOKEN,message:P.REST_SERVICE.ERR_MSG.NO_ACCESSTOKEN},securityDefnObj:x};T[P.REST_SERVICE.AUTH_HDR_KEY]=P.REST_SERVICE.PREFIX.AUTH_HDR_VAL.OAUTH+" "+R;break;case P.REST_SERVICE.SECURITY_DEFN.BASIC:if(g=a.wm_auth_username,f=a.wm_auth_password,!g||!f)return{error:{type:P.REST_SERVICE.ERR_TYPE.NO_CREDENTIALS,message:P.REST_SERVICE.ERR_MSG.NO_CREDENTIALS},securityDefnObj:x};T[P.REST_SERVICE.AUTH_HDR_KEY]=P.REST_SERVICE.PREFIX.AUTH_HDR_VAL.BASIC+" "+btoa(g+":"+f),N={type:P.REST_SERVICE.AUTH_TYPE.BASIC}}var L,F;if(K.checkPaginationAtQuery(n,t,s),n.proxySettings=n.proxySettings||{web:!0,mobile:!1},v=n.httpMethod||n.methodType,y=w.hasCordova?n.proxySettings.mobile:n.proxySettings.web,D=n.proxySettings.withCredentials,p=y?r:o,_.forEach(n.parameters,(function(e){function s(){a?(E=a[e.name]&&_.isObject(a[e.name])?a[e.name]:a,O=_.get(n,["definitions",e.type])):(E=o||{},O=e.children)}let o=e.sampleValue;if(i.isDefined(o)&&null!==o&&""!==o||l&&"file"!==e.type)switch(t.serviceType===P.SERVICE_TYPE.DATA&&i.isDateTimeType(e.type)&&(o=z(o,e.type)),_.isArray(o)&&"string"===_.toLower(i.extractType(e.type))&&t.serviceType===P.SERVICE_TYPE.DATA&&(o=_.join(o,",")),e.parameterType.toUpperCase()){case"QUERY":if(_.isNull(o)&&(r=t.controller,u=t.serviceType,r===P.CONTROLLER_TYPE.QUERY&&u===P.SERVICE_TYPE.DATA))break;S?S+="&"+e.name+"="+encodeURIComponent(o):S="?"+e.name+"="+encodeURIComponent(o);break;case"PATH":h=new RegExp("\\s*\\{\\s*"+e.name+"(:\\.\\+)?\\s*\\}\\s*"),p=p.replace(h,o);break;case"HEADER":T[e.name]=o;break;case"BODY":l?(s(),c=Z(E,O),d=c.requestBody,M=_.concat(M,c.missingParams)):d=o;break;case"FORMDATA":l&&e.name===A.WM_DATA_JSON?(s(),c=Z(E,O),d=J(k(),e,c.requestBody),M=_.concat(M,c.missingParams)):d=J(k(),e,o)}else e.required&&M.push(e.name||e.id);var r,u})),M.length)return{error:{type:P.REST_SERVICE.ERR_TYPE.REQUIRED_FIELD_MISSING,field:M.join(","),message:i.replace(P.REST_SERVICE.ERR_MSG.REQUIRED_FIELD_MISSING,[M.join(",")]),skipDefaultNotification:!0}};_.includes(C.NON_BODY_HTTP_METHODS,_.toUpper(v))||n.consumes&&n.consumes[0]===C.CONTENT_TYPES.MULTIPART_FORMDATA||(T["Content-Type"]=n.consumes&&n.consumes[0]||"application/json"),_.includes(n.consumes,C.CONTENT_TYPES.FORM_URL_ENCODED)&&!_.includes(C.NON_BODY_HTTP_METHODS,(v||"").toUpperCase())?(S&&(d=(d?d+"&":"")+S.substring(1)),T["Content-Type"]=C.CONTENT_TYPES.FORM_URL_ENCODED):p+=S,y&&(T=t.serviceType!==P.SERVICE_TYPE.REST&&t.serviceType!==P.SERVICE_TYPE.OPENAPI||n.skipCloakHeaders?T:(e=>{const t={},i=P.REST_SERVICE.UNCLOAKED_HEADERS,n=P.REST_SERVICE.PREFIX.CLOAK_HEADER_KEY;return _.forEach(e,(function(e,a){_.includes(i,a.toUpperCase())?t[a]=e:t[n+a]=e})),t})(T),t.getPrefabName()&&-1!==P.REST_SUPPORTED_SERVICES.indexOf(t.serviceType)?(p="prefabs/"+t.getPrefabName()+p,u="invokePrefabRestService"):t.getPrefabName()||(p="services"+p),p=I.project.deployedUrl+p);const $=K.getPaginationInfo(n,t);if($&&t.pagination){const e=K.setPaginationAtReq($,n,t,T,d,p,s);e&&(e.headers?T=e.headers:e.requestBody?d=e.requestBody:e.url&&(p=e.url))}return m={projectID:I.project.id,url:p,target:u,method:v,headers:T,data:d,authDetails:N,isDirectCall:!y,isExtURL:t.serviceType===P.SERVICE_TYPE.REST,withCredentials:D},m}static isFileUploadRequest(e){return"FileService"===e.service&&"uploadFile"===e.operation}static excludePaginationParams(e){return _.map(_.reject(e,(e=>_.includes(P.PAGINATION_PARAMS,e.name))),(function(e){return e.name}))}}const ee=new Map,te={Variable:Q,Action:H,"wm.NavigationVariable":class extends H{invoke(t,n){((t,n)=>{let a;t.dataSet=n&&n.data||t.dataSet;const s=t.dataBinding.pageName||t.pageName,o=t.operation,r=_.clone(t.dataSet),l=_.isNil(n?.cacheable)?t.cacheable:n.cacheable;switch(n=n||{},_.isNil(l)||i.isString(l)&&""===l.trim()||(r._cache_page=l),o){case"goToPreviousPage":e.navigationService.goToPrevious();break;case"gotoPage":e.navigationService.goToPage(s,{transition:t.pageTransitions,$event:n.$event,urlParams:r,cacheable:t.cacheable});break;case"gotoView":a=t.dataBinding&&t.dataBinding.viewName||t.viewName;break;case"gotoTab":a=t.dataBinding&&t.dataBinding.tabName||t.tabName;break;case"gotoAccordion":a=t.dataBinding&&t.dataBinding.accordionName||t.accordionName;break;case"gotoSegment":a=t.dataBinding&&t.dataBinding.segmentName||t.segmentName}a&&e.navigationService.goToView(a,{pageName:s,transition:t.pageTransitions,$event:n.$event,urlParams:r},t)})(t,n)}},"wm.NotificationVariable":class extends H{onToasterClick(e){T("onClick",e,"")}onToasterHide(e){T("onHide",e,"")}notifyViaToaster(t,i){const n=(i.class||t.dataBinding.class||"info").toLowerCase(),a=i.message||t.dataBinding.text,s=i.title,o="toast-"+(i.position||t.dataBinding.toasterPosition||"bottom right").replace(" ","-"),r=t.dataBinding.page;let l,c=parseInt(i.duration||t.dataBinding.duration,null);c||(c=0!==c&&"success"===n?3e3:0),l=t.dataBinding.content&&"page"===t.dataBinding.content&&r?e.toasterService.showCustom(r,{positionClass:o,timeOut:c,partialParams:t._binddataSet,context:t._context}):e.toasterService.show(n,s,a||null,{positionClass:o,timeOut:c,enableHtml:!0}),t.onClick&&l.onTap.subscribe(this.onToasterClick.bind(this,t)),t.onHide&&l.onHidden.subscribe(this.onToasterHide.bind(this,t))}getDialogConfig(t,i,n,a){return{title:i.title||t.dataBinding.title,text:i.message||t.dataBinding.text,okButtonText:i.okButtonText||t.dataBinding.okButtonText||"OK",cancelButtonText:i.cancelButtonText||t.dataBinding.cancelButtonText||"CANCEL",alerttype:i.alerttype||t.dataBinding.alerttype||"information",onOk:()=>{e.dialogService.close(n,void 0,a)},onCancel:()=>{T("onCancel",t,i.data),e.dialogService.close(n,void 0)},onClose:()=>{T("onClose",t,i.data)}}}notifyViaDialog(t,n){const a="PREFAB"===i.getWmProjectProperties().type,s=(a?"Prefab":"Common")+_.capitalize(t.operation)+"Dialog";let o=this.getDialogConfig(t,n,s,(()=>T("onOk",t,n.data)));o=a?o:{notification:o},e.dialogService.open(s,void 0,o)}notify(e,t,i,n){t=t||{},"toast"===e.operation?this.notifyViaToaster(e,t):this.notifyViaDialog(e,t)}getMessage(e){return e.dataBinding.text}setMessage(e,t){return _.isString(t)&&(e.dataBinding.text=t),e.dataBinding.text}getOkButtonText(e){return e.dataBinding.okButtonText}setOkButtonText(e,t){return _.isString(t)&&(e.dataBinding.okButtonText=t),e.dataBinding.okButtonText}getToasterDuration(e){return e.dataBinding.duration}setToasterDuration(e,t){return e.dataBinding.duration=t,e.dataBinding.duration}getToasterClass(e){return e.dataBinding.class}setToasterClass(e,t){return _.isString(t)&&(e.dataBinding.class=t),e.dataBinding.class}getToasterPosition(e){return e.dataBinding.class}setToasterPosition(e,t){return _.isString(t)&&(e.dataBinding.position=t),e.dataBinding.position}getAlertType(e){return e.dataBinding.alerttype}setAlertType(e,t){return _.isString(t)&&(e.dataBinding.alerttype=t),e.dataBinding.alerttype}getCancelButtonText(e){return e.dataBinding.cancelButtonText}setCancelButtonText(e,t){return _.isString(t)&&(e.dataBinding.cancelButtonText=t),e.dataBinding.cancelButtonText}},"wm.LoginVariable":class extends H{validate(e){let t,i,n;for(i in["rememberme","remembermecheck"].forEach((t=>{_.isBoolean(e[t])&&(n=t)})),n=n||"j_rememberme",e[n]=!!_.isBoolean(e[n])&&e[n],e)if(e.hasOwnProperty(i)&&(""===e[i]||void 0===e[i])){t="Please provide required credentials";break}return t}migrateOldParams(e){const t={},i={usernametext:"j_username",username:"j_username",passwordtext:"j_password",password:"j_password",remembermecheck:"j_rememberme",rememberme:"j_rememberme"};return _.each(e,(function(e,n){i[n]?t[i[n]]=e:t[n]=e})),t}redirectToAppBasePath(){e.routerService.navigate(["/"]).then((e=>{e&&window.location.reload()}))}login(t,n,a,s){let o;const r=(n=n||{}).loginInfo||n.input||t.dataBinding,l=this.validate(r);if(l)return i.triggerFn(s,l),void T("onError",t,l);let c=i.getClonedObject(r);const d=T(P.EVENT.BEFORE_UPDATE,t,c);if(_.isObject(d))c=d;else if(!1===d)return void i.triggerFn(s);c=this.migrateOldParams(c);const p=_.get(e.securityService.get(),"userInfo.userName");this.notifyInflight(t,!0),t.promise=e.securityService.appLogin(c,(n=>{e.dialogService.close("CommonLoginDialog"),e.appManager.reloadAppData().then((s=>{T(P.EVENT.RESULT,t,_.get(s,"userInfo")),o=T(P.EVENT.PREPARE_SETDATA,t,_.get(s,"userInfo")),o&&_.set(s,"userInfo",o),this.notifyInflight(t,!1,n),i.triggerFn(a),setTimeout((()=>{if(T(P.EVENT.SUCCESS,t,_.get(s,"userInfo")),t.useDefaultSuccessHandler){const t=p===c.j_username;p&&!t||e.appManager.executeSessionFailureRequests();const i=e.securityService.getCurrentRouteQueryParam("redirectTo"),n=e.appManager.noRedirect(),a=e.securityService.getRedirectedRouteQueryParams();if(a.redirectTo&&delete a.redirectTo,e.appManager.noRedirect(!1),p)if(_.isEmpty(i)){const i=e.securityService.get(),n=_.get(i,"loginConfig.sessionTimeout.type")||"PAGE";t&&"DIALOG"===n||this.redirectToAppBasePath()}else p===c.j_username?e.routerService.navigate([`/${i}`],{queryParams:a}):this.redirectToAppBasePath();else _.isEmpty(i)?n||e.routerService.navigate(["/"]):e.routerService.navigate([`/${i}`],{queryParams:a})}T(P.EVENT.CAN_UPDATE,t,_.get(s,"userInfo"))}))}))}),(e=>{T(P.EVENT.RESULT,t,e),this.notifyInflight(t,!1,e);const n=e.error||"Invalid credentials.",a=e.details;w.isRunMode&&T("onError",t,n,a,!0),i.triggerFn(s,n,a),T(P.EVENT.CAN_UPDATE,t,e)}))}},"wm.LogoutVariable":class extends H{logout(t,n,a,s){let o,r,l,c;o=function(e,n,a){w.isStudioMode||T("onError",t,e,a),i.triggerFn(s,e,a)},l=T(P.EVENT.BEFORE_UPDATE,t,null),!1!==l?e.securityService.isAuthenticated((n=>{n?(this.notifyInflight(t,!0),t.promise=e.securityService.appLogout((n=>{let s=n.body;s=i.getValidJSON(s),e.appManager.reloadAppData().then((()=>{this.notifyInflight(t,!1,s),T(P.EVENT.RESULT,t,s),c=T(P.EVENT.PREPARE_SETDATA,t,s),c&&(s=c),setTimeout((()=>{T(P.EVENT.SUCCESS,t,s),T(P.EVENT.CAN_UPDATE,t,s)}))})),s&&s.result?window.location.href=s.result:t.useDefaultSuccessHandler&&(r=t.redirectTo,r&&"login.html"!==r&&"index.html"!==r||(r=""),e.routerService.navigate([`/${r}`]),window.cordova||setTimeout((()=>{window.location.reload()}))),i.triggerFn(a)}),o)):o("No authenticated user to logout.")}),(e=>{this.notifyInflight(t,!1,e),o(e)})):i.triggerFn(s)}},"wm.DeviceVariable":Y,"wm.WebSocketVariable":class extends Q{constructor(){super(...arguments),this.scope_var_socket_map=new Map,this.PROPERTY={SERVICE:"service",DATA_UPDATE_STRATEGY:"dataUpdateStrategy",DATA_LIMIT:"dataLimit"},this.DATA_UPDATE_STRATEGY={REFRESH:"refresh",PREPEND:"prepend",APPEND:"append"}}shouldAppendData(e){return(e=e||this)[this.PROPERTY.DATA_UPDATE_STRATEGY]!==this.DATA_UPDATE_STRATEGY.REFRESH}shouldAppendLast(e){return e[this.PROPERTY.DATA_UPDATE_STRATEGY]===this.DATA_UPDATE_STRATEGY.APPEND}getDataLimit(e){return e.dataLimit}getURL(t){const i=t.getPrefabName(),n=i?_.get(e.metadataService.getByOperationId(t.operationId,i),"wmServiceOperationInfo"):_.get(e.metadataService.getByOperationId(t.operationId),"wmServiceOperationInfo"),a=t.dataBinding;let s;if(_.forEach(n.parameters,(function(e){e.sampleValue=a[e.name]})),$.extend(n,{skipCloakHeaders:!0}),s=X.constructRequestParams(t,n,a),!s.error||!s.error.message)return s.url;this._onSocketError(t,{data:s.error.message})}_onSocketMessage(e,t){let n,a,s,o,r,l=_.get(t,"data");l=i.getValidJSON(l)||i.xmlToJson(l)||l,n=T(P.EVENT.MESSAGE_RECEIVE,e,l,t),l=i.isDefined(n)?n:l,this.shouldAppendData(e)?(e.dataSet=e.dataSet||[],a=e.dataSet.length,s=this.getDataLimit(e),o=this.shouldAppendLast(e),s&&a>=s&&(o?e.dataSet.shift():e.dataSet.pop()),r=o?a:0,e.dataSet.splice(r,0,l)):e.dataSet=i.isDefined(n)?n:l}_onBeforeSend(e,t){return T(P.EVENT.BEFORE_SEND,e,t)}_onBeforeSocketClose(e,t){return T(P.EVENT.BEFORE_CLOSE,e,_.get(t,"data"),t)}_onBeforeSocketOpen(e,t){return T(P.EVENT.BEFORE_OPEN,e,_.get(t,"data"),t)}_onSocketOpen(e,t){e._socketConnected=!0,T(P.EVENT.OPEN,e,_.get(t,"data"),t)}freeSocket(e){this.scope_var_socket_map.set(e,void 0)}_onSocketClose(e,t){e._socketConnected=!1,this.freeSocket(e),T(P.EVENT.CLOSE,e,_.get(t,"data"),t)}_onSocketError(e,t){e._socketConnected=!1,this.freeSocket(e),T(P.EVENT.ERROR,e,_.get(t,"data")||"Error while connecting with "+e.service,t)}getSocket(e){const t=this.getURL(e);let a=this.scope_var_socket_map.get(e);return a||(w.hasCordova||!i.isInsecureContentRequest(t)?(a=new n.$WebSocket(t),a.onOpen(this._onSocketOpen.bind(this,e)),a.onError(this._onSocketError.bind(this,e)),a.onMessage(this._onSocketMessage.bind(this,e)),a.onClose(this._onSocketClose.bind(this,e)),this.scope_var_socket_map.set(e,a),e._socket=a,a):void i.triggerFn(this._onSocketError.bind(this,e)))}open(e,t,n){let a;if(!1!==this._onBeforeSocketOpen(e))return a=this.getSocket(e),i.triggerFn(t),a;i.triggerFn(n)}close(e){const t=this._onBeforeSocketClose(e),i=this.getSocket(e);!1!==t&&i.close()}send(e,t){const n=this.getSocket(e);let a;t=t||_.get(e,"dataBinding.RequestBody"),a=this._onBeforeSend(e,t),!1!==a&&(t=i.isDefined(a)?a:t,t=i.isObject(t)?JSON.stringify(t):t,n.send(t,0))}}};class ie{static get(e){return ee.has(e)?ee.get(e):ee.set(e,new te[e]).get(e)}}const ne=()=>ie.get(P.CATEGORY.DEVICE);class ae extends t.ApiAwareVariable{constructor(e){super(),Object.assign(this,e)}init(){ne().initBinding(this)}invoke(e,t,i){ne().invoke(this,e).then(t,i)}}const se=()=>ie.get(P.CATEGORY.NAVIGATION);class oe extends t.BaseAction{constructor(e){super(),Object.assign(this,e)}invoke(e){se().invoke(this,e)}navigate(e){this.invoke(e)}init(){se().initBinding(this,"dataBinding","dataBinding"),se().initBinding(this,"dataSet","dataSet")}}const re=()=>ie.get(P.CATEGORY.NOTIFICATION);class le extends t.BaseAction{constructor(e){super(),Object.assign(this,e)}execute(e,t){const n=super.execute(e,t);return i.isDefined(n)?n:new Promise(((n,a)=>{switch(e){case i.DataSource.Operation.INVOKE:this.invoke(t,n,a);break;case i.DataSource.Operation.NOTIFY:this.notify(t,n,a);break;default:a(`${e} operation is not supported on this data source`)}}))}notify(e,t,i){re().notify(this,e,t,i)}invoke(e,t,i){this.notify(e,t,i)}getMessage(){return re().getMessage(this)}setMessage(e){return re().setMessage(this,e)}clearMessage(){return re().setMessage(this,"")}getOkButtonText(){return re().getOkButtonText(this)}setOkButtonText(e){return re().setOkButtonText(this,e)}getToasterDuration(){return re().getToasterDuration(this)}setToasterDuration(e){return re().setToasterDuration(this,e)}getToasterClass(){return re().getToasterClass(this)}setToasterClass(e){return re().setToasterClass(this,e)}getToasterPosition(){return re().getToasterPosition(this)}setToasterPosition(e){return re().setToasterPosition(this,e)}getAlertType(){return re().getAlertType(this)}setAlertType(e){return re().setAlertType(this,e)}getCancelButtonText(){return re().getCancelButtonText(this)}setCancelButtonText(e){return re().setCancelButtonText(this,e)}init(){re().initBinding(this,"dataBinding","dataBinding"),re().initBinding(this,"dataSet","dataSet")}}const ce=()=>ie.get(P.CATEGORY.LOGIN);class de extends t.BaseAction{constructor(e){super(),Object.assign(this,e)}login(e,t,i){return ce().login(this,e,t,i)}invoke(e,t,i){return this.login(e,t,i)}cancel(){}init(){ce().initBinding(this,"dataBinding","dataBinding")}}class pe extends t.BaseAction{constructor(e){super(),Object.assign(this,e)}logout(e,t,i){ie.get(P.CATEGORY.LOGOUT).logout(this,e,t,i)}invoke(e,t,i){this.logout(e,t,i)}cancel(){}}const ue=()=>ie.get(P.CATEGORY.WEBSOCKET);class he extends t.ApiAwareVariable{constructor(e){super(),Object.assign(this,e)}open(e,t){return ue().open(this,e,t)}close(){return ue().close(this)}update(){return ue().update(this)}send(e){return ue().send(this,e)}cancel(){return this.close()}invoke(e,t,i){this.open(t,i)}init(){ue().initBinding(this)}}class me{static create(e,i){let n;switch(e.category){case t.VARIABLE_CONSTANTS.CATEGORY.MODEL:n=new t.ModelVariable(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.SERVICE:n=new t.ServiceVariable(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.LIVE:n=new t.LiveVariable(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.CRUD:n=new t.CrudVariable(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.DEVICE:n=new ae(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.NAVIGATION:n=new oe(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.NOTIFICATION:n=new le(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.LOGIN:n=new de(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.LOGOUT:n=new pe(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.TIMER:n=new t.TimerAction(e);break;case t.VARIABLE_CONSTANTS.CATEGORY.WEBSOCKET:n=new he(e)}return n._context=i,n.__cloneable__=!1,n}}class ge{constructor(e){this.$http=e,this.CONTEXT_APP="app"}isLoaded(){return!!this.metadataMap&&this.metadataMap.has(this.CONTEXT_APP)}load(e){let t;return t=i.hasCordova()?"metadata/"+(e?`prefabs/${e}/`:"app/")+"service-definitions.json":"./services/"+(e?`prefabs/${e}/`:"")+"servicedefs",new Promise(((i,n)=>{this.$http.send({url:t,method:"GET"}).then((t=>{this.metadataMap=this.metadataMap||new Map,this.providerMap=this.providerMap||new Map,t.body=t.body||{},this.metadataMap.set(e||this.CONTEXT_APP,t.body.serviceDefs),t.body.securityDefinitions&&this.providerMap.set(e||this.CONTEXT_APP,t.body.securityDefinitions.oauthProvider),i(t.body.serviceDefs)}),n)}))}getByOperationId(e,t){t=t||this.CONTEXT_APP;const i=this.metadataMap.get(t);return i&&i[e]}getByProviderId(e,t){t=t||this.CONTEXT_APP;const i=this.providerMap.get(t);return i&&i[e]}getByCrudId(e,t){t=t||this.CONTEXT_APP;const i=this.metadataMap.get(t);let n=[];for(let t in i)i[t]&&i[t].crudOperationId===e&&n.push(i[t]);return n}static{this.\u0275fac=function(e){return new(e||ge)(g.\u0275\u0275inject(m.AbstractHttpService))}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:ge,factory:ge.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(ge,[{type:s.Injectable}],(function(){return[{type:m.AbstractHttpService}]}),null);class fe{format(t,i){return e.appManager.getPipe("date").transform(t,i)}}class ve{constructor(e,i,n,a,s,o,r,l){this.httpService=e,this.metadataService=i,this.navigationService=n,this.routerService=a,this.toasterService=s,this.oAuthService=o,this.securityService=r,this.dialogService=l,S("http",this.httpService),S("metadata",this.metadataService),S("navigationService",this.navigationService),S("router",this.routerService),S("toaster",this.toasterService),S("oAuth",this.oAuthService),S("security",this.securityService),S("dialog",this.dialogService),t.wmSetDependency("oAuth",this.oAuthService),t.wmSetDependency("security",this.securityService),t.wmSetDependency("metadata",this.metadataService),t.wmSetDependency("http",this.httpService)}bulkCancel(e){Object.keys(e).forEach((t=>{const i=e[t];_.isFunction(i.cancel)&&i.cancel()}))}triggerStartUpdate(e){return Promise.all(Object.keys(e).map((t=>e[t])).filter((e=>e?.startUpdate&&e.invoke)).map((e=>e.invoke())))}processBindExp(e,n,a){const s=t.getTarget(a),o=t.getTargetNodeKey(e.target);let r=_.isArray(e.value)?e.value[0]:e.value;if(r)if(r.startsWith&&r.startsWith("bind:")){const t=i.$watch(r.replace("bind:",""),n,{},a.invokeOnParamChange.bind(a,e),void 0,void 0,e,(()=>a.isMuted));r=n.registerDestroyListener?n.registerDestroyListener(t):t}else _.isUndefined(e.value)||(t.setValueToNode(e.target,e,s,a,e.value,!0),s!==o&&(t.internalBoundNodeMap.has(a)||t.internalBoundNodeMap.set(a,{}),_.set(t.internalBoundNodeMap.get(a),[a.name,s,e.target],e.value)));return{name:e.target,value:r}}processBinding(e,t,i,n){const a=e[i=i||"dataBinding"];e[i]={},e["_bind"+i]=a,a&&_.isArray(a)&&a.forEach((i=>{"wm.Variable"===e.category&&"dataBinding"===i.target&&(i.target="dataSet"),this.processBindExp(i,t,e)}))}isVariableSeperated(e,t){return"wm.Variable"===e[t].category||"wm.ServiceVariable"===e[t].category||"wm.LiveVariable"===e[t].category||"wm.CrudVariable"===e[t].category}getBindSourceTarget(e){return"wm.LiveVariable"===e.category?"read"===e.operation?"filterFields":"inputFields":"wm.ModelVariable"===e.category?"dataSet":"dataBinding"}register(e,n,a){const s={Variables:{},Actions:{},callback:this.triggerStartUpdate};let o;for(const e in n){if(o=me.create(n[e],a),o.init(),this.isVariableSeperated(n,e)&&(this.processBinding(o,a,"dataBinding",this.getBindSourceTarget(o)),o.httpService=this.httpService,o.dateFormatter=new fe,o.subscribe("afterInvoke",(()=>i.$invokeWatchers(!0))),"wm.LiveVariable"===o.category&&"read"===o.operation&&i.processFilterExpBindNode(o._context,o.filterExpressions,o),"wm.CrudVariable"!==o.category&&"wm.ServiceVariable"!==o.category||(o.simulateFileDownload=G)),this.isVariableSeperated(n,e)||"wm.TimerVariable"===n[e].category)for(const e in P.EVENT)o[P.EVENT[e]]&&(o[P.EVENT[e]]=i.$parseEvent(o[P.EVENT[e]]));o instanceof t.BaseAction?s.Actions[e]=o:s.Variables[e]=o}return a.registerDestroyListener&&a.registerDestroyListener((()=>{this.bulkCancel(s.Variables),this.bulkCancel(s.Actions)})),s}destroy(){}registerDependency(e,i){S(e,i),t.wmSetDependency(e,i)}static{this.\u0275fac=function(e){return new(e||ve)(g.\u0275\u0275inject(m.AbstractHttpService),g.\u0275\u0275inject(ge),g.\u0275\u0275inject(m.AbstractNavigationService),g.\u0275\u0275inject(f.Router),g.\u0275\u0275inject(m.AbstractToasterService),g.\u0275\u0275inject(v.OAuthService),g.\u0275\u0275inject(b.SecurityService),g.\u0275\u0275inject(m.AbstractDialogService))}}static{this.\u0275prov=g.\u0275\u0275defineInjectable({token:ve,factory:ve.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(ve,[{type:s.Injectable}],(function(){return[{type:m.AbstractHttpService},{type:ge},{type:m.AbstractNavigationService},{type:f.Router},{type:m.AbstractToasterService},{type:v.OAuthService},{type:b.SecurityService},{type:m.AbstractDialogService}]}),null);const be=p.ToastrModule.forRoot({maxOpened:1,autoDismiss:!0});class ye{static forRoot(){return{ngModule:ye,providers:[ve,ge,c.Location,{provide:c.LocationStrategy,useClass:c.HashLocationStrategy}]}}static{this.\u0275fac=function(e){return new(e||ye)}}static{this.\u0275mod=g.\u0275\u0275defineNgModule({type:ye})}static{this.\u0275inj=g.\u0275\u0275defineInjector({imports:[c.CommonModule,be,d.HttpClientModule,u.HttpServiceModule,r.OAuthModule,l.SecurityModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&g.\u0275setClassMetadata(ye,[{type:s.NgModule,args:[{imports:[c.CommonModule,be,d.HttpClientModule,u.HttpServiceModule,r.OAuthModule,l.SecurityModule],declarations:[]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&g.\u0275\u0275setNgModuleScope(ye,{imports:[c.CommonModule,y.ToastrModule,d.HttpClientModule,u.HttpServiceModule,r.OAuthModule,l.SecurityModule]}),e.$rootScope=I,e.CONSTANTS=w,e.DB_CONSTANTS={DATABASE_MATCH_MODES:{like:"LIKE",start:"STARTING_WITH",startignorecase:"STARTING_WITH_IGNORECASE",end:"ENDING_WITH",endignorecase:"ENDING_WITH_IGNORECASE",anywhere:"CONTAINING",anywhereignorecase:"CONTAINING_IGNORECASE",nowhere:"DOES_NOT_CONTAIN",nowhereignorecase:"DOES_NOT_CONTAIN_IGNORECASE",exact:"EQUALS",exactignorecase:"EQUALS_IGNORECASE",notequals:"NOT_EQUALS",notequalsignorecase:"NOT_EQUALS_IGNORECASE",between:"BETWEEN",in:"IN",notin:"NOTIN",lessthan:"LESS_THAN",lessthanequal:"LESS_THAN_OR_EQUALS",greaterthan:"GREATER_THAN",greaterthanequal:"GREATER_THAN_OR_EQUALS",null:"NULL",isnotnull:"IS_NOT_NULL",empty:"EMPTY",isnotempty:"IS_NOT_EMPTY",nullorempty:"NULL_OR_EMPTY"},DATABASE_EMPTY_MATCH_MODES:["NULL","IS_NOT_NULL","EMPTY","IS_NOT_EMPTY","NULL_OR_EMPTY"],DATABASE_RANGE_MATCH_MODES:["IN","NOTIN","BETWEEN","LESS_THAN","LESS_THAN_OR_EQUALS","GREATER_THAN","GREATER_THAN_OR_EQUALS","NOT_EQUALS"],DATABASE_NULL_EMPTY_MATCH:{NULL:"NULL",IS_NOT_NULL:"IS_NOT_NULL",EMPTY:"NULL",IS_NOT_EMPTY:"IS_NOT_NULL",NULL_OR_EMPTY:"NULL"},DATABASE_MATCH_MODES_WITH_QUERY:{LIKE:"${0} like ${1}",STARTING_WITH:"${0} like ${1}",STARTING_WITH_IGNORECASE:"${0} like ${1}",ENDING_WITH:"${0} like ${1}",ENDING_WITH_IGNORECASE:"${0} like ${1}",CONTAINING:"${0} like ${1}",CONTAINING_IGNORECASE:"${0} like ${1}",DOES_NOT_CONTAIN:"${0} not like ${1}",DOES_NOT_CONTAIN_IGNORECASE:"${0} not like ${1}",EQUALS:"${0}=${1}",EQUALS_IGNORECASE:"${0}=${1}",NOT_EQUALS:"${0}!=${1}",NOT_EQUALS_IGNORECASE:"${0}!=${1}",BETWEEN:"${0} between ${1}",IN:"${0} in ${1}",NOTIN:"${0} not in ${1}",LESS_THAN:"${0}<${1}",LESS_THAN_OR_EQUALS:"${0}<=${1}",GREATER_THAN:"${0}>${1}",GREATER_THAN_OR_EQUALS:"${0}>=${1}",NULL:"${0} is null",IS_NOT_NULL:"${0} is not null",EMPTY:"${0}=''",IS_NOT_EMPTY:"${0}<>''",NULL_OR_EMPTY:"${0} is null or ${0}=''"},DATABASE_STRING_MODES:["LIKE","STARTING_WITH","STARTING_WITH_IGNORECASE","ENDING_WITH","ENDING_WITH_IGNORECASE","CONTAINING","CONTAINING_IGNORECASE","DOES_NOT_CONTAIN","DOES_NOT_CONTAIN_IGNORECASE","EQUALS","EQUALS_IGNORECASE","NOT_EQUALS","NOT_EQUALS_IGNORECASE"]},e.DeviceVariableManager=Y,e.DeviceVariableService=class{invoke(e,t){const n=this.operations.find((t=>t.name===e.operation));if(null==n)return T(P.EVENT.ERROR,e,null),Promise.reject(`Could not find operation '${e.operation}' in service '${this.name}'`);if(i.hasCordova()){const a=new Map;return void 0!==e.dataBinding&&(Object.entries(e).forEach((e=>{a.set(e[0],e[1])})),Object.entries(e.dataBinding).forEach((e=>{a.set(e[0],e[1])}))),n.invoke(e,t,a).then((function(t){return e.dataSet=t,i.$invokeWatchers(!0),T(P.EVENT.SUCCESS,e,t),t}),(function(t){return e.dataSet={},i.$invokeWatchers(!0),T(P.EVENT.ERROR,e,null),t}))}return Promise.resolve().then((()=>(T(P.EVENT.SUCCESS,e,n.model),n.model)))}},e.Formatter=fe,e.MetadataService=ge,e.SWAGGER_CONSTANTS=A,e.VARIABLE_CONSTANTS=P,e.VARIABLE_URLS={DATABASE:{searchTableData:{url:"/:service/:dataModelName/:entityName/search?page=:page&size=:size&:sort",method:"POST"},searchTableDataWithQuery:{url:"/:service/:dataModelName/:entityName/filter?page=:page&size=:size&:sort",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}},readTableData:{url:"/:service/:dataModelName/:entityName?page=:page&size=:size&:sort",method:"GET"},insertTableData:{url:"/:service/:dataModelName/:entityName",method:"POST"},insertMultiPartTableData:{url:"/:service/:dataModelName/:entityName",method:"POST",headers:{}},updateTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"PUT"},updateMultiPartTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"POST",headers:{}},deleteTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"DELETE"},updateCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"PUT"},periodUpdateCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id/periods?:id",method:"PUT"},updateMultiPartCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"POST",headers:{}},deleteCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"DELETE"},periodDeleteCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id/periods?:id",method:"DELETE"},getDistinctDataByFields:{url:"/:service/:dataModelName/:entityName/aggregations?page=:page&size=:size&:sort",method:"POST"},exportTableData:{url:"/services/:dataModelName/:entityName/export?:sort",method:"POST"},readTableRelatedData:{url:"/:service/:dataModelName/:entityName/:id/:relatedFieldName?page=:page&size=:size&:sort",method:"GET"},executeNamedQuery:{url:"/:service/:dataModelName/queryExecutor/queries/:queryName?page=:page&size=:size&:queryParams",method:"GET"},executeCustomQuery:{url:"/:service/:dataModelName/queries/execute?page=:page&size=:size",method:"POST"},executeAggregateQuery:{url:"/services/:dataModelName/:entityName/aggregations?page=:page&size=:size&sort=:sort",method:"POST"},executeNamedProcedure:{url:"/:service/:dataModelName/procedureExecutor/procedure/execute/:procedureName?page=:page&size=:size&:procedureParams",method:"GET"},countTableDataWithQuery:{url:"/:service/:dataModelName/:entityName/count?:queryParams",method:"GET"}},oauthConfiguration:{getAuthorizationUrl:{url:"services/oauth2/:providerId/authorizationUrl",method:"GET"}}},e.VariableManagerFactory=ie,e.VariablesModule=ye,e.VariablesService=ve,e.WS_CONSTANTS=C,e.debounceVariableCall=U,e.formatDate=z,e.formatExportExpression=e=>(_.forEach(e,(function(e){e.expression&&(e.expression="${"+e.expression+"}")})),e),e.getEvaluatedOrderBy=(e,t)=>{let i,n;return!t||_.isEmpty(t)?e:e?(e=_.split(e,","),t=_.split(t,","),i=_.map(t,(function(e){return _.split(_.trim(e)," ")[0]})),_.remove(e,(function(e){return _.includes(i,_.split(_.trim(e)," ")[0])})),n=e.length?","+_.join(e,","):"",_.join(t,",")+n):t},e.initiateCallback=T,e.isFileUploadSupported=W,e.processBinding=V,e.setDependency=S,e.setInput=(e,t,n,a)=>{e=e||{};let s,o,r={};if(_.isObject(a))switch(a.type){case"file":n=i.getBlob(n,a.contentType);break;case"number":n=_.isNumber(n)?n:parseInt(n,10)}return _.isObject(t)?r=t:t.indexOf(".")>-1?(s=t.split("."),o=s.pop(),e=i.findValueOf(e,s.join("."),!0),r[t=o]=n):r[t]=n,_.forEach(r,(function(t,i){e[i]=t})),e},e.simulateFileDownload=G,e.toastrModule=be})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.mobile=e.wm.mobile||{},e.wm.mobile.runtime={}),e.ng.core)}(this,(function(e,t){"use strict";var i,n,a=(i=t,n=Object.create(null),i&&Object.keys(i).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,t.get?t:{enumerable:!0,get:function(){return i[e]}})}})),n.default=i,Object.freeze(n));const s=["wmAppExt",""];class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:o,selectors:[["","wmAppExt",""]],attrs:s,decls:1,vars:0,template:function(e,t){1&e&&a.\u0275\u0275elementContainer(0)},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&a.\u0275setClassMetadata(o,[{type:t.Component,args:[{selector:"[wmAppExt]",template:"<ng-container></ng-container>"}]}],null,null);class r{static forRoot(){return{ngModule:r,providers:[]}}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:r})}static{this.\u0275inj=a.\u0275\u0275defineInjector({})}}("undefined"==typeof ngDevMode||ngDevMode)&&a.\u0275setClassMetadata(r,[{type:t.NgModule,args:[{declarations:[o],exports:[o]}]}],null,null),("undefined"==typeof ngJitMode||ngJitMode)&&a.\u0275\u0275setNgModuleScope(r,{declarations:[o],exports:[o]}),e.AppExtComponent=o,e.MobileRuntimeModule=r})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.mobile=e.wm.mobile||{},e.wm.mobile.runtime=e.wm.mobile.runtime||{},e.wm.mobile.runtime.dynamic={}),e.ng.core)}(this,(function(e,t){"use strict";var i,n,a=(i=t,n=Object.create(null),i&&Object.keys(i).forEach((function(e){if("default"!==e){var t=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,t.get?t:{enumerable:!0,get:function(){return i[e]}})}})),n.default=i,Object.freeze(n));class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:s})}static{this.\u0275inj=a.\u0275\u0275defineInjector({})}}("undefined"==typeof ngDevMode||ngDevMode)&&a.\u0275setClassMetadata(s,[{type:t.NgModule,args:[{}]}],null,null),e.MOBILE_COMPONENT_MODULES_FOR_ROOT=[],e.MobileRuntimeDynamicModule=s})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/router"),require("@angular/common"),require("@wm/core"),require("@wm/security"),require("@wm/variables"),require("@wm/components/page"),require("rxjs"),require("@wm/components/base"),require("tslib"),require("@wm/components/prefab"),require("@angular/common/http"),require("@angular/platform-browser"),require("@angular/forms"),require("ngx-toastr"),require("@wm/components/dialogs"),require("@wm/components/dialogs/confirm-dialog"),require("@wm/components/dialogs/design-dialog"),require("@wm/mobile/runtime"),require("@wm/http"),require("@wm/oAuth"),require("ngx-bootstrap/chronos"),require("ngx-bootstrap/datepicker"),require("ngx-bootstrap/utils"),require("@wm/components/dialogs/alert-dialog"),require("rxjs/operators"),require("@wm/transpiler"),require("@wm/build-task"),require("@wm/components/page/footer"),require("@wm/components/page/header"),require("@wm/components/page/left-panel"),require("@wm/components/page/right-panel"),require("@wm/components/page/top-nav"),require("@wm/components/basic"),require("@wm/components/basic/progress"),require("@wm/components/basic/rich-text-editor"),require("@wm/components/basic/search"),require("@wm/components/basic/tree"),require("@wm/components/input/calendar"),require("@wm/components/input/chips"),require("@wm/components/input/color-picker"),require("@wm/components/input/currency"),require("@wm/components/input/epoch"),require("@wm/components/input/file-upload"),require("@wm/components/input"),require("@wm/components/input/rating"),require("@wm/components/input/slider"),require("@wm/components/data/card"),require("@wm/components/data/form"),require("@wm/components/data/list"),require("@wm/components/data/live-table"),require("@wm/components/data/pagination"),require("@wm/components/data/table"),require("@wm/components/chart"),require("@wm/components/containers/accordion"),require("@wm/components/containers/linear-layout"),require("@wm/components/containers/layout-grid"),require("@wm/components/containers/panel"),require("@wm/components/containers/tabs"),require("@wm/components/containers/tile"),require("@wm/components/containers/wizard"),require("@wm/components/dialogs/iframe-dialog"),require("@wm/components/dialogs/login-dialog"),require("@wm/components/dialogs/partial-dialog"),require("@wm/components/navigation/breadcrumb"),require("@wm/components/navigation/menu"),require("@wm/components/navigation/navbar"),require("@wm/components/navigation/popover"),require("@wm/components/advanced/carousel"),require("@wm/components/advanced/login"),require("@wm/components/advanced/marquee"),require("@wm/components/advanced/custom"),require("ngx-bootstrap/timepicker"),require("ngx-bootstrap/dropdown"),require("ngx-bootstrap/pagination"),require("ngx-bootstrap/typeahead"),require("ngx-bootstrap/progressbar"),require("ngx-bootstrap/carousel"),require("ngx-bootstrap/popover"),require("ng-circle-progress"),require("ngx-bootstrap/tooltip")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/router","@angular/common","@wm/core","@wm/security","@wm/variables","@wm/components/page","rxjs","@wm/components/base","tslib","@wm/components/prefab","@angular/common/http","@angular/platform-browser","@angular/forms","ngx-toastr","@wm/components/dialogs","@wm/components/dialogs/confirm-dialog","@wm/components/dialogs/design-dialog","@wm/mobile/runtime","@wm/http","@wm/oAuth","ngx-bootstrap/chronos","ngx-bootstrap/datepicker","ngx-bootstrap/utils","@wm/components/dialogs/alert-dialog","rxjs/operators","@wm/transpiler","@wm/build-task","@wm/components/page/footer","@wm/components/page/header","@wm/components/page/left-panel","@wm/components/page/right-panel","@wm/components/page/top-nav","@wm/components/basic","@wm/components/basic/progress","@wm/components/basic/rich-text-editor","@wm/components/basic/search","@wm/components/basic/tree","@wm/components/input/calendar","@wm/components/input/chips","@wm/components/input/color-picker","@wm/components/input/currency","@wm/components/input/epoch","@wm/components/input/file-upload","@wm/components/input","@wm/components/input/rating","@wm/components/input/slider","@wm/components/data/card","@wm/components/data/form","@wm/components/data/list","@wm/components/data/live-table","@wm/components/data/pagination","@wm/components/data/table","@wm/components/chart","@wm/components/containers/accordion","@wm/components/containers/linear-layout","@wm/components/containers/layout-grid","@wm/components/containers/panel","@wm/components/containers/tabs","@wm/components/containers/tile","@wm/components/containers/wizard","@wm/components/dialogs/iframe-dialog","@wm/components/dialogs/login-dialog","@wm/components/dialogs/partial-dialog","@wm/components/navigation/breadcrumb","@wm/components/navigation/menu","@wm/components/navigation/navbar","@wm/components/navigation/popover","@wm/components/advanced/carousel","@wm/components/advanced/login","@wm/components/advanced/marquee","@wm/components/advanced/custom","ngx-bootstrap/timepicker","ngx-bootstrap/dropdown","ngx-bootstrap/pagination","ngx-bootstrap/typeahead","ngx-bootstrap/progressbar","ngx-bootstrap/carousel","ngx-bootstrap/popover","ng-circle-progress","ngx-bootstrap/tooltip"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.runtime=e.wm.runtime||{},e.wm.runtime.base={}),e.ng.core,e.ng.router,e.ng.common,e.wm.core,e.wm.security,e.wm.variables,e.wm.components.page,e.rxjs,e.wm.components.base,e.tslib,e.wm.components.prefab,e.ng.common.http,e.ng.platformBrowser,e.ng.forms,e.ngxToastr,e.wm.components.dialogs,e.wm.components.dialogs.confirmdialog,e.wm.components.dialogs.designdialog,e.wm.mobile.runtime,e.wm.http,e.wm.oAuth,e.chronos,e.datepicker,e.utils,e.wm.components.dialogs.alertdialog,e.rxjs.operators,e.wm.transpiler,e.wm.buildTask,e.wm.components.page.footer,e.wm.components.page.header,e.wm.components.page.leftpanel,e.wm.components.page.rightpanel,e.wm.components.page.topnav,e.wm.components.basic,e.wm.components.basic.progress,e.wm.components.basic.richtexteditor,e.wm.components.basic.search,e.wm.components.basic.tree,e.wm.components.input.calendar,e.wm.components.input.chips,e.wm.components.input.colorpicker,e.wm.components.input.currency,e.wm.components.input.epoch,e.wm.components.input.fileupload,e.wm.components.input,e.wm.components.input.rating,e.wm.components.input.slider,e.wm.components.data.card,e.wm.components.data.form,e.wm.components.data.list,e.wm.components.data.livetable,e.wm.components.data.pagination,e.wm.components.data.table,e.wm.components.chart,e.wm.components.containers.accordion,e.wm.components.containers.linearlayout,e.wm.components.containers.layoutgrid,e.wm.components.containers.panel,e.wm.components.containers.tabs,e.wm.components.containers.tile,e.wm.components.containers.wizard,e.wm.components.dialogs.iframedialog,e.wm.components.dialogs.logindialog,e.wm.components.dialogs.partialdialog,e.wm.components.navigation.breadcrumb,e.wm.components.navigation.menu,e.wm.components.navigation.navbar,e.wm.components.navigation.popover,e.wm.components.advanced.carousel,e.wm.components.advanced.login,e.wm.components.advanced.marquee,e.wm.components.advanced.custom,e.timepicker,e.dropdown,e.pagination,e.typeahead,e.progressbar,e.carousel,e.popover,e.ngCircleProgress,e.tooltip)}(this,(function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,m,g,f,v,b,y,w,P,C,A,I,E,O,x,R,D,S,T,M,N,k,L,F,B,j,V,G,W,U,q,z,H,Q,Y,K,J,Z,X,ee,te,ie,ne,ae,se,oe,re,le,ce,de,pe,ue,he,me,ge,fe,ve,be,ye,we,Pe,Ce,Ae,_e,Ie,Ee,Oe,xe,Re){"use strict";function De(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var Se,Te,Me=De(t),Ne=De(i),ke=De(n),Le=De(a),Fe=De(s),$e=De(o),Be=De(c),je=De(p),Ve=De(u),Ge=De(h),We=De(g),Ue=De(v),qe=De(b),ze=De(y),He=De(P),Qe=De(A),Ye=De(E);e.ComponentType=void 0,(Se=e.ComponentType||(e.ComponentType={}))[Se.PAGE=0]="PAGE",Se[Se.PREFAB=1]="PREFAB",Se[Se.PARTIAL=2]="PARTIAL",Se[Se.WIDGET=3]="WIDGET";class Ke{clearComponentFactoryRefCache(){}}class Je{}class Ze{}class Xe{}class et{}!function(e){e.HIDE_TEMPLATES_SHOW_CASE="hide-templates-show-case",e.SHOW_TEMPLATES_SHOW_CASE="show-templates-show-case",e.UPDATE_LOCATION="update-location-path",e.SELECT_TEMPLATE="select-template",e.TEMPLATEBUNDLE_CONFIG="template-bundle-config",e.ON_LOAD="on-load"}(Te||(Te={}));class tt{static{this.SERVICE_NAME="AppManagerService"}constructor(e,t,i,n,a,s,o,r,l,c){this.$http=e,this.$security=t,this.$dialog=i,this.$router=n,this.$app=a,this.$variables=s,this.$metadata=o,this.$spinner=r,this.$i18n=l,this.$datePipe=c,this.appVariablesLoaded=!1,this.appVariablesFired=!1,this._noRedirect=!1,this.$http.registerOnSessionTimeout(this.handle401.bind(this)),this.$variables.registerDependency("appManager",this),this.$app.subscribe("toggle-variable-state",(e=>{const t=e.variable,i=e.active;if(!_.isEmpty(_.trim(t.spinnerContext)))if(i){let e;if(t._spinnerId&&t._spinnerId.length&&_.forEach(t._spinnerId,(i=>{i.slice(0,i.lastIndexOf("_"))!==t._id||!this.$spinner.messagesByContext||!this.$spinner.messagesByContext[t.spinnerContext]||t.spinnerMessage!==this.$spinner.messagesByContext[t.spinnerContext].finalMessage&&t.spinnerMessage!==this.$spinner.messagesByContext[t.spinnerContext][i]||(e=!0)})),!e){t._spinnerId=t._spinnerId||[];const e=this.$spinner.show(t.spinnerMessage,t._id+"_"+Date.now(),t.spinnerclass,t.spinnerContext);t._spinnerId.push(e)}}else this.$spinner.hide(t._spinnerId.shift())})),this.$app.subscribe("userLoggedIn",(()=>{this.setLandingPage(),this.lastLoggedUserId&&this.$security.getConfig((e=>{e&&e.userInfo.userId!==this.lastLoggedUserId&&this.$app.clearPageCache()}),null)})),this.$app.subscribe("userLoggedOut",(()=>this.setLandingPage().then((()=>{this.$app.clearPageCache()})))),this.$app.subscribe("http401",((e={})=>this.handle401(e.page,e.options)))}showLoginDialog(){this.$spinner.hide("globalSpinner"),this.$dialog.open("CommonLoginDialog"),a.$appDigest()}loadAppJS(){}loadCommonPage(){}loadSecurityConfig(e){return this.$security.load(e).then((e=>(this.$app.landingPageName||this.setLandingPage(),e)))}loadMetadata(){return this.$metadata.load()}loadAppVariables(e){if(this.appVariablesLoaded)return Promise.resolve();const t=e=>{const t=this.$variables.register("app",e,this.$app);_.extend(this.$app.Variables,t.Variables),_.extend(this.$app.Actions,t.Actions),this.updateLoggedInUserVariable(),this.updateSupportedLocaleVariable(),this.appVariablesLoaded=!0,this.appVariablesFired=!1};return a.isDefined(e)?(t(e),Promise.resolve()):this.$http.get("./app.variables.json").then((e=>t(e)))}isAppVariablesFired(e){return a.isDefined(e)&&(this.appVariablesFired=e),this.appVariablesFired}clearLoggedInUserVariable(e){e.isAuthenticated=!1,e.roles=[],e.name=void 0,e.id=void 0,e.tenantId=void 0}updateLoggedInUserVariable(){const e=_.get(this.$app,"Variables.loggedInUser.dataSet");if(e)return this.$security.load().then((()=>{const t=this.$security.get();if(!(t&&t.securityEnabled&&t.authenticated))throw this.clearLoggedInUserVariable(e),e.isSecurityEnabled=t&&t.securityEnabled,null;return e.isAuthenticated=t.authenticated,e.roles=t.userInfo.userRoles,e.name=t.userInfo.userName,e.id=t.userInfo.userId,e.tenantId=t.userInfo.tenantId,e.userAttributes=t.userInfo.userAttributes,t})).catch((t=>{e.isAuthenticated=!1,e.roles=[],e.name=void 0,e.id=void 0,e.tenantId=void 0,e.userAttributes={}}))}updateSupportedLocaleVariable(){_.get(this.$app,"Variables.supportedLocale")}handleSSOLogin(e){let t,i;if(t=this.$security.getRedirectPage(e),o.CONSTANTS.hasCordova){const e=_.get(this.$security.get(),"userInfo.userName");this.$security.authInBrowser().then((()=>this.reloadAppData())).then((()=>{const i=_.get(this.$security.get(),"userInfo.userName");i&&i===e?o.routerService.navigate([t]):o.routerService.navigate(["/"])}))}else{t=t?"?redirectPage="+encodeURIComponent(t):"",i=this.$security.getQueryString(this.$security.getRedirectedRouteQueryParams()),i=i?"?"+i:"",document.body.textContent=_.get(this.getAppLocale(),["MESSAGE_LOGIN_REDIRECTION"])||"Redirecting to sso login...";const e=this.getDeployedURL()+"services/security/ssologin"+t+i;if(window.self!==window.top)try{window.parent&&window.location.origin===window.parent.origin?"WM_PREVIEW_WINDOW"===window.parent.name&&(window.parent.location.href=window.self.location.href,window.parent.name=""):window.location.href=e}catch(t){window.location.href=e}else window.location.href=e}}handle401(e,t){let i,n,a,s;const o="DIALOG",r="PAGE",l="SSO",c=this.$security.get();let d={};if(a=c.loginConfig,this.lastLoggedUserId=c.userInfo&&c.userInfo.userId,c.userInfo&&c.userInfo.userName){switch(c.authenticated=!1,i=a.sessionTimeout||{type:o},n=i.type.toUpperCase(),n){case o:this.showLoginDialog();break;case r:e||(e=this.$security.getCurrentRoutePage()),d.redirectTo=e,d=_.merge(d,this.$security.getRedirectedRouteQueryParams()),e!==i.pageName&&this.$router.navigate([i.pageName],{queryParams:d});break;case l:this.handleSSOLogin(c)}this.setLandingPage()}else switch(s=a.type.toUpperCase(),s){case o:this.noRedirect(!0),this.showLoginDialog();break;case r:e=this.$security.getRedirectPage(c,e),d.redirectTo=e;const i=t&&t.queryParams||this.$security.getRedirectedRouteQueryParams();d=_.merge(d,i),this.$router.navigate([a.pageName],{queryParams:d}),this.$app.landingPageName=a.pageName;break;case l:this.handleSSOLogin(c)}}reloadAppData(){return this.loadSecurityConfig(!0).then((()=>this.loadMetadata().then((()=>this.updateLoggedInUserVariable()))))}noRedirect(e){return _.isUndefined(e)||(this._noRedirect=e),this._noRedirect}executeSessionFailureRequests(){this.$http.executeSessionFailureRequests()}pushToSessionFailureRequests(e){this.$http.pushToSessionFailureQueue(e)}getDeployedURL(){return this.$app.deployedUrl?this.$app.deployedUrl:o.$rootScope.project.deployedUrl}getCustomUrlScheme(){return this.$app.customUrlScheme}notify(e,t){this.$app.notify(e,t)}subscribe(e,t){return this.$app.subscribe(e,t)}getActivePage(){return this.$app.activePage}getAppLocale(){return this.$app.appLocale}getSelectedLocale(){return this.$i18n.getSelectedLocale()}notifyApp(e,t,i){this.$app.notifyApp(e,t,i)}appOnBeforeServiceCall(e){return a.triggerFn(this.$app.onBeforeServiceCall,e)}appOnServiceSuccess(e,t){return a.triggerFn(this.$app.onServiceSuccess,e,t)}appOnServiceError(e,t){return a.triggerFn(this.$app.onServiceError,e,t)}appVariablesReady(){a.triggerFn(this.$app.onAppVariablesReady)}beforeAppReady(){a.triggerFn(this.$app.onBeforeAppReady)}getPipe(e){if("date"===e)return this.$datePipe}setLandingPage(){return this.$security.getPageByLoggedInUser().then((e=>this.$app.landingPageName=e))}isPrefabType(){return this.$app.isPrefabType}isTemplateBundleType(){return this.$app.isTemplateBundleType}postMessage(e){window.top.postMessage(e,"*")}showTemplate(e){const t=this.templates[e];this.$router.navigate([t.id])}postTemplateBundleInfo(){return window.onmessage=e=>{const t=e.data;if(!_.isObject(t))return;switch(t.key){case Te.HIDE_TEMPLATES_SHOW_CASE:break;case Te.SELECT_TEMPLATE:this.showTemplate(t.templateIndex)}},setTimeout((()=>{this.postMessage({key:Te.ON_LOAD})})),a.fetchContent("json","./config.json",!0,(e=>{this.templates=[],e.error||(this.templates=e.templates,this.postMessage({key:Te.TEMPLATEBUNDLE_CONFIG,config:e}))}))}postAppTypeInfo(){if(this.isTemplateBundleType())return this.postTemplateBundleInfo()}static{this.\u0275fac=function(e){return new(e||tt)(Me.\u0275\u0275inject(Le.AbstractHttpService),Me.\u0275\u0275inject(Fe.SecurityService),Me.\u0275\u0275inject(Le.AbstractDialogService),Me.\u0275\u0275inject(Ne.Router),Me.\u0275\u0275inject(Le.App),Me.\u0275\u0275inject($e.VariablesService),Me.\u0275\u0275inject($e.MetadataService),Me.\u0275\u0275inject(Le.AbstractSpinnerService),Me.\u0275\u0275inject(Le.AbstractI18nService),Me.\u0275\u0275inject(ke.DatePipe))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:tt,factory:tt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(tt,[{type:t.Injectable}],(function(){return[{type:Le.AbstractHttpService},{type:Fe.SecurityService},{type:Le.AbstractDialogService},{type:Ne.Router},{type:Le.App},{type:$e.VariablesService},{type:$e.MetadataService},{type:Le.AbstractSpinnerService},{type:Le.AbstractI18nService},{type:ke.DatePipe}]}),null);const it=e=>"__self__"===e,nt=e=>it(e)?".":`app/prefabs/${e}`,at=new Set,st=new Map,ot=new Set,rt=(e,t)=>{let i=e;return a.stringStartsWith(e,"http://|https://|//")||(i=(t+i).replace("//","/")),i};class lt{constructor(e,t){this.$metadata=e,this.prefabConfigProvider=t}getConfig(e){return this.prefabConfigProvider.getConfig(e)}loadServiceDefs(e){return it(e)?Promise.resolve():this.$metadata.load(e)}loadStyles(e,{resources:{styles:t}}={resources:{styles:[]}}){const i=nt(e),n=t.map((e=>{if(!_.endsWith(e,"/pages/Main/Main.css"))return rt(e,i)})).filter((e=>!!e));return a.loadStyleSheets(n),Promise.resolve()}loadScripts(e,{resources:{scripts:t}}={resources:{scripts:[]}}){const i=nt(e),n=(t=t.filter((e=>!e.startsWith("npm://")))).map((e=>rt(e,i)));return a.loadScripts(n,!0)}setInProgress(e){let t,i;const n=new Promise(((e,n)=>{t=e,i=n}));n.resolve=t,n.reject=i,st.set(e,n)}resolveInProgress(e){st.get(e)&&(st.get(e).resolve(),st.delete(e))}loadDependencies(e){return ot.has(e)?Promise.resolve():at.has(e)?Promise.reject(""):st.get(e)?st.get(e):(this.setInProgress(e),this.getConfig(e).then((t=>Promise.all([this.loadStyles(e,t),this.loadScripts(e,t),this.loadServiceDefs(e)]).then((()=>{this.resolveInProgress(e),ot.add(e)})))))}static{this.\u0275fac=function(e){return new(e||lt)(Me.\u0275\u0275inject($e.MetadataService),Me.\u0275\u0275inject(Je))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:lt,factory:lt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(lt,[{type:t.Injectable}],(function(){return[{type:$e.MetadataService},{type:Je}]}),null);class ct{constructor(){this.fragments=0,this.isPageComponent=!0,this.fragmentsLoaded$=new l.Subject}init(){this.viewInit$.subscribe(a.noop,a.noop,(()=>{this.isViewInitialized=!0,this.isReady()}))}registerFragment(){this.fragments++}resolveFragment(){this.fragments--,this.isReady()}isReady(){this.isViewInitialized&&!this.fragments&&(this.registerFragment=a.noop,this.resolveFragment=a.noop,this.fragmentsLoaded$.complete())}static{this.\u0275fac=function(e){return new(e||ct)}}static{this.\u0275dir=Me.\u0275\u0275defineDirective({type:ct})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(ct,[{type:t.Directive}],(function(){return[]}),null);const dt={};class pt extends ct{constructor(){super(...arguments),this.compileContent=!1,this.destroy$=new l.Subject,this.viewInit$=new l.Subject}getContainerWidgetInjector(){return this.containerWidget.inj||this.containerWidget.injector}init(){this.App=this.injector?this.injector.get(a.App):t.inject(a.App),this.containerWidget=this.injector?this.injector.get(c.WidgetRef):t.inject(c.WidgetRef),this.i18nService=this.injector?this.injector.get(a.AbstractI18nService):t.inject(a.AbstractI18nService),this.scriptLoaderService=this.injector?this.injector.get(a.ScriptLoaderService):t.inject(a.ScriptLoaderService),this.Viewport=this.injector?this.injector.get(a.Viewport):t.inject(a.Viewport),this.viewParent=this.containerWidget.viewParent,this.viewParent.registerFragment&&this.viewParent.registerFragment(),this.registerExpressions(),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.activePageName=this.App.activePageName,this.registerPageParams(),this.defineI18nProps(),this.viewInit$.subscribe(a.noop,a.noop,(()=>{this.pageParams=this.containerWidget.partialParams})),this.spa?this.pageDirective=this.injector?this.injector.get(r.SpaPageDirective):t.inject(r.SpaPageDirective):this.pageDirective=this.injector?this.injector.get(r.PageDirective):t.inject(r.PageDirective),this.pageDirective&&(this.registerDestroyListener(this.pageDirective.subscribe("attach",(e=>this.ngOnAttach(e.refreshData)))),this.registerDestroyListener(this.pageDirective.subscribe("detach",(()=>this.ngOnDetach())))),super.init()}registerWidgets(){"Common"===this.partialName?this.Widgets=dt:this.Widgets=Object.create(dt),this.containerWidget.Widgets=this.Widgets}registerDestroyListener(e){this.destroy$.subscribe(a.noop,a.noop,(()=>e()))}initUserScript(){try{this.viewParent.prefabName&&(this.viewParent.Prefab?this.Prefab=this.viewParent.Prefab:this.Prefab=this.viewParent),this.evalUserScript(this,this.App,this.injector?this.injector.get(a.UtilsService):t.inject(a.UtilsService))}catch(e){console.error(`Error in evaluating partial (${this.partialName}) script\n`,e)}}initVariables(){const e=(this.injector?this.injector.get(o.VariablesService):t.inject(o.VariablesService)).register(this.partialName,this.getVariables(),this);this.Variables=Object.create(this.App.Variables),this.Actions=Object.create(this.App.Actions),this.containerWidget.Variables=this.Variables,this.containerWidget.Actions=this.Actions,Object.entries(e.Variables).forEach((([e,t])=>this.Variables[e]=t)),Object.entries(e.Actions).forEach((([e,t])=>this.Actions[e]=t)),this.viewInit$.subscribe(a.noop,a.noop,(()=>{a.$invokeWatchers(!0,!0),e.callback(e.Variables).catch(a.noop),e.callback(e.Actions)}))}registerExpressions(){const e=this.getExpressions();_.each(e,((e,t)=>{a.registerFnByExpr(t,e[0],e[1])}))}registerPageParams(){this.pageParams=this.containerWidget.partialParams}defineI18nProps(){this.appLocale=this.i18nService.getAppLocale()}invokeOnReady(){let e;this.containerWidget.userComponentParams&&(e=this.containerWidget.userComponentParams),this.onReady(e),this.viewParent.resolveFragment&&this.viewParent.resolveFragment()}loadScripts(){return new Promise((e=>{const t=this.partialDirective.$element.attr("scripts-to-load");t?this.scriptLoaderService.load(...t.split(",")).then(e):e()}))}mute(){const e=e=>{e&&e.mute&&e.mute()};_.each(this.Widgets,e),_.each(this.Variables,e),_.each(this.Actions,e)}unmute(){const e=e=>{e&&e.unmute&&e.unmute()};_.each(this.Widgets,e),_.each(this.Variables,e),_.each(this.Actions,e)}ngAfterViewInit(){this.loadScripts().then((()=>{this.compileContent=!0,setTimeout((()=>{this.viewInit$.complete(),this.fragmentsLoaded$.subscribe(a.noop,a.noop,(()=>this.invokeOnReady()))}),100)}))}ngOnDestroy(){this.destroy$.complete()}ngOnAttach(e){if(this.unmute(),e){const e=e=>{e&&e.startUpdate&&e.invoke&&e.invoke()};_.each(this.Variables,e),_.each(this.Actions,e)}_.each(this.Widgets,(e=>e&&e.ngOnAttach&&e.ngOnAttach()))}ngOnDetach(){this.mute(),_.each(this.Widgets,(e=>e&&e.ngOnDetach&&e.ngOnDetach()))}onReady(e){}static{this.\u0275fac=function(){let e;return function(t){return(e||(e=Me.\u0275\u0275getInheritedFactory(pt)))(t||pt)}}()}static{this.\u0275dir=Me.\u0275\u0275defineDirective({type:pt,viewQuery:function(e,t){if(1&e&&Me.\u0275\u0275viewQuery(c.PartialDirective,5),2&e){let e;Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(t.partialDirective=e.first)}},features:[Me.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(pt,[{type:t.Directive}],null,{partialDirective:[{type:t.ViewChild,args:[c.PartialDirective]}]});const ut="_cache_page",ht="REUSE_ROUTE_STRATEGY.MAX_CACHE_SIZE",mt="REUSE_ROUTE_STRATEGY.MAX_CACHE_AGE";e.WmDefaultRouteReuseStrategy=class{constructor(e,t){this.paramsToIgnore=["wm_state",ut],this.getSize=e=>e?Object.keys(e).length:0,this.cache=new a.LRUCache(e,t,((e,t)=>{this.currentRouteKey===e?this.cache.set(e,t):t.componentRef.destroy()}))}getKey(e){const t=_.chain(e.queryParams).keys().filter((e=>!_.includes(this.paramsToIgnore,e))).orderBy().map((t=>t+"="+e.queryParams[t])).value().join("&");let i=e.params.pageName;return e.data.pageName&&""===e.routeConfig.path&&(i=e.data.pageName),i&&i+(t?`?${t}`:"")}isSameQueryParams(e,t){try{const i=e.queryParams,n=t.queryParams,a=i?this.getSize(i):0,s=n?this.getSize(n):0;return 0===a&&0===s||a===s&&JSON.stringify(i)===JSON.stringify(n)}catch(e){return!1}}isCacheEnabled(e,t){const i=e.queryParams[ut];return _.isNil(i)?t:"true"===i||!0===i}shouldDetach(e){const t=this.getKey(e);return!!this.isCacheEnabled(e,!!e.data[ut])||(this.cache.delete(t),!1)}shouldAttach(e){const t=this.getKey(e);this.currentRouteKey=t;const i=this.cache.get(t);return!(!i||!this.isCacheEnabled(e,!!i[ut]))||(this.cache.delete(t),!1)}store(e,t){if(t){const i=this.getKey(e);t[ut]=!!e.data[ut],this.cache.set(i,t)}}retrieve(e){const t=this.getKey(e);return this.cache.get(t)}reset(e){if(!e)return this.cache.clear();{this.cache.delete(e);const t=e+="?",i=[];for(let e of this.cache.keys())e.startsWith(t)&&i.push(e);i.forEach((e=>this.cache.delete(e)))}}},e.WmDefaultRouteReuseStrategy=d.__decorate([d.__param(0,t.Inject(ht)),d.__param(1,t.Inject(mt)),d.__metadata("design:paramtypes",[Number,Number])],e.WmDefaultRouteReuseStrategy);class gt extends e.WmDefaultRouteReuseStrategy{constructor(){super()}isSameRoute(e,t){if(e.routeConfig&&"prefab-preview"===e.routeConfig.path)return!1;const i=e.params,n=t.params,a=this.getSize(i),s=this.getSize(n);return 0===a&&0===s||a===s&&(i.pageName===n.pageName&&this.isSameQueryParams(e,t))}shouldReuseRoute(e,t){return this.isSameRoute(e,t)}}class ft extends e.WmDefaultRouteReuseStrategy{constructor(){super()}isSameRoute(e,t){return!e.routeConfig&&!t.routeConfig||e.routeConfig===t.routeConfig&&(e.routeConfig!==t.routeConfig||(!(!e.data.layoutName||!t.data.layoutName)||this.isSameQueryParams(e,t)))}shouldReuseRoute(e,t){return this.isSameRoute(e,t)}}class vt extends ct{constructor(){super(...arguments),this.startupVariablesLoaded=!1,this.pageTransitionCompleted=!1,this.destroy$=new l.Subject,this.viewInit$=new l.Subject,this.formatsByLocale={timezone:""}}static{this.lastPageSnapShot=null}init(){a.muteWatchers(),this.App=this.injector?this.injector.get(a.App):t.inject(a.App),this.route=this.injector?this.injector.get(i.ActivatedRoute):t.inject(i.ActivatedRoute),this.appManager=this.injector?this.injector.get(tt):t.inject(tt),this.navigationService=this.injector?this.injector.get(a.AbstractNavigationService):t.inject(a.AbstractNavigationService),this.scriptLoaderService=this.injector?this.injector.get(a.ScriptLoaderService):t.inject(a.ScriptLoaderService),this.i18nService=this.injector?this.injector.get(a.AbstractI18nService):t.inject(a.AbstractI18nService),this.router=this.injector?this.injector.get(i.Router):t.inject(i.Router),this.Viewport=this.injector?this.injector.get(a.Viewport):t.inject(a.Viewport),this.registerExpressions(),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.App.lastActivePageName=this.App.activePageName,this.App.activePageName=this.pageName,this.App.activePage=this,this.activePageName=this.pageName,this.registerPageParams(),this.defineI18nProps(),super.init()}registerWidgets(){this.Widgets=Object.create(dt),this.App.Widgets=Object.create(this.Widgets)}initUserScript(){try{this.evalUserScript(this,this.App,this.injector?this.injector.get(a.UtilsService):t.inject(a.UtilsService))}catch(e){console.error(`Error in evaluating page (${this.pageName}) script\n`,e)}}registerPageParams(){const e=this.route.queryParams.subscribe((e=>this.pageParams=this.App.pageParams=_.extend({},e)));this.registerDestroyListener((()=>e.unsubscribe()))}registerDestroyListener(e){this.destroy$.subscribe(a.noop,a.noop,(()=>e()))}defineI18nProps(){this.appLocale=this.i18nService.getAppLocale()}initVariables(){const e=(this.injector?this.injector.get(o.VariablesService):t.inject(o.VariablesService)).register(this.pageName,this.getVariables(),this);this.Variables=Object.create(this.App.Variables),this.Actions=Object.create(this.App.Actions),Object.entries(e.Variables).forEach((([e,t])=>this.Variables[e]=t)),Object.entries(e.Actions).forEach((([e,t])=>this.Actions[e]=t));const i=this.viewInit$.subscribe(a.noop,a.noop,(()=>{this.appManager.isAppVariablesFired()||(e.callback(this.App.Variables).catch(a.noop).then((()=>{this.appManager.notify("app-variables-data-loaded",{pageName:this.pageName})})),e.callback(this.App.Actions),this.appManager.appVariablesReady(),this.appManager.isAppVariablesFired(!0)),e.callback(e.Variables).catch(a.noop).then((()=>{this.appManager.notify("page-variables-data-loaded",{pageName:this.pageName}),this.startupVariablesLoaded=!0,setTimeout((()=>{this.showPageContent=!0}),100)})),e.callback(e.Actions),i.unsubscribe()}))}setTimezone(e){this.i18nService.setTimezone(e,this)}registerExpressions(){const e=this.getExpressions();_.each(e,((e,t)=>{a.registerFnByExpr(t,e[0],e[1])}))}runPageTransition(e){e=e||this.navigationService.getPageTransition();const t=vt.lastPageSnapShot;return new Promise((i=>{if(e&&!e.startsWith("none")&&t){const n=t.parent(),a=t=>{!i||t&&t.pseudoElement||(n.off("animationend",a),n.removeClass(e),n.children().first().remove(),i(),i=null)};e="page-transition page-transition-"+e,t.addClass("page-exit"),this.$page.addClass("page-entry"),n.addClass(e),n.on("animationend",a),setTimeout(a,1e3)}else i()})).then((()=>{this.$page&&this.$page.removeClass("page-entry"),t&&(t.remove(),vt.lastPageSnapShot=null),this.pageTransitionCompleted=!0}))}invokeOnReady(){this.onReady(),this.appManager.notify("pageReady",{name:this.pageName,instance:this}),(this.App.onPageReady||a.noop)(this.pageName,this);const e=a.getWmProjectProperties()?.homePage;window.top.name!==window.name&&e===this.pageName&&window.top.postMessage({key:"onHomepageLoad"},"*")}loadScripts(){return new Promise((e=>{const t=this.pageDirective&&this.pageDirective.$element.attr("scripts-to-load");t?this.scriptLoaderService.load(...t.split(",")).then(e):e()}))}restoreLastPageSnapshot(){a.isMobileApp()&&vt.lastPageSnapShot&&this.$page&&this.$page.parent().prepend(vt.lastPageSnapShot)}savePageSnapShot(){vt.lastPageSnapShot&&vt.lastPageSnapShot.remove(),a.isMobileApp()&&this.$page&&(vt.lastPageSnapShot=this.$page.clone(),this.$page.parents("app-root").prepend(vt.lastPageSnapShot))}saveScrollPosition(){const e=(t,i,n=!0,a=t)=>{n&&t.children().each(((t,n)=>e($(n),i)));const s=a.scrollLeft(),o=a.scrollTop();(s>0||o>0)&&t.attr(i,s+","+o)};e(this.$page,"data-scroll-position"),this.$page.attr("data-window-scroll-position",window.scrollX+","+window.scrollY)}restoreScrollPosition(){const e=(t,i,n=!0,a=t)=>{const s=(t.attr(i)||"").split(",");s.length>1&&(a.scrollLeft(s[0]),a.scrollTop(s[1])),t.removeAttr(i),n&&t.children().each(((t,n)=>e($(n),i)))};e(this.$page,"data-scroll-position"),e(this.$page,"data-window-scroll-position",!1,$(window))}canDeactivate(){let e;return e=this.onBeforePageLeave(),!1!==e&&(e=(this.App.onBeforePageLeave||a.noop)(this.App.activePageName,this.App.activePage)),void 0===e||e}ngAfterViewInit(){this.route.snapshot.data[ut]=this.canReuse(),this.pageDirective&&(this.$page=this.pageDirective.$element.parent(),a.isIos()&&this.$page.addClass("ios-page"),a.isAndroid()&&this.$page.addClass("android-page")),this.restoreLastPageSnapshot(),this.loadScripts().then((()=>{this.runPageTransition().then((()=>{this.compilePageContent=!0,setTimeout((()=>{this.onPageContentReady=()=>{this.fragmentsLoaded$.subscribe(a.noop,a.noop,(()=>{this.invokeOnReady()})),a.unMuteWatchers(),this.viewInit$.complete(),this.onPageContentReady=a.noop}}),0)}))}))}ngOnDestroy(){this.savePageSnapShot(),this.destroy$.complete()}captureApplicationThumbnail(){const e=this;"true"===localStorage.getItem("captureApplicationThumbnail")&&this.App.landingPageName===this.pageName&&!this.App.isApplicationThumbnailCaptured&&html2canvas(document.body).then((t=>{try{e.App.isApplicationThumbnailCaptured=!0;const i=t.toDataURL("image/png");console.log(i);const n=document.createElement("a");n.href=i,n.download="screenshot.jpg",n.click()}catch(e){console.error("Error in html2canvas then block:",e)}})).catch((e=>{console.error("Error in html2canvas promise:",e)}))}onReady(){}onBeforePageReady(){}onBeforePageLeave(){}onPageContentReady(){}canReuse(){return!(!this.pageDirective||!this.pageDirective.cache)}mute(){const e=e=>{e&&e.mute&&e.mute()};_.each(this.Widgets,e),_.each(this.Variables,e),_.each(this.Actions,e)}unmute(e=this){const t=e=>{e&&e.unmute&&e.unmute()};_.each(this.Widgets,t),_.each(this.Variables,t),_.each(this.Actions,t)}ngOnAttach(){if(this.route.snapshot.data[ut]=this.canReuse(),this.registerPageParams(),this.App.lastActivePageName=this.App.activePageName,this.App.activePageName=this.pageName,this.App.activePage=this,this.activePageName=this.pageName,this.restoreLastPageSnapshot(),this.unmute(),this.App.Widgets=Object.create(this.Widgets),this.pageDirective&&this.pageDirective.refreshdataonattach){const e=e=>{e&&e.startUpdate&&e.invoke&&e.invoke()};_.each(this.Variables,e),_.each(this.Actions,e)}this.runPageTransition().then((()=>{setTimeout((()=>this.restoreScrollPosition()),100),_.each(this.Widgets,(e=>e&&e.ngOnAttach&&e.ngOnAttach())),this.appManager.notify("pageAttach",{name:this.pageName,instance:this})}))}ngOnDetach(){this.saveScrollPosition(),this.savePageSnapShot(),this.mute(),_.each(this.Widgets,(e=>e&&e.ngOnDetach&&e.ngOnDetach())),this.appManager.notify("pageDetach",{name:this.pageName,instance:this})}ngAfterContentInit(){this.onBeforePageReady()}static clear(){vt.lastPageSnapShot&&(vt.lastPageSnapShot.remove(),vt.lastPageSnapShot=null)}static{this.\u0275fac=function(){let e;return function(t){return(e||(e=Me.\u0275\u0275getInheritedFactory(vt)))(t||vt)}}()}static{this.\u0275dir=Me.\u0275\u0275defineDirective({type:vt,viewQuery:function(e,t){if(1&e&&Me.\u0275\u0275viewQuery(r.PageDirective,5),2&e){let e;Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(t.pageDirective=e.first)}},hostBindings:function(e,t){1&e&&Me.\u0275\u0275listener("beforeunload",(function(){return t.canDeactivate()}),!1,Me.\u0275\u0275resolveWindow)},features:[Me.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(vt,[{type:t.Directive}],null,{pageDirective:[{type:t.ViewChild,args:[r.PageDirective]}],canDeactivate:[{type:t.HostListener,args:["window:beforeunload"]}]});class bt extends ct{constructor(){super(...arguments),this.compileContent=!1,this.destroy$=new l.Subject,this.viewInit$=new l.Subject,this.invokeEvent=e=>{this.events[e]()}}getContainerWidgetInjector(){return this.containerWidget.inj||this.containerWidget.injector}init(){this.App=this.injector?this.injector.get(a.App):t.inject(a.App),this.containerWidget=this.injector?this.injector.get(c.WidgetRef):t.inject(c.WidgetRef),this.i18nService=this.injector?this.injector.get(a.AbstractI18nService):t.inject(a.AbstractI18nService),this.scriptLoaderService=this.injector?this.injector.get(a.ScriptLoaderService):t.inject(a.ScriptLoaderService),this.Viewport=this.injector?this.injector.get(a.Viewport):t.inject(a.Viewport),this.viewParent=this.containerWidget.viewParent,this.viewParent.registerFragment&&this.viewParent.registerFragment(),this.registerExpressions(),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.registerEvents(),this.activePageName=this.App.activePageName,this.registerPageParams(),this.defineI18nProps(),this.viewInit$.subscribe(a.noop,a.noop,(()=>{this.pageParams=this.containerWidget.props})),this.spa?this.pageDirective=this.injector?this.injector.get(r.SpaPageDirective):t.inject(r.SpaPageDirective):this.pageDirective=this.injector?this.injector.get(r.PageDirective):t.inject(r.PageDirective),this.pageDirective&&(this.registerDestroyListener(this.pageDirective.subscribe("attach",(e=>this.ngOnAttach(e.refreshData)))),this.registerDestroyListener(this.pageDirective.subscribe("detach",(()=>this.ngOnDetach())))),super.init()}registerWidgets(){this.Widgets=Object.create(dt),this.App.Widgets=Object.create(this.Widgets)}registerEvents(){this.events={},this.containerWidget.eventHandlers.forEach(((e,t)=>{this.events[t]=(...e)=>{this.containerWidget.invokeEventCallback(t,{$event:e[0],$data:e[1]})}}))}registerDestroyListener(e){this.destroy$.subscribe(a.noop,a.noop,(()=>e()))}initUserScript(){try{this.viewParent.prefabName&&(this.viewParent.Prefab?this.Prefab=this.viewParent.Prefab:this.Prefab=this.viewParent),this.evalUserScript(this,this.App,this.injector?this.injector.get(a.UtilsService):t.inject(a.UtilsService))}catch(e){console.error(`Error in evaluating partial (${this.customWidgetName}) script\n`,e)}}initVariables(){const e=(this.injector?this.injector.get(o.VariablesService):t.inject(o.VariablesService)).register(this.customWidgetName,this.getVariables(),this);this.Variables=Object.create(this.App.Variables),this.Actions=Object.create(this.App.Actions),this.containerWidget.Variables=this.Variables,this.containerWidget.Actions=this.Actions,Object.entries(e.Variables).forEach((([e,t])=>this.Variables[e]=t)),Object.entries(e.Actions).forEach((([e,t])=>this.Actions[e]=t)),this.viewInit$.subscribe(a.noop,a.noop,(()=>{a.$invokeWatchers(!0,!0),e.callback(e.Variables).catch(a.noop),e.callback(e.Actions)}))}registerExpressions(){const e=this.getExpressions();_.each(e,((e,t)=>{a.registerFnByExpr(t,e[0],e[1])}))}registerPageParams(){this.pageParams=this.containerWidget.props}defineI18nProps(){this.appLocale=this.i18nService.getAppLocale()}invokeOnReady(){let e;this.containerWidget.userComponentParams&&(e=this.containerWidget.userComponentParams),this.onReady(e),this.viewParent.resolveFragment&&this.viewParent.resolveFragment()}loadScripts(){}mute(){const e=e=>{e&&e.mute&&e.mute()};_.each(this.Widgets,e),_.each(this.Variables,e),_.each(this.Actions,e)}unmute(){const e=e=>{e&&e.unmute&&e.unmute()};_.each(this.Widgets,e),_.each(this.Variables,e),_.each(this.Actions,e)}ngAfterViewInit(){this.invokeOnReady()}ngOnDestroy(){this.destroy$.complete()}ngOnAttach(e){if(this.unmute(),e){const e=e=>{e&&e.startUpdate&&e.invoke&&e.invoke()};_.each(this.Variables,e),_.each(this.Actions,e)}_.each(this.Widgets,(e=>e&&e.ngOnAttach&&e.ngOnAttach()))}ngOnDetach(){this.mute(),_.each(this.Widgets,(e=>e&&e.ngOnDetach&&e.ngOnDetach()))}onReady(e){}static{this.\u0275fac=function(){let e;return function(t){return(e||(e=Me.\u0275\u0275getInheritedFactory(bt)))(t||bt)}}()}static{this.\u0275dir=Me.\u0275\u0275defineDirective({type:bt,features:[Me.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(bt,[{type:t.Directive}],null,null);class yt extends ct{constructor(){super(...arguments),this.compileContent=!1,this.destroy$=new l.Subject,this.viewInit$=new l.Subject}getContainerWidgetInjector(){return this.containerWidget.inj||this.containerWidget.injector}init(){this.App=this.injector.get(a.App),this.containerWidget=this.injector?this.injector.get(c.WidgetRef):t.inject(c.WidgetRef),this.prefabMngr=this.injector?this.injector.get(lt):t.inject(lt),this.i18nService=this.injector?this.injector.get(a.AbstractI18nService):t.inject(a.AbstractI18nService),this.scriptLoaderService=this.injector?this.injector.get(a.ScriptLoaderService):t.inject(a.ScriptLoaderService),this.Viewport=this.injector?this.injector.get(a.Viewport):t.inject(a.Viewport),this.viewParent=this.containerWidget.viewParent,this.viewParent.registerFragment&&this.viewParent.registerFragment(),this.spa?this.pageDirective=this.injector?this.injector.get(r.SpaPageDirective):t.inject(r.SpaPageDirective):this.pageDirective=this.injector?this.injector.get(r.PageDirective):t.inject(r.PageDirective),this.pageDirective&&(this.registerDestroyListener(this.pageDirective.subscribe("attach",(e=>this.ngOnAttach(e.refreshData)))),this.registerDestroyListener(this.pageDirective.subscribe("detach",(()=>this.ngOnDetach())))),this.registerExpressions(),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.registerProps(),this.defineI18nProps(),super.init()}registerWidgets(){this.Widgets={},this.Widgets={},this.containerWidget.Widgets=this.Widgets}initUserScript(){try{this.evalUserScript(this,this.App,this.injector.get(a.UtilsService))}catch(e){console.error(`Error in evaluating prefab (${this.prefabName}) script\n`,e)}}registerChangeListeners(){this.containerWidget.registerPropertyChangeListener(this.onPropertyChange),this.containerWidget.registerStyleChangeListener(this.onPropertyChange)}registerDestroyListener(e){this.destroy$.subscribe(a.noop,a.noop,(()=>e()))}defineI18nProps(){this.appLocale=this.i18nService.getPrefabLocaleBundle(this.prefabName)}registerProps(){this.prefabMngr.getConfig(this.prefabName).then((e=>{e&&(this.displayName=e.displayName,Object.entries(e.properties||{}).forEach((([e,t])=>{let i;const n=_.trim(t.value);_.startsWith(n,"bind:")&&(i=n.replace("bind:","")),Object.defineProperty(this,e,{get:()=>this.containerWidget[e],set:t=>this.containerWidget.widget[e]=t}),i&&this.registerDestroyListener(a.$watch(i,this,{},(t=>this.containerWidget.widget[e]=t)))})),Object.entries(e.events||{}).forEach((([e,t])=>{this[e]=(...t)=>{const i=e.substr(2).toLowerCase();this.containerWidget.invokeEventCallback(i,{$event:t[0],$data:t[1]})}})),Object.entries(e.methods||{}).forEach((([e,t])=>{this.containerWidget[e]=(...t)=>{try{if(this[e])return this[e].apply(this,t)}catch(t){console.warn(`error in executing prefab-${this.prefabName} method-${e}`)}}}))),this.containerWidget.setProps(e),a.isIE()&&(this.containerWidget.widget=this.containerWidget.createProxy())}))}initVariables(){const e=this.injector.get(o.VariablesService).register(this.prefabName,this.getVariables(),this);this.Variables={},this.Actions={},this.containerWidget.Variables=this.Variables,this.containerWidget.Actions=this.Actions,Object.entries(e.Variables).forEach((([e,t])=>this.Variables[e]=t)),Object.entries(e.Actions).forEach((([e,t])=>this.Actions[e]=t)),this.viewInit$.subscribe(a.noop,a.noop,(()=>{e.callback(e.Variables).catch(a.noop),e.callback(e.Actions)}))}registerExpressions(){const e=this.getExpressions();_.each(e,((e,t)=>{a.registerFnByExpr(t,e[0],e[1])}))}invokeOnReady(){a.$invokeWatchers(!0,!0),this.onReady(),this.viewParent.resolveFragment&&this.viewParent.resolveFragment(),this.containerWidget.invokeEventCallback("load")}loadScripts(){return new Promise((e=>{const t=this.prefabContainerDirective.$element.attr("scripts-to-load");t?this.scriptLoaderService.load(...t.split(",")).then(e):e()}))}mute(){const e=e=>{e&&e.mute&&e.mute()};_.each(this.Widgets,e),_.each(this.Variables,e),_.each(this.Actions,e)}unmute(){const e=e=>{e&&e.unmute&&e.unmute()};_.each(this.Widgets,e),_.each(this.Variables,e),_.each(this.Actions,e)}ngOnAttach(e){if(this.unmute(),e){const e=e=>{e&&e.startUpdate&&e.invoke&&e.invoke()};_.each(this.Variables,e),_.each(this.Actions,e)}_.each(this.Widgets,(e=>e&&e.ngOnAttach&&e.ngOnAttach()))}ngOnDetach(){this.mute(),_.each(this.Widgets,(e=>e&&e.ngOnDetach&&e.ngOnDetach()))}ngAfterViewInit(){this.loadScripts().then((()=>{this.compileContent=!0,this.registerChangeListeners(),setTimeout((()=>{this.viewInit$.complete(),this.fragmentsLoaded$.subscribe(a.noop,a.noop,(()=>this.invokeOnReady()))}),100)}))}ngOnDestroy(){this.destroy$.complete()}onPropertyChange(){}onReady(){}static{this.\u0275fac=function(){let e;return function(t){return(e||(e=Me.\u0275\u0275getInheritedFactory(yt)))(t||yt)}}()}static{this.\u0275dir=Me.\u0275\u0275defineDirective({type:yt,viewQuery:function(e,t){if(1&e&&Me.\u0275\u0275viewQuery(p.PrefabContainerDirective,5),2&e){let e;Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(t.prefabContainerDirective=e.first)}},features:[Me.\u0275\u0275InheritDefinitionFeature]})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(yt,[{type:t.Directive}],null,{prefabContainerDirective:[{type:t.ViewChild,args:[p.PrefabContainerDirective]}]});class wt{registerExpressions(){const e=this.getExpressions();_.each(e,((e,t)=>{a.registerFnByExpr(t,e[0],e[1])}))}overrideRouterOutlet(){const e=this.routerOutlet.attach,t=this.routerOutlet.detach;this.routerOutlet.attach=t=>{e.call(this.routerOutlet,t),t.instance.ngOnAttach()},this.routerOutlet.detach=()=>t.call(this.routerOutlet)}ngAfterViewInit(){setTimeout((()=>{this.overrideRouterOutlet()}),10)}init(){this.App=this.injector.get(a.App),this.App.activeLayoutName=this.layoutName,this.App.layoutPages=this.layoutPages,this.registerExpressions()}ngOnDestroy(){}canReuse(){}ngOnAttach(){}ngOnDetach(){}onActivate(e){_.extend(this,e)}static{this.\u0275fac=function(e){return new(e||wt)}}static{this.\u0275dir=Me.\u0275\u0275defineDirective({type:wt,viewQuery:function(e,t){if(1&e&&(Me.\u0275\u0275viewQuery(i.RouterOutlet,5),Me.\u0275\u0275viewQuery(r.PageDirective,5)),2&e){let e;Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(t.routerOutlet=e.first),Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(t.pageDirective=e.first)}}})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(wt,[{type:t.Directive}],null,{routerOutlet:[{type:t.ViewChild,args:[i.RouterOutlet]}],pageDirective:[{type:t.ViewChild,args:[r.PageDirective]}]});class Pt extends ct{constructor(){super(...arguments),this.startupVariablesLoaded=!1,this.pageTransitionCompleted=!1,this.destroy$=new l.Subject,this.viewInit$=new l.Subject,this.formatsByLocale={timezone:""}}static{this.lastPageSnapShot=null}init(){a.muteWatchers(),this.App=this.injector?this.injector.get(a.App):t.inject(a.App),this.route=this.injector?this.injector.get(i.ActivatedRoute):t.inject(i.ActivatedRoute),this.appManager=this.injector?this.injector.get(tt):t.inject(tt),this.navigationService=this.injector?this.injector.get(a.AbstractNavigationService):t.inject(a.AbstractNavigationService),this.scriptLoaderService=this.injector?this.injector.get(a.ScriptLoaderService):t.inject(a.ScriptLoaderService),this.i18nService=this.injector?this.injector.get(a.AbstractI18nService):t.inject(a.AbstractI18nService),this.router=this.injector?this.injector.get(i.Router):t.inject(i.Router),this.Viewport=this.injector?this.injector.get(a.Viewport):t.inject(a.Viewport),this.layoutDirective=this.injector?this.injector.get(r.LayoutDirective):t.inject(r.LayoutDirective),this.registerExpressions(),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.App.lastActivePageName=this.App.activePageName,this.App.activePageName=this.pageName,this.App.activePage=this,this.activePageName=this.pageName,this.registerPageParams(),this.defineI18nProps(),super.init()}registerWidgets(){this.Widgets=Object.create(dt),this.App.Widgets=Object.create(this.Widgets)}initUserScript(){try{this.evalUserScript(this,this.App,this.injector?this.injector.get(a.UtilsService):t.inject(a.UtilsService))}catch(e){console.error(`Error in evaluating page (${this.pageName}) script\n`,e)}}registerPageParams(){const e=this.route.queryParams.subscribe((e=>this.pageParams=this.App.pageParams=_.extend({},e)));this.registerDestroyListener((()=>e.unsubscribe()))}registerDestroyListener(e){this.destroy$.subscribe(a.noop,a.noop,(()=>e()))}defineI18nProps(){this.appLocale=this.i18nService.getAppLocale()}initVariables(){const e=(this.injector?this.injector.get(o.VariablesService):t.inject(o.VariablesService)).register(this.pageName,this.getVariables(),this);this.Variables=Object.create(this.App.Variables),this.Actions=Object.create(this.App.Actions),Object.entries(e.Variables).forEach((([e,t])=>this.Variables[e]=t)),Object.entries(e.Actions).forEach((([e,t])=>this.Actions[e]=t));const i=this.viewInit$.subscribe(a.noop,a.noop,(()=>{this.appManager.isAppVariablesFired()||(e.callback(this.App.Variables).catch(a.noop).then((()=>{this.appManager.notify("app-variables-data-loaded",{pageName:this.pageName})})),e.callback(this.App.Actions),this.appManager.appVariablesReady(),this.appManager.isAppVariablesFired(!0)),e.callback(e.Variables).catch(a.noop).then((()=>{this.appManager.notify("page-variables-data-loaded",{pageName:this.pageName}),this.startupVariablesLoaded=!0,setTimeout((()=>{this.showPageContent=!0}),100)})),e.callback(e.Actions),i.unsubscribe()}))}setTimezone(e){this.i18nService.setTimezone(e,this)}registerExpressions(){const e=this.getExpressions();_.each(e,((e,t)=>{a.registerFnByExpr(t,e[0],e[1])}))}runPageTransition(e){e=e||this.navigationService.getPageTransition();const t=Pt.lastPageSnapShot;return new Promise((i=>{if(e&&!e.startsWith("none")&&t){const n=t.parent(),a=t=>{!i||t&&t.pseudoElement||(n.off("animationend",a),n.removeClass(e),n.children().first().remove(),i(),i=null)};e="page-transition page-transition-"+e,t.addClass("page-exit"),this.$page.addClass("page-entry"),n.addClass(e),n.on("animationend",a),setTimeout(a,1e3)}else i()})).then((()=>{this.$page&&this.$page.removeClass("page-entry"),t&&(t.remove(),Pt.lastPageSnapShot=null),this.pageTransitionCompleted=!0}))}invokeOnReady(){this.onReady(),this.appManager.notify("highlightActiveLink",{pageName:this.pageName}),this.appManager.notify("pageReady",{name:this.pageName,instance:this}),(this.App.onPageReady||a.noop)(this.pageName,this)}loadScripts(){return new Promise((e=>{const t=this.spaPageDirective&&this.spaPageDirective.$element.attr("scripts-to-load");t?this.scriptLoaderService.load(...t.split(",")).then(e):e()}))}restoreLastPageSnapshot(){a.isMobileApp()&&Pt.lastPageSnapShot&&this.$page&&this.$page.parent().prepend(Pt.lastPageSnapShot)}savePageSnapShot(){Pt.lastPageSnapShot&&Pt.lastPageSnapShot.remove(),a.isMobileApp()&&this.$page&&(Pt.lastPageSnapShot=this.$page.clone(),this.$page.parents("app-root").prepend(Pt.lastPageSnapShot))}saveScrollPosition(){const e=(t,i,n=!0,a=t)=>{n&&t.children().each(((t,n)=>e($(n),i)));const s=a.scrollLeft(),o=a.scrollTop();(s>0||o>0)&&t.attr(i,s+","+o)};e(this.$page,"data-scroll-position"),this.$page.attr("data-window-scroll-position",window.scrollX+","+window.scrollY)}restoreScrollPosition(){const e=(t,i,n=!0,a=t)=>{const s=(t.attr(i)||"").split(",");s.length>1&&(a.scrollLeft(s[0]),a.scrollTop(s[1])),t.removeAttr(i),n&&t.children().each(((t,n)=>e($(n),i)))};e(this.$page,"data-scroll-position"),e(this.$page,"data-window-scroll-position",!1,$(window))}canDeactivate(){let e;return e=this.onBeforePageLeave(),!1!==e&&(e=(this.App.onBeforePageLeave||a.noop)(this.App.activePageName,this.App.activePage)),void 0===e||e}ngAfterViewInit(){this.route.snapshot.data[ut]=this.canReuse(),this.layoutDirective&&(this.$page=this.layoutDirective.$element.parent(),a.isIos()&&this.$page.addClass("ios-page"),a.isAndroid()&&this.$page.addClass("android-page")),this.restoreLastPageSnapshot(),this.loadScripts().then((()=>{this.runPageTransition().then((()=>{this.compilePageContent=!0,setTimeout((()=>{this.onPageContentReady=()=>{this.fragmentsLoaded$.subscribe(a.noop,a.noop,(()=>{this.invokeOnReady()})),a.unMuteWatchers(),this.viewInit$.complete(),this.onPageContentReady=a.noop}}),0)}))}))}ngOnDestroy(){this.savePageSnapShot(),this.destroy$.complete()}onReady(){}onBeforePageReady(){}onBeforePageLeave(){}onPageContentReady(){}canReuse(){return!(!this.spaPageDirective||!this.spaPageDirective.cache)}mute(){const e=e=>{e&&e.mute&&e.mute()};_.each(this.Widgets,e),_.each(this.Variables,e),_.each(this.Actions,e)}unmute(e=this){const t=e=>{e&&e.unmute&&e.unmute()};_.each(this.Widgets,t),_.each(this.Variables,t),_.each(this.Actions,t)}ngOnAttach(){if(this.route.snapshot.data[ut]=this.canReuse(),this.registerPageParams(),this.App.lastActivePageName=this.App.activePageName,this.App.activePageName=this.pageName,this.App.activePage=this,this.activePageName=this.pageName,this.restoreLastPageSnapshot(),this.unmute(),this.App.Widgets=Object.create(this.Widgets),this.spaPageDirective&&this.spaPageDirective.refreshdataonattach){const e=e=>{e&&e.startUpdate&&e.invoke&&e.invoke()};_.each(this.Variables,e),_.each(this.Actions,e)}this.runPageTransition().then((()=>{setTimeout((()=>this.restoreScrollPosition()),100),_.each(this.Widgets,(e=>e&&e.ngOnAttach&&e.ngOnAttach())),this.appManager.notify("pageAttach",{name:this.pageName,instance:this})})),this.appManager.notify("highlightActiveLink",{pageName:this.pageName})}ngOnDetach(){this.saveScrollPosition(),this.savePageSnapShot(),this.mute(),_.each(this.Widgets,(e=>e&&e.ngOnDetach&&e.ngOnDetach())),this.appManager.notify("pageDetach",{name:this.pageName,instance:this})}ngAfterContentInit(){this.onBeforePageReady()}static clear(){Pt.lastPageSnapShot&&(Pt.lastPageSnapShot.remove(),Pt.lastPageSnapShot=null)}static{this.\u0275fac=function(){let e;return function(t){return(e||(e=Me.\u0275\u0275getInheritedFactory(Pt)))(t||Pt)}}()}static{this.\u0275dir=Me.\u0275\u0275defineDirective({type:Pt,viewQuery:function(e,t){if(1&e&&Me.\u0275\u0275viewQuery(r.SpaPageDirective,5),2&e){let e;Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(t.spaPageDirective=e.first)}},hostBindings:function(e,t){1&e&&Me.\u0275\u0275listener("beforeunload",(function(){return t.canDeactivate()}),!1,Me.\u0275\u0275resolveWindow)},features:[Me.\u0275\u0275InheritDefinitionFeature]})}}var Ct;("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Pt,[{type:t.Directive}],null,{spaPageDirective:[{type:t.ViewChild,args:[r.SpaPageDirective]}],canDeactivate:[{type:t.HostListener,args:["window:beforeunload"]}]}),function(e){e.EVERYONE="Everyone",e.ANONYMOUS="Anonymous",e.AUTHENTICATED="Authenticated"}(Ct||(Ct={}));class At{constructor(e,t,i,n){this.templateRef=e,this.viewContainerRef=t,this.securityService=i,this.inj=n,this.processed=!1;const a=this.securityService.get();this.securityEnabled=_.get(a,"securityEnabled"),this.isUserAuthenticated=_.get(a,"authenticated"),this.userRoles=_.get(a,"userInfo.userRoles")}getWidgetRolesArrayFromStr(e){const t=/&#44;/g;return""===(e=e||"")?[]:_.split(e,",").map((function(e){return _.trim(e).replace(t,",")}))}matchRoles(e,t){return e.some((function(e){return _.includes(t,e)}))}hasAccessToWidget(e,t){return!!_.includes(e,Ct.EVERYONE)||(!(!_.includes(e,Ct.ANONYMOUS)||this.isUserAuthenticated)||(!(!_.includes(e,Ct.AUTHENTICATED)||!this.isUserAuthenticated)||this.isUserAuthenticated&&this.matchRoles(e,t)))}set accessroles(e){if(this.processed)return;this.processed=!0;const t=this.getWidgetRolesArrayFromStr(e);!this.securityEnabled||this.hasAccessToWidget(t,this.userRoles)?this.viewContainerRef.createEmbeddedView(this.templateRef,this.inj._lView[8]):this.viewContainerRef.clear()}static{this.\u0275fac=function(e){return new(e||At)(Me.\u0275\u0275directiveInject(Me.TemplateRef),Me.\u0275\u0275directiveInject(Me.ViewContainerRef),Me.\u0275\u0275directiveInject(Fe.SecurityService),Me.\u0275\u0275directiveInject(Me.Injector))}}static{this.\u0275dir=Me.\u0275\u0275defineDirective({type:At,selectors:[["","accessroles",""]],inputs:{accessroles:"accessroles"}})}}function _t(e,t){if(1&e&&Me.\u0275\u0275element(0,"p",6),2&e){const e=t.$implicit;Me.\u0275\u0275property("textContent",e)}}function It(e,t){if(1&e&&(Me.\u0275\u0275elementStart(0,"div",1)(1,"div",2),Me.\u0275\u0275element(2,"i",3),Me.\u0275\u0275elementStart(3,"div",4),Me.\u0275\u0275template(4,_t,1,1,"p",5),Me.\u0275\u0275elementEnd()()()),2&e){const e=Me.\u0275\u0275nextContext();Me.\u0275\u0275property("ngClass",e.classname),Me.\u0275\u0275advance(4),Me.\u0275\u0275property("ngForOf",e.spinnermessages)}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(At,[{type:t.Directive,args:[{selector:"[accessroles]"}]}],(function(){return[{type:Me.TemplateRef},{type:Me.ViewContainerRef},{type:Fe.SecurityService},{type:Me.Injector}]}),{accessroles:[{type:t.Input}]});class Et{constructor(){}static{this.\u0275fac=function(e){return new(e||Et)}}static{this.\u0275cmp=Me.\u0275\u0275defineComponent({type:Et,selectors:[["app-spinner"]],inputs:{show:"show",spinnermessages:"spinnermessages",classname:"classname",arialabel:"arialabel"},decls:1,vars:1,consts:[["class","app-spinner",3,"ngClass",4,"ngIf"],[1,"app-spinner",3,"ngClass"],[1,"spinner-message"],[1,"spinner-image","animated","infinite","fa","fa-circle-o-notch","fa-spin"],[1,"spinner-messages"],[3,"textContent",4,"ngFor","ngForOf"],[3,"textContent"]],template:function(e,t){1&e&&Me.\u0275\u0275template(0,It,5,2,"div",0),2&e&&Me.\u0275\u0275property("ngIf",t.show)},dependencies:[ke.NgClass,ke.NgForOf,ke.NgIf,Be.TextContentDirective],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Et,[{type:t.Component,args:[{selector:"app-spinner",template:'\n        <div class="app-spinner" [ngClass]="classname" *ngIf="show">\n            <div class="spinner-message">\n                <i class="spinner-image animated infinite fa fa-circle-o-notch fa-spin"></i>\n                <div class="spinner-messages">\n                    <p *ngFor="let value of spinnermessages" [textContent]="value"></p>\n                </div>\n            </div>\n        </div>\n    '}]}],(function(){return[]}),{show:[{type:t.Input}],spinnermessages:[{type:t.Input}],classname:[{type:t.Input}],arialabel:[{type:t.Input}]});const Ot=["customToast"],xt=["customToastTmpl"],Rt=["custom-toaster-component",""];function Dt(e,t){if(1&e&&Me.\u0275\u0275element(0,"div",5),2&e){const e=t.$implicit;Me.\u0275\u0275property("name",e.key)("value",e.value)}}function St(e,t){if(1&e&&(Me.\u0275\u0275elementStart(0,"div",3),Me.\u0275\u0275template(1,Dt,1,2,"div",4),Me.\u0275\u0275pipe(2,"keyvalue"),Me.\u0275\u0275elementEnd()),2&e){const e=Me.\u0275\u0275nextContext();Me.\u0275\u0275advance(1),Me.\u0275\u0275property("ngForOf",Me.\u0275\u0275pipeBind1(2,1,e.params))}}class Tt extends g.Toast{constructor(e,t){super(e,t),this.toastrService=e,this.toastPackage=t,this.watchers=[],this.params={},this.pagename=this.message||"",this.generateParams()}generateParams(){_.forEach(this.options.partialParams,(e=>{_.isString(e.value)&&0===e.value.indexOf("bind:")?this.watchers.push(a.$watch(e.value.substr(5),this.options.context,{},(t=>{this.params[e.name]=t,a.$appDigest()}))):this.params[e.name]=e.value}))}async generateDynamicComponent(){const e=$(".parent-custom-toast");this.customToastRef.clear(),e[0].appendChild(this.customToastRef.createEmbeddedView(this.customToastTmpl).rootNodes[0])}ngAfterViewInit(){this.generateDynamicComponent()}ngOnDestroy(){_.forEach(this.watchers,(e=>e())),super.ngOnDestroy()}static{this.\u0275fac=function(e){return new(e||Tt)(Me.\u0275\u0275directiveInject(We.ToastrService),Me.\u0275\u0275directiveInject(We.ToastPackage))}}static{this.\u0275cmp=Me.\u0275\u0275defineComponent({type:Tt,selectors:[["","custom-toaster-component",""]],viewQuery:function(e,i){if(1&e&&(Me.\u0275\u0275viewQuery(Ot,7,t.ViewContainerRef),Me.\u0275\u0275viewQuery(xt,5)),2&e){let e;Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(i.customToastRef=e.first),Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(i.customToastTmpl=e.first)}},features:[Me.\u0275\u0275InheritDefinitionFeature],attrs:Rt,decls:5,vars:0,consts:[[1,"parent-custom-toast"],["customToast",""],["customToastTmpl",""],["wmContainer","","partialContainer","","content.bind","pagename"],["wmParam","","hidden","",3,"name","value",4,"ngFor","ngForOf"],["wmParam","","hidden","",3,"name","value"]],template:function(e,t){1&e&&(Me.\u0275\u0275element(0,"div",0),Me.\u0275\u0275elementContainer(1,null,1),Me.\u0275\u0275template(3,St,3,3,"ng-template",null,2,Me.\u0275\u0275templateRefExtractor))},dependencies:[ke.NgForOf,Be.ContainerDirective,Be.PartialParamHandlerDirective,Be.PartialParamDirective,Be.PartialContainerDirective,ke.KeyValuePipe],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Tt,[{type:t.Component,args:[{selector:"[custom-toaster-component]",template:'\n        <div class="parent-custom-toast"></div>\n        <ng-container #customToast></ng-container>\n        <ng-template #customToastTmpl>\n            <div wmContainer partialContainer content.bind="pagename">\n                <div *ngFor="let param of params | keyvalue" wmParam hidden\n                    [name]="param.key" [value]="param.value"></div>\n            </div>\n        </ng-template>',preserveWhitespaces:!1}]}],(function(){return[{type:We.ToastrService},{type:We.ToastPackage}]}),{customToastRef:[{type:t.ViewChild,args:["customToast",{static:!0,read:t.ViewContainerRef}]}],customToastTmpl:[{type:t.ViewChild,args:["customToastTmpl"]}]});class Mt{constructor(e,t,i,n,a){this.route=e,this.securityService=t,this.router=i,this.app=n,this.appManger=a}ngOnInit(){this.app.isPrefabType?this.router.navigate(["prefab-preview"]):this.app.isApplicationType?this.securityService.getPageByLoggedInUser().then((e=>{this.router.navigate([e])})):(this.router.navigate([a.getWmProjectProperties().homePage]),this.appManger.postAppTypeInfo())}static{this.\u0275fac=function(e){return new(e||Mt)(Me.\u0275\u0275directiveInject(Ne.ActivatedRoute),Me.\u0275\u0275directiveInject(Fe.SecurityService),Me.\u0275\u0275directiveInject(Ne.Router),Me.\u0275\u0275directiveInject(Le.App),Me.\u0275\u0275directiveInject(tt))}}static{this.\u0275cmp=Me.\u0275\u0275defineComponent({type:Mt,selectors:[["app-empty-page"]],decls:1,vars:0,template:function(e,t){1&e&&Me.\u0275\u0275element(0,"div")},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Mt,[{type:t.Component,args:[{selector:"app-empty-page",template:"<div></div>"}]}],(function(){return[{type:Ne.ActivatedRoute},{type:Fe.SecurityService},{type:Ne.Router},{type:Le.App},{type:tt}]}),null);class Nt{constructor(t,i,n,a,s,o,r){this.componentInstance=t,this.vcRef=i,this.elRef=n,this.prefabMngr=a,this.resolver=s,this.injector=o,this.componentRefProvider=r;const l=this.componentInstance.prefabName;this.prefabMngr.loadDependencies(l).then((async()=>{const t=await this.componentRefProvider.getComponentFactoryRef(l,e.ComponentType.PREFAB);if(t){const e=this.vcRef.createComponent(t,0,o);this.elRef.nativeElement.appendChild(e.location.nativeElement)}}))}static{this.\u0275fac=function(e){return new(e||Nt)(Me.\u0275\u0275directiveInject(c.WidgetRef,2),Me.\u0275\u0275directiveInject(Me.ViewContainerRef),Me.\u0275\u0275directiveInject(Me.ElementRef),Me.\u0275\u0275directiveInject(lt),Me.\u0275\u0275directiveInject(Me.ComponentFactoryResolver),Me.\u0275\u0275directiveInject(Me.Injector),Me.\u0275\u0275directiveInject(Ke))}}static{this.\u0275dir=Me.\u0275\u0275defineDirective({type:Nt,selectors:[["","wmPrefab","","prefabname",""]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Nt,[{type:t.Directive,args:[{selector:"[wmPrefab][prefabname]"}]}],(function(){return[{type:void 0,decorators:[{type:t.Self},{type:t.Inject,args:[c.WidgetRef]}]},{type:Me.ViewContainerRef},{type:Me.ElementRef},{type:lt},{type:Me.ComponentFactoryResolver},{type:Me.Injector},{type:Ke}]}),null);class kt{setPipeData(){this._pipeData=[this.preparePipeMeta(n.AsyncPipe,"async",!1,[t.ChangeDetectorRef]),this.preparePipeMeta(n.SlicePipe,"slice",!1),this.preparePipeMeta(n.PercentPipe,"percent",!0,[this._locale]),this.preparePipeMeta(n.I18nPluralPipe,"i18nPlural",!0,[n.NgLocalization]),this.preparePipeMeta(n.I18nSelectPipe,"i18nSelect",!0),this.preparePipeMeta(n.KeyValuePipe,"keyvalue",!1,[t.KeyValueDiffers]),this.preparePipeMeta(c.FileIconClassPipe,"fileIconClass",!0),this.preparePipeMeta(c.FileExtensionFromMimePipe,"fileExtensionFromMime",!0),this.preparePipeMeta(c.StateClassPipe,"stateClass",!0),this.preparePipeMeta(c.FileSizePipe,"filesize",!0),this.preparePipeMeta(c.FilterPipe,"filter",!0),this.preparePipeMeta(n.UpperCasePipe,"uppercase",!0),this.preparePipeMeta(n.LowerCasePipe,"lowercase",!0),this.preparePipeMeta(n.JsonPipe,"json",!1),this.preparePipeMeta(n.DecimalPipe,"number",!0,[this._locale]),this.preparePipeMeta(n.TitleCasePipe,"titlecase",!0),this.preparePipeMeta(n.CurrencyPipe,"currency",!0,[this._locale]),this.preparePipeMeta(n.DatePipe,"date",!0,[this._locale]),this.preparePipeMeta(c.ToDatePipe,"toDate",!0,[new n.DatePipe(this._locale),void 0,this.injector.get(a.CustomPipeManager)]),this.preparePipeMeta(c.ToNumberPipe,"toNumber",!0,[new n.DecimalPipe(this._locale),this.i18service]),this.preparePipeMeta(c.ToCurrencyPipe,"toCurrency",!0,[new n.DecimalPipe(this._locale),this.i18service]),this.preparePipeMeta(c.PrefixPipe,"prefix",!0),this.preparePipeMeta(c.SuffixPipe,"suffix",!0),this.preparePipeMeta(c.TimeFromNowPipe,"timeFromNow",!0),this.preparePipeMeta(c.NumberToStringPipe,"numberToString",!0,[new n.DecimalPipe(this._locale)]),this.preparePipeMeta(c.StringToNumberPipe,"stringToNumber",!0),this.preparePipeMeta(c.CustomPipe,"custom",!0,[this.injector.get(a.CustomPipeManager)]),this.preparePipeMeta(c.TrustAsPipe,"trustAs",!0,[this.domSanitizer]),this.preparePipeMeta(c.SanitizePipe,"sanitize",!0,[this.domSanitizer])]}unknownPipe(e){throw Error(`The pipe '${e}' could not be found`)}constructor(e,t,i,n){this.compiler=e,this.injector=t,this.domSanitizer=i,this.i18service=n,this._locale=a.getSessionStorageItem("selectedLocale")||"en",this.preparePipeMeta=(e,t,i,n=[])=>({type:{reference:e,diDeps:n},name:t,pure:i}),this._pipeData=[],this._pipeMeta=new Map,this.setPipeData(),this._pipeData.forEach((e=>{this._pipeMeta.set(e.name,e)})),this.formatsByLocale=this.i18service?this.i18service.getwidgetLocale():{}}meta(e){const t=this._pipeMeta.get(e);return t||this.unknownPipe(e),t}getPipeNameVsIsPureMap(){const e=new Map;return this._pipeMeta.forEach(((t,i)=>{e.set(i,t.pure)})),e}resolveDep(e){return this.injector.get(e.token.identifier.reference)}getInstance(e){const{type:{reference:t,diDeps:i}}=this.meta(e);if(t||this.unknownPipe(e),i.length){const e=[];for(const t of i)e.push(t);return new t(...e)}return new t}static{this.\u0275fac=function(e){return new(e||kt)(Me.\u0275\u0275inject(Me.Compiler),Me.\u0275\u0275inject(Me.Injector),Me.\u0275\u0275inject(Ge.DomSanitizer),Me.\u0275\u0275inject(Le.AbstractI18nService))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:kt,factory:kt.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(kt,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:Me.Compiler},{type:Me.Injector},{type:Ge.DomSanitizer},{type:Le.AbstractI18nService}]}),null);class Lt{constructor(e,t){this.pipeProvider=e,this.$app=t,this.supportedPipes=["toDate","toCurrency","prefix","suffix","numberToString","stringToNumber","timeFromNow","trustAs","sanitize"],this.$app.isApplicationType&&this.supportedPipes.push("custom")}getPipe(e){if(this.supportedPipes.includes(e))return this.pipeProvider.getInstance(e);throw Error(`The pipe '${e}' could not be found`)}static{this.\u0275fac=function(e){return new(e||Lt)(Me.\u0275\u0275inject(kt),Me.\u0275\u0275inject(Le.App))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Lt,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:kt},{type:Le.App}]}),null);const Ft={DialogService:a.AbstractDialogService,i18nService:a.AbstractI18nService,PipeService:Lt,statePersistence:a.StatePersistence,SpinnerService:a.AbstractSpinnerService,StatePersistenceService:a.StatePersistence,Viewport:a.Viewport,ToasterService:a.AbstractToasterService,Utils:a.UtilsService,CONSTANTS:a.ConstantService,FIELD_TYPE:a.FieldTypeService,FIELD_WIDGET:a.FieldWidgetService,DynamicComponentService:a.DynamicComponentRefProvider},$t=(...e)=>{},Bt=function(){const e=this.httpService,t=function(t,i){const n=Array.from(arguments).slice(1);return Promise.resolve(e[t].apply(e,n))},i=function(){return t.apply(void 0,["send",...Array.from(arguments)])};return["get","post","head","put","delete","jsonp","patch"].forEach((e=>i[e]=t.bind(void 0,e))),i};class jt{reload(){window.location.reload()}constructor(e,t,i,n,s,o){this.inj=e,this.i18nService=t,this.statePersistence=i,this.httpService=n,this.securityService=s,this.routeReuseStrategy=o,this.Variables={},this.Actions={},this.onAppVariablesReady=$t,this.onBeforeAppReady=$t,this.onSessionTimeout=$t,this.onPageReady=$t,this.onBeforePageLeave=$t,this.onBeforeServiceCall=$t,this.onServiceSuccess=$t,this.onServiceError=$t,this.dynamicComponentContainerRef={},this.changeLocale=this.i18nService.setSelectedLocale.bind(this.i18nService),this.getSelectedLocale=this.i18nService.getSelectedLocale.bind(this.i18nService),this.setTimezone=this.i18nService.setTimezone.bind(this.i18nService),this.setwidgetLocale=this.i18nService.setwidgetLocale.bind(this.i18nService),this._eventNotifier=new a.EventNotifier,this.landingPageName=a.getWmProjectProperties().homePage;const r=a.getWmProjectProperties();this.projectName=r.name,this.isPrefabType="PREFAB"===r.type,this.isApplicationType="APPLICATION"===r.type,this.isTemplateBundleType="TEMPLATEBUNDLE"===r.type,this.targetPlatform=r.platformType,this.httpService.registerOnSessionTimeout(this.on401.bind(this)),this.appLocale=this.i18nService.getAppLocale(),this.httpService.setLocale(this.appLocale)}clearPageCache(t){this.routeReuseStrategy instanceof e.WmDefaultRouteReuseStrategy&&this.routeReuseStrategy.reset(t)}notify(e,...t){this._eventNotifier.notify.apply(this._eventNotifier,arguments)}getDependency(e){if(a.isString(e)){if("HttpService"===e)return Bt.call(this);let t=Ft[e]&&this.inj.get(Ft[e]);if(!t&&this.inj.records?.values){const t=this.inj.records.values();let i=t?.next();for(;i&&!i.done;){if(i?.value?.value?.constructor?.SERVICE_NAME===e)return i.value.value;i=t.next()}}return t}return this.inj.get(e)}on401(){const e=_.get(this.securityService.get(),"userInfo");_.isEmpty(e)||this.onSessionTimeout()}subscribe(e,t){return this._eventNotifier.subscribe(e,t)}notifyApp(e,t,i){const n=_.get(this,"Actions.appNotification"),s=-1!==["PROCESS_REJECTED_IN_QUEUE"].indexOf(e);if(n){if(s)return void console.warn("App Error",e);t=t||"success",e=n.getMessage()||e,n.invoke({message:e,title:a.isDefined(i)?i:t.toUpperCase(),class:t,duration:"ERROR"===t.toUpperCase()?0:void 0})}else console.warn('The default Action "appNotification" doesn\'t exist in the app. App notified following error:\n',e)}registerExpressions(e){_.each(e,((e,t)=>{a.registerFnByExpr(t,e[0],e[1])}))}static{this.\u0275fac=function(e){return new(e||jt)(Me.\u0275\u0275inject(Me.Injector),Me.\u0275\u0275inject(Le.AbstractI18nService),Me.\u0275\u0275inject(Le.StatePersistence),Me.\u0275\u0275inject(Le.AbstractHttpService),Me.\u0275\u0275inject(Fe.SecurityService),Me.\u0275\u0275inject(Ne.RouteReuseStrategy))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:jt,factory:jt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(jt,[{type:t.Injectable}],(function(){return[{type:Me.Injector},{type:Le.AbstractI18nService},{type:Le.StatePersistence},{type:Le.AbstractHttpService},{type:Fe.SecurityService},{type:Ne.RouteReuseStrategy}]}),null);class Vt extends a.AbstractToasterService{constructor(e){super(),this.toaster=e}_showToaster(e,t,i,n){if(_.isNumber(n)&&(n={timeOut:n}),(n=n||{}).timeOut=a.isDefined(n.timeOut)?n.timeOut:0,n.enableHtml=a.isDefined(n.enableHtml),n.positionClass=n.positionClass||"toast-bottom-right",n.toastClass="toast",t||i){!n.bodyOutputType&&_.isObject(i)&&(i=JSON.stringify(i));const a=this.toaster[e];if(a)return a.call(this.toaster,i,t,n)}}success(e,t){return this._showToaster("success",e,t,{timeOut:5e3})}error(e,t){return this._showToaster("error",e,t,{timeOut:0})}info(e,t){return this._showToaster("info",e,t,{timeOut:0})}warn(e,t){return this._showToaster("warning",e,t,{timeOut:0})}show(e,t,i,n){return this._showToaster(e,t,i,n)}hide(e){e?this.toaster.clear(e.toastId):this.toaster.clear()}showCustom(e,t){if(e)return(t=t||{}).toastComponent=Tt,t.toastClass="custom-toaster",t.timeOut=a.isDefined(t.timeOut)?t.timeOut:0,t.enableHtml=a.isDefined(t.enableHtml),t.positionClass=t.positionClass||"toast-bottom-right",t.toastClass="toast",this.toaster.show(e,"",t)}setToasterConfig(e){_.isObject(e)?_.merge(this.toaster.toastrConfig,e):console.warn("Please pass a valid options object, For Example : {maxOpened: 1, autoDismiss: true}")}static{this.\u0275fac=function(e){return new(e||Vt)(Me.\u0275\u0275inject(We.ToastrService))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Vt,factory:Vt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Vt,[{type:t.Injectable}],(function(){return[{type:We.ToastrService}]}),null);const Gt=["ar","ar-001","ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sd","ar-sy","ar-tn","ar-ye","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","pnb","ps","sd","ug","ur","yi"];class Wt extends a.AbstractI18nService{get app(){return this.inj.get(a.App)}constructor(e,t,i,n){super(),this.$http=e,this.bsLocaleService=t,this.appDefaults=i,this.inj=n,this.defaultSupportedLocale="en",this._isAngularLocaleLoaded=!1,this.formatsByLocale={timezone:"",number:""},this.bundleLoaded={},this.appLocale={},this.prefabLocale=new Map}updateLocaleDirection(){let e="ltr";Gt.includes(this.selectedLocale)&&(e="rtl"),a.setCSS(document.body,"direction",e)}init(){this.messages={},Object.setPrototypeOf(this.appLocale,this.messages)}getSelectedLocale(){return this.selectedLocale}getDefaultSupportedLocale(){return this.defaultSupportedLocale}getAppLocale(){return this.appLocale}getPrefabLocaleBundle(e){return this.prefabLocale.has(e)||this.prefabLocale.set(e,Object.create(this.appLocale)),this.prefabLocale.get(e)}extendPrefabMessages(e){e.prefabMessages&&Object.keys(e.prefabMessages).forEach((t=>{let i=this.prefabLocale.get(t);i||(i=Object.create(this.appLocale),this.prefabLocale.set(t,i)),Object.assign(i,e.prefabMessages[t])}))}extendMessages(e){Object.assign(this.messages,e)}loadResource(e){return this.$http.get(e).toPromise().catch((()=>{console.warn(`error loading locale resource from ${e}`),Promise.resolve({})}))}loadAppLocaleBundle(){this.loadResource(`resources/i18n/${this.selectedLocale}.json`).then((e=>{this.extendMessages(e.messages),this.extendPrefabMessages(e),this.appDefaults.setFormats(e.formats),this.bundleLoaded.app=!0,this.notifyLocaleChanged()}))}loadMomentLocaleBundle(e){const t=a._WM_APP_PROJECT.cdnUrl||a._WM_APP_PROJECT.ngDest;if(this.selectedLocale===this.defaultSupportedLocale)return void moment.locale(this.defaultSupportedLocale);const i=t+`locales/moment/${e}.js`;a.loadScripts([i],!0).then((()=>{moment.locale(this.selectedLocale);let t=moment.localeData(e);t=t&&t._config,C.defineLocale(this.selectedLocale,t),this.bsLocaleService.use(this.getSelectedLocale()||this.defaultSupportedLocale),this.bundleLoaded.moment=!0,this.notifyLocaleChanged()}))}loadAngularLocaleBundle(e){return new Promise((t=>{const i=a._WM_APP_PROJECT.cdnUrl||a._WM_APP_PROJECT.ngDest;if(this.selectedLocale===this.defaultSupportedLocale)return void t();const n=i+`locales/angular/global/${e}.js`;a.loadScripts([n],!0).then((()=>{this._isAngularLocaleLoaded=!0,t()}),t)}))}loadCalendarLocaleBundle(e,t=!1){const i=a._WM_APP_PROJECT.cdnUrl||a._WM_APP_PROJECT.ngDest;let n;return e?(n=i+`locales/fullcalendar/${e}.js`,t||!a.isMobile()&&!a.isMobileApp()&&this.selectedLocale!==this.defaultSupportedLocale?a.loadScripts([n],!0):void(this.bundleLoaded.fullCalendar=!0)):Promise.resolve()}loadMomentTimeZoneBundle(e,t){return new Promise((i=>{const n=(a._WM_APP_PROJECT.cdnUrl||a._WM_APP_PROJECT.ngDest)+"locales/moment-timezone/moment-timezone-with-data.js";a.loadScripts([n],!0).then((()=>{let n=e;const a=(e=n.timezone).indexOf("+");a>-1&&(a>0&&(e=e.substr(a)),n.timezone=_.find(moment.tz.names(),(t=>e===moment.tz(t).format("Z")))),moment.tz.setDefault(e);const s=t&&t.formatsByLocale?t.formatsByLocale:this.formatsByLocale;Object.assign(s,n),i()}),i)}))}loadLocaleBundles(e){return e.moment?this.loadMomentLocaleBundle(e.moment):this.selectedLocale===this.defaultSupportedLocale&&(this.bsLocaleService.use(this.getSelectedLocale()||this.defaultSupportedLocale),this.bundleLoaded.moment=!0),e.fullCalendar&&window.FullCalendar?this.loadCalendarLocaleBundle(e.fullCalendar)?.then((()=>{this.bundleLoaded.fullCalendar=!0,this.notifyLocaleChanged()})):this.bundleLoaded.fullCalendar=!0,e.angular&&this.loadAppLocaleBundle(),this.loadAngularLocaleBundle(e.angular)}setTimezone(e,t){this.loadMomentTimeZoneBundle(e,t)}getTimezone(e){const t=_.get(this.app,"activePage.formatsByLocale.timezone"),i=_.get(e,"formatsByLocale.timezone");return i||(t||this.formatsByLocale.timezone)}getFormatsByLocale(){return this.formatsByLocale}setSelectedLocale(e){_.isObject(e)&&(e=e.datavalue);const t=a.getWmProjectProperties().supportedLanguages[e],i=Object.keys(a.getWmProjectProperties().supportedLanguages);return _.includes(i,e)&&e&&e!==this.selectedLocale?(a.setSessionStorageItem("selectedLocale",e),this.selectedLocale=e,this.init(),this.bundleLoaded.moment=!1,this.bundleLoaded.fullCalendar=!1,this.bundleLoaded.app=!1,this.bundleLoaded.angular=!1,this.bundleLoaded.libLocale=t,this.loadLocaleBundles(t).then((()=>{this.updateLocaleDirection(),this.bundleLoaded.angular=!0,this.notifyLocaleChanged()}))):Promise.resolve()}deduceAppLocale(){const e=this.getAcceptedLanguages(),t=a.getWmProjectProperties().defaultLanguage;e.push(t);let i=a.getWmProjectProperties().preferBrowserLang;i=!i||("true"===i||!0===i);let n,s=Object.keys(a.getWmProjectProperties().supportedLanguages)||[this.defaultSupportedLocale],r=i?void 0:t;if(o.CONSTANTS.hasCordova){let t=[];_.forEach(e,(function(e){let i=_.find(s,(t=>e===t))||_.find(s,(t=>e.startsWith(t)));i&&t.push(i)})),n=t[0]}const l=a.getSessionStorageItem("selectedLocale")||r||n||_.intersection(e,s)[0]||this.defaultSupportedLocale;s=s||[l];return l||s[0]}loadDefaultLocale(){Date.prototype.month=Date.prototype.getMonth;const e=this.deduceAppLocale();return this.setSelectedLocale(e)}getLocalizedMessage(e,...t){return a.replace(this.appLocale[e],t)}getAcceptedLanguages(){let e;return o.CONSTANTS.hasCordova?e=navigator.languages||[navigator.language]:(e=decodeURIComponent(a.getWmProjectProperties().preferredLanguage||""),e=e.split(",").map((function(e){return e.split(";")[0]}))),_.map(e,_.toLower)}initCalendarLocale(){return"en"!==this.selectedLocale?this.loadCalendarLocaleBundle(this.selectedLocale,!0):Promise.resolve()}isAngularLocaleLoaded(){return this._isAngularLocaleLoaded}setwidgetLocale(e){this.formatsByLocale.number=e.number}getwidgetLocale(){return this.formatsByLocale}notifyLocaleChanged(){this.bundleLoaded.moment&&this.bundleLoaded.fullCalendar&&this.bundleLoaded.angular&&this.bundleLoaded.app&&this.app.notify("locale-changed",this.bundleLoaded.libLocale)}static{this.\u0275fac=function(e){return new(e||Wt)(Me.\u0275\u0275inject(Ve.HttpClient),Me.\u0275\u0275inject(Qe.BsLocaleService),Me.\u0275\u0275inject(Le.AppDefaults),Me.\u0275\u0275inject(Me.Injector))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Wt,factory:Wt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Wt,[{type:t.Injectable}],(function(){return[{type:Ve.HttpClient},{type:Qe.BsLocaleService},{type:Le.AppDefaults},{type:Me.Injector}]}),null);class Ut extends a.AbstractSpinnerService{constructor(){super(),this.spinnerId=0,this.messageSource=new l.Subject,this.messagesByContext={}}getMessageSource(){return this.messageSource}showContextSpinner(e,t,i){const n=$('[name="'+e+'"]');if(this.messagesByContext[e]=this.messagesByContext[e]||{},0!==Object.keys(this.messagesByContext[e]).length)this.messagesByContext[e][i]=t,this.messagesByContext[e].finalMessage=this.messagesByContext[e].finalMessage+" "+this.messagesByContext[e][i],n.find(".spinner-messages-container").html(this.messagesByContext[e].finalMessage);else{const a=$('<div class="app-spinner">\n                            <div class="spinner-message" aria-label="loading gif">\n                                <i class="spinner-image animated infinite fa fa-circle-o-notch fa-spin"></i>\n                                <div class="spinner-messages">\n                                    <p class="spinner-messages-container"></p>\n                               </div>\n                            </div>\n                         </div>');this.messagesByContext[e][i]=t,this.messagesByContext[e].finalMessage=this.messagesByContext[e][i],a.find(".spinner-messages-container").html(this.messagesByContext[e].finalMessage),n.prepend(a)}return i}showAppSpinner(e,t){const i="page";this.messagesByContext[i]=this.messagesByContext[i]||{},this.messagesByContext[i][t]=e,this.messageSource.next({show:!0,message:e,messages:_.values(this.messagesByContext[i])})}hideContextSpinner(e,t){delete this.messagesByContext[e][t],1===Object.keys(this.messagesByContext[e]).length&&(this.messagesByContext[e]={});$('[name="'+e+'"]').find(".app-spinner").remove()}show(e,t,i,n,a){return t=t||++this.spinnerId,n&&"page"!==n?this.showContextSpinner(n,e,t):(this.showAppSpinner(e,t),t)}hide(e){const t=_.findKey(this.messagesByContext,(function(t){return _.includes(_.keys(t),e)}))||"page";if("page"===t)if(e){delete this.messagesByContext[t][e];const i=_.values(this.messagesByContext[t]);this.messageSource.next({show:!!i.length,messages:_.values(this.messagesByContext[t])})}else this.messagesByContext[t]={};else this.hideContextSpinner(t,e)}static{this.\u0275fac=function(e){return new(e||Ut)}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Ut,factory:Ut.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Ut,[{type:t.Injectable}],(function(){return[]}),null);const qt="body >app-root";class zt{constructor(e,t,n){this.app=e,this.router=t,this.zone=n,this.history=new Qt,this.isPageAddedToHistory=!1,this.router.events.subscribe((e=>{if(e instanceof i.NavigationStart){const t=e.url,i={};let n;this.isPageAddedToHistory||(this.isPageAddedToHistory=!1,t.indexOf("?")>0?(t.substr(t.indexOf("?")+1).split("&").forEach((e=>{const t=e.split("=");i[t[0]]=t[1]})),n=t.substr(0,t.indexOf("?"))):n=t,"/"===n[0]&&(n=n.substr(1)),n&&(delete i.name,this.history.push(new Ht(n,i,this.transition))))}}))}getPageTransition(){return _.isEmpty(this.transition)||_.isEqual("none",this.transition)?null:this.transition}goToPage(e,t){this.transition=t.transition||"",this.history.getCurrentPage()&&(this.isPageAddedToHistory=!0),this.history.push(new Ht(e,t.urlParams,this.transition)),this.zone.run((()=>this.router.navigate([`/${e}`],{queryParams:t.urlParams})))}goToPrevious(){this.history.getPagesCount()&&(this.transition=this.history.getCurrentPage().transition,_.isEmpty(this.transition)||(this.transition+="-exit"),this.history.pop(),this.isPageAddedToHistory=!0,window.history.back())}goToView(e,t,i){const n=(t=t||{}).pageName,a=t.transition||"",s=t.$event,r=this.app.activePage,l=i&&i._context&&i._context.prefabName;if(this.app.isPrefabType)this.goToElementView($(qt).find('[name="'+e+'"]'),e,n,i);else if(n===r.activePageName||l)l&&this.isPrefabWithNameExists(l)?this.goToElementView($('[prefabName="'+l+'"]').find('[name="'+e+'"]'),e,n,i):n&&n!==r.activePageName?this.app.notifyApp(o.CONSTANTS.WIDGET_DOESNT_EXIST,"error"):this.goToElementView($(qt).find('[name="'+e+'"]'),e,n,i);else if(this.isPartialWithNameExists(n))this.goToElementView($('[partialcontainer][content="'+n+'"]').find('[name="'+e+'"]'),e,n,i);else{this.goToPage(n,{viewName:e,$event:s,transition:a,urlParams:t.urlParams});const o=this.app.subscribe("pageReady",(t=>{this.goToElementView($(qt).find('[name="'+e+'"]'),e,n,i),o()}))}}goToElementView(e,t,i,n){let a,s;const o=this.app.activePage;if(e.length)switch(this.app.isPrefabType||i!==o.activePageName||(e=this.getViewElementInActivePage(e)),a=e[0].widget,a.widgetType){case"wm-accordionpane":this.showAncestors(e,n),a.expand();break;case"wm-tabpane":this.showAncestors(e,n),a.select();break;case"wm-segment-content":this.showAncestors(e,n),a.navigate();break;case"wm-panel":a.expanded=!0}else s=this.showAncestorDialog(t),setTimeout((()=>{s&&this.goToElementView($('[name="'+t+'"]'),t,i,n)}))}getViewElementInActivePage(e){let t;return e.length>1&&(t=_.filter(e,(e=>{if(_.isEmpty($(e).closest('[data-role = "partial"]'))&&_.isEmpty($(e).closest("[wmprefabcontainer]")))return e})),t&&(e=$(t))),e}isPartialWithNameExists(e){return $('[partialcontainer][content="'+e+'"]').length}isPrefabWithNameExists(e){return $('[prefabName="'+e+'"]').length}showAncestors(e,t){e.parents('[wm-navigable-element="true"]').toArray().reverse().forEach((e=>{const t=e.widget;switch(t.widgetType){case"wm-accordionpane":t.expand();break;case"wm-tabpane":t.select();break;case"wm-segment-content":t.navigate();break;case"wm-panel":t.expanded=!0}}))}showAncestorDialog(e){let t;return $("app-root [dialogtype]").each((function(){const i=$(this);if($(i.html()).find('[name="'+e+'"]').length)return t=i.attr("name"),!1})),t}static{this.\u0275fac=function(e){return new(e||zt)(Me.\u0275\u0275inject(Le.App),Me.\u0275\u0275inject(Ne.Router),Me.\u0275\u0275inject(Me.NgZone))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:zt,factory:zt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(zt,[{type:t.Injectable}],(function(){return[{type:Le.App},{type:Ne.Router},{type:Me.NgZone}]}),null);class Ht{constructor(e,t,i){this.name=e,this.urlParams=t,this.transition=i,this.transition=_.isEmpty(this.transition)?null:this.transition}isEqual(e){return e&&e.name===this.name&&_.isEqual(e.urlParams,this.urlParams)}}class Qt{constructor(){this.stack=[]}getCurrentPage(){return this.currentPage}getPagesCount(){return this.stack.length}isLastVisitedPage(e){return this.getLastPage().isEqual(e)}push(e){this.currentPage&&this.stack.push(this.currentPage),this.currentPage=e}pop(){return this.currentPage=this.stack.pop(),this.currentPage}getLastPage(){return this.stack.length>0?this.stack[this.stack.length-1]:void 0}}class Yt{constructor(){}setFormats(e){const t=e.date,i=e.time,n=t&&i?t+" "+i:void 0,a=e.currency;this.dateFormat=t,this.timeFormat=i,this.dateTimeFormat=n,this.currencyCode=a}static{this.\u0275fac=function(e){return new(e||Yt)}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Yt,factory:Yt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Yt,[{type:t.Injectable}],(function(){return[]}),null);let Kt=!1;class Jt{constructor(e,t){this.securityService=e,this.appManager=t}loadSecurityConfig(){return Kt?Promise.resolve(!0):this.appManager.loadSecurityConfig().then((()=>Kt=!0))}isAuthenticated(){return this.loadSecurityConfig().then((()=>new Promise(((e,t)=>{this.securityService.isAuthenticated(e,t)}))))}canActivate(e){return this.isAuthenticated().then((t=>t?Promise.resolve(!0):(this.appManager.handle401(e.routeConfig.path,{queryParams:e.queryParams}),Promise.resolve(!1))))}static{this.\u0275fac=function(e){return new(e||Jt)(Me.\u0275\u0275inject(Fe.SecurityService),Me.\u0275\u0275inject(tt))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Jt,factory:Jt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Jt,[{type:t.Injectable}],(function(){return[{type:Fe.SecurityService},{type:tt}]}),null);class Zt{constructor(e,t,i,n,a){this.securityService=e,this.authGuard=t,this.toasterService=i,this.app=n,this.appManager=a}canActivate(e){const t=e.data.allowedRoles;return this.authGuard.isAuthenticated().then((i=>{if(i){const e=this.securityService.get().userInfo.userRoles;return _.intersection(t,e).length>0?Promise.resolve(!0):(this.appManager.notifyApp(this.app.appLocale.LABEL_ACCESS_DENIED||"Access Denied","error"),Promise.resolve(!1))}return this.appManager.handle401(e.routeConfig.path,{queryParams:e.queryParams}),Promise.resolve(!1)}))}static{this.\u0275fac=function(e){return new(e||Zt)(Me.\u0275\u0275inject(Fe.SecurityService),Me.\u0275\u0275inject(Jt),Me.\u0275\u0275inject(Le.AbstractToasterService),Me.\u0275\u0275inject(Le.App),Me.\u0275\u0275inject(tt))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Zt,factory:Zt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Zt,[{type:t.Injectable}],(function(){return[{type:Fe.SecurityService},{type:Jt},{type:Le.AbstractToasterService},{type:Le.App},{type:tt}]}),null);class Xt{constructor(e,t){this.app=e,this.appManager=t}canActivate(e){return this.appManager.notifyApp(this.app.appLocale.MESSAGE_PAGE_NOT_FOUND||"The page you are trying to reach is not available","error"),Promise.resolve(!1)}static{this.\u0275fac=function(e){return new(e||Xt)(Me.\u0275\u0275inject(Le.App),Me.\u0275\u0275inject(tt))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Xt,factory:Xt.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Xt,[{type:t.Injectable}],(function(){return[{type:Le.App},{type:tt}]}),null);let ei=!1;class ti{constructor(e,t,i,n){this.inj=e,this.app=t,this.utilService=i,this.appJsProvider=n,this.appManager=this.inj.get(tt)}async resolve(){if(ei)return!0;try{(await this.appJsProvider.getAppScriptFn())(this.app,this.utilService,this.inj)}catch(e){console.warn("Error in executing app.js",e)}return ei=!0,!0}static{this.\u0275fac=function(e){return new(e||ti)(Me.\u0275\u0275inject(Me.Injector),Me.\u0275\u0275inject(Le.App),Me.\u0275\u0275inject(Le.UtilsService),Me.\u0275\u0275inject(Ze))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:ti,factory:ti.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(ti,[{type:t.Injectable}],(function(){return[{type:Me.Injector},{type:Le.App},{type:Le.UtilsService},{type:Ze}]}),null);let ii=!1;class ni{constructor(e,t,i){this.appManager=e,this.appJsProvider=t,this.customPipeManager=i}resolve(){return!(!this.appManager.isPrefabType()&&!this.appManager.isTemplateBundleType())||(ii||(this.appJsProvider.loadFormatterConfigScript(this.loadedFormatterScript.bind(this)),ii=!0),ii)}loadedFormatterScript(e){try{let t=e;t||console.warn("Please return valid formatter object");for(let e in t)this.customPipeManager.setCustomPipe(e,t[e])}catch(e){console.warn("Error in reading formatters.js",e)}}static{this.\u0275fac=function(e){return new(e||ni)(Me.\u0275\u0275inject(tt),Me.\u0275\u0275inject(et),Me.\u0275\u0275inject(Le.CustomPipeManager))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:ni,factory:ni.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(ni,[{type:t.Injectable}],(function(){return[{type:tt},{type:et},{type:Le.CustomPipeManager}]}),null);class ai{constructor(e){this.i18nService=e}resolve(){return this.i18nService.loadDefaultLocale()}static{this.\u0275fac=function(e){return new(e||ai)(Me.\u0275\u0275inject(Le.AbstractI18nService))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:ai,factory:ai.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(ai,[{type:t.Injectable}],(function(){return[{type:Le.AbstractI18nService}]}),null);const si=["dynamicComponent"];function oi(e,t){1&e&&Me.\u0275\u0275element(0,"div",11)}function ri(e,t){if(1&e){const e=Me.\u0275\u0275getCurrentView();Me.\u0275\u0275elementStart(0,"li",14)(1,"button",15),Me.\u0275\u0275listener("click",(function(){const t=Me.\u0275\u0275restoreView(e).$implicit;return Me.\u0275\u0275resetView(t.invoke())})),Me.\u0275\u0275text(2),Me.\u0275\u0275elementEnd()()}if(2&e){const e=t.$implicit;Me.\u0275\u0275advance(2),Me.\u0275\u0275textInterpolate(e.name)}}function li(e,t){if(1&e&&(Me.\u0275\u0275elementStart(0,"ul",12),Me.\u0275\u0275template(1,ri,3,1,"li",13),Me.\u0275\u0275elementEnd()),2&e){const e=Me.\u0275\u0275nextContext(2);Me.\u0275\u0275advance(1),Me.\u0275\u0275property("ngForOf",e.providersConfig)}}function ci(e,t){1&e&&Me.\u0275\u0275element(0,"div",16)}function di(e,t){1&e&&Me.\u0275\u0275element(0,"div",17)}function pi(e,t){if(1&e&&(Me.\u0275\u0275elementContainerStart(0),Me.\u0275\u0275element(1,"router-outlet"),Me.\u0275\u0275template(2,oi,1,0,"div",2),Me.\u0275\u0275element(3,"app-spinner",3),Me.\u0275\u0275elementStart(4,"div",4),Me.\u0275\u0275template(5,li,2,1,"ng-template",null,5,Me.\u0275\u0275templateRefExtractor),Me.\u0275\u0275elementEnd(),Me.\u0275\u0275element(7,"div",6),Me.\u0275\u0275template(8,ci,1,0,"div",7),Me.\u0275\u0275template(9,di,1,0,"div",8),Me.\u0275\u0275element(10,"div",9)(11,"i",10),Me.\u0275\u0275elementContainerEnd()),2&e){const e=Me.\u0275\u0275nextContext();Me.\u0275\u0275advance(2),Me.\u0275\u0275property("ngIf",e.isApplicationType),Me.\u0275\u0275advance(1),Me.\u0275\u0275property("show",e.spinner.show)("spinnermessages",e.spinner.messages),Me.\u0275\u0275attribute("aria-label",e.spinner.arialabel||"Loading"),Me.\u0275\u0275advance(5),Me.\u0275\u0275property("ngIf",!e.isApplicationType),Me.\u0275\u0275advance(1),Me.\u0275\u0275property("ngIf",!e.isApplicationType)}}class ui{constructor(e,t,n,s,o,r,l,c,d,p){let u;this.elRef=n,this.oAuthService=s,this.dialogService=o,this.spinnerService=r,this.router=c,this.app=d,this.appManager=p,this.startApp=!1,this.isApplicationType=!1,this.spinner={show:!1,messages:[],arialabel:""},this.isOAuthDialogOpen=!1,a.setPipeProvider(e),a.setNgZone(l),a.setAppRef(t),this.isApplicationType="APPLICATION"===a.getWmProjectProperties().type,this.appManager.beforeAppReady(),s.getOAuthProvidersAsObservable().subscribe((e=>{this.providersConfig=e,e.length?this.showOAuthDialog():this.closeOAuthDialog()})),this.spinnerService.getMessageSource().asObservable().subscribe((e=>{setTimeout((()=>{this.spinner.show=e.show,this.spinner.messages=e.messages,this.spinner.arialabel=e.messages.toString()}))})),I.setTheme("bs3");let h=a.noop;this.router.events.subscribe((e=>{if(e instanceof i.NavigationStart){let t=e.url.split("?")[0];t=t.substring(1),t||(this.app.activeLayoutName="",this.app.layoutPages=[]),u=this.app.activeLayoutName&&this.app.layoutPages&&this.app.layoutPages.length&&this.app.layoutPages.includes(t)?this.spinnerService.show("","wmRouterOutlet","","wmRouterOutlet"):this.spinnerService.show("","globalSpinner");const i=document.querySelector("app-page-outlet");i&&a.addClass(i,"page-load-in-progress");const n=Date.now();h=()=>{this.spinnerService.hide(u);const e=document.querySelector("app-page-outlet");e&&a.removeClass(e,"page-load-in-progress"),h=a.noop,this.app.activePageLoadTime=Date.now()-n}}else(e instanceof i.NavigationEnd||e instanceof i.NavigationCancel||e instanceof i.NavigationError)&&setTimeout((()=>{h()}),1e3)})),this.appManager.subscribe("pageReady",(()=>{h()})),this.appManager.subscribe("pageAttach",(()=>{h()}))}showOAuthDialog(){this.isOAuthDialogOpen||(this.isOAuthDialogOpen=!0,this.dialogService.open("oAuthLoginDialog",this))}closeOAuthDialog(){this.isOAuthDialogOpen&&(this.isOAuthDialogOpen=!1,this.dialogService.close("oAuthLoginDialog",this))}start(){setTimeout((()=>{this.startApp=!0})),setTimeout((()=>{this.app.dynamicComponentContainerRef=this.dynamicComponentContainerRef,this.overrideRouterOutlet()}),10)}overrideRouterOutlet(){const e=this.routerOutlet.attach,t=this.routerOutlet.detach;this.routerOutlet.attach=t=>{e.call(this.routerOutlet,t),t.instance.ngOnAttach()},this.routerOutlet.detach=()=>{this.app.activePage.ngOnDetach();return t.call(this.routerOutlet)}}ngAfterViewInit(){a.hasCordova()&&!window.wmDeviceReady?document.addEventListener("wmDeviceReady",(()=>this.start())):this.start()}ngDoCheck(){a.$invokeWatchers()}static{this.\u0275fac=function(e){return new(e||ui)(Me.\u0275\u0275directiveInject(kt),Me.\u0275\u0275directiveInject(Me.ApplicationRef),Me.\u0275\u0275directiveInject(Me.ElementRef),Me.\u0275\u0275directiveInject(He.OAuthService),Me.\u0275\u0275directiveInject(Le.AbstractDialogService),Me.\u0275\u0275directiveInject(Le.AbstractSpinnerService),Me.\u0275\u0275directiveInject(Me.NgZone),Me.\u0275\u0275directiveInject(Ne.Router),Me.\u0275\u0275directiveInject(Le.App),Me.\u0275\u0275directiveInject(tt))}}static{this.\u0275cmp=Me.\u0275\u0275defineComponent({type:ui,selectors:[["app-root"]],viewQuery:function(e,n){if(1&e&&(Me.\u0275\u0275viewQuery(i.RouterOutlet,5),Me.\u0275\u0275viewQuery(si,5,t.ViewContainerRef)),2&e){let e;Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(n.routerOutlet=e.first),Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(n.dynamicComponentContainerRef=e.first)}},decls:3,vars:1,consts:[[4,"ngIf"],["dynamicComponent",""],["wmContainer","","partialContainer","","content","Common","hidden","","class","ng-hide",4,"ngIf"],["name","globalspinner","classname","global-spinner","role","alert","aria-live","assertive",3,"show","spinnermessages"],["wmDialog","","name","oAuthLoginDialog","title","Application is requesting you to sign in with","close.event","closeOAuthDialog()"],["dialogBody",""],["wmConfirmDialog","","name","_app-confirm-dialog","title.bind","title","message.bind","message","oktext.bind","oktext","canceltext.bind","canceltext","closable","false","iconclass.bind","iconclass","escape.event","onEscape()","ok.event","onOk()","cancel.event","onCancel()","close.event","onClose()","opened.event","onOpen()"],["wmConfirmDialog","","name","PrefabConfirmDialog","title.bind","title","message.bind","text","oktext.bind","okButtonText","canceltext.bind","cancelButtonText","closable","false","iconclass.bind","iconclass","escape.event","onEscape()","ok.event","onOk()","cancel.event","onCancel()","close.event","onClose()","opened.event","onOpen()",4,"ngIf"],["wmAlertDialog","","name","PrefabAlertDialog","title.bind","title","message.bind","text","oktext.bind","okButtonText","canceltext.bind","cancelButtonText","closable","false","iconclass.bind","iconclass","escape.event","onEscape()","ok.event","onOk()","cancel.event","onCancel()","close.event","onClose()","opened.event","onOpen()",4,"ngIf"],["wmAppExt",""],["id","wm-mobile-display"],["wmContainer","","partialContainer","","content","Common","hidden","",1,"ng-hide"],[1,"list-items"],["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[1,"btn",3,"click"],["wmConfirmDialog","","name","PrefabConfirmDialog","title.bind","title","message.bind","text","oktext.bind","okButtonText","canceltext.bind","cancelButtonText","closable","false","iconclass.bind","iconclass","escape.event","onEscape()","ok.event","onOk()","cancel.event","onCancel()","close.event","onClose()","opened.event","onOpen()"],["wmAlertDialog","","name","PrefabAlertDialog","title.bind","title","message.bind","text","oktext.bind","okButtonText","canceltext.bind","cancelButtonText","closable","false","iconclass.bind","iconclass","escape.event","onEscape()","ok.event","onOk()","cancel.event","onCancel()","close.event","onClose()","opened.event","onOpen()"]],template:function(e,t){1&e&&(Me.\u0275\u0275template(0,pi,12,6,"ng-container",0),Me.\u0275\u0275elementContainer(1,null,1)),2&e&&Me.\u0275\u0275property("ngIf",t.startApp)},dependencies:[ke.NgForOf,ke.NgIf,Ne.RouterOutlet,Be.ContainerDirective,Be.PartialParamHandlerDirective,Be.PartialContainerDirective,ze.AppExtComponent,Ue.ConfirmDialogComponent,qe.DialogComponent,Ye.AlertDialogComponent,Et],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(ui,[{type:t.Component,args:[{selector:"app-root",encapsulation:t.ViewEncapsulation.None,template:'<ng-container *ngIf="startApp">\n    <router-outlet></router-outlet>\n    <div wmContainer partialContainer content="Common" hidden class="ng-hide" *ngIf="isApplicationType"></div>\n    <app-spinner name="globalspinner" classname="global-spinner" role="alert" aria-live="assertive" [attr.aria-label]="spinner.arialabel || \'Loading\'" [show]="spinner.show" [spinnermessages]="spinner.messages"></app-spinner>\n    <div wmDialog name="oAuthLoginDialog" title="Application is requesting you to sign in with"\n         close.event="closeOAuthDialog()">\n        <ng-template #dialogBody>\n            <ul class="list-items">\n                <li class="list-item" *ngFor="let provider of providersConfig">\n                    <button class="btn" (click)="provider.invoke()">{{provider.name}}</button>\n                </li>\n            </ul>\n        </ng-template>\n    </div>\n    <div wmConfirmDialog name="_app-confirm-dialog" title.bind="title" message.bind="message" oktext.bind="oktext"\n         canceltext.bind="canceltext" closable="false" iconclass.bind="iconclass"\n         escape.event="onEscape()" ok.event="onOk()" cancel.event="onCancel()" close.event="onClose()" opened.event="onOpen()"></div>\n    <div  *ngIf="!isApplicationType" wmConfirmDialog name="PrefabConfirmDialog" title.bind="title" message.bind="text" oktext.bind="okButtonText"\n         canceltext.bind="cancelButtonText" closable="false" iconclass.bind="iconclass"\n         escape.event="onEscape()" ok.event="onOk()" cancel.event="onCancel()" close.event="onClose()" opened.event="onOpen()"></div>\n    <div  *ngIf="!isApplicationType" wmAlertDialog name="PrefabAlertDialog" title.bind="title" message.bind="text" oktext.bind="okButtonText"\n         canceltext.bind="cancelButtonText" closable="false" iconclass.bind="iconclass"\n         escape.event="onEscape()" ok.event="onOk()" cancel.event="onCancel()" close.event="onClose()" opened.event="onOpen()"></div>\n    <div wmAppExt></div>\n    <i id="wm-mobile-display"></i>\n</ng-container>\n\x3c!--Dummy container to create the component dynamically--\x3e\n<ng-container #dynamicComponent></ng-container>\n'}]}],(function(){return[{type:kt},{type:Me.ApplicationRef},{type:Me.ElementRef},{type:He.OAuthService},{type:Le.AbstractDialogService},{type:Le.AbstractSpinnerService},{type:Me.NgZone},{type:Ne.Router},{type:Le.App},{type:tt}]}),{routerOutlet:[{type:t.ViewChild,args:[i.RouterOutlet]}],dynamicComponentContainerRef:[{type:t.ViewChild,args:["dynamicComponent",{read:t.ViewContainerRef}]}]});class hi{constructor(){this.wmHttpRequest=new w.WmHttpRequest,this.wmHttpResponse=new w.WmHttpResponse}createSubject(){return new l.Subject}intercept(e,t){let i,n;if(o.appManager&&o.appManager.appOnBeforeServiceCall){const t=this.wmHttpRequest.angularToWmRequest(e);i=o.appManager.appOnBeforeServiceCall(t),i&&(i=this.wmHttpRequest.wmToAngularRequest(i),e=i)}return t.handle(e).pipe(O.tap((e=>{if(e&&4===e.type&&o.appManager&&o.appManager.appOnServiceSuccess){const t=this.wmHttpResponse.angularToWmResponse(e);n=o.appManager.appOnServiceSuccess(t.body,t),n&&(n=this.wmHttpResponse.wmToAngularResponse(n),_.extend(e,n))}}),(t=>{if(t._401Subscriber=this.createSubject(),o.httpService.isPlatformSessionTimeout(t)&&o.httpService.handleSessionTimeout(e,t._401Subscriber),o.appManager&&o.appManager.appOnServiceError){const e=this.wmHttpResponse.angularToWmResponse(t);n=o.appManager.appOnServiceError(e.message,e),n&&(n=this.wmHttpResponse.wmToAngularResponse(n),_.extend(t,n))}})))}static{this.\u0275fac=function(e){return new(e||hi)}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:hi,factory:hi.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(hi,[{type:t.Injectable}],(function(){return[]}),null);const mi="PREFAB";class gi{constructor(e){this.prefabManager=e,window.addEventListener("message",(e=>{if((e.data&&e.data.context)!==mi)return;const t=e.data.action,i=e.data.payload;"init"===t?this.init():"set-property"===t?this.setProperty(i):"get-outbound-properties"===t?this.getOutboundProps():"invoke-script"===t&&this.invokeScript(i)}))}postMessage(e,t){const i={context:mi,action:e,payload:t};window.top.postMessage(i,"*")}setupEventListeners(){this.prefabInstance.invokeEventCallback=(e,t={})=>{this.postMessage("event-log",{name:e,data:t})}}init(){this.previewMode=!0,this.prefabInstance.readyState.subscribe((()=>{}),(()=>{}),(()=>{this.prefabManager.getConfig("__self__").then((e=>{this.config=e,this.postMessage("config",e),this.setupEventListeners()}))}))}setProperty(e){this.prefabInstance.widget[e.name]=e.value}isOutBoundProp(e){return"out-bound"===e.bindable||"in-out-bound"===e.bindable}getOutboundProps(){const e={};for(const[t,i]of Object.entries(this.config.properties||{}))this.isOutBoundProp(i)&&(e[t]=this.prefabInstance.widget[t]);this.postMessage("outbound-properties",e)}invokeScript(e){const t=`\n return ${e.script};`,i=new Function("Prefab",t)(this.prefabInstance);this.postMessage("method-output",{methodName:e.methodName,output:i})}ngAfterViewInit(){this.setupEventListeners(),this.postMessage("init")}static{this.\u0275fac=function(e){return new(e||gi)(Me.\u0275\u0275directiveInject(lt))}}static{this.\u0275cmp=Me.\u0275\u0275defineComponent({type:gi,selectors:[["wm-prefab-preview"]],viewQuery:function(e,t){if(1&e&&Me.\u0275\u0275viewQuery(p.PrefabDirective,7),2&e){let e;Me.\u0275\u0275queryRefresh(e=Me.\u0275\u0275loadQuery())&&(t.prefabInstance=e.first)}},decls:2,vars:0,consts:[[1,"prefab-preview","row"],["wmPrefab","","name","prefab-preview","prefabname","__self__"]],template:function(e,t){1&e&&(Me.\u0275\u0275elementStart(0,"div",0),Me.\u0275\u0275element(1,"section",1),Me.\u0275\u0275elementEnd())},dependencies:[je.PrefabDirective,Nt],encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(gi,[{type:t.Component,args:[{selector:"wm-prefab-preview",template:'\n        <div class="prefab-preview row">\n            <section wmPrefab name="prefab-preview" prefabname="__self__"></section>\n        </div>\n    '}]}],(function(){return[{type:lt}]}),{prefabInstance:[{type:t.ViewChild,args:[p.PrefabDirective,{static:!0}]}]}),R.initComponentsBuildTask();const fi=new Map,vi=(e,i,n="")=>t.Component({template:i,styles:[n],encapsulation:t.ViewEncapsulation.None,selector:e})(class{constructor(){this.isDynamicComponent=!0}});class bi{constructor(e,t,i){this.app=e,this.appManager=t,this.compiler=i,this.counter=1}async getComponentFactoryRef(e,i,n={}){let a=fi.get(e);if(i=n.transpile?x.transpile(i).markup:i,!a||n.noCache){const o=vi(e,i,n.styles),r=(s=o,t.NgModule({declarations:[s],imports:[Gi],schemas:[t.CUSTOM_ELEMENTS_SCHEMA,t.NO_ERRORS_SCHEMA]})(class{}));a=this.compiler.compileModuleAndAllComponentsSync(r).componentFactories.filter((e=>e.componentType===o))[0],fi.set(e,a)}var s;return a}async addComponent(e,t,i={},n={}){n.transpile=!a.isDefined(n.transpile)||n.transpile,n.noCache=!a.isDefined(n.noCache)||n.noCache,n.selector=a.isDefined(n.selector)?n.selector:"wm-dynamic-component-"+this.counter++;const s=await this.getComponentFactoryRef(n.selector,t,n),o=this.app.dynamicComponentContainerRef.createComponent(s,0,_.get(n,"inj"));a.extendProto(o.instance,i),e.appendChild(o.location.nativeElement)}static{this.\u0275fac=function(e){return new(e||bi)(Me.\u0275\u0275inject(Le.App),Me.\u0275\u0275inject(tt),Me.\u0275\u0275inject(Me.Compiler))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:bi,factory:bi.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(bi,[{type:t.Injectable}],(function(){return[{type:Le.App},{type:tt},{type:Me.Compiler}]}),null);class yi{canDeactivate(e){return function(){let e;return e=this.app.activePage&&this.app.activePage.onBeforePageLeave(),!1!==e&&(e=(this.app.onBeforePageLeave||a.noop)(this.app.activePageName,this.app.activePage)),void 0===e||e}.apply(e)}static{this.\u0275fac=function(e){return new(e||yi)}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:yi,factory:yi.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(yi,[{type:t.Injectable}],null,null);class wi{canDeactivate(e){return!e.canDeactivate||e.canDeactivate()}static{this.\u0275fac=function(e){return new(e||wi)}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:wi,factory:wi.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(wi,[{type:t.Injectable}],null,null);
/**
   * @license
   * Copyright Google LLC All Rights Reserved.
   *
   * Use of this source code is governed by an MIT-style license that can be
   * found in the LICENSE file at https://angular.io/license
   */
class Pi{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach((e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))})),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}static{this.\u0275fac=function(e){return new(e||Pi)}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Pi,factory:Pi.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Pi,[{type:t.Injectable}],null,null);class Ci extends Pi{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,i){const n=document.querySelector('meta[name="CSP-NONCE"]')?.getAttribute("content")||"wm-csp-nonce";e.forEach((e=>{const a=this._doc.createElement("style");a.textContent=e,a.setAttribute("nonce",n),i.push(t.appendChild(a))}))}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(Ai),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(((t,i)=>{this._addStylesToHost(e,i,t)}))}ngOnDestroy(){this._hostNodes.forEach((e=>e.forEach(Ai)))}static{this.\u0275fac=function(e){return new(e||Ci)(Me.\u0275\u0275inject(n.DOCUMENT))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Ci,factory:Ci.\u0275fac})}}function Ai(e){n.\u0275getDOM().remove(e)}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Ci,[{type:t.Injectable}],(function(){return[{type:void 0,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]}]}),null);const _i={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ii=/%COMP%/g,Ei="%COMP%",Oi=`_nghost-${Ei}`,xi=`_ngcontent-${Ei}`;function Ri(e,t,i){for(let n=0;n<t.length;n++){let a=t[n];Array.isArray(a)?Ri(e,a,i):(a=a.replace(Ii,e),i.push(a))}return i}class Di{constructor(e,t,i,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=i,this.doc=n,this.rendererByCompId=new Map,this.defaultRenderer=new Si(e,n)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case t.ViewEncapsulation.Emulated:{let t=this.rendererByCompId.get(i.id);return t||(t=new Mi(this.eventManager,this.sharedStylesHost,i,this.appId,this.doc),this.rendererByCompId.set(i.id,t)),t.applyToHost(e),t}case 1:case t.ViewEncapsulation.ShadowDom:return new Ni(this.eventManager,this.sharedStylesHost,e,i,this.doc);default:if(!this.rendererByCompId.has(i.id)){const e=Ri(i.id,i.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}static{this.\u0275fac=function(e){return new(e||Di)(Me.\u0275\u0275inject(Ge.EventManager),Me.\u0275\u0275inject(Ge.\u0275SharedStylesHost),Me.\u0275\u0275inject(t.APP_ID),Me.\u0275\u0275inject(n.DOCUMENT))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Di,factory:Di.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Di,[{type:t.Injectable}],(function(){return[{type:Ge.EventManager},{type:Ge.\u0275SharedStylesHost},{type:void 0,decorators:[{type:t.Inject,args:[t.APP_ID]}]},{type:Document,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]}]}),null);let Si=class{constructor(e,t){this.eventManager=e,this.doc=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_i[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ti(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){if(e){(Ti(e)?e.content:e).insertBefore(t,i)}}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}resetStyles(e){[].slice.call(e).forEach((function(t){e.style.removeProperty(t)}))}applyStyles(e,t){if(t){return t.split(";").forEach((function(t){const i=t.split(":");let n,a;2===i.length&&(n=i[0].trim(),a=i[1].trim(),e.style[n]=a)})),t}}setAttribute(e,t,i,n){if(n){t=n+":"+t;const a=_i[n];a?e.setAttributeNS(a,t,i):e.setAttribute(t,i)}else"style"===t?(this.resetStyles(e),this.applyStyles(e,i)):e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const n=_i[i];n?e.removeAttributeNS(n,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,i,n,a){a&(t.RendererStyleFlags2.DashCase|t.RendererStyleFlags2.Important)?e.style.setProperty(i,n,a&t.RendererStyleFlags2.Important?"important":""):e.style[i]=n}removeStyle(e,i,n){n&t.RendererStyleFlags2.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=n.\u0275getDOM().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,(a=i,e=>{if("__ngUnwrap__"===e)return a;!1===a(e)&&(e.preventDefault(),e.returnValue=!1)}));var a}};function Ti(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}Si=d.__decorate([d.__param(1,t.Inject(n.DOCUMENT)),d.__metadata("design:paramtypes",[h.EventManager,Document])],Si);let Mi=class extends Si{constructor(e,t,i,n,a){super(e,a),this.component=i,this.doc=a;const s=Ri(n+"-"+i.id,i.styles,[]);var o;t.addStyles(s),this.contentAttr=(o=n+"-"+i.id,xi.replace(Ii,o)),this.hostAttr=function(e){return Oi.replace(Ii,e)}(n+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};Mi=d.__decorate([d.__param(4,t.Inject(n.DOCUMENT)),d.__metadata("design:paramtypes",[h.EventManager,h.\u0275SharedStylesHost,Object,String,Document])],Mi);let Ni=class extends Si{constructor(e,t,i,n,a){super(e,a),this.sharedStylesHost=t,this.hostEl=i,this.doc=a,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ri(n.id,n.styles,[]);for(let e=0;e<s.length;e++){const t=document.createElement("style");t.textContent=s[e],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}};Ni=d.__decorate([d.__param(4,t.Inject(n.DOCUMENT)),d.__metadata("design:paramtypes",[h.EventManager,h.\u0275SharedStylesHost,Object,Object,Document])],Ni);const ki=()=>{let e=document.querySelector('[name="deployUrl"]')&&document.querySelector('[name="deployUrl"]').getAttribute("content");e||(e=document.querySelector('[name="cdnUrl"]')&&document.querySelector('[name="cdnUrl"]').getAttribute("content")),a._WM_APP_PROJECT.id=a.hasCordova()?_WM_APP_PROPERTIES.displayName:location.href.split("/")[3],a._WM_APP_PROJECT.cdnUrl=e||"ng-bundle/",a._WM_APP_PROJECT.ngDest="ng-bundle/";try{__webpack_require__.p=__webpack_public_path__=e}catch(e){}};var Li;function Fi(e,t){return{provide:e,useValue:t}}function $i(e,t){return async()=>(ki(),await t.resolve(),e.loadDefaultLocale())}function Bi(e){return ki(),e.deduceAppLocale()}!function(e){e.IOS="ios",e.ANDROID="android"}(Li||(Li={}));const ji=[At,Et,Tt,Nt,ui,gi,Mt],Vi=[v.ConfirmDialogModule,b.DesignDialogModule,f.DialogModule,A.BsDatepickerModule,Pe.TimepickerModule,Ce.BsDropdownModule,Ae.PaginationModule,_e.TypeaheadModule,Ie.ProgressbarModule,Ee.CarouselModule,Oe.PopoverModule,xe.NgCircleProgressModule,Re.TooltipModule,k.BasicModule,L.ProgressModule,F.RichTextEditorModule,B.SearchModule,j.TreeModule,V.CalendarModule,G.ChipsModule,W.ColorPickerModule,U.CurrencyModule,q.EpochModule,z.FileUploadModule,H.InputModule,Q.RatingModule,Y.SliderModule,K.CardModule,J.FormModule,Z.ListModule,X.LiveTableModule,ee.PaginationModule,te.TableModule,ie.ChartModule,ne.AccordionModule,ae.LinearLayoutModule,se.LayoutGridModule,oe.PanelModule,re.TabsModule,le.TileModule,ce.WizardModule,E.AlertDialogModule,de.IframeDialogModule,pe.LoginDialogModule,ue.PartialDialogModule,he.BreadcrumbModule,me.MenuModule,ge.NavbarModule,fe.PopoverModule,ve.CarouselModule,be.LoginModule,ye.MarqueeModule,we.CustomModule,r.PageModule,D.FooterModule,S.HeaderModule,T.LeftPanelModule,M.RightPanelModule,N.TopNavModule,p.PrefabModule];$.fn.swipeAnimation.expressionEvaluator=a.$parseExpr;class Gi{static addCustomEventPolyfill(){if("function"==typeof window.CustomEvent)return!1;const e=(e,t)=>{t=t||{bubbles:!1,cancelable:!1,detail:null};const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i};e.prototype=window.Event.prototype,window.CustomEvent=e}static forRoot(){return{ngModule:Gi,providers:[{provide:a.App,useClass:jt},{provide:a.AbstractToasterService,useClass:Vt},{provide:a.AbstractI18nService,useClass:Wt},{provide:a.AbstractSpinnerService,useClass:Ut},{provide:a.AbstractNavigationService,useClass:zt},{provide:a.AppDefaults,useClass:Yt},{provide:a.DynamicComponentRefProvider,useClass:bi},{provide:t.APP_INITIALIZER,useFactory:$i,deps:[a.AbstractI18nService,ti],multi:!0},{provide:t.LOCALE_ID,useFactory:Bi,deps:[a.AbstractI18nService]},{provide:u.HTTP_INTERCEPTORS,useClass:hi,multi:!0},Lt,n.DecimalPipe,n.DatePipe,tt,lt,Jt,Zt,Xt,yi,ti,ni,ai,Fi(ht,10),Fi(mt,1800)]}}constructor(e,t,i){Gi.addCustomEventPolyfill(),this.getDeviceDetails().then((e=>{t.selectedViewPort={os:e.os,category:e.selectedDeviceCategory},i.update(e),t.notify("on-viewport-details",e.os)}))}getDeviceDetails(){return new Promise((function(e,t){const i={key:"on-load"};window.top!==window?(window.top.postMessage(i,"*"),window.onmessage=function(t){const i=t.data;a.isObject(i)&&"switch-device"===i.key&&e(i.device)}):a.isIphone()||a.isIpod()||a.isIpad()?e({os:Li.IOS}):e({os:Li.ANDROID})}))}static{this.\u0275fac=function(e){return new(e||Gi)(Me.\u0275\u0275inject(ze.MobileRuntimeModule),Me.\u0275\u0275inject(Le.App),Me.\u0275\u0275inject(Le.Viewport))}}static{this.\u0275mod=Me.\u0275\u0275defineNgModule({type:Gi})}static{this.\u0275inj=Me.\u0275\u0275defineInjector({providers:[{provide:h.\u0275SharedStylesHost,useClass:Ci},{provide:h.\u0275DomRendererFactory2,useClass:Di}],imports:[n.CommonModule,i.RouterModule,u.HttpClientModule,m.FormsModule,m.ReactiveFormsModule,g.ToastrModule,c.WmComponentsModule,y.MobileRuntimeModule,a.CoreModule,s.SecurityModule,P.OAuthModule,o.VariablesModule,w.HttpServiceModule,Vi,m.FormsModule,m.ReactiveFormsModule,n.CommonModule,i.RouterModule,u.HttpClientModule,g.ToastrModule,c.WmComponentsModule,y.MobileRuntimeModule,a.CoreModule,s.SecurityModule,P.OAuthModule,o.VariablesModule,w.HttpServiceModule,v.ConfirmDialogModule,b.DesignDialogModule,f.DialogModule,A.BsDatepickerModule,Pe.TimepickerModule,Ce.BsDropdownModule,Ae.PaginationModule,_e.TypeaheadModule,Ie.ProgressbarModule,Ee.CarouselModule,Oe.PopoverModule,xe.NgCircleProgressModule,Re.TooltipModule,k.BasicModule,L.ProgressModule,F.RichTextEditorModule,B.SearchModule,j.TreeModule,V.CalendarModule,G.ChipsModule,W.ColorPickerModule,U.CurrencyModule,q.EpochModule,z.FileUploadModule,H.InputModule,Q.RatingModule,Y.SliderModule,K.CardModule,J.FormModule,Z.ListModule,X.LiveTableModule,ee.PaginationModule,te.TableModule,ie.ChartModule,ne.AccordionModule,ae.LinearLayoutModule,se.LayoutGridModule,oe.PanelModule,re.TabsModule,le.TileModule,ce.WizardModule,E.AlertDialogModule,de.IframeDialogModule,pe.LoginDialogModule,ue.PartialDialogModule,he.BreadcrumbModule,me.MenuModule,ge.NavbarModule,fe.PopoverModule,ve.CarouselModule,be.LoginModule,ye.MarqueeModule,we.CustomModule,r.PageModule,D.FooterModule,S.HeaderModule,T.LeftPanelModule,M.RightPanelModule,N.TopNavModule,p.PrefabModule]})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Gi,[{type:t.NgModule,args:[{declarations:[...ji],imports:[n.CommonModule,i.RouterModule,u.HttpClientModule,m.FormsModule,m.ReactiveFormsModule,g.ToastrModule,c.WmComponentsModule,y.MobileRuntimeModule,a.CoreModule,s.SecurityModule,P.OAuthModule,o.VariablesModule,w.HttpServiceModule,...Vi],exports:[m.FormsModule,m.ReactiveFormsModule,...ji,n.CommonModule,i.RouterModule,u.HttpClientModule,g.ToastrModule,c.WmComponentsModule,y.MobileRuntimeModule,a.CoreModule,s.SecurityModule,P.OAuthModule,o.VariablesModule,w.HttpServiceModule,...Vi],providers:[{provide:h.\u0275SharedStylesHost,useClass:Ci},{provide:h.\u0275DomRendererFactory2,useClass:Di}]}]}],(function(){return[{type:ze.MobileRuntimeModule},{type:Le.App},{type:Le.Viewport}]}),null),("undefined"==typeof ngJitMode||ngJitMode)&&Me.\u0275\u0275setNgModuleScope(Gi,{declarations:[At,Et,Tt,Nt,ui,gi,Mt],imports:[n.CommonModule,i.RouterModule,u.HttpClientModule,m.FormsModule,m.ReactiveFormsModule,g.ToastrModule,c.WmComponentsModule,y.MobileRuntimeModule,a.CoreModule,s.SecurityModule,P.OAuthModule,o.VariablesModule,w.HttpServiceModule,v.ConfirmDialogModule,b.DesignDialogModule,f.DialogModule,A.BsDatepickerModule,Pe.TimepickerModule,Ce.BsDropdownModule,Ae.PaginationModule,_e.TypeaheadModule,Ie.ProgressbarModule,Ee.CarouselModule,Oe.PopoverModule,xe.NgCircleProgressModule,Re.TooltipModule,k.BasicModule,L.ProgressModule,F.RichTextEditorModule,B.SearchModule,j.TreeModule,V.CalendarModule,G.ChipsModule,W.ColorPickerModule,U.CurrencyModule,q.EpochModule,z.FileUploadModule,H.InputModule,Q.RatingModule,Y.SliderModule,K.CardModule,J.FormModule,Z.ListModule,X.LiveTableModule,ee.PaginationModule,te.TableModule,ie.ChartModule,ne.AccordionModule,ae.LinearLayoutModule,se.LayoutGridModule,oe.PanelModule,re.TabsModule,le.TileModule,ce.WizardModule,E.AlertDialogModule,de.IframeDialogModule,pe.LoginDialogModule,ue.PartialDialogModule,he.BreadcrumbModule,me.MenuModule,ge.NavbarModule,fe.PopoverModule,ve.CarouselModule,be.LoginModule,ye.MarqueeModule,we.CustomModule,r.PageModule,D.FooterModule,S.HeaderModule,T.LeftPanelModule,M.RightPanelModule,N.TopNavModule,p.PrefabModule],exports:[m.FormsModule,m.ReactiveFormsModule,At,Et,Tt,Nt,ui,gi,Mt,n.CommonModule,i.RouterModule,u.HttpClientModule,g.ToastrModule,c.WmComponentsModule,y.MobileRuntimeModule,a.CoreModule,s.SecurityModule,P.OAuthModule,o.VariablesModule,w.HttpServiceModule,v.ConfirmDialogModule,b.DesignDialogModule,f.DialogModule,A.BsDatepickerModule,Pe.TimepickerModule,Ce.BsDropdownModule,Ae.PaginationModule,_e.TypeaheadModule,Ie.ProgressbarModule,Ee.CarouselModule,Oe.PopoverModule,xe.NgCircleProgressModule,Re.TooltipModule,k.BasicModule,L.ProgressModule,F.RichTextEditorModule,B.SearchModule,j.TreeModule,V.CalendarModule,G.ChipsModule,W.ColorPickerModule,U.CurrencyModule,q.EpochModule,z.FileUploadModule,H.InputModule,Q.RatingModule,Y.SliderModule,K.CardModule,J.FormModule,Z.ListModule,X.LiveTableModule,ee.PaginationModule,te.TableModule,ie.ChartModule,ne.AccordionModule,ae.LinearLayoutModule,se.LayoutGridModule,oe.PanelModule,re.TabsModule,le.TileModule,ce.WizardModule,E.AlertDialogModule,de.IframeDialogModule,pe.LoginDialogModule,ue.PartialDialogModule,he.BreadcrumbModule,me.MenuModule,ge.NavbarModule,fe.PopoverModule,ve.CarouselModule,be.LoginModule,ye.MarqueeModule,we.CustomModule,r.PageModule,D.FooterModule,S.HeaderModule,T.LeftPanelModule,M.RightPanelModule,N.TopNavModule,p.PrefabModule]});const Wi=[c.WmComponentsModule.forRoot(),y.MobileRuntimeModule.forRoot(),a.CoreModule.forRoot(),s.SecurityModule.forRoot(),P.OAuthModule.forRoot(),o.VariablesModule.forRoot(),w.HttpServiceModule.forRoot(),Gi.forRoot()];let Ui=!1;class qi{constructor(e,t){this.appManager=e,this.appVariablesProvider=t}resolve(){return!!Ui||Promise.all([this.appManager.loadSecurityConfig(),this.appManager.loadMetadata(),this.appVariablesProvider.getAppVariables()]).then((e=>this.appManager.loadAppVariables(e[2]))).then((()=>Ui=!0))}static{this.\u0275fac=function(e){return new(e||qi)(Me.\u0275\u0275inject(tt),Me.\u0275\u0275inject(Xe))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:qi,factory:qi.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(qi,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:tt},{type:Xe}]}),null);let zi=!1;class Hi{constructor(e){this.appManager=e}resolve(){return zi||this.appManager.loadMetadata().then((()=>zi=!0))}static{this.\u0275fac=function(e){return new(e||Hi)(Me.\u0275\u0275inject(tt))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Hi,factory:Hi.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Hi,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:tt}]}),null);class Qi{constructor(e){this.appManager=e,a.isMobileApp()||(this.loaded=this.appManager.isPrefabType()||this.appManager.isTemplateBundleType()||!a.getWmProjectProperties().securityEnabled)}resolve(){return this.loaded||this.appManager.loadSecurityConfig().then((()=>{this.loaded=!0}))}static{this.\u0275fac=function(e){return new(e||Qi)(Me.\u0275\u0275inject(tt))}}static{this.\u0275prov=Me.\u0275\u0275defineInjectable({token:Qi,factory:Qi.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&Me.\u0275setClassMetadata(Qi,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:tt}]}),null),e.AccessrolesDirective=At,e.AppComponent=ui,e.AppDefaultsService=Yt,e.AppExtensionJSResolve=ni,e.AppExtensionProvider=et,e.AppJSProvider=Ze,e.AppJSResolve=ti,e.AppManagerService=tt,e.AppRef=jt,e.AppSpinnerComponent=Et,e.AppVariablesProvider=Xe,e.AppVariablesResolve=qi,e.AuthGuard=Jt,e.BaseCustomWidgetComponent=bt,e.BaseLayoutComponent=wt,e.BasePageComponent=vt,e.BasePartialComponent=pt,e.BasePrefabComponent=yt,e.BaseSpaPageComponent=Pt,e.CACHE_PAGE=ut,e.CanDeactivateNgPageGuard=wi,e.CanDeactivatePageGuard=yi,e.ComponentRefProvider=Ke,e.CustomToasterComponent=Tt,e.DynamicComponentRefProviderService=bi,e.EmptyPageComponent=Mt,e.FragmentMonitor=ct,e.HttpCallInterceptor=hi,e.I18nResolve=ai,e.I18nServiceImpl=Wt,e.InitializeApp=$i,e.MAX_CACHE_AGE=mt,e.MAX_CACHE_SIZE=ht,e.MetadataResolve=Hi,e.NavigationServiceImpl=zt,e.PageNotFoundGuard=Xt,e.PipeProvider=kt,e.PipeService=Lt,e.PrefabConfigProvider=Je,e.PrefabDirective=Nt,e.PrefabManagerService=lt,e.PrefabPreviewComponent=gi,e.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS=Vi,e.RoleGuard=Zt,e.RuntimeBaseModule=Gi,e.SecurityConfigResolve=Qi,e.SpinnerServiceImpl=Ut,e.ToasterServiceImpl=Vt,e.WM_MODULES_FOR_ROOT=Wi,e.WmNgRouteReuseStrategy=ft,e.WmRouteReuseStrategy=gt,e.commonPartialWidgets=dt,e.getPrefabBaseUrl=nt,e.getPrefabConfigUrl=e=>`${nt(e)}/config.json`,e.getPrefabMinJsonUrl=e=>`${nt(e)}/pages/Main/page.min.json`,e.getPrefabPartialJsonUrl=(e,t)=>`${nt(e)}/pages/${t}/page.min.json`,e.isPrefabInPreview=it,e.setAngularLocale=Bi})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser-dynamic"),require("tslib"),require("@angular/platform-browser"),require("@angular/common"),require("@angular/router"),require("@angular/common/http"),require("@angular/forms"),require("ngx-bootstrap/typeahead"),require("ngx-bootstrap/timepicker"),require("ngx-bootstrap/progressbar"),require("ngx-bootstrap/pagination"),require("ngx-bootstrap/modal"),require("ngx-bootstrap/tooltip"),require("ngx-bootstrap/datepicker"),require("ngx-bootstrap/dropdown"),require("ngx-bootstrap/popover"),require("ng-circle-progress"),require("ngx-toastr"),require("ngx-bootstrap/carousel"),require("@wm/core"),require("@wm/components/basic"),require("@wm/components/basic/progress"),require("@wm/components/basic/rich-text-editor"),require("@wm/components/basic/search"),require("@wm/components/basic/tree"),require("@wm/components/input"),require("@wm/components/input/calendar"),require("@wm/components/input/chips"),require("@wm/components/input/color-picker"),require("@wm/components/input/currency"),require("@wm/components/input/epoch"),require("@wm/components/input/file-upload"),require("@wm/components/input/rating"),require("@wm/components/input/slider"),require("@wm/mobile/runtime/dynamic"),require("@wm/components/data/card"),require("@wm/components/data/form"),require("@wm/components/data/list"),require("@wm/components/data/live-table"),require("@wm/components/data/pagination"),require("@wm/components/data/table"),require("@wm/components/chart"),require("@wm/components/containers/accordion"),require("@wm/components/containers/linear-layout"),require("@wm/components/containers/layout-grid"),require("@wm/components/containers/panel"),require("@wm/components/containers/tabs"),require("@wm/components/containers/tile"),require("@wm/components/containers/wizard"),require("@wm/components/dialogs/alert-dialog"),require("@wm/components/dialogs/iframe-dialog"),require("@wm/components/dialogs/login-dialog"),require("@wm/components/dialogs/partial-dialog"),require("@wm/components/navigation/breadcrumb"),require("@wm/components/navigation/menu"),require("@wm/components/navigation/navbar"),require("@wm/components/navigation/popover"),require("@wm/components/advanced/carousel"),require("@wm/components/advanced/login"),require("@wm/components/advanced/marquee"),require("@wm/components/advanced/custom"),require("@wm/components/page"),require("@wm/components/page/footer"),require("@wm/components/page/header"),require("@wm/components/page/left-panel"),require("@wm/components/page/right-panel"),require("@wm/components/page/top-nav"),require("@wm/components/prefab"),require("@wm/runtime/base"),require("@wm/variables"),require("@wm/security"),require("@wm/transpiler"),require("@angular/platform-browser/animations")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/platform-browser-dynamic","tslib","@angular/platform-browser","@angular/common","@angular/router","@angular/common/http","@angular/forms","ngx-bootstrap/typeahead","ngx-bootstrap/timepicker","ngx-bootstrap/progressbar","ngx-bootstrap/pagination","ngx-bootstrap/modal","ngx-bootstrap/tooltip","ngx-bootstrap/datepicker","ngx-bootstrap/dropdown","ngx-bootstrap/popover","ng-circle-progress","ngx-toastr","ngx-bootstrap/carousel","@wm/core","@wm/components/basic","@wm/components/basic/progress","@wm/components/basic/rich-text-editor","@wm/components/basic/search","@wm/components/basic/tree","@wm/components/input","@wm/components/input/calendar","@wm/components/input/chips","@wm/components/input/color-picker","@wm/components/input/currency","@wm/components/input/epoch","@wm/components/input/file-upload","@wm/components/input/rating","@wm/components/input/slider","@wm/mobile/runtime/dynamic","@wm/components/data/card","@wm/components/data/form","@wm/components/data/list","@wm/components/data/live-table","@wm/components/data/pagination","@wm/components/data/table","@wm/components/chart","@wm/components/containers/accordion","@wm/components/containers/linear-layout","@wm/components/containers/layout-grid","@wm/components/containers/panel","@wm/components/containers/tabs","@wm/components/containers/tile","@wm/components/containers/wizard","@wm/components/dialogs/alert-dialog","@wm/components/dialogs/iframe-dialog","@wm/components/dialogs/login-dialog","@wm/components/dialogs/partial-dialog","@wm/components/navigation/breadcrumb","@wm/components/navigation/menu","@wm/components/navigation/navbar","@wm/components/navigation/popover","@wm/components/advanced/carousel","@wm/components/advanced/login","@wm/components/advanced/marquee","@wm/components/advanced/custom","@wm/components/page","@wm/components/page/footer","@wm/components/page/header","@wm/components/page/left-panel","@wm/components/page/right-panel","@wm/components/page/top-nav","@wm/components/prefab","@wm/runtime/base","@wm/variables","@wm/security","@wm/transpiler","@angular/platform-browser/animations"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).wm=e.wm||{},e.wm.runtime=e.wm.runtime||{},e.wm.runtime.dynamic={}),e.ng.core,e.ng.platformBrowserDynamic,e.tslib,e.ng.platformBrowser,e.ng.common,e.ng.router,e.ng.common.http,e.ng.forms,e.typeahead,e.timepicker,e.progressbar,e.pagination,e.modal,e.tooltip,e.datepicker,e.dropdown,e.popover,e.ngCircleProgress,e.ngxToastr,e.carousel,e.wm.core,e.wm.components.basic,e.wm.components.basic.progress,e.wm.components.basic.richtexteditor,e.wm.components.basic.search,e.wm.components.basic.tree,e.wm.components.input,e.wm.components.input.calendar,e.wm.components.input.chips,e.wm.components.input.colorpicker,e.wm.components.input.currency,e.wm.components.input.epoch,e.wm.components.input.fileupload,e.wm.components.input.rating,e.wm.components.input.slider,e.wm.mobile.runtime.dynamic,e.wm.components.data.card,e.wm.components.data.form,e.wm.components.data.list,e.wm.components.data.livetable,e.wm.components.data.pagination,e.wm.components.data.table,e.wm.components.chart,e.wm.components.containers.accordion,e.wm.components.containers.linearlayout,e.wm.components.containers.layoutgrid,e.wm.components.containers.panel,e.wm.components.containers.tabs,e.wm.components.containers.tile,e.wm.components.containers.wizard,e.wm.components.dialogs.alertdialog,e.wm.components.dialogs.iframedialog,e.wm.components.dialogs.logindialog,e.wm.components.dialogs.partialdialog,e.wm.components.navigation.breadcrumb,e.wm.components.navigation.menu,e.wm.components.navigation.navbar,e.wm.components.navigation.popover,e.wm.components.advanced.carousel,e.wm.components.advanced.login,e.wm.components.advanced.marquee,e.wm.components.advanced.custom,e.wm.components.page,e.wm.components.page.footer,e.wm.components.page.header,e.wm.components.page.leftpanel,e.wm.components.page.rightpanel,e.wm.components.page.topnav,e.wm.components.prefab,e.wm.runtime.base,e.wm.variables,e.wm.security,e.wm.transpiler,e.ng.platformBrowser.animations)}(this,(function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,m,g,f,v,b,y,w,P,C,A,I,E,O,x,R,D,S,T,M,N,k,L,F,B,j,V,G,W,U,q,z,H,Q,Y,K,J,Z,X,ee,te,ie,ne,ae,se,oe,re,le,ce,de,pe,ue,he,me,ge,fe,ve,be,ye,we,Pe,Ce){"use strict";function Ae(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var _e=Ae(t),Ie=Ae(o),Ee=Ae(r),Oe=Ae(P),xe=Ae(be),Re=Ae(ye),De=Ae(we);class Se{constructor(e,t,i,n,a,s,o,r,l,c,d,p,u){this.injector=e,this.route=t,this.vcRef=i,this.appRef=n,this.metadataService=a,this.securityService=s,this.appManager=o,this.app=r,this.ngZone=l,this.elRef=c,this.spinnerService=d,this.componentRefProvider=p,this.router=u}getTargetNode(){return this.elRef.nativeElement}resetViewContainer(){this.vcRef.clear();this.getTargetNode().innerHTML=""}renderPage(e){const t=this.getTargetNode();this.appManager.loadAppVariables().then((async()=>{const i=await this.componentRefProvider.getComponentFactoryRef(e,be.ComponentType.PAGE);if(i){const e=this.vcRef.createComponent(i,0,this.injector);this.instance=e.instance,t.appendChild(e.location.nativeElement)}else be.BasePageComponent.clear();this.vcRef.length>1&&this.vcRef.remove(1)}))}renderPrefabPreviewPage(){this.router.navigate(["prefab-preview"])}loadPage(e){this.ngZone.run((()=>{e&&this.renderPage(e)}))}ngOnInit(){this.app.isPrefabType?this.renderPrefabPreviewPage():($(this.getTargetNode()).find(">div").first().remove(),this.subscription=this.route.params.subscribe((({pageName:e})=>{this.loadPage(e)})))}ngOnDestroy(){this.vcRef.clear(),this.subscription&&this.subscription.unsubscribe()}ngOnAttach(){this.getTargetNode().appendChild(this.instance.$page[0]),this.instance.ngOnAttach()}ngOnDetach(){this.instance.ngOnDetach()}static{this.\u0275fac=function(e){return new(e||Se)(_e.\u0275\u0275directiveInject(_e.Injector),_e.\u0275\u0275directiveInject(Ie.ActivatedRoute),_e.\u0275\u0275directiveInject(_e.ViewContainerRef),_e.\u0275\u0275directiveInject(_e.ApplicationRef),_e.\u0275\u0275directiveInject(Re.MetadataService),_e.\u0275\u0275directiveInject(De.SecurityService),_e.\u0275\u0275directiveInject(xe.AppManagerService),_e.\u0275\u0275directiveInject(Oe.App),_e.\u0275\u0275directiveInject(_e.NgZone),_e.\u0275\u0275directiveInject(_e.ElementRef),_e.\u0275\u0275directiveInject(Oe.AbstractSpinnerService),_e.\u0275\u0275directiveInject(xe.ComponentRefProvider),_e.\u0275\u0275directiveInject(Ie.Router))}}static{this.\u0275cmp=_e.\u0275\u0275defineComponent({type:Se,selectors:[["app-page-outlet"]],decls:1,vars:0,template:function(e,t){1&e&&_e.\u0275\u0275element(0,"div")},encapsulation:2})}}("undefined"==typeof ngDevMode||ngDevMode)&&_e.\u0275setClassMetadata(Se,[{type:t.Component,args:[{selector:"app-page-outlet",template:"<div></div>"}]}],(function(){return[{type:_e.Injector},{type:Ie.ActivatedRoute},{type:_e.ViewContainerRef},{type:_e.ApplicationRef},{type:Re.MetadataService},{type:De.SecurityService},{type:xe.AppManagerService},{type:Oe.App},{type:_e.NgZone},{type:_e.ElementRef},{type:Oe.AbstractSpinnerService},{type:xe.ComponentRefProvider},{type:Ie.Router}]}),null);const Te={securityConfig:be.SecurityConfigResolve,metadata:be.MetadataResolve,appMetaConfig:be.AppExtensionJSResolve},Me=[{path:"",pathMatch:"full",resolve:Te,component:be.EmptyPageComponent},{path:"prefab-preview",pathMatch:"full",resolve:Te,component:be.PrefabPreviewComponent},{path:":pageName",pathMatch:"full",resolve:Te,component:Se,canDeactivate:[be.CanDeactivatePageGuard]}];class Ne extends be.AppJSProvider{constructor(e){super(),this.$http=e}getAppScriptFn(){return this.$http.get("./app.js",{responseType:"text"}).toPromise().then((e=>new Function("App","Utils","Injector",e)))}static{this.\u0275fac=function(e){return new(e||Ne)(_e.\u0275\u0275inject(Ee.HttpClient))}}static{this.\u0275prov=_e.\u0275\u0275defineInjectable({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&_e.\u0275setClassMetadata(Ne,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:Ee.HttpClient}]}),null);const ke=new Map;class Le{get(e,t){const i=ke.get(e);return i?Promise.resolve(i):this.$http.get(e).then((i=>(t&&ke.set(e,i),i)))}clearCache(){ke.clear()}constructor(e){this.$http=e}static{this.\u0275fac=function(e){return new(e||Le)(_e.\u0275\u0275inject(Oe.AbstractHttpService))}}static{this.\u0275prov=_e.\u0275\u0275defineInjectable({token:Le,factory:Le.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&_e.\u0275setClassMetadata(Le,[{type:t.Injectable}],(function(){return[{type:Oe.AbstractHttpService}]}),null);class Fe extends be.AppVariablesProvider{constructor(e){super(),this.resourceManager=e}async getAppVariables(){return this.resourceManager.get("./app.variables.json")}static{this.\u0275fac=function(e){return new(e||Fe)(_e.\u0275\u0275inject(Le))}}static{this.\u0275prov=_e.\u0275\u0275defineInjectable({token:Fe,factory:Fe.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&_e.\u0275setClassMetadata(Fe,[{type:t.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:Le}]}),null);class $e extends be.AppExtensionProvider{loadFormatterConfigScript(e){try{P.appendScriptToHead(e)}catch(e){console.warn("Error while loading the formatters.js file")}}static{this.\u0275fac=function(){let e;return function(t){return(e||(e=_e.\u0275\u0275getInheritedFactory($e)))(t||$e)}}()}static{this.\u0275prov=_e.\u0275\u0275defineInjectable({token:$e,factory:$e.\u0275fac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&_e.\u0275setClassMetadata($e,[{type:t.Injectable,args:[{providedIn:"root"}]}],null,null);const Be=new Map;window.resourceCache=Be;const je=new Map;je.set(be.ComponentType.PAGE,new Map),je.set(be.ComponentType.PARTIAL,new Map),je.set(be.ComponentType.PREFAB,new Map),je.set(be.ComponentType.WIDGET,new Map);const Ve=e=>decodeURIComponent(e.replace(/\+/g," ")),Ge=new Map;class We{init(){}}const Ue=(e,i,a,s,o,r)=>{const l={template:a,styles:[s],encapsulation:t.ViewEncapsulation.None};let c=We,d="",p="";switch(i){case be.ComponentType.PAGE:c=be.BasePageComponent,d=`app-page-${e}`,p="Page";break;case be.ComponentType.PARTIAL:c=be.BasePartialComponent,d=`app-partial-${e}`,p="Partial";break;case be.ComponentType.PREFAB:c=be.BasePrefabComponent,d=`app-prefab-${e}`,p="Prefab";break;case be.ComponentType.WIDGET:c=be.BaseCustomWidgetComponent,d=`app-custom-${e}`,p="Widget"}let u=class extends c{constructor(t){switch(super(),this.injector=t,this.isDynamicComponent=!0,this.injector=t,i){case be.ComponentType.PAGE:this.pageName=e;break;case be.ComponentType.PARTIAL:this.partialName=e;break;case be.ComponentType.PREFAB:this.prefabName=e;break;case be.ComponentType.WIDGET:this.customWidgetName=e}super.init()}evalUserScript(e,t,i){((e,t,i,n,a,s)=>{let o=Ge.get(t);("Partial"!==i||_.isUndefined(n.Prefab))&&o||(o=new Function(i,"App","Utils",e),Ge.set(t,o)),o(n,a,s)})(o,d,p,e,t,i)}getVariables(){return JSON.parse(r)}getExpressions(){return{}}};u=n.__decorate([n.__param(0,t.Inject(t.Injector)),n.__metadata("design:paramtypes",[t.Injector])],u);return t.Component({...l,selector:d,providers:[{provide:P.UserDefinedExecutionContext,useExisting:u}]})(u)};class qe extends be.ComponentRefProvider{loadResourcesOfFragment(e,t,i){const n=((e,t,i)=>t===be.ComponentType.PAGE||t===be.ComponentType.PARTIAL?i&&i.prefab?be.getPrefabPartialJsonUrl(i.prefab,e):`./pages/${e}/page.min.json`:t===be.ComponentType.PREFAB?be.getPrefabMinJsonUrl(e):t===be.ComponentType.WIDGET?`./custom-widgets/${e}/page.min.json`:void 0)(e,t,i),a=Be.get(n);return a?Promise.resolve(a):this.resouceMngr.get(n,!0).then((({markup:i,script:a,styles:s,variables:o})=>{const r={markup:Pe.transpile(Ve(i)).markup,script:Ve(a),styles:Pe.scopeComponentStyles(e,t,Ve(s)),variables:P.getValidJSON(Ve(o))};return Be.set(n,r),r}),(e=>{const t=e.details.status,i={404:this.app.appLocale.MESSAGE_PAGE_NOT_FOUND||"The page you are trying to reach is not available",403:this.app.appLocale.LABEL_ACCESS_DENIED||"Access Denied"};return Promise.reject(i[t])}))}constructor(e,t,i,n){super(),this.resouceMngr=e,this.app=t,this.appManager=i,this.compiler=n}async getComponentFactoryRef(e,i,n){const a=je.get(i);let s;if(a){const t=n&&n.prefab?n.prefab+e:e;if(s=a.get(t),s)return s}return this.loadResourcesOfFragment(e,i,n).then((({markup:a,script:o,styles:r,variables:l})=>{const c=Ue(e,i,a,r,o,JSON.stringify(l)),d=(p=c,t.NgModule({declarations:[p],imports:[be.RuntimeBaseModule],schemas:[t.CUSTOM_ELEMENTS_SCHEMA,t.NO_ERRORS_SCHEMA]})(class{}));var p;s=this.compiler.compileModuleAndAllComponentsSync(d).componentFactories.filter((e=>e.componentType===c))[0];const u=n&&n.prefab?n.prefab+e:e;return je.get(i).set(u,s),s}),(e=>{if(e){const t="Error while loading page";console.log(t,e),this.appManager.notifyApp(_.isString(e)?e:t+", check browser console for error details","error")}}))}clearComponentFactoryRefCache(){this.resouceMngr.clearCache(),Be.clear(),je.forEach((e=>{e.clear()}))}static{this.\u0275fac=function(e){return new(e||qe)(_e.\u0275\u0275inject(Le),_e.\u0275\u0275inject(Oe.App),_e.\u0275\u0275inject(xe.AppManagerService),_e.\u0275\u0275inject(_e.Compiler))}}static{this.\u0275prov=_e.\u0275\u0275defineInjectable({token:qe,factory:qe.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&_e.\u0275setClassMetadata(qe,[{type:t.Injectable}],(function(){return[{type:Le},{type:Oe.App},{type:xe.AppManagerService},{type:_e.Compiler}]}),null);const ze=new Map;class He extends be.PrefabConfigProvider{constructor(e){super(),this.resourceMngr=e}getConfig(e){const t=ze.get(e);return t?Promise.resolve(t):this.resourceMngr.get(be.getPrefabConfigUrl(e)).then((t=>(ze.set(e,t),t)))}static{this.\u0275fac=function(e){return new(e||He)(_e.\u0275\u0275inject(Le))}}static{this.\u0275prov=_e.\u0275\u0275defineInjectable({token:He,factory:He.\u0275fac})}}("undefined"==typeof ngDevMode||ngDevMode)&&_e.\u0275setClassMetadata(He,[{type:t.Injectable}],(function(){return[{type:Le}]}),null);const Qe=o.RouterModule.forRoot(Me,{useHash:!0,scrollPositionRestoration:"top"}),Ye=y.ToastNoAnimationModule.forRoot({maxOpened:1,autoDismiss:!0});let Ke=P.getWmProjectProperties().xsrf_header_name,Je={cookieName:"wm_xsrf_token"};Ke&&(Je.headerName=Ke);const Ze=r.HttpClientXsrfModule.withOptions(Je),Xe=h.ModalModule.forRoot(),et=g.BsDatepickerModule.forRoot(),tt=d.TimepickerModule.forRoot(),it=f.BsDropdownModule.forRoot(),nt=u.PaginationModule.forRoot(),at=c.TypeaheadModule.forRoot(),st=p.ProgressbarModule.forRoot(),ot=w.CarouselModule.forRoot(),rt=v.PopoverModule.forRoot(),lt=b.NgCircleProgressModule.forRoot({}),ct=m.TooltipModule.forRoot(),dt=[g.BsDatepickerModule,d.TimepickerModule,f.BsDropdownModule,u.PaginationModule,c.TypeaheadModule,p.ProgressbarModule,w.CarouselModule,v.PopoverModule,b.NgCircleProgressModule,m.TooltipModule,C.BasicModule,A.ProgressModule,I.RichTextEditorModule,E.SearchModule,O.TreeModule,R.CalendarModule,D.ChipsModule,S.ColorPickerModule,T.CurrencyModule,M.EpochModule,N.FileUploadModule,x.InputModule,k.RatingModule,L.SliderModule,B.CardModule,j.FormModule,V.ListModule,G.LiveTableModule,W.PaginationModule,U.TableModule,q.ChartModule,z.AccordionModule,H.LinearLayoutModule,Q.LayoutGridModule,Y.PanelModule,K.TabsModule,J.TileModule,Z.WizardModule,X.AlertDialogModule,ee.IframeDialogModule,te.LoginDialogModule,ie.PartialDialogModule,ne.BreadcrumbModule,ae.MenuModule,se.NavbarModule,oe.PopoverModule,re.CarouselModule,le.LoginModule,ce.MarqueeModule,de.CustomModule,pe.PageModule,ue.FooterModule,he.HeaderModule,me.LeftPanelModule,ge.RightPanelModule,fe.TopNavModule,ve.PrefabModule];be.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS.push(...dt),be.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS.push(...F.MOBILE_COMPONENT_MODULES_FOR_ROOT),be.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS.push(l.FormsModule,l.ReactiveFormsModule),e.AppModule=class{constructor(e,t,i){this.app=e,this.inj=t,this.componentRefProvider=i,window.cordova&&this.app.subscribe("userLoggedOut",this.componentRefProvider.clearComponentFactoryRefCache.bind(this.componentRefProvider))}},e.AppModule=n.__decorate([t.NgModule({declarations:[Se],imports:[a.BrowserModule,Ce.BrowserAnimationsModule,s.CommonModule,o.RouterModule,r.HttpClientModule,Xe,et,tt,it,nt,at,ct,st,ot,rt,lt,Qe,Ye,Ze,F.MobileRuntimeDynamicModule,be.WM_MODULES_FOR_ROOT],providers:[Le,{provide:be.AppJSProvider,useClass:Ne},{provide:be.AppVariablesProvider,useClass:Fe},{provide:be.AppExtensionProvider,useClass:$e},{provide:be.ComponentRefProvider,useClass:qe},{provide:P.PartialRefProvider,useClass:qe},{provide:P.CustomWidgetRefProvider,useClass:qe},{provide:be.PrefabConfigProvider,useClass:He},{provide:o.RouteReuseStrategy,useClass:be.WmRouteReuseStrategy}],bootstrap:[be.AppComponent]}),n.__metadata("design:paramtypes",[P.App,t.Injector,be.ComponentRefProvider])],e.AppModule);const pt="debugMode";"true"!==sessionStorage.getItem(pt)&&t.enableProdMode(),console.time("bootstrap"),document.addEventListener("DOMContentLoaded",(()=>{new Promise((e=>{window.cordova?document.addEventListener("deviceready",e):e()})).then((()=>i.platformBrowserDynamic().bootstrapModule(e.AppModule))).then((e=>{const i=e.injector.get(t.ApplicationRef);window.addEventListener("unload",(()=>{i.components.map((e=>e&&e.destroy()))})),console.timeEnd("bootstrap")}),(e=>console.log(e)))})),window.debugMode=function(e){_.isEmpty(e)&&(e=!0);const t=e?"true":"false";sessionStorage.getItem(pt)!==t&&(sessionStorage.setItem(pt,t),window.location.reload())},e.AppExtensionProviderService=$e,e.AppJSProviderService=Ne,e.AppResourceManagerService=Le,e.AppVariablesProviderService=Fe,e.ComponentRefProviderService=qe,e.PageWrapperComponent=Se,e.PrefabConfigProviderService=He,e.bsDatePickerModule=et,e.bsDropdownModule=it,e.carouselModule=ot,e.httpClientXsrfModule=Ze,e.modalModule=Xe,e.ngCircleProgressModule=lt,e.paginationModule=nt,e.popoverModule=rt,e.progressbarModule=st,e.routerModule=Qe,e.timepickerModule=tt,e.toastrModule=Ye,e.tooltipModule=ct,e.typeaheadModule=at}));
